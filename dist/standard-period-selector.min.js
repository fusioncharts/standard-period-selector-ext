(function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p='',b(0)})([function(a,b,c){'use strict';const d=c(1);(function(e,f){'object'==typeof a&&a.exports?a.exports=e.document?f(e):function(g){if(!g.document)throw new Error('Window with document not present');return f(g,!0)}:e.StandardPeriodSelector=f(e,!0)})('undefined'==typeof window?this:window,function(e){var f=e.FusionCharts;f.register('extension',['private','standard-period-selector',function(){f.registerComponent('extensions','standard-period-selector',d({FusionCharts:f}))}])})},function(a){'use strict';a.exports=function(){return class{constructor(){var c=this;c.ratio=8,c.toolbox=FusionCharts.getComponent('api','toolbox'),c.HorizontalToolbar=c.toolbox.HorizontalToolbar,c.ComponentGroup=c.toolbox.ComponentGroup,c.SymbolStore=c.toolbox.SymbolStore,c.all=1,c.calculatedPeriods=[],c.startDataset=0,c.startActiveWindow=0,c.endActiveWindow=1,c.standardCalculatedPeriods=[],c.standardContexualPeriods=[],c.startPointUnit=0,c.startPointMultiplier=0,c.noCalcButtons=0,c.minimumBucket=1,c.buttonGroup={},c.toolbar={},c.categoryClicked,c.btns={contextualObj:{},calculatedObj:{}},c.tdButtons=[{name:'YTD',abbreviation:'YTD',parent:'year',milliseconds:31104000000,description:'Year to Date'},{name:'QTD',abbreviation:'QTD',parent:'month',multiplier:3,milliseconds:7776000000,description:'Quarter to Date'},{name:'MTD',abbreviation:'MTD',parent:'month',milliseconds:2592000000,description:'Month to Date'},{name:'WTD',abbreviation:'WTD',parent:'day',multiplier:7,milliseconds:604800000,description:'Week to Date'},{name:'Y',abbreviation:'Y',parent:'day',milliseconds:86400000,description:'Yesterday'},{name:'T',abbreviation:'T',parent:'day',milliseconds:86400000,description:'Today'}],c.config={anchorPositions:'right',all:'1',contextual:'1',calculated:'1',tertiaryTimePeriods:{}},c._babTimer=0,c.propsChangeListener=(d,e)=>{c.startActiveWindow=d[1],c.endActiveWindow=e[1],c._babTimer?!c.updatePending&&(c.updatePending=!0,setTimeout(function(){c.updatePending=!1,c.onActiveRangeChange()},c._babTimer)):(c._babTimer=200,c.onActiveRangeChange())}}hideAllCalcBtns(){var e,c=this,d=c.btns.calculatedObj;for(e in d)d[e].btn.hide()}showApplicableCalculatedButtons(){var d,h,o,p,c=this,e=0,f=0,g=c.endActiveWindow-c.startActiveWindow,k=c.anchorPositions,l=c.btns.calculatedObj,m=c.timePeriods,n=0,q=[],r=c.minimumBucket;for('right'===k?d=c.endActiveWindow-c.startDataset:'left'===k&&(d=c.endDataset-c.startActiveWindow),c.hideAllCalcBtns(),e=0;e<m.length;e++)if(n=m[e].interval,o=m[e].name,p=m[e].abbreviation.single,1<=d/n)if(1>Math.floor(g/n))q.push({name:o,abbreviation:p,multipliers:[1]});else for(q.push({name:o,abbreviation:p,multipliers:[]}),f=0;f<m[e].multipliers.length;f++)g/c.ratio<m[e].multipliers[f]*n&&m[e].multipliers[f]*n>r&&q[q.length-1].multipliers.push(m[e].multipliers[f]);for(e=0;e<q.length;e++)for(f=0;f<q[e].multipliers.length;f++)h=q[e].multipliers[f]+q[e].name,l[h].btn&&l[h].btn.show();c.standardCalculatedPeriods=q,c.toolbar&&c.toolbar.redraw()}heighlightActiveRange(){var e,g,h,k,l,m,c=this,d=c.saveSelectLine,f=c.clickedId,n=c.btns.contextualObj,o=c.btns.calculatedObj;d||(d=c.saveSelectLine||(c.saveSelectLine=c.graphics.paper.path({stroke:'#c95a5a','stroke-width':'2px'}).toFront())),m=n[f]||o[f]||c.btns[f],m?(e=m.btn.svgElems.node,g=e.getBBox(),h=g.x,k=h+g.width,l=g.y+g.height,d.show().attr({path:['M',h-0.5,l-0.5,'L',k+0.5,l-0.5]})):d.hide()}onActiveRangeChange(){var d,e,p,c=this,f=c.categoryClicked,g=c.clickedId,h=c.startDataset,k=c.endDataset,l=c.startActiveWindow,m=c.endActiveWindow,n=c.btns.contextualObj,o=c.btns.calculatedObj;if('ALL'===f)h===l&&k===m||(delete c.clickedId,delete c.categoryClicked);else if('contextual'===f)p=n[g],p&&(l!==p.contextStart||m!==p.contextEnd)&&(delete c.clickedId,delete c.categoryClicked);else if('calculated'===f)p=o[g],p&&m-l!==p.interval&&(delete c.clickedId,delete c.categoryClicked);else if(h===l&&k===m)c.clickedId='ALL',c.categoryClicked='ALL';else{for(d in n)p=n[d],l===p.contextStart&&m===p.contextEnd&&(c.clickedId=d,c.categoryClicked='contextual',e=!0);if(!e)for(d in o)p=o[d],m-l===p.interval&&(c.clickedId=d,c.categoryClicked='calculated')}c.showApplicableCalculatedButtons(),c.heighlightActiveRange()}processMultipliers(c){var d=this;for(let e=0;e<c.length;e++){let f=c[e].possibleFactors.length,g=c[e]&&c[e].name,h=c&&c[e],k=d&&d.customMultipliers||{};h.multipliers=[],k[g]?h.multipliers=k[g]:1===f?h.multipliers.push(h.possibleFactors[0]):2===f?(h.multipliers.push(h.possibleFactors[0]),h.multipliers.push(h.possibleFactors[f-1])):(h.multipliers.push(h.possibleFactors[0]),h.multipliers.push(Math.floor(h.possibleFactors[f-1]/2)),h.multipliers.push(h.possibleFactors[f-1]))}return c}createCalculatedButtons(c){var e,g,d=this,f=d.btns.calculatedObj,h=d.anchorPositions,k=this.minimumBucket,l=d.globalReactiveModel.model;for(let m=d.timePeriods.length-1;0<=m;m--)for(let n=d.timePeriods[m].multipliers.length-1;0<=n;n--){let o=d.timePeriods[m].multipliers[n]+d.timePeriods[m].abbreviation.single,p=d.timePeriods[m].multipliers[n]+d.timePeriods[m].name,q=d.timePeriods[m].multipliers[n]*d.timePeriods[m].interval;q>k&&(g=f[p]={interval:q,fn:function(){d.clickedId=p,d.categoryClicked='calculated',d.heighlightActiveRange(),'right'===h?l['x-axis-absolute-range-start']>d.endActiveWindow-q?d.globalReactiveModel.lock().prop('x-axis-visible-range-end',l['x-axis-visible-range-start']+q).prop('x-axis-visible-range-start',d.startDataset).unlock():l['x-axis-visible-range-start']=d.endActiveWindow-q:l['x-axis-absolute-range-end']<d.startActiveWindow+q?d.globalReactiveModel.lock().prop('x-axis-visible-range-end',d.endDataset).prop('x-axis-visible-range-start',l['x-axis-absolute-range-end']-q).unlock():l['x-axis-visible-range-end']=d.startActiveWindow+q},shortKey:o},e=new this.toolbox.Symbol(o,!0,{paper:this.graphics.paper,chart:this.chart,smartLabel:this.smartLabel,chartContainer:this.graphics.container},d.extData.style['calculated-config']).attachEventHandlers({click:g.fn,tooltext:d.timePeriods[m].multipliers[n]+' '+d.timePeriods[m].description}),g.btn=e,c.addSymbol(e))}}generateCtxBtnList(){for(var c=[],d=0,e=this.globalReactiveModel.model['x-axis-absolute-range-end'],f=e-2,g=e,h={};d<this.tdButtons.length;d++)if(f=new Date(e),'YTD'===this.tdButtons[d].name?(f.setMonth(0),f.setDate(1),f.setHours(0),f.setMinutes(0),f.setSeconds(0)):'MTD'===this.tdButtons[d].name?(f.setDate(1),f.setHours(0),f.setMinutes(0),f.setSeconds(0)):'QTD'===this.tdButtons[d].name?(f.setMonth(11-f.getMonth()%4),f.setDate(0),f.setHours(0),f.setMinutes(0),f.setSeconds(0)):'WTD'===this.tdButtons[d].name?(f.setDate(f.getDate()-f.getDay()),f.setHours(0),f.setMinutes(0),f.setSeconds(0)):'Y'===this.tdButtons[d].name?(f.setHours(0),f.setMinutes(0),f.setSeconds(0),f-=8.64e7):'T'===this.tdButtons[d].name&&(f.setHours(0),f.setMinutes(0),f.setSeconds(0),+this.endDataset==+f&&(f=+f-8.64e7)),g<f&&g-f<this.minimumBucket)continue;else this.tdButtons[d].dateStart=f.valueOf(),this.tdButtons[d].dateEnd=g.valueOf(),c.push(this.tdButtons[d]);for(h.milliseconds=1/0,d=0;d<this.tdButtons.length;d++)Math.abs(this.tdButtons[d].milliseconds-(this.endActiveWindow-this.startActiveWindow))<h.milliseconds&&(h.milliseconds=this.tdButtons[d].milliseconds,h.name=this.tdButtons[d].abbreviation);this.standardContexualPeriods=c}createContextualButtons(c){var e,g,h,d=this,f=d.btns.contextualObj;d.generateCtxBtnList();for(let k=0;k<this.standardContexualPeriods.length;k++)e=0===k?d.extData.style['contextual-config-first']||{fill:'#ffffff',labelFill:'#696969',symbolStrokeWidth:'2',stroke:'#ced5d4',strokeWidth:'1',height:22,hoverFill:'#ced5d4',radius:1,margin:{right:0,left:5},btnTextStyle:{fontFamily:'"Lucida Grande", sans-serif',fontSize:'13',fill:'#696969','line-height':'1','letter-spacing':'-0.04em'}}:d.extData.style['contextual-config']||{fill:'#ffffff',labelFill:'#696969',symbolStrokeWidth:'2',stroke:'#ced5d4',strokeWidth:'1',height:22,hoverFill:'#ced5d4',radius:1,margin:{right:0,left:0},btnTextStyle:{fontFamily:'"Lucida Grande", sans-serif',fontSize:'13',fill:'#696969','line-height':'1','letter-spacing':'-0.04em'}},h=this.standardContexualPeriods[k].abbreviation,g=f[h]={contextStart:d.standardContexualPeriods[k].dateStart,contextEnd:d.standardContexualPeriods[k].dateEnd,fn:function(){d.categoryClicked='contextual',d.clickedId=d.standardContexualPeriods[k].abbreviation,d.heighlightActiveRange(),d.globalReactiveModel.lock().prop('x-axis-visible-range-end',d.standardContexualPeriods[k].dateEnd).prop('x-axis-visible-range-start',d.standardContexualPeriods[k].dateStart).unlock()}},g.btn=new this.toolbox.Symbol(this.standardContexualPeriods[k].abbreviation,!0,{paper:this.graphics.paper,chart:this.chart,smartLabel:this.smartLabel,chartContainer:this.graphics.container},e).attachEventHandlers({click:g.fn,tooltext:this.standardContexualPeriods[k].description}),d.standardContexualPeriods[k].dateEnd-d.standardContexualPeriods[k].dateStart>=d.minimumBucket&&c.addSymbol(g.btn)}createToolbar(){var d,e,f,g,h,c=this;return e=new this.HorizontalToolbar({paper:this.graphics.paper,chart:this.chart,smartLabel:this.smartLabel,chartContainer:this.graphics.container}),e.setConfig({fill:'#fff',borderThickness:0}),h=new this.toolbox.ComponentGroup({paper:this.graphics.paper,chart:this.chart,smartLabel:this.smartLabel,chartContainer:this.graphics.container}),d=new this.toolbox.ComponentGroup({paper:this.graphics.paper,chart:this.chart,smartLabel:this.smartLabel,chartContainer:this.graphics.container}),d.setConfig({fill:'#fff',borderThickness:0}),h.setConfig({fill:'#fff',borderThickness:0}),g=new this.toolbox.Label('Zoom:',{smartLabel:this.smartLabel,paper:this.graphics.paper},c.extData.style['label-config']),h.addSymbol(g),f={fn:function(){c.clickedId='ALL',c.categoryClicked='ALL',c.heighlightActiveRange(),c.globalReactiveModel.lock().prop('x-axis-visible-range-end',c.endDataset).prop('x-axis-visible-range-start',c.startDataset).unlock()}},f.btn=new this.toolbox.Symbol('ALL',!0,{paper:this.graphics.paper,chart:this.chart,smartLabel:this.smartLabel,chartContainer:this.graphics.container},c.extData.style['all-config']).attachEventHandlers({click:f.fn,tooltext:'ALL'}),c.btns.ALL=f,d.addSymbol(f.btn),e.addComponent(h),e.addComponent(d),this.toolbar=e,this.buttonGroup=d,e}init(c){var g,h,k,d=this,e=d.btns.calculatedObj,f=d.btns.contextualObj;if(c(['graphics','chart','canvasConfig','MarkerManager','reactiveModel','globalReactiveModel','spaceManagerInstance','smartLabel','extData','chartInstance',function(l,m,n,o,p,q,r,s,t,u){d.graphics=l,d.chart=m,d.markerManager=o,d.canvasConfig=n,d.reactiveModel=p,d.globalReactiveModel=q,d.spaceManagerInstance=r,d.smartLabel=s,d.extDataUser=t,d.chartInstance=u}]),d.endActiveWindow=d.globalReactiveModel.model['x-axis-visible-range-end'],d.startActiveWindow=d.globalReactiveModel.model['x-axis-visible-range-start'],d.startDataset=d.globalReactiveModel.model['x-axis-absolute-range-start'],d.endDataset=d.globalReactiveModel.model['x-axis-absolute-range-end'],d.timeRules=d.chartInstance.apiInstance.getComponentStore(),d.timeRules=d.timeRules.getCanvasByIndex(0).composition.impl,d.timeRules=d.timeRules.getDataAggregator(),d.timeRules=d.timeRules.getAggregationTimeRules(),d.timePeriods=d.processMultipliers(d.timeRules),d.extData={disabled:'false','default-select':'ALL','anchor-align':'left',posWrtCanvas:'top',layout:'inline',alignment:'left',orientation:'horizontal',customMultipliers:{millisecond:[1,500],second:[1,5,15,30],minute:[1,5,15,30],hour:[1,3,6,12],day:[1,7,15],month:[1,3,6],year:[1,3,5]},style:{'label-config':{text:{style:{'font-family':'"Lucida Grande", sans-serif','font-size':'13',fill:'#4b4b4b'}},container:{height:22}},'all-config':{fill:'#ffffff',labelFill:'#4b4b4b',symbolStrokeWidth:'2',stroke:'#ced5d4',strokeWidth:'1',hoverFill:'#f7f7f7',height:22,radius:1,margin:{right:5},btnTextStyle:{fontFamily:'"Lucida Grande", sans-serif',fontSize:'13',fill:'#4b4b4b','line-height':'1','letter-spacing':'-0.04em'}},'calculated-config':{fill:'#ffffff',labelFill:'#4b4b4b',symbolStrokeWidth:'2',stroke:'#ced5d4',strokeWidth:'1',hoverFill:'#f7f7f7',height:22,radius:1,margin:{right:0},btnTextStyle:{fontFamily:'"Lucida Grande", sans-serif',fontSize:'13',fill:'#4b4b4b','line-height':'1','letter-spacing':'-0.04em'}},'contextual-config-first':{fill:'#ffffff',labelFill:'#4b4b4b',symbolStrokeWidth:'2',stroke:'#ced5d4',strokeWidth:'1',height:22,hoverFill:'#f7f7f7',radius:1,margin:{right:0,left:5},btnTextStyle:{fontFamily:'"Lucida Grande", sans-serif',fontSize:'13',fill:'#696969','line-height':'1','letter-spacing':'-0.04em'}},'contextual-config':{fill:'#ffffff',labelFill:'#4b4b4b',symbolStrokeWidth:'2',stroke:'#ced5d4',strokeWidth:'1',height:22,hoverFill:'#f7f7f7',radius:1,margin:{right:0,left:0},btnTextStyle:{fontFamily:'"Lucida Grande", sans-serif',fontSize:'13',fill:'#4b4b4b','line-height':'1','letter-spacing':'-0.04em'}}}},Object.assign(d.extData,d.extDataUser),d.anchorPositions=d.extData['anchor-align'],d.customMultipliers=d.extData.customMultipliers||{millisecond:[1,500],second:[1,5,15,30],minute:[1,5,15,30],hour:[1,3,6,12],day:[1,7,15],month:[1,3,6],year:[1,3]},g=d.extData['default-select'],g)if('ALL'===g)d.clickedId='ALL';else if(f[g])d.clickedId=g;else for(h in k=!0,e)k&&e[h].shortKey===g&&(d.clickedId=e[h].shortKey,k=!1);return d.measurement={},d.flag=!0,d.toolbars=[],d.toolbars.push(d.createToolbar()),d.globalReactiveModel.onPropsChange(['x-axis-visible-range-start','x-axis-visible-range-end'],d.propsChangeListener),d.globalReactiveModel.onPropChange('x-axis-absolute-range-end',function(){'contextual'===d.categoryClicked&&(d.globalReactiveModel.model['x-axis-visible-range-end']=d.globalReactiveModel.model['x-axis-absolute-range-end'])}),d}getLogicalSpace(c=this._pWidth,d=this._pHeight){var e,g,h,f=0,k=this;for(g=0,h=k.toolbars.length;g<h;g++)e=k.toolbars[g].getLogicalSpace(c,d),f+=e.height,k.toolbars[g].width=e.width,k.toolbars[g].height=e.height;return f+=k.padding,{width:420,height:f}}getDefaultGroup(){return this.parentGroup}placeInCanvas(){var c=this;c.padding=5,c.spaceManagerInstance.add([{name:function(){return'standard-period-selector-ext'},ref:function(d){return d['0']},self:function(){return c},priority:function(){return 2},layout:function(d){return d[c.extData.layout]||'inline'},orientation:[{type:function(d){return d[c.extData.orientation]||'horizontal'},position:[{type:function(d){return d[c.extData.posWrtCanvas]||'top'},alignment:[{type:function(d){return d[c.extData.alignment]||'left'},dimensions:[function(){var d=this.getParentComponentGroup();return c._ref=this,c.getLogicalSpace(c._pWidth=d.getWidth(),c._pHeight=d.getHeight())}]}]}]}]}])}setDrawingConfiguration(c,d,e,f,g){var h=this.measurement;return h.x=c,h.y=d,h.width=e,h.height=f,this.parentGroup=g,this}draw(c,d,e,f,g){var m,n,o,s,h=this,k=h.measurement,l=h.toolbars,p=h.btns.contextualObj,q=h.btns.calculatedObj,r=h.clickedId,t=h.globalReactiveModel.model,u=h.minimumBucket,v=h.buttonGroup;if(u=t['minimum-consecutive-datestamp-diff']*t['x-axis-maximum-allowed-ticks'],h.minimumBucket=u,h.createCalculatedButtons(v),h.createContextualButtons(v),c=void 0===c?k.x:c,d=void 0===d?k.y:d,e=void 0===e?k.width:e,f=void 0===f?k.height:f,g=void 0===g?this.parentGroup:g,e&&f)for(n=0,m=l.length;n<m;n++)o=l[n],o.draw(c,d,g);r?(s=q[r]||p[r]||h.btns[r],s?s.fn&&s.fn():h.onActiveRangeChange()):h.onActiveRangeChange()}}}}]);
//# sourceMappingURL=standard-period-selector.min.js.map