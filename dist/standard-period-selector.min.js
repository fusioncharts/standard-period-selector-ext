(function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p='',b(0)})([function(a,b,c){'use strict';const d=c(1);(function(e,f){'object'==typeof a&&a.exports?a.exports=e.document?f(e):function(g){if(!g.document)throw new Error('Window with document not present');return f(g,!0)}:e.StandardPeriodSelector=f(e,!0)})('undefined'==typeof window?this:window,function(e){var f=e.FusionCharts;f.register('extension',['private','standard-period-selector',function(){f.registerComponent('extensions','standard-period-selector',d({FusionCharts:f}))}])})},function(a){'use strict';a.exports=function(){return class{constructor(){var c=this;c.ratio=8,c.toolbox=FusionCharts.getComponent('api','toolbox'),c.HorizontalToolbar=c.toolbox.HorizontalToolbar,c.ComponentGroup=c.toolbox.ComponentGroup,c.SymbolStore=c.toolbox.SymbolStore,c.all=1,c.calculatedPeriods=[],c.startDataset=0,c.startActiveWindow=0,c.endActiveWindow=1,c.standardCalculatedPeriods=[],c.standardContexualPeriods=[],c.startPointUnit=0,c.startPointMultiplier=0,c.noCalcButtons=0,c.minimumBucket=1,c.buttonGroup={},c.toolbar={},c.categoryClicked,c.btns={contextualObj:{},calculatedObj:{}},c.tdButtons=[{name:'YTD',abbreviation:'YTD',parent:'year',milliseconds:31104000000,description:'Year to Date'},{name:'QTD',abbreviation:'QTD',parent:'month',multiplier:3,milliseconds:7776000000,description:'Quarter to Date'},{name:'MTD',abbreviation:'MTD',parent:'month',milliseconds:2592000000,description:'Month to Date'},{name:'WTD',abbreviation:'WTD',parent:'day',multiplier:7,milliseconds:604800000,description:'Week to Date'},{name:'Y',abbreviation:'Y',parent:'day',milliseconds:86400000,description:'Yesterday'},{name:'T',abbreviation:'T',parent:'day',milliseconds:86400000,description:'Today'}],c.config={anchorPositions:'right',all:'1',contextual:'1',calculated:'1',tertiaryTimePeriods:{}},c._babTimer=0,c.propsChangeListener=(d,e)=>{c.startActiveWindow=d[1],c.endActiveWindow=e[1],c._babTimer?!c.updatePending&&(c.updatePending=!0,setTimeout(function(){c.updatePending=!1,c.onActiveRangeChange()},c._babTimer)):(c._babTimer=200,c.onActiveRangeChange())}}hideAllCalcBtns(){var e,c=this,d=c.btns.calculatedObj;for(e in d)d[e].btn.hide()}showApplicableCalculatedButtons(){var d,l,q,r,c=this,e=0,f=0,g=0,h=0,k=c.endActiveWindow-c.startActiveWindow,m=c.anchorPositions,n=c.btns.calculatedObj,o=c.timePeriods,p=0,s=[],t=c.minimumBucket,u=c.maximumBucket;for('right'===m?d=c.endActiveWindow-c.startDataset:'left'===m&&(d=c.endDataset-c.startActiveWindow),c.hideAllCalcBtns(),(e=0,f=o.length);e<f;e++)if(p=o[e].interval,q=o[e].name,r=o[e].abbreviation.single,1<=d/p)if(1>Math.floor(k/p))s.push({name:q,abbreviation:r,multipliers:[1]});else for(s.push({name:q,abbreviation:r,multipliers:[]}),g=0,h=o[e].multipliers.length;g<h;g++)k/c.ratio<o[e].multipliers[g]*p&&o[e].multipliers[g]*p>t&&o[e].multipliers[g]*p<u&&s[s.length-1].multipliers.push(o[e].multipliers[g]);for(e=0,f=s.length;e<f;e++)for(g=0,h=s[e].multipliers.length;g<h;g++)l=s[e].multipliers[g]+s[e].name,n[l]&&n[l].btn&&n[l].btn.show();c.standardCalculatedPeriods=s,c.toolbar&&c.toolbar.redraw()}highlightActiveRange(){var e,g,h,k,l,m,c=this,d=c.saveSelectLine,f=c.clickedId,n=c.btns.contextualObj,o=c.btns.calculatedObj;d||(d=c.saveSelectLine||(c.saveSelectLine=c.graphics.paper.path({stroke:'#c95a5a','stroke-width':'2px'}).toFront())),m=n[f]||o[f]||c.btns[f],m?(e=m.btn.svgElems.node,g=e.getBBox(),h=g.x,k=h+g.width,l=g.y+g.height,d.show().attr({path:['M',h+1,l-1.2,'L',k,l-1.2]})):d.hide()}onActiveRangeChange(){var d,e,p,c=this,f=c.categoryClicked,g=c.clickedId,h=c.startDataset,k=c.endDataset,l=c.startActiveWindow,m=c.endActiveWindow,n=c.btns.contextualObj,o=c.btns.calculatedObj;if('ALL'===f)h===l&&k===m||(delete c.clickedId,delete c.categoryClicked);else if('contextual'===f)p=n[g],p&&(l!==p.contextStart||m!==p.contextEnd)&&(delete c.clickedId,delete c.categoryClicked);else if('calculated'===f)p=o[g],p&&m-l!==p.interval&&(delete c.clickedId,delete c.categoryClicked);else if(h===l&&k===m)c.clickedId='ALL',c.categoryClicked='ALL';else{for(d in n)p=n[d],l===p.contextStart&&m===p.contextEnd&&(c.clickedId=d,c.categoryClicked='contextual',e=!0);if(!e)for(d in o)p=o[d],m-l===p.interval&&(c.clickedId=d,c.categoryClicked='calculated')}c.toolbarDrawn&&(c.showApplicableCalculatedButtons(),c.highlightActiveRange())}processMultipliers(c,d){for(let e=0,f=c.length;e<f;e++){let g=c[e].possibleFactors.length,h=c[e]&&c[e].name,k=c&&c[e];k.multipliers=[],d===void 0&&(d={}),d[h]?k.multipliers=d[h]:1===g?k.multipliers.push(k.possibleFactors[0]):2===g?(k.multipliers.push(k.possibleFactors[0]),k.multipliers.push(k.possibleFactors[g-1])):(k.multipliers.push(k.possibleFactors[0]),k.multipliers.push(Math.floor(k.possibleFactors[g-1]/2)),k.multipliers.push(k.possibleFactors[g-1]))}return c}createCalculatedButtons(c){var e,g,d=this,f=d.btns.calculatedObj,h=d.anchorPositions,k=d.minimumBucket,l=d.maximumBucket,m=d.globalReactiveModel.model;for(let n=d.timePeriods.length-1;0<=n;n--)for(let o=d.timePeriods[n].multipliers.length-1;0<=o;o--){let p=d.timePeriods[n].multipliers[o]+d.timePeriods[n].abbreviation.single,q=d.timePeriods[n].multipliers[o]+d.timePeriods[n].name,r=d.timePeriods[n].multipliers[o]*d.timePeriods[n].interval;r>k&&r<l&&(g=f[q]={interval:r,fn:function(){d.clickedId=q,d.categoryClicked='calculated',d.highlightActiveRange(),'right'===h?m['x-axis-absolute-range-start']>d.endActiveWindow-r?d.globalReactiveModel.lock().prop('x-axis-visible-range-end',m['x-axis-absolute-range-start']+r).prop('x-axis-visible-range-start',d.startDataset).unlock():m['x-axis-visible-range-start']=d.endActiveWindow-r:m['x-axis-absolute-range-end']<d.startActiveWindow+r?d.globalReactiveModel.lock().prop('x-axis-visible-range-end',d.endDataset).prop('x-axis-visible-range-start',m['x-axis-absolute-range-end']-r).unlock():m['x-axis-visible-range-end']=d.startActiveWindow+r},shortKey:p},e=new d.toolbox.Symbol(p,!0,{paper:d.graphics.paper,chart:d.chart,smartLabel:d.smartLabel,chartContainer:d.graphics.container},d.extData.style['calculated-config']).attachEventHandlers({click:g.fn,tooltext:d.timePeriods[n].multipliers[o]+' '+d.timePeriods[n].description}),g.btn=e,c.addSymbol(e))}}generateCtxBtnList(){var c=this,d=c.standardContexualPeriods,e=0,f=0,g=c.globalReactiveModel.model['x-axis-absolute-range-end'],h=g-2,k=g,l={},m=c.tdButtons,n=c.minimumBucket||1,o=c.startActiveWindow,p=c.endActiveWindow;for(f=m.length;e<f;e++)if(h=new Date(g),'YTD'===m[e].name?(h.setMonth(0),h.setDate(1),h.setHours(0),h.setMinutes(0),h.setSeconds(0)):'MTD'===m[e].name?(h.setDate(1),h.setHours(0),h.setMinutes(0),h.setSeconds(0)):'QTD'===m[e].name?(h.setMonth(11-h.getMonth()%4),h.setDate(0),h.setHours(0),h.setMinutes(0),h.setSeconds(0)):'WTD'===m[e].name?(h.setDate(h.getDate()-h.getDay()),h.setHours(0),h.setMinutes(0),h.setSeconds(0)):'Y'===m[e].name?(h.setHours(0),h.setMinutes(0),h.setSeconds(0),h-=8.64e7):'T'===m[e].name&&(h.setHours(0),h.setMinutes(0),h.setSeconds(0),g===+h&&(h=+h-8.64e7)),k<h&&k-h<n)continue;else m[e].dateStart=h.valueOf(),m[e].dateEnd=k.valueOf(),d.push(m[e]);for(l.milliseconds=1/0,e=0,f=m.length;e<f;e++)Math.abs(m[e].milliseconds-(p-o))<l.milliseconds&&(l.milliseconds=m[e].milliseconds,l.name=m[e].abbreviation)}createContextualButtons(c){var e,g,h,k,d=this,f=d.btns.contextualObj;k=!!d.extData['calculated-button'],d.generateCtxBtnList();for(let l=0,m=this.standardContexualPeriods.length;l<m;l++)d.standardContexualPeriods[l].dateEnd-d.standardContexualPeriods[l].dateStart>=d.minimumBucket&&d.standardContexualPeriods[l].dateStart>d.startDataset&&(e=k?d.extData.style['contextual-config-first']:d.extData.style['contextual-config'],k=!1,h=d.standardContexualPeriods[l].abbreviation,g=f[h]={contextStart:d.standardContexualPeriods[l].dateStart,contextEnd:d.standardContexualPeriods[l].dateEnd,fn:function(){d.categoryClicked='contextual',d.clickedId=d.standardContexualPeriods[l].abbreviation,d.highlightActiveRange(),d.globalReactiveModel.lock().prop('x-axis-visible-range-end',d.standardContexualPeriods[l].dateEnd).prop('x-axis-visible-range-start',d.standardContexualPeriods[l].dateStart).unlock()}},g.btn=new d.toolbox.Symbol(d.standardContexualPeriods[l].abbreviation,!0,{paper:d.graphics.paper,chart:d.chart,smartLabel:d.smartLabel,chartContainer:d.graphics.container},e).attachEventHandlers({click:g.fn,tooltext:d.standardContexualPeriods[l].description}),c.addSymbol(g.btn))}createToolbar(){var d,e,f,g,h,k,c=this;e=new c.HorizontalToolbar({paper:c.graphics.paper,chart:c.chart,smartLabel:c.smartLabel,chartContainer:c.graphics.container}),e.setConfig({fill:'#fff',borderThickness:0}),h=new c.toolbox.ComponentGroup({paper:c.graphics.paper,chart:c.chart,smartLabel:c.smartLabel,chartContainer:c.graphics.container}),d=new c.toolbox.ComponentGroup({paper:c.graphics.paper,chart:c.chart,smartLabel:c.smartLabel,chartContainer:c.graphics.container}),k=new c.toolbox.ComponentGroup({paper:c.graphics.paper,chart:c.chart,smartLabel:c.smartLabel,chartContainer:c.graphics.container}),k.setConfig({fill:'#fff',borderThickness:0}),d.setConfig({fill:'#fff',borderThickness:0}),h.setConfig({fill:'#fff',borderThickness:0}),g=new c.toolbox.Label('Zoom:',{smartLabel:c.smartLabel,paper:c.graphics.paper},c.extData.style['label-config']),h.addSymbol(g),f=c.allButtonShow&&{fn:function(){c.clickedId='ALL',c.categoryClicked='ALL',c.highlightActiveRange(),c.globalReactiveModel.lock().prop('x-axis-visible-range-end',c.endDataset).prop('x-axis-visible-range-start',c.startDataset).unlock()}},f&&(f.btn=new c.toolbox.Symbol('ALL',!0,{paper:c.graphics.paper,chart:c.chart,smartLabel:c.smartLabel,chartContainer:c.graphics.container},c.extData.style['all-config']).attachEventHandlers({click:f.fn,tooltext:'ALL'}),c.btns.ALL=f,d.addSymbol(f.btn));for(let l=0;6>l;l++)k.addSymbol(new c.toolbox.Symbol('ALL',!0,{paper:c.graphics.paper,chart:c.chart,smartLabel:c.smartLabel,chartContainer:c.graphics.container},c.extData.style['all-config']).attachEventHandlers({click:f.fn,tooltext:'___'}));return c.dummyButtonGroup=k,e.addComponent(h),e.addComponent(d),e.addComponent(k),c.toolbar=e,c.buttonGroup=d,e}init(c){var d=this;return c(['graphics','chart','canvasConfig','MarkerManager','reactiveModel','globalReactiveModel','spaceManagerInstance','smartLabel','extData','chartInstance',function(e,f,g,h,k,l,m,n,o,p){d.graphics=e,d.chart=f,d.markerManager=h,d.canvasConfig=g,d.reactiveModel=k,d.globalReactiveModel=l,d.spaceManagerInstance=m,d.smartLabel=n,d.extDataUser=o,d.chartInstance=p}]),d.extData={disabled:!1,'default-select':'ALL','all-button':!0,'contextual-button':!0,'calculated-button':!0,posWrtCanvas:'top','anchor-align':'right',layout:'inline',alignment:'left',orientation:'horizontal',customMultipliers:{millisecond:[1,500],second:[1,5,15,30],minute:[1,5,15,30],hour:[1,3,6,12],day:[1,7,15],month:[1,3,6],year:[1,3,5]},style:{'label-config':{text:{style:{'font-family':'"Lucida Grande", sans-serif','font-size':'13',fill:'#4b4b4b'}},container:{height:22}},'all-config':{fill:'#ffffff',labelFill:'#4b4b4b',symbolStrokeWidth:'2',stroke:'#ced5d4',strokeWidth:'1',hoverFill:'#f7f7f7',height:22,radius:1,margin:{right:5},btnTextStyle:{fontFamily:'"Lucida Grande", sans-serif',fontSize:'13',fill:'#4b4b4b','line-height':'1','letter-spacing':'-0.04em'},shadow:{fill:'#000',opacity:'0.35'}},'calculated-config':{fill:'#ffffff',labelFill:'#4b4b4b',symbolStrokeWidth:'2',stroke:'#ced5d4',strokeWidth:'1',hoverFill:'#f7f7f7',height:22,radius:1,margin:{right:0},btnTextStyle:{fontFamily:'"Lucida Grande", sans-serif',fontSize:'13',fill:'#4b4b4b','line-height':'1','letter-spacing':'-0.04em'},shadow:{fill:'#000',opacity:'0.35'}},'contextual-config-first':{fill:'#ffffff',labelFill:'#4b4b4b',symbolStrokeWidth:'2',stroke:'#ced5d4',strokeWidth:'1',height:22,hoverFill:'#f7f7f7',radius:1,margin:{right:0,left:5},btnTextStyle:{fontFamily:'"Lucida Grande", sans-serif',fontSize:'13',fill:'#696969','line-height':'1','letter-spacing':'-0.04em'},shadow:{fill:'#000',opacity:'0.35'}},'contextual-config':{fill:'#ffffff',labelFill:'#4b4b4b',symbolStrokeWidth:'2',stroke:'#ced5d4',strokeWidth:'1',height:22,hoverFill:'#f7f7f7',radius:1,margin:{right:0,left:0},btnTextStyle:{fontFamily:'"Lucida Grande", sans-serif',fontSize:'13',fill:'#4b4b4b','line-height':'1','letter-spacing':'-0.04em'},shadow:{fill:'#000',opacity:'0.35'}}}},Object.assign(d.extData,d.extDataUser),d.endActiveWindow=d.globalReactiveModel.model['x-axis-visible-range-end'],d.startActiveWindow=d.globalReactiveModel.model['x-axis-visible-range-start'],d.startDataset=d.globalReactiveModel.model['x-axis-absolute-range-start'],d.endDataset=d.globalReactiveModel.model['x-axis-absolute-range-end'],d.maximumBucket=d.endDataset-d.startDataset,d.timeRules=d.chartInstance.apiInstance.getComponentStore(),d.timeRules=d.timeRules.getCanvasByIndex(0).composition.impl,d.timeRules=d.timeRules.getDataAggregator(),d.timeRules=d.timeRules.getAggregationTimeRules(),d.timePeriods=d.processMultipliers(d.timeRules,d.extData.customMultipliers),d.allButtonShow=d.extData['all-button'],d.calculatedButtonShow=d.extData['calculated-button'],d.contextualButtonShow=d.extData['contextual-button'],d.anchorPositions=d.extData['anchor-align'],d.customMultipliers=d.extData.customMultipliers,d.keySelect=d.extData['default-select'],d.measurement={},d.flag=!0,d.toolbars=[],d.toolbars.push(d.createToolbar()),d.globalReactiveModel.onPropsChange(['x-axis-visible-range-start','x-axis-visible-range-end'],d.propsChangeListener),d.globalReactiveModel.onPropChange('x-axis-absolute-range-end',function(){'contextual'===d.categoryClicked&&(d.globalReactiveModel.model['x-axis-visible-range-end']=d.globalReactiveModel.model['x-axis-absolute-range-end'])}),d}getLogicalSpace(c=this._pWidth,d=this._pHeight){var e,h,k,f=0,g=0,l=this;for(h=0,k=l.toolbars.length;h<k;h++)e=l.toolbars[h].getLogicalSpace(c,d),f=Math.max(e.width,f),g+=e.height,l.toolbars[h].width=e.width,l.toolbars[h].height=e.height;return g+=l.padding,{width:f,height:g}}getDefaultGroup(){return this.parentGroup}placeInCanvas(){var c=this;c.padding=5,c.spaceManagerInstance.add([{name:function(){return'standard-period-selector-ext'},ref:function(d){return d['0']},self:function(){return c},priority:function(){return 2},layout:function(d){return d[c.extData.layout]||'inline'},orientation:[{type:function(d){return d[c.extData.orientation]||'horizontal'},position:[{type:function(d){return d[c.extData.posWrtCanvas]||'top'},alignment:[{type:function(d){return d[c.extData.alignment]||'left'},dimensions:[function(){var d=this.getParentComponentGroup();return c._ref=this,c.getLogicalSpace(c._pWidth=d.getWidth(),c._pHeight=d.getHeight())}]}]}]}]}])}setDrawingConfiguration(c,d,e,f,g){var h=this.measurement;return h.x=c,h.y=d,h.width=e,h.height=f,this.parentGroup=g,this}draw(c,d,e,f,g){var m,n,o,s,w,z,h=this,k=h.measurement,l=h.toolbars,p=h.btns.contextualObj,q=h.btns.calculatedObj,r=h.clickedId,t=h.globalReactiveModel.model,u=h.minimumBucket,v=h.buttonGroup;if(u=t['minimum-consecutive-datestamp-diff']*t['x-axis-maximum-allowed-ticks'],h.minimumBucket=u,h.dummyButtonGroup.dispose(),h.calculatedButtonShow&&h.createCalculatedButtons(v),h.contextualButtonShow&&h.createContextualButtons(v),h.keySelect){if('ALL'===h.keySelect)h.clickedId='ALL';else if(p[h.keySelect])h.clickedId=h.keySelect;else for(z in w=!0,q)w&&q[z].shortKey===h.keySelect&&(h.clickedId=z,w=!1);delete h.keySelect,r=h.clickedId}if(c=void 0===c?k.x:c,d=void 0===d?k.y:d,e=void 0===e?k.width:e,f=void 0===f?k.height:f,g=void 0===g?this.parentGroup:g,e&&f){for(n=0,m=l.length;n<m;n++)o=l[n],o.draw(c,d,g),h.toolbarDrawn=!0;r?(s=q[r]||p[r]||h.btns[r],s?s.fn&&s.fn():h.onActiveRangeChange()):h.onActiveRangeChange()}}}}}]);
//# sourceMappingURL=standard-period-selector.min.js.map