!function(t){function e(a){if(i[a])return i[a].exports;var s=i[a]={exports:{},id:a,loaded:!1};return t[a].call(s.exports,s,s.exports,e),s.loaded=!0,s.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){(function(t){"use strict";var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=i(2);window.stPS=new a,function(i,a){"object"===e(t)&&t.exports?t.exports=i.document?a(i):function(t){if(!t.document)throw new Error("Window with document not present");return a(t,!0)}:i.StandardPeriodSelector=a(i,!0)}("undefined"!=typeof window?window:void 0,function(t,e){var i=t.FusionCharts;i.register("extension",["private","StandardPeriodSelector",function(){i.registerComponent("extensions","StandardPeriodSelector",a({FusionCharts:i}))}])})}).call(e,i(1)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}(),s=function(){function t(){i(this,t),this.ratio=8,this.toolbox=FusionCharts.getComponent("api","toolbox"),this.HorizontalToolbar=this.toolbox.HorizontalToolbar,this.ComponentGroup=this.toolbox.ComponentGroup,this.SymbolStore=this.toolbox.SymbolStore,this.all=1,this.calculatedPeriods=[],this.startDataset=0,this.startActiveWindow=0,this.endActiveWindow=1,this.standardCalculatedPeriods=[],this.standardContexualPeriods=[],this.startPointUnit=0,this.startPointMultiplier=0,this.clickedId,this.noCalcButtons=0,this.timePeriods=[{name:"second",milliseconds:1e3,startingPoint:0,total:60,abbreviation:"sec",description:"SECOND",parent:"minute",multipliers:[1,5,15,30]},{name:"minute",milliseconds:6e4,startingPoint:0,total:60,abbreviation:"min",description:"MINUTE",parent:"hour",multipliers:[1,5,15,30]},{name:"hour",milliseconds:36e5,startingPoint:0,total:24,abbreviation:"hr",description:"HOUR",parent:"day",multipliers:[1,3,6,12]},{name:"day",milliseconds:864e5,startingPoint:0,total:30,abbreviation:"D",description:"DAY",parent:"month",multipliers:[1,7,15]},{name:"month",milliseconds:2592e6,startingPoint:0,total:12,abbreviation:"M",description:"MONTH",parent:"year",multipliers:[1,3,6]},{name:"year",milliseconds:31104e6,startingPoint:0,abbreviation:"Y",description:"YEAR",multipliers:[1,3,5]}],this.tdButtons=[{name:"YTD",abbreviation:"YTD",parent:"year",milliseconds:31104e6,description:"Year to Date"},{name:"QTD",abbreviation:"QTD",parent:"month",multiplier:3,milliseconds:7776e6,description:"Quarter to Date"},{name:"MTD",abbreviation:"MTD",parent:"month",milliseconds:2592e6,description:"Month to Date"},{name:"WTD",abbreviation:"WTD",parent:"day",multiplier:7,milliseconds:6048e5,description:"Week to Date"},{name:"Y",abbreviation:"Y",parent:"day",milliseconds:864e5,description:"Yesterday"},{name:"T",abbreviation:"T",parent:"day",milliseconds:864e5,description:"Today"}],this.config={anchorPositions:"right",all:"1",contextual:"1",calculated:"1",tertiaryTimePeriods:{}}}return a(t,[{key:"generateCalculatedButtons",value:function(){var t=this.endActiveWindow-this.startDataset,e=0,i=0,a=this.endActiveWindow-this.startActiveWindow,s=0;for(this.standardCalculatedPeriods=[],e=0;e<this.timePeriods.length;e++)if(t/this.timePeriods[e].milliseconds>=1)if(Math.floor(a/this.timePeriods[e].milliseconds)<1)this.standardCalculatedPeriods.push({abbreviation:this.timePeriods[e].abbreviation,description:this.timePeriods[e].description,milliseconds:this.timePeriods[e].milliseconds,multipliers:[1]});else for(this.standardCalculatedPeriods.push({abbreviation:this.timePeriods[e].abbreviation,description:this.timePeriods[e].description,milliseconds:this.timePeriods[e].milliseconds,multipliers:[]}),i=0;i<this.timePeriods[e].multipliers.length;i++)a/this.ratio<this.timePeriods[e].multipliers[i]*this.timePeriods[e].milliseconds&&this.standardCalculatedPeriods[this.standardCalculatedPeriods.length-1].multipliers.push(this.timePeriods[e].multipliers[i]);for(this.noCalcButtons=1/0,e=0;e<this.standardCalculatedPeriods.length;e++)for(i=0;i<this.standardCalculatedPeriods[e].multipliers.length;i++)++s,this.noCalcButtons>e&&(this.noCalcButtons=e),s<=4&&(this.startPointMultiplier=i,this.startPointUnit=e)}},{key:"generateContextualButtons",value:function(){for(var t=[],e=0,i=this.globalReactiveModel.model["x-axis-absolute-range-end"],a=i-2,s=i,o={};e<this.tdButtons.length;e++)a=new Date(i),"YTD"===this.tdButtons[e].name?(a.setMonth(0),a.setDate(1),a.setHours(0),a.setMinutes(0),a.setSeconds(0)):"MTD"===this.tdButtons[e].name?(a.setDate(1),a.setHours(0),a.setMinutes(0),a.setSeconds(0)):"QTD"===this.tdButtons[e].name?(a.setMonth(11-a.getMonth()%4),a.setDate(0),a.setHours(0),a.setMinutes(0),a.setSeconds(0)):"WTD"===this.tdButtons[e].name?(a.setDate(a.getDate()-a.getDay()),a.setHours(0),a.setMinutes(0),a.setSeconds(0)):"Y"===this.tdButtons[e].name?(a.setHours(0),a.setMinutes(0),a.setSeconds(0),a-=864e5):"T"===this.tdButtons[e].name&&(a.setHours(0),a.setMinutes(0),a.setSeconds(0)),s<a||(this.tdButtons[e].dateStart=a.valueOf(),this.tdButtons[e].dateEnd=s.valueOf(),t.push(this.tdButtons[e]));for(o.milliseconds=1/0,e=0;e<this.tdButtons.length;e++)Math.abs(this.tdButtons[e].milliseconds-(this.endActiveWindow-this.startActiveWindow))<o.milliseconds&&(o.milliseconds=this.tdButtons[e].milliseconds,o.name=this.tdButtons[e].abbreviation);this.standardContexualPeriods=t}},{key:"setActivePeriod",value:function(){var t,e;1===arguments.length?(e=this.globalReactiveModel.model["x-axis-visible-range-end"],t=e-arguments[0]):2===arguments.length&&(t=arguments[0],e=arguments[1]),this.startActiveWindow=t,this.endActiveWindow=e,this.generateCalculatedButtons(),this.globalReactiveModel.model["x-axis-visible-range-start"]=this.startActiveWindow,this.globalReactiveModel.model["x-axis-visible-range-end"]=this.endActiveWindow,this.generateContextualButtons()}},{key:"setTimeline",value:function(t,e){this.startDataset=t,this.endDataset=e,document.getElementById("startActiveRange").innerHTML=new Date(this.startDataset),document.getElementById("endActiveRange").innerHTML=new Date(this.endDataset),this.generateCalculatedButtons()}},{key:"configure",value:function(t){this.config=t}},{key:"init",value:function(t){var e=this;return t(["xAxis","yAxis","graphics","chart","dataset","PlotManager","canvasConfig","MarkerManager","reactiveModel","globalReactiveModel","spaceManagerInstance","smartLabel",function(t,i,a,s,o,n,r,l,d,c,h,u){e.xAxis=t,e.yAxis=i,e.graphics=a,e.chart=s,e.dataset=o,e.plotManager=n,e.markerManager=l,e.canvasConfig=r,e.reactiveModel=d,e.globalReactiveModel=c,e.spaceManagerInstance=h,e.smartLabel=u}]),this.spaceManagerInstance=e.spaceManagerInstance,this.globalReactiveModel=e.globalReactiveModel,this.endActiveWindow=e.globalReactiveModel.model["x-axis-visible-range-end"],this.startActiveWindow=e.globalReactiveModel.model["x-axis-visible-range-start"],this.startDataset=e.globalReactiveModel.model["x-axis-absolute-range-start"],this.endDataset=e.globalReactiveModel.model["x-axis-absolute-range-end"],this.setActivePeriod(this.startActiveWindow,this.endActiveWindow),this.setActivePeriod(this.startActiveWindow,this.endActiveWindow),this.toolbars=[],this.measurement={},this.toolbars.push(this.createToolbar()),this}},{key:"createToolbar",value:function(){var t,e,i,a,s,o,n,r,l,d,c,h,u=this,p=this,m=this.globalReactiveModel.model["x-axis-visible-range-end"],b=[];for(h=new this.toolbox.ComponentGroup({paper:this.graphics.paper,chart:this.chart,smartLabel:this.smartLabel,chartContainer:this.graphics.container}),t=new this.toolbox.UniSelectComponentGroup({paper:this.graphics.paper,chart:this.chart,smartLabel:this.smartLabel,chartContainer:this.graphics.container}),t.setConfig({fill:"#fff",borderThickness:0}),h.setConfig({fill:"#fff",borderThickness:0}),e=new this.HorizontalToolbar({paper:this.graphics.paper,chart:this.chart,smartLabel:this.smartLabel,chartContainer:this.graphics.container}),e.setConfig({fill:"#fff",borderThickness:0}),c=new this.toolbox.Label("Zoom:",{smartLabel:this.smartLabel,paper:this.graphics.paper},{text:{style:{"font-size":"15",fontFamily:"MyriadPro"}}}),h.addSymbol(c),s=new this.toolbox.Symbol("ALL",!0,{paper:this.graphics.paper,chart:this.chart,smartLabel:this.smartLabel,chartContainer:this.graphics.container},{fill:"#ffffff",labelFill:"#696969",symbolStrokeWidth:"2",symbolStroke:"#000000",strokeWidth:"1",hoverFill:"#7f7f7f",radius:1,margin:{right:5}}).attachEventHandlers({click:function(){p.setActivePeriod(p.startDataset,p.endDataset),e.dispose(),p.clickedId="ALL",p.toolbars.pop(),p.toolbars.push(p.createToolbar()),p.getLogicalSpace(),p.draw()}}),t.addSymbol(s),r=0;r<this.standardCalculatedPeriods.length;r++)for(l=this.standardCalculatedPeriods[r].multipliers.length-1;l>=0;l--)b.push(p.standardCalculatedPeriods[r].multipliers[l]*p.standardCalculatedPeriods[r].milliseconds);i=[];for(var g=function(a){o=a===p.startPointUnit?p.startPointMultiplier:p.standardCalculatedPeriods[a].multipliers.length-1;for(var s=function(s){d=a===p.noCalcButtons&&0===s?5:0,console.log(m,a,p.noCalcButtons,s,d),i[a]=new u.toolbox.Symbol(p.standardCalculatedPeriods[a].multipliers[s]+p.standardCalculatedPeriods[a].abbreviation,!0,{paper:u.graphics.paper,chart:u.chart,smartLabel:u.smartLabel,chartContainer:u.graphics.container},{fill:"#ffffff",labelFill:"#696969",symbolStrokeWidth:"2",symbolStroke:"#000000",strokeWidth:"1",hoverFill:"#7f7f7f",radius:1,margin:{right:d}}).attachEventHandlers({click:function(){n=p.standardCalculatedPeriods[a].multipliers[s]*p.standardCalculatedPeriods[a].milliseconds,p.clickedId=p.standardCalculatedPeriods[a].multipliers[s]+p.standardCalculatedPeriods[a].abbreviation,p.setActivePeriod(n),e.dispose(),p.toolbars.pop(),p.toolbars.push(p.createToolbar()),p.getLogicalSpace(),p.draw()}}),t.addSymbol(i[a])},r=o;r>=0;r--)s(r)},f=p.startPointUnit;f>=0;f--)g(f);a=[];for(var v=function(i){a[i]=new u.toolbox.Symbol(u.standardContexualPeriods[i].abbreviation,!0,{paper:u.graphics.paper,chart:u.chart,smartLabel:u.smartLabel,chartContainer:u.graphics.container},{fill:"#ffffff",labelFill:"#696969",symbolStrokeWidth:"2",symbolStroke:"#000000",strokeWidth:"1",hoverFill:"#7f7f7f",radius:1,margin:{right:0}}).attachEventHandlers({click:function(){p.setActivePeriod(p.standardContexualPeriods[i].dateStart,p.standardContexualPeriods[i].dateEnd),p.clickedId=p.standardContexualPeriods[i].abbreviation,e.dispose(),p.toolbars.pop(),p.toolbars.push(p.createToolbar()),p.getLogicalSpace(),p.draw()}}),t.addSymbol(a[i])},P=0;P<this.standardContexualPeriods.length;P++)v(P);return this.SymbolStore.register("textBoxIcon",function(t,e,i,a,s,o,n){var r=t-a/2+o/2,l=t+a/2-o/2,d=e-s/2+n/2,c=e+s/2-n/2;return["M",r,d,"L",l,d,"L",l,c,"L",r,c,"Z"]}),e.addComponent(h),e.addComponent(t),e}},{key:"getLogicalSpace",value:function(t,e){t/=2;var i,a,s,o=0,n=0;for(a=0,s=this.toolbars.length;a<s;a++)i=this.toolbars[a].getLogicalSpace(t,e),o=Math.max(i.width,o),n+=i.height,this.toolbars[a].width=i.width,this.toolbars[a].height=i.height;return n+=this.padding,{width:o,height:n}}},{key:"placeInCanvas",value:function(){var t=this;t.padding=5,t.spaceManagerInstance.add([{name:function(){return"standard-period-selector-ext"},ref:function(t){return t[0]},self:function(){return t},priority:function(){return 2},layout:function(t){return t.inline},orientation:[{type:function(t){return t.horizontal},position:[{type:function(t){return t.top},alignment:[{type:function(t){return t.left},dimensions:[function(){var e=this.getParentComponentGroup();return t.getLogicalSpace(e.getWidth(),e.getHeight())}]}]}]}]}])}},{key:"setDrawingConfiguration",value:function(t,e,i,a,s){var o=this.measurement;return o.x=t,o.y=e,o.width=i,o.height=a,this.parentGroup=s,this}},{key:"draw",value:function(t,e,i,a,s){var o,n,r,l,d,c,h,u,p=this.measurement,m=this.toolbars;if(t=void 0===t?p.x:t,e=void 0===e?p.y:e,i=void 0===i?p.width:i,a=void 0===a?p.height:a,s=void 0===s?this.parentGroup:s,i&&a)for(n=0,o=m.length;n<o;n++)r=m[n],r.draw(t,e,s);console.log(m);for(var b=0,g=m[0].componentGroups[1].symbolList;b<g.length;b++)g[b].symbol===this.clickedId&&(l=g[b].getBoundElement(),d=l.getBBox(),c=d.x,h=d.x2,u=d.y2,this.graphics.paper.path({path:["M",c,u-1,"L",h,u-1],stroke:"#ff0000"}).toFront())}}]),t}();"undefined"!=typeof t&&"undefined"!=typeof t.exports?t.exports=s:window.StandardPeriod=s,t.exports=function(t){var e=function(){function t(){i(this,t),this.ratio=8,this.toolbox=FusionCharts.getComponent("api","toolbox"),this.HorizontalToolbar=this.toolbox.HorizontalToolbar,this.ComponentGroup=this.toolbox.ComponentGroup,this.SymbolStore=this.toolbox.SymbolStore,this.all=1,this.calculatedPeriods=[],this.startDataset=0,this.startActiveWindow=0,this.endActiveWindow=1,this.standardCalculatedPeriods=[],this.standardContexualPeriods=[],this.startPointUnit=0,this.startPointMultiplier=0,this.clickedId,this.noCalcButtons=0,this.timePeriods=[{name:"second",milliseconds:1e3,startingPoint:0,total:60,abbreviation:"sec",description:"SECOND",parent:"minute",multipliers:[1,5,15,30]},{name:"minute",milliseconds:6e4,startingPoint:0,total:60,abbreviation:"min",description:"MINUTE",parent:"hour",multipliers:[1,5,15,30]},{name:"hour",milliseconds:36e5,startingPoint:0,total:24,abbreviation:"hr",description:"HOUR",parent:"day",multipliers:[1,3,6,12]},{name:"day",milliseconds:864e5,startingPoint:0,total:30,abbreviation:"D",description:"DAY",parent:"month",multipliers:[1,7,15]},{name:"month",milliseconds:2592e6,startingPoint:0,total:12,abbreviation:"M",description:"MONTH",parent:"year",multipliers:[1,3,6]},{name:"year",milliseconds:31104e6,startingPoint:0,abbreviation:"Y",description:"YEAR",multipliers:[1,3,5]}],this.tdButtons=[{name:"YTD",abbreviation:"YTD",parent:"year",milliseconds:31104e6,description:"Year to Date"},{name:"QTD",abbreviation:"QTD",parent:"month",multiplier:3,milliseconds:7776e6,description:"Quarter to Date"},{name:"MTD",abbreviation:"MTD",parent:"month",milliseconds:2592e6,description:"Month to Date"},{name:"WTD",abbreviation:"WTD",parent:"day",multiplier:7,milliseconds:6048e5,description:"Week to Date"},{name:"Y",abbreviation:"Y",parent:"day",milliseconds:864e5,description:"Yesterday"},{name:"T",abbreviation:"T",parent:"day",milliseconds:864e5,description:"Today"}],this.config={anchorPositions:"right",all:"1",contextual:"1",calculated:"1",tertiaryTimePeriods:{}}}return a(t,[{key:"generateCalculatedButtons",value:function(){var t=this.endActiveWindow-this.startDataset,e=0,i=0,a=this.endActiveWindow-this.startActiveWindow,s=0;for(this.standardCalculatedPeriods=[],e=0;e<this.timePeriods.length;e++)if(t/this.timePeriods[e].milliseconds>=1)if(Math.floor(a/this.timePeriods[e].milliseconds)<1)this.standardCalculatedPeriods.push({abbreviation:this.timePeriods[e].abbreviation,description:this.timePeriods[e].description,milliseconds:this.timePeriods[e].milliseconds,multipliers:[1]});else for(this.standardCalculatedPeriods.push({abbreviation:this.timePeriods[e].abbreviation,description:this.timePeriods[e].description,milliseconds:this.timePeriods[e].milliseconds,multipliers:[]}),i=0;i<this.timePeriods[e].multipliers.length;i++)a/this.ratio<this.timePeriods[e].multipliers[i]*this.timePeriods[e].milliseconds&&this.standardCalculatedPeriods[this.standardCalculatedPeriods.length-1].multipliers.push(this.timePeriods[e].multipliers[i]);for(this.noCalcButtons=1/0,e=0;e<this.standardCalculatedPeriods.length;e++)for(i=0;i<this.standardCalculatedPeriods[e].multipliers.length;i++)++s,this.noCalcButtons>e&&(this.noCalcButtons=e),s<=4&&(this.startPointMultiplier=i,this.startPointUnit=e)}},{key:"generateContextualButtons",value:function(){for(var t=[],e=0,i=this.globalReactiveModel.model["x-axis-absolute-range-end"],a=i-2,s=i,o={};e<this.tdButtons.length;e++)a=new Date(i),"YTD"===this.tdButtons[e].name?(a.setMonth(0),a.setDate(1),a.setHours(0),a.setMinutes(0),a.setSeconds(0)):"MTD"===this.tdButtons[e].name?(a.setDate(1),a.setHours(0),a.setMinutes(0),a.setSeconds(0)):"QTD"===this.tdButtons[e].name?(a.setMonth(11-a.getMonth()%4),a.setDate(0),a.setHours(0),a.setMinutes(0),a.setSeconds(0)):"WTD"===this.tdButtons[e].name?(a.setDate(a.getDate()-a.getDay()),a.setHours(0),a.setMinutes(0),a.setSeconds(0)):"Y"===this.tdButtons[e].name?(a.setHours(0),a.setMinutes(0),a.setSeconds(0),a-=864e5):"T"===this.tdButtons[e].name&&(a.setHours(0),a.setMinutes(0),a.setSeconds(0)),s<a||(this.tdButtons[e].dateStart=a.valueOf(),this.tdButtons[e].dateEnd=s.valueOf(),t.push(this.tdButtons[e]));for(o.milliseconds=1/0,e=0;e<this.tdButtons.length;e++)Math.abs(this.tdButtons[e].milliseconds-(this.endActiveWindow-this.startActiveWindow))<o.milliseconds&&(o.milliseconds=this.tdButtons[e].milliseconds,o.name=this.tdButtons[e].abbreviation);this.standardContexualPeriods=t}},{key:"setActivePeriod",value:function(){var t,e;1===arguments.length?(e=this.globalReactiveModel.model["x-axis-visible-range-end"],t=e-arguments[0]):2===arguments.length&&(t=arguments[0],e=arguments[1]),this.startActiveWindow=t,this.endActiveWindow=e,this.generateCalculatedButtons(),this.globalReactiveModel.model["x-axis-visible-range-start"]=this.startActiveWindow,this.globalReactiveModel.model["x-axis-visible-range-end"]=this.endActiveWindow,this.generateContextualButtons()}},{key:"setTimeline",value:function(t,e){this.startDataset=t,this.endDataset=e,document.getElementById("startActiveRange").innerHTML=new Date(this.startDataset),document.getElementById("endActiveRange").innerHTML=new Date(this.endDataset),this.generateCalculatedButtons()}},{key:"configure",value:function(t){this.config=t}},{key:"init",value:function(t){var e=this;return t(["xAxis","yAxis","graphics","chart","dataset","PlotManager","canvasConfig","MarkerManager","reactiveModel","globalReactiveModel","spaceManagerInstance","smartLabel",function(t,i,a,s,o,n,r,l,d,c,h,u){e.xAxis=t,e.yAxis=i,e.graphics=a,e.chart=s,e.dataset=o,e.plotManager=n,e.markerManager=l,e.canvasConfig=r,e.reactiveModel=d,e.globalReactiveModel=c,e.spaceManagerInstance=h,e.smartLabel=u}]),this.spaceManagerInstance=e.spaceManagerInstance,this.globalReactiveModel=e.globalReactiveModel,this.endActiveWindow=e.globalReactiveModel.model["x-axis-visible-range-end"],this.startActiveWindow=e.globalReactiveModel.model["x-axis-visible-range-start"],this.startDataset=e.globalReactiveModel.model["x-axis-absolute-range-start"],this.endDataset=e.globalReactiveModel.model["x-axis-absolute-range-end"],this.setActivePeriod(this.startActiveWindow,this.endActiveWindow),this.setActivePeriod(this.startActiveWindow,this.endActiveWindow),this.toolbars=[],this.measurement={},this.toolbars.push(this.createToolbar()),this}},{key:"createToolbar",value:function(){var t,e,i,a,s,o,n,r,l,d,c,h,u=this,p=this,m=this.globalReactiveModel.model["x-axis-visible-range-end"],b=[];for(h=new this.toolbox.ComponentGroup({paper:this.graphics.paper,chart:this.chart,smartLabel:this.smartLabel,chartContainer:this.graphics.container}),t=new this.toolbox.UniSelectComponentGroup({paper:this.graphics.paper,chart:this.chart,smartLabel:this.smartLabel,chartContainer:this.graphics.container}),t.setConfig({fill:"#fff",borderThickness:0}),h.setConfig({fill:"#fff",borderThickness:0}),e=new this.HorizontalToolbar({paper:this.graphics.paper,chart:this.chart,smartLabel:this.smartLabel,chartContainer:this.graphics.container}),e.setConfig({fill:"#fff",borderThickness:0}),c=new this.toolbox.Label("Zoom:",{smartLabel:this.smartLabel,paper:this.graphics.paper},{text:{style:{"font-size":"15",fontFamily:"MyriadPro"}}}),h.addSymbol(c),s=new this.toolbox.Symbol("ALL",!0,{paper:this.graphics.paper,chart:this.chart,smartLabel:this.smartLabel,chartContainer:this.graphics.container},{fill:"#ffffff",labelFill:"#696969",symbolStrokeWidth:"2",symbolStroke:"#000000",strokeWidth:"1",hoverFill:"#7f7f7f",radius:1,margin:{right:5}}).attachEventHandlers({click:function(){p.setActivePeriod(p.startDataset,p.endDataset),e.dispose(),p.clickedId="ALL",p.toolbars.pop(),p.toolbars.push(p.createToolbar()),p.getLogicalSpace(),p.draw()}}),t.addSymbol(s),r=0;r<this.standardCalculatedPeriods.length;r++)for(l=this.standardCalculatedPeriods[r].multipliers.length-1;l>=0;l--)b.push(p.standardCalculatedPeriods[r].multipliers[l]*p.standardCalculatedPeriods[r].milliseconds);i=[];for(var g=function(a){o=a===p.startPointUnit?p.startPointMultiplier:p.standardCalculatedPeriods[a].multipliers.length-1;for(var s=function(s){d=a===p.noCalcButtons&&0===s?5:0,console.log(m,a,p.noCalcButtons,s,d),i[a]=new u.toolbox.Symbol(p.standardCalculatedPeriods[a].multipliers[s]+p.standardCalculatedPeriods[a].abbreviation,!0,{paper:u.graphics.paper,chart:u.chart,smartLabel:u.smartLabel,chartContainer:u.graphics.container},{fill:"#ffffff",labelFill:"#696969",symbolStrokeWidth:"2",symbolStroke:"#000000",strokeWidth:"1",hoverFill:"#7f7f7f",radius:1,margin:{right:d}}).attachEventHandlers({click:function(){n=p.standardCalculatedPeriods[a].multipliers[s]*p.standardCalculatedPeriods[a].milliseconds,p.clickedId=p.standardCalculatedPeriods[a].multipliers[s]+p.standardCalculatedPeriods[a].abbreviation,p.setActivePeriod(n),e.dispose(),p.toolbars.pop(),p.toolbars.push(p.createToolbar()),p.getLogicalSpace(),p.draw()}}),t.addSymbol(i[a])},r=o;r>=0;r--)s(r)},f=p.startPointUnit;f>=0;f--)g(f);a=[];for(var v=function(i){a[i]=new u.toolbox.Symbol(u.standardContexualPeriods[i].abbreviation,!0,{paper:u.graphics.paper,chart:u.chart,smartLabel:u.smartLabel,chartContainer:u.graphics.container},{fill:"#ffffff",labelFill:"#696969",symbolStrokeWidth:"2",symbolStroke:"#000000",strokeWidth:"1",hoverFill:"#7f7f7f",radius:1,margin:{right:0}}).attachEventHandlers({click:function(){p.setActivePeriod(p.standardContexualPeriods[i].dateStart,p.standardContexualPeriods[i].dateEnd),p.clickedId=p.standardContexualPeriods[i].abbreviation,e.dispose(),p.toolbars.pop(),p.toolbars.push(p.createToolbar()),p.getLogicalSpace(),p.draw()}}),t.addSymbol(a[i])},P=0;P<this.standardContexualPeriods.length;P++)v(P);return this.SymbolStore.register("textBoxIcon",function(t,e,i,a,s,o,n){var r=t-a/2+o/2,l=t+a/2-o/2,d=e-s/2+n/2,c=e+s/2-n/2;return["M",r,d,"L",l,d,"L",l,c,"L",r,c,"Z"]}),e.addComponent(h),e.addComponent(t),e}},{key:"getLogicalSpace",value:function(t,e){t/=2;var i,a,s,o=0,n=0;for(a=0,s=this.toolbars.length;a<s;a++)i=this.toolbars[a].getLogicalSpace(t,e),o=Math.max(i.width,o),n+=i.height,this.toolbars[a].width=i.width,this.toolbars[a].height=i.height;return n+=this.padding,{width:o,height:n}}},{key:"placeInCanvas",value:function(){var t=this;t.padding=5,t.spaceManagerInstance.add([{name:function(){return"standard-period-selector-ext"},ref:function(t){return t[0]},self:function(){return t},priority:function(){return 2},layout:function(t){return t.inline},orientation:[{type:function(t){return t.horizontal},position:[{type:function(t){return t.top},alignment:[{type:function(t){return t.left},dimensions:[function(){var e=this.getParentComponentGroup();return t.getLogicalSpace(e.getWidth(),e.getHeight())}]}]}]}]}])}},{key:"setDrawingConfiguration",value:function(t,e,i,a,s){var o=this.measurement;return o.x=t,o.y=e,o.width=i,o.height=a,this.parentGroup=s,this}},{key:"draw",value:function(t,e,i,a,s){var o,n,r,l,d,c,h,u,p=this.measurement,m=this.toolbars;if(t=void 0===t?p.x:t,e=void 0===e?p.y:e,i=void 0===i?p.width:i,a=void 0===a?p.height:a,s=void 0===s?this.parentGroup:s,i&&a)for(n=0,o=m.length;n<o;n++)r=m[n],r.draw(t,e,s);console.log(m);for(var b=0,g=m[0].componentGroups[1].symbolList;b<g.length;b++)g[b].symbol===this.clickedId&&(l=g[b].getBoundElement(),d=l.getBBox(),c=d.x,h=d.x2,u=d.y2,this.graphics.paper.path({path:["M",c,u-1,"L",h,u-1],stroke:"#ff0000"}).toFront())}}]),t}();return e}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3RhbmRhcmQtcGVyaW9kLXNlbGVjdG9yLWVzNS5taW4uanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svYm9vdHN0cmFwIDAzNDRkZjAyYjE2ZWEzMjI4OTljIiwid2VicGFjazovLy8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL2J1aWxkaW4vbW9kdWxlLmpzIiwid2VicGFjazovLy8uL3NyYy9zdGFuZGFyZC1wZXJpb2Qtc2VsZWN0b3IuanMiXSwibmFtZXMiOlsibW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImluc3RhbGxlZE1vZHVsZXMiLCJleHBvcnRzIiwibW9kdWxlIiwiaWQiLCJsb2FkZWQiLCJjYWxsIiwibSIsImMiLCJwIiwiX3R5cGVvZiIsIlN5bWJvbCIsIml0ZXJhdG9yIiwib2JqIiwiY29uc3RydWN0b3IiLCJwcm90b3R5cGUiLCJTdGFuZGFyZFBlcmlvZFNlbGVjdG9yIiwid2luZG93Iiwic3RQUyIsImVudiIsImZhY3RvcnkiLCJkb2N1bWVudCIsIndpbiIsIkVycm9yIiwidW5kZWZpbmVkIiwiX3dpbmRvdyIsIndpbmRvd0V4aXN0cyIsIkZDIiwiRnVzaW9uQ2hhcnRzIiwicmVnaXN0ZXIiLCJyZWdpc3RlckNvbXBvbmVudCIsIndlYnBhY2tQb2x5ZmlsbCIsImRlcHJlY2F0ZSIsInBhdGhzIiwiY2hpbGRyZW4iLCJfY2xhc3NDYWxsQ2hlY2siLCJpbnN0YW5jZSIsIkNvbnN0cnVjdG9yIiwiVHlwZUVycm9yIiwiX2NyZWF0ZUNsYXNzIiwiZGVmaW5lUHJvcGVydGllcyIsInRhcmdldCIsInByb3BzIiwiaSIsImxlbmd0aCIsImRlc2NyaXB0b3IiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImtleSIsInByb3RvUHJvcHMiLCJzdGF0aWNQcm9wcyIsInRoaXMiLCJyYXRpbyIsInRvb2xib3giLCJnZXRDb21wb25lbnQiLCJIb3Jpem9udGFsVG9vbGJhciIsIkNvbXBvbmVudEdyb3VwIiwiU3ltYm9sU3RvcmUiLCJhbGwiLCJjYWxjdWxhdGVkUGVyaW9kcyIsInN0YXJ0RGF0YXNldCIsInN0YXJ0QWN0aXZlV2luZG93IiwiZW5kQWN0aXZlV2luZG93Iiwic3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kcyIsInN0YW5kYXJkQ29udGV4dWFsUGVyaW9kcyIsInN0YXJ0UG9pbnRVbml0Iiwic3RhcnRQb2ludE11bHRpcGxpZXIiLCJjbGlja2VkSWQiLCJub0NhbGNCdXR0b25zIiwidGltZVBlcmlvZHMiLCJuYW1lIiwibWlsbGlzZWNvbmRzIiwic3RhcnRpbmdQb2ludCIsInRvdGFsIiwiYWJicmV2aWF0aW9uIiwiZGVzY3JpcHRpb24iLCJwYXJlbnQiLCJtdWx0aXBsaWVycyIsInRkQnV0dG9ucyIsIm11bHRpcGxpZXIiLCJjb25maWciLCJhbmNob3JQb3NpdGlvbnMiLCJjb250ZXh0dWFsIiwiY2FsY3VsYXRlZCIsInRlcnRpYXJ5VGltZVBlcmlvZHMiLCJ2YWx1ZSIsInRhcmdldEJsb2NrIiwiaiIsImFjdGl2ZVdpbmRvdyIsImNvdW50IiwiTWF0aCIsImZsb29yIiwicHVzaCIsIkluZmluaXR5IiwiYnV0dG9ucyIsImVuZFN0YW1wIiwiZ2xvYmFsUmVhY3RpdmVNb2RlbCIsIm1vZGVsIiwiZGF0ZVN0YXJ0IiwiZGF0ZUVuZCIsInJlbGF0aXZlVERCdXR0b24iLCJEYXRlIiwic2V0TW9udGgiLCJzZXREYXRlIiwic2V0SG91cnMiLCJzZXRNaW51dGVzIiwic2V0U2Vjb25kcyIsImdldE1vbnRoIiwiZ2V0RGF0ZSIsImdldERheSIsInZhbHVlT2YiLCJhYnMiLCJzdGFydCIsImVuZCIsImFyZ3VtZW50cyIsImdlbmVyYXRlQ2FsY3VsYXRlZEJ1dHRvbnMiLCJnZW5lcmF0ZUNvbnRleHR1YWxCdXR0b25zIiwiZW5kRGF0YXNldCIsImdldEVsZW1lbnRCeUlkIiwiaW5uZXJIVE1MIiwicmVxdWlyZSIsInhBeGlzIiwieUF4aXMiLCJncmFwaGljcyIsImNoYXJ0IiwiZGF0YXNldCIsInBsb3RNYW5hZ2VyIiwiY2FudmFzQ29uZmlnIiwibWFya2VyTWFuYWdlciIsInJlYWN0aXZlTW9kZWwiLCJzcGFjZU1hbmFnZXJJbnN0YW5jZSIsInNtYXJ0TGFiZWwiLCJzZXRBY3RpdmVQZXJpb2QiLCJ0b29sYmFycyIsIm1lYXN1cmVtZW50IiwiY3JlYXRlVG9vbGJhciIsInVuaWdyb3VwIiwidG9vbGJhciIsImNhbGN1bGF0ZWRCdXR0b25zIiwiY29udGV4dHVhbEJ1dHRvbnMiLCJhbGxCdXR0b24iLCJzdGFydE11bHRpcGxpZXIiLCJkZWR1Y3RvciIsIm1hcmdpbiIsImZyb21EYXRlTGFiZWwiLCJncm91cCIsIl90aGlzIiwic2VsZiIsImVuZEFjdGl2ZSIsImRlZHVjdG9yQXIiLCJwYXBlciIsImNoYXJ0Q29udGFpbmVyIiwiY29udGFpbmVyIiwiVW5pU2VsZWN0Q29tcG9uZW50R3JvdXAiLCJzZXRDb25maWciLCJmaWxsIiwiYm9yZGVyVGhpY2tuZXNzIiwiTGFiZWwiLCJ0ZXh0Iiwic3R5bGUiLCJmb250LXNpemUiLCJmb250RmFtaWx5IiwiYWRkU3ltYm9sIiwibGFiZWxGaWxsIiwic3ltYm9sU3Ryb2tlV2lkdGgiLCJzeW1ib2xTdHJva2UiLCJzdHJva2VXaWR0aCIsImhvdmVyRmlsbCIsInJhZGl1cyIsInJpZ2h0IiwiYXR0YWNoRXZlbnRIYW5kbGVycyIsImNsaWNrIiwiZGlzcG9zZSIsInBvcCIsImdldExvZ2ljYWxTcGFjZSIsImRyYXciLCJfbG9vcCIsIl9sb29wMyIsImNvbnNvbGUiLCJsb2ciLCJfbG9vcDIiLCJ4IiwieSIsInJhZCIsInciLCJoIiwicGFkWCIsInBhZFkiLCJ4MSIsIngyIiwieTEiLCJ5MiIsImFkZENvbXBvbmVudCIsImF2YWlsYWJsZVdpZHRoIiwiYXZhaWxhYmxlSGVpZ2h0IiwibG9naWNhbFNwYWNlIiwibG4iLCJ3aWR0aCIsImhlaWdodCIsIm1heCIsInBhZGRpbmciLCJhZGQiLCJyZWYiLCJwcmlvcml0eSIsImxheW91dCIsImlubGluZSIsIm9yaWVudGF0aW9uIiwidHlwZSIsImhvcml6b250YWwiLCJwb3NpdGlvbiIsInRvcCIsImFsaWdubWVudCIsImxlZnQiLCJkaW1lbnNpb25zIiwiZ2V0UGFyZW50Q29tcG9uZW50R3JvdXAiLCJnZXRXaWR0aCIsImdldEhlaWdodCIsIm1lcyIsInBhcmVudEdyb3VwIiwiYm91bmRFbGVtZW50IiwiYkJveCIsImlpIiwiY29tcG9uZW50R3JvdXBzIiwic3ltYm9sTGlzdCIsInN5bWJvbCIsImdldEJvdW5kRWxlbWVudCIsImdldEJCb3giLCJwYXRoIiwic3Ryb2tlIiwidG9Gcm9udCIsIlN0YW5kYXJkUGVyaW9kIiwiZGVwIiwiX3RoaXMyIiwiX2xvb3A0IiwiX2xvb3A2IiwiX2xvb3A1Il0sIm1hcHBpbmdzIjoiQ0FBUyxTQUFVQSxHQ0luQixRQUFBQyxHQUFBQyxHQUdBLEdBQUFDLEVBQUFELEdBQ0EsTUFBQUMsR0FBQUQsR0FBQUUsT0FHQSxJQUFBQyxHQUFBRixFQUFBRCxJQUNBRSxXQUNBRSxHQUFBSixFQUNBSyxRQUFBLEVBVUEsT0FOQVAsR0FBQUUsR0FBQU0sS0FBQUgsRUFBQUQsUUFBQUMsSUFBQUQsUUFBQUgsR0FHQUksRUFBQUUsUUFBQSxFQUdBRixFQUFBRCxRQXZCQSxHQUFBRCxLQXFDQSxPQVRBRixHQUFBUSxFQUFBVCxFQUdBQyxFQUFBUyxFQUFBUCxFQUdBRixFQUFBVSxFQUFBLEdBR0FWLEVBQUEsS0RNTSxTQUFTSSxFQUFRRCxFQUFTSCxJRTVDaEMsU0FBQUksR0FBQSxZRmdEQyxJQUFJTyxHQUE0QixrQkFBWEMsU0FBb0QsZ0JBQXBCQSxRQUFPQyxTQUF3QixTQUFVQyxHQUFPLGFBQWNBLElBQVMsU0FBVUEsR0FBTyxNQUFPQSxJQUF5QixrQkFBWEYsU0FBeUJFLEVBQUlDLGNBQWdCSCxRQUFVRSxJQUFRRixPQUFPSSxVQUFZLGVBQWtCRixJRS9DalFHLEVBQXlCakIsRUFBUSxFQUV2Q2tCLFFBQU9DLEtB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Q1RDLGVBenBCbUJ4TixJQStwQjlCLE9BQU9BIiwiZmlsZSI6InN0YW5kYXJkLXBlcmlvZC1zZWxlY3Rvci1lczUubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqKioqKi8gKGZ1bmN0aW9uKG1vZHVsZXMpIHsgLy8gd2VicGFja0Jvb3RzdHJhcFxuLyoqKioqKi8gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuLyoqKioqKi8gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuLyoqKioqKi8gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuLyoqKioqKi8gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4vKioqKioqLyBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuLyoqKioqKi8gXHRcdFx0ZXhwb3J0czoge30sXG4vKioqKioqLyBcdFx0XHRpZDogbW9kdWxlSWQsXG4vKioqKioqLyBcdFx0XHRsb2FkZWQ6IGZhbHNlXG4vKioqKioqLyBcdFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4vKioqKioqLyBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbi8qKioqKiovIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbi8qKioqKiovIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4vKioqKioqLyBcdH1cbi8qKioqKiovXG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8qKioqKiovIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMCk7XG4vKioqKioqLyB9KVxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKioqKiovIChbXG4vKiAwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24obW9kdWxlKSB7J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXHRcblx0dmFyIFN0YW5kYXJkUGVyaW9kU2VsZWN0b3IgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHRcblx0d2luZG93LnN0UFMgPSBuZXcgU3RhbmRhcmRQZXJpb2RTZWxlY3RvcigpO1xuXHRcblx0OyhmdW5jdGlvbiAoZW52LCBmYWN0b3J5KSB7XG5cdCAgaWYgKCggZmFsc2UgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YobW9kdWxlKSkgPT09ICdvYmplY3QnICYmIG1vZHVsZS5leHBvcnRzKSB7XG5cdCAgICBtb2R1bGUuZXhwb3J0cyA9IGVudi5kb2N1bWVudCA/IGZhY3RvcnkoZW52KSA6IGZ1bmN0aW9uICh3aW4pIHtcblx0ICAgICAgaWYgKCF3aW4uZG9jdW1lbnQpIHtcblx0ICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1dpbmRvdyB3aXRoIGRvY3VtZW50IG5vdCBwcmVzZW50Jyk7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIGZhY3Rvcnkod2luLCB0cnVlKTtcblx0ICAgIH07XG5cdCAgfSBlbHNlIHtcblx0ICAgIGVudi5TdGFuZGFyZFBlcmlvZFNlbGVjdG9yID0gZmFjdG9yeShlbnYsIHRydWUpO1xuXHQgIH1cblx0fSkodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cgOiB1bmRlZmluZWQsIGZ1bmN0aW9uIChfd2luZG93LCB3aW5kb3dFeGlzdHMpIHtcblx0ICB2YXIgRkMgPSBfd2luZG93LkZ1c2lvbkNoYXJ0cztcblx0ICBGQy5yZWdpc3RlcignZXh0ZW5zaW9uJywgWydwcml2YXRlJywgJ1N0YW5kYXJkUGVyaW9kU2VsZWN0b3InLCBmdW5jdGlvbiAoKSB7XG5cdCAgICBGQy5yZWdpc3RlckNvbXBvbmVudCgnZXh0ZW5zaW9ucycsICdTdGFuZGFyZFBlcmlvZFNlbGVjdG9yJywgU3RhbmRhcmRQZXJpb2RTZWxlY3Rvcih7IEZ1c2lvbkNoYXJ0czogRkMgfSkpO1xuXHQgIH1dKTtcblx0fSk7XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpKG1vZHVsZSkpKVxuXG4vKioqLyB9LFxuLyogMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihtb2R1bGUpIHtcblx0XHRpZighbW9kdWxlLndlYnBhY2tQb2x5ZmlsbCkge1xuXHRcdFx0bW9kdWxlLmRlcHJlY2F0ZSA9IGZ1bmN0aW9uKCkge307XG5cdFx0XHRtb2R1bGUucGF0aHMgPSBbXTtcblx0XHRcdC8vIG1vZHVsZS5wYXJlbnQgPSB1bmRlZmluZWQgYnkgZGVmYXVsdFxuXHRcdFx0bW9kdWxlLmNoaWxkcmVuID0gW107XG5cdFx0XHRtb2R1bGUud2VicGFja1BvbHlmaWxsID0gMTtcblx0XHR9XG5cdFx0cmV0dXJuIG1vZHVsZTtcblx0fVxuXG5cbi8qKiovIH0sXG4vKiAyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHQvKipcblx0ICogQ2xhc3MgZGVmaW5pdGlvbiBvZiBTdGFuZGFyZFBlcmlvZFNlbGVjdG9yXG5cdCAqL1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cdFxuXHR2YXIgU3RhbmRhcmRQZXJpb2RTZWxlY3RvciA9IGZ1bmN0aW9uICgpIHtcblx0ICBmdW5jdGlvbiBTdGFuZGFyZFBlcmlvZFNlbGVjdG9yKCkge1xuXHQgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFN0YW5kYXJkUGVyaW9kU2VsZWN0b3IpO1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogQHByaXZhdGVcblx0ICAgICAqL1xuXHQgICAgdGhpcy5yYXRpbyA9IDg7XG5cdCAgICB0aGlzLnRvb2xib3ggPSBGdXNpb25DaGFydHMuZ2V0Q29tcG9uZW50KCdhcGknLCAndG9vbGJveCcpO1xuXHQgICAgdGhpcy5Ib3Jpem9udGFsVG9vbGJhciA9IHRoaXMudG9vbGJveC5Ib3Jpem9udGFsVG9vbGJhcjtcblx0ICAgIHRoaXMuQ29tcG9uZW50R3JvdXAgPSB0aGlzLnRvb2xib3guQ29tcG9uZW50R3JvdXA7XG5cdCAgICB0aGlzLlN5bWJvbFN0b3JlID0gdGhpcy50b29sYm94LlN5bWJvbFN0b3JlO1xuXHQgICAgdGhpcy5hbGwgPSAxO1xuXHQgICAgdGhpcy5jYWxjdWxhdGVkUGVyaW9kcyA9IFtdO1xuXHQgICAgdGhpcy5zdGFydERhdGFzZXQgPSAwO1xuXHQgICAgLy8gdGhpcy5lbmREYXRhc2V0ID0gdGhpcy5nbG9iYWxSZWFjdGl2ZU1vZGVsLm1vZGVsWyd4LWF4aXMtYWJzb2x1dGUtcmFuZ2UtZW5kJ107XG5cdCAgICB0aGlzLnN0YXJ0QWN0aXZlV2luZG93ID0gMDtcblx0ICAgIHRoaXMuZW5kQWN0aXZlV2luZG93ID0gMTtcblx0ICAgIHRoaXMuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kcyA9IFtdO1xuXHQgICAgdGhpcy5zdGFuZGFyZENvbnRleHVhbFBlcmlvZHMgPSBbXTtcblx0ICAgIHRoaXMuc3RhcnRQb2ludFVuaXQgPSAwO1xuXHQgICAgdGhpcy5zdGFydFBvaW50TXVsdGlwbGllciA9IDA7XG5cdCAgICB0aGlzLmNsaWNrZWRJZDtcblx0ICAgIHRoaXMubm9DYWxjQnV0dG9ucyA9IDA7XG5cdCAgICB0aGlzLnRpbWVQZXJpb2RzID0gW3tcblx0ICAgICAgJ25hbWUnOiAnc2Vjb25kJyxcblx0ICAgICAgJ21pbGxpc2Vjb25kcyc6IDEwMDAsXG5cdCAgICAgICdzdGFydGluZ1BvaW50JzogMCxcblx0ICAgICAgJ3RvdGFsJzogNjAsXG5cdCAgICAgICdhYmJyZXZpYXRpb24nOiAnc2VjJyxcblx0ICAgICAgJ2Rlc2NyaXB0aW9uJzogJ1NFQ09ORCcsXG5cdCAgICAgICdwYXJlbnQnOiAnbWludXRlJyxcblx0ICAgICAgJ211bHRpcGxpZXJzJzogWzEsIDUsIDE1LCAzMF1cblx0ICAgIH0sIHtcblx0ICAgICAgJ25hbWUnOiAnbWludXRlJyxcblx0ICAgICAgJ21pbGxpc2Vjb25kcyc6IDYwMDAwLFxuXHQgICAgICAnc3RhcnRpbmdQb2ludCc6IDAsXG5cdCAgICAgICd0b3RhbCc6IDYwLFxuXHQgICAgICAnYWJicmV2aWF0aW9uJzogJ21pbicsXG5cdCAgICAgICdkZXNjcmlwdGlvbic6ICdNSU5VVEUnLFxuXHQgICAgICAncGFyZW50JzogJ2hvdXInLFxuXHQgICAgICAnbXVsdGlwbGllcnMnOiBbMSwgNSwgMTUsIDMwXVxuXHQgICAgfSwge1xuXHQgICAgICAnbmFtZSc6ICdob3VyJyxcblx0ICAgICAgJ21pbGxpc2Vjb25kcyc6IDM2MDAwMDAsXG5cdCAgICAgICdzdGFydGluZ1BvaW50JzogMCxcblx0ICAgICAgJ3RvdGFsJzogMjQsXG5cdCAgICAgICdhYmJyZXZpYXRpb24nOiAnaHInLFxuXHQgICAgICAnZGVzY3JpcHRpb24nOiAnSE9VUicsXG5cdCAgICAgICdwYXJlbnQnOiAnZGF5Jyxcblx0ICAgICAgJ211bHRpcGxpZXJzJzogWzEsIDMsIDYsIDEyXVxuXHQgICAgfSwge1xuXHQgICAgICAnbmFtZSc6ICdkYXknLFxuXHQgICAgICAnbWlsbGlzZWNvbmRzJzogODY0MDAwMDAsXG5cdCAgICAgICdzdGFydGluZ1BvaW50JzogMCxcblx0ICAgICAgJ3RvdGFsJzogMzAsXG5cdCAgICAgICdhYmJyZXZpYXRpb24nOiAnRCcsXG5cdCAgICAgICdkZXNjcmlwdGlvbic6ICdEQVknLFxuXHQgICAgICAncGFyZW50JzogJ21vbnRoJyxcblx0ICAgICAgJ211bHRpcGxpZXJzJzogWzEsIDcsIDE1XVxuXHQgICAgfSwge1xuXHQgICAgICAnbmFtZSc6ICdtb250aCcsXG5cdCAgICAgICdtaWxsaXNlY29uZHMnOiAyNTkyMDAwMDAwLFxuXHQgICAgICAnc3RhcnRpbmdQb2ludCc6IDAsXG5cdCAgICAgICd0b3RhbCc6IDEyLFxuXHQgICAgICAnYWJicmV2aWF0aW9uJzogJ00nLFxuXHQgICAgICAnZGVzY3JpcHRpb24nOiAnTU9OVEgnLFxuXHQgICAgICAncGFyZW50JzogJ3llYXInLFxuXHQgICAgICAnbXVsdGlwbGllcnMnOiBbMSwgMywgNl1cblx0ICAgIH0sIHtcblx0ICAgICAgJ25hbWUnOiAneWVhcicsXG5cdCAgICAgICdtaWxsaXNlY29uZHMnOiAzMTEwNDAwMDAwMCxcblx0ICAgICAgJ3N0YXJ0aW5nUG9pbnQnOiAwLFxuXHQgICAgICAnYWJicmV2aWF0aW9uJzogJ1knLFxuXHQgICAgICAnZGVzY3JpcHRpb24nOiAnWUVBUicsXG5cdCAgICAgICdtdWx0aXBsaWVycyc6IFsxLCAzLCA1XVxuXHQgICAgfV07XG5cdCAgICB0aGlzLnRkQnV0dG9ucyA9IFt7XG5cdCAgICAgICduYW1lJzogJ1lURCcsXG5cdCAgICAgICdhYmJyZXZpYXRpb24nOiAnWVREJyxcblx0ICAgICAgJ3BhcmVudCc6ICd5ZWFyJyxcblx0ICAgICAgJ21pbGxpc2Vjb25kcyc6IDMxMTA0MDAwMDAwLFxuXHQgICAgICAnZGVzY3JpcHRpb24nOiAnWWVhciB0byBEYXRlJ1xuXHQgICAgfSwge1xuXHQgICAgICAnbmFtZSc6ICdRVEQnLFxuXHQgICAgICAnYWJicmV2aWF0aW9uJzogJ1FURCcsXG5cdCAgICAgICdwYXJlbnQnOiAnbW9udGgnLFxuXHQgICAgICAnbXVsdGlwbGllcic6IDMsXG5cdCAgICAgICdtaWxsaXNlY29uZHMnOiA3Nzc2MDAwMDAwLFxuXHQgICAgICAnZGVzY3JpcHRpb24nOiAnUXVhcnRlciB0byBEYXRlJ1xuXHQgICAgfSwge1xuXHQgICAgICAnbmFtZSc6ICdNVEQnLFxuXHQgICAgICAnYWJicmV2aWF0aW9uJzogJ01URCcsXG5cdCAgICAgICdwYXJlbnQnOiAnbW9udGgnLFxuXHQgICAgICAnbWlsbGlzZWNvbmRzJzogMjU5MjAwMDAwMCxcblx0ICAgICAgJ2Rlc2NyaXB0aW9uJzogJ01vbnRoIHRvIERhdGUnXG5cdCAgICB9LCB7XG5cdCAgICAgICduYW1lJzogJ1dURCcsXG5cdCAgICAgICdhYmJyZXZpYXRpb24nOiAnV1REJyxcblx0ICAgICAgJ3BhcmVudCc6ICdkYXknLFxuXHQgICAgICAnbXVsdGlwbGllcic6IDcsXG5cdCAgICAgICdtaWxsaXNlY29uZHMnOiA2MDQ4MDAwMDAsXG5cdCAgICAgICdkZXNjcmlwdGlvbic6ICdXZWVrIHRvIERhdGUnXG5cdCAgICB9LCB7XG5cdCAgICAgICduYW1lJzogJ1knLFxuXHQgICAgICAnYWJicmV2aWF0aW9uJzogJ1knLFxuXHQgICAgICAncGFyZW50JzogJ2RheScsXG5cdCAgICAgICdtaWxsaXNlY29uZHMnOiA4NjQwMDAwMCxcblx0ICAgICAgJ2Rlc2NyaXB0aW9uJzogJ1llc3RlcmRheSdcblx0ICAgIH0sIHtcblx0ICAgICAgJ25hbWUnOiAnVCcsXG5cdCAgICAgICdhYmJyZXZpYXRpb24nOiAnVCcsXG5cdCAgICAgICdwYXJlbnQnOiAnZGF5Jyxcblx0ICAgICAgJ21pbGxpc2Vjb25kcyc6IDg2NDAwMDAwLFxuXHQgICAgICAnZGVzY3JpcHRpb24nOiAnVG9kYXknXG5cdCAgICB9XTtcblx0ICAgIHRoaXMuY29uZmlnID0ge1xuXHQgICAgICBhbmNob3JQb3NpdGlvbnM6ICdyaWdodCcsXG5cdCAgICAgIGFsbDogJzEnLFxuXHQgICAgICBjb250ZXh0dWFsOiAnMScsXG5cdCAgICAgIGNhbGN1bGF0ZWQ6ICcxJyxcblx0ICAgICAgdGVydGlhcnlUaW1lUGVyaW9kczoge31cblx0ICAgIH07XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBBIGZ1bmN0aW9uIHRvIGdlbmVyYXRlIHRoZSBjYWxjdWxhdGVkIGJ1dHRvbnMgdXNpbmdcblx0ICAgKiB0aGUgYWN0aXZlIHJhbmdlIGFuZCB0aGUgbG9jYXRpb24gb2YgdGhlIGFjdGl2ZSByYW5nZVxuXHQgICAqL1xuXHRcblx0XG5cdCAgX2NyZWF0ZUNsYXNzKFN0YW5kYXJkUGVyaW9kU2VsZWN0b3IsIFt7XG5cdCAgICBrZXk6ICdnZW5lcmF0ZUNhbGN1bGF0ZWRCdXR0b25zJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBnZW5lcmF0ZUNhbGN1bGF0ZWRCdXR0b25zKCkge1xuXHQgICAgICB2YXIgdGFyZ2V0QmxvY2sgPSB0aGlzLmVuZEFjdGl2ZVdpbmRvdyAtIHRoaXMuc3RhcnREYXRhc2V0LFxuXHQgICAgICAgICAgaSA9IDAsXG5cdCAgICAgICAgICBqID0gMCxcblx0ICAgICAgICAgIGFjdGl2ZVdpbmRvdyA9IHRoaXMuZW5kQWN0aXZlV2luZG93IC0gdGhpcy5zdGFydEFjdGl2ZVdpbmRvdyxcblx0ICAgICAgICAgIGNvdW50ID0gMDtcblx0ICAgICAgdGhpcy5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzID0gW107XG5cdCAgICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLnRpbWVQZXJpb2RzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgLy8gY2hlY2tpbmcgd2hldGhlciB0aGUgdW5pdCBpcyBhcHBsaWNhYmxlIGZvciB0aGUgY3VycmVudCB0YXJnZXQgYmxvY2tcblx0ICAgICAgICBpZiAodGFyZ2V0QmxvY2sgLyB0aGlzLnRpbWVQZXJpb2RzW2ldLm1pbGxpc2Vjb25kcyA+PSAxKSB7XG5cdCAgICAgICAgICAvLyBjaGVja2luZyB3aGV0aGVyIHRoZSB1bml0IGlzIG9mIHRoZSBoaWdoZXIgb3JkZXIgYW5kIG9ubHkgbXVsdGlwbGllciAxIGlzIGFwcGxpY2FibGVcblx0ICAgICAgICAgIGlmIChNYXRoLmZsb29yKGFjdGl2ZVdpbmRvdyAvIHRoaXMudGltZVBlcmlvZHNbaV0ubWlsbGlzZWNvbmRzKSA8IDEpIHtcblx0ICAgICAgICAgICAgdGhpcy5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzLnB1c2goe1xuXHQgICAgICAgICAgICAgICdhYmJyZXZpYXRpb24nOiB0aGlzLnRpbWVQZXJpb2RzW2ldLmFiYnJldmlhdGlvbixcblx0ICAgICAgICAgICAgICAnZGVzY3JpcHRpb24nOiB0aGlzLnRpbWVQZXJpb2RzW2ldLmRlc2NyaXB0aW9uLFxuXHQgICAgICAgICAgICAgICdtaWxsaXNlY29uZHMnOiB0aGlzLnRpbWVQZXJpb2RzW2ldLm1pbGxpc2Vjb25kcyxcblx0ICAgICAgICAgICAgICAnbXVsdGlwbGllcnMnOiBbMV1cblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAvLyBpZiB0aGUgdW5pdCBpcyBvZiB0aGUgb3JkZXIgb2YgdGhlIHRhcmdldCBibG9jayBhbmQgY2FsY3VsYXRpbmcgdGhlIG11bHRpcGxpZXJzXG5cdCAgICAgICAgICAgIHRoaXMuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kcy5wdXNoKHtcblx0ICAgICAgICAgICAgICAnYWJicmV2aWF0aW9uJzogdGhpcy50aW1lUGVyaW9kc1tpXS5hYmJyZXZpYXRpb24sXG5cdCAgICAgICAgICAgICAgJ2Rlc2NyaXB0aW9uJzogdGhpcy50aW1lUGVyaW9kc1tpXS5kZXNjcmlwdGlvbixcblx0ICAgICAgICAgICAgICAnbWlsbGlzZWNvbmRzJzogdGhpcy50aW1lUGVyaW9kc1tpXS5taWxsaXNlY29uZHMsXG5cdCAgICAgICAgICAgICAgJ211bHRpcGxpZXJzJzogW11cblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgIC8vIGNhbGN1bGF0aW5nIGFuZCBwb3B1bGF0aW5nIHRoZSBhcHBsaWNhYmxlIG11bHRwbGllcnMgb2YgZWFjaCB1bml0XG5cdCAgICAgICAgICAgIGZvciAoaiA9IDA7IGogPCB0aGlzLnRpbWVQZXJpb2RzW2ldLm11bHRpcGxpZXJzLmxlbmd0aDsgaisrKSB7XG5cdCAgICAgICAgICAgICAgaWYgKGFjdGl2ZVdpbmRvdyAvIHRoaXMucmF0aW8gPCB0aGlzLnRpbWVQZXJpb2RzW2ldLm11bHRpcGxpZXJzW2pdICogdGhpcy50aW1lUGVyaW9kc1tpXS5taWxsaXNlY29uZHMpIHtcblx0ICAgICAgICAgICAgICAgIHRoaXMuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kc1t0aGlzLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHMubGVuZ3RoIC0gMV0ubXVsdGlwbGllcnMucHVzaCh0aGlzLnRpbWVQZXJpb2RzW2ldLm11bHRpcGxpZXJzW2pdKTtcblx0ICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAgdGhpcy5ub0NhbGNCdXR0b25zID0gSW5maW5pdHk7XG5cdCAgICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICBmb3IgKGogPSAwOyBqIDwgdGhpcy5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW2ldLm11bHRpcGxpZXJzLmxlbmd0aDsgaisrKSB7XG5cdCAgICAgICAgICArK2NvdW50O1xuXHQgICAgICAgICAgaWYgKHRoaXMubm9DYWxjQnV0dG9ucyA+IGkpIHtcblx0ICAgICAgICAgICAgdGhpcy5ub0NhbGNCdXR0b25zID0gaTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIGlmIChjb3VudCA8PSA0KSB7XG5cdCAgICAgICAgICAgIHRoaXMuc3RhcnRQb2ludE11bHRpcGxpZXIgPSBqO1xuXHQgICAgICAgICAgICB0aGlzLnN0YXJ0UG9pbnRVbml0ID0gaTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8vIHRoaXMuZHJhd0J1dHRvbnNDYWxjdWxhdGVkKHRoaXMuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kcyk7XG5cdCAgICB9XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBBIGZ1bmN0aW9uIHRvIGdlbmVyYXRlIHRoZSBjb250ZXh0dWFsIGJ1dHRvbnMgdXNpbmdcblx0ICAgICAqIHRoZSBlbmQgcG9pbnQgb2YgdGhlIHRpbWUtc2NhbGVcblx0ICAgICAqL1xuXHRcblx0ICB9LCB7XG5cdCAgICBrZXk6ICdnZW5lcmF0ZUNvbnRleHR1YWxCdXR0b25zJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBnZW5lcmF0ZUNvbnRleHR1YWxCdXR0b25zKCkge1xuXHQgICAgICAvLyBnZW5lcmF0aW5nIGFuIGFycmF5IHdpdGggYXBwbGljYWJsZSBURCBidXR0b25zXG5cdCAgICAgIHZhciBidXR0b25zID0gW10sXG5cdCAgICAgICAgICBpID0gMCxcblx0ICAgICAgICAgIGVuZFN0YW1wID0gdGhpcy5nbG9iYWxSZWFjdGl2ZU1vZGVsLm1vZGVsWyd4LWF4aXMtYWJzb2x1dGUtcmFuZ2UtZW5kJ10sXG5cdCAgICAgICAgICBkYXRlU3RhcnQgPSBlbmRTdGFtcCAtIDIsXG5cdCAgICAgICAgICBkYXRlRW5kID0gZW5kU3RhbXAsXG5cdCAgICAgICAgICByZWxhdGl2ZVREQnV0dG9uID0ge307XG5cdCAgICAgIGZvciAoOyBpIDwgdGhpcy50ZEJ1dHRvbnMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICBkYXRlU3RhcnQgPSBuZXcgRGF0ZShlbmRTdGFtcCk7XG5cdCAgICAgICAgaWYgKHRoaXMudGRCdXR0b25zW2ldLm5hbWUgPT09ICdZVEQnKSB7XG5cdCAgICAgICAgICBkYXRlU3RhcnQuc2V0TW9udGgoMCk7XG5cdCAgICAgICAgICBkYXRlU3RhcnQuc2V0RGF0ZSgxKTtcblx0ICAgICAgICAgIGRhdGVTdGFydC5zZXRIb3VycygwKTtcblx0ICAgICAgICAgIGRhdGVTdGFydC5zZXRNaW51dGVzKDApO1xuXHQgICAgICAgICAgZGF0ZVN0YXJ0LnNldFNlY29uZHMoMCk7XG5cdCAgICAgICAgfSBlbHNlIGlmICh0aGlzLnRkQnV0dG9uc1tpXS5uYW1lID09PSAnTVREJykge1xuXHQgICAgICAgICAgZGF0ZVN0YXJ0LnNldERhdGUoMSk7XG5cdCAgICAgICAgICBkYXRlU3RhcnQuc2V0SG91cnMoMCk7XG5cdCAgICAgICAgICBkYXRlU3RhcnQuc2V0TWludXRlcygwKTtcblx0ICAgICAgICAgIGRhdGVTdGFydC5zZXRTZWNvbmRzKDApO1xuXHQgICAgICAgIH0gZWxzZSBpZiAodGhpcy50ZEJ1dHRvbnNbaV0ubmFtZSA9PT0gJ1FURCcpIHtcblx0ICAgICAgICAgIGRhdGVTdGFydC5zZXRNb250aCgxMSAtIGRhdGVTdGFydC5nZXRNb250aCgpICUgNCk7XG5cdCAgICAgICAgICBkYXRlU3RhcnQuc2V0RGF0ZSgwKTtcblx0ICAgICAgICAgIGRhdGVTdGFydC5zZXRIb3VycygwKTtcblx0ICAgICAgICAgIGRhdGVTdGFydC5zZXRNaW51dGVzKDApO1xuXHQgICAgICAgICAgZGF0ZVN0YXJ0LnNldFNlY29uZHMoMCk7XG5cdCAgICAgICAgfSBlbHNlIGlmICh0aGlzLnRkQnV0dG9uc1tpXS5uYW1lID09PSAnV1REJykge1xuXHQgICAgICAgICAgZGF0ZVN0YXJ0LnNldERhdGUoZGF0ZVN0YXJ0LmdldERhdGUoKSAtIGRhdGVTdGFydC5nZXREYXkoKSk7XG5cdCAgICAgICAgICBkYXRlU3RhcnQuc2V0SG91cnMoMCk7XG5cdCAgICAgICAgICBkYXRlU3RhcnQuc2V0TWludXRlcygwKTtcblx0ICAgICAgICAgIGRhdGVTdGFydC5zZXRTZWNvbmRzKDApO1xuXHQgICAgICAgIH0gZWxzZSBpZiAodGhpcy50ZEJ1dHRvbnNbaV0ubmFtZSA9PT0gJ1knKSB7XG5cdCAgICAgICAgICBkYXRlU3RhcnQuc2V0SG91cnMoMCk7XG5cdCAgICAgICAgICBkYXRlU3RhcnQuc2V0TWludXRlcygwKTtcblx0ICAgICAgICAgIGRhdGVTdGFydC5zZXRTZWNvbmRzKDApO1xuXHQgICAgICAgICAgZGF0ZVN0YXJ0IC09IDg2NDAwMDAwO1xuXHQgICAgICAgIH0gZWxzZSBpZiAodGhpcy50ZEJ1dHRvbnNbaV0ubmFtZSA9PT0gJ1QnKSB7XG5cdCAgICAgICAgICBkYXRlU3RhcnQuc2V0SG91cnMoMCk7XG5cdCAgICAgICAgICBkYXRlU3RhcnQuc2V0TWludXRlcygwKTtcblx0ICAgICAgICAgIGRhdGVTdGFydC5zZXRTZWNvbmRzKDApO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgaWYgKGRhdGVFbmQgPCBkYXRlU3RhcnQpIHtcblx0ICAgICAgICAgIGNvbnRpbnVlO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICB0aGlzLnRkQnV0dG9uc1tpXS5kYXRlU3RhcnQgPSBkYXRlU3RhcnQudmFsdWVPZigpO1xuXHQgICAgICAgICAgdGhpcy50ZEJ1dHRvbnNbaV0uZGF0ZUVuZCA9IGRhdGVFbmQudmFsdWVPZigpO1xuXHQgICAgICAgICAgYnV0dG9ucy5wdXNoKHRoaXMudGRCdXR0b25zW2ldKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAgcmVsYXRpdmVUREJ1dHRvbi5taWxsaXNlY29uZHMgPSBJbmZpbml0eTtcblx0ICAgICAgZm9yIChpID0gMDsgaSA8IHRoaXMudGRCdXR0b25zLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgaWYgKE1hdGguYWJzKHRoaXMudGRCdXR0b25zW2ldLm1pbGxpc2Vjb25kcyAtICh0aGlzLmVuZEFjdGl2ZVdpbmRvdyAtIHRoaXMuc3RhcnRBY3RpdmVXaW5kb3cpKSA8IHJlbGF0aXZlVERCdXR0b24ubWlsbGlzZWNvbmRzKSB7XG5cdCAgICAgICAgICByZWxhdGl2ZVREQnV0dG9uLm1pbGxpc2Vjb25kcyA9IHRoaXMudGRCdXR0b25zW2ldLm1pbGxpc2Vjb25kcztcblx0ICAgICAgICAgIHJlbGF0aXZlVERCdXR0b24ubmFtZSA9IHRoaXMudGRCdXR0b25zW2ldLmFiYnJldmlhdGlvbjtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHRoaXMuc3RhbmRhcmRDb250ZXh1YWxQZXJpb2RzID0gYnV0dG9ucztcblx0ICAgICAgLy8gdGhpcy5kcmF3QnV0dG9uc0NvbnRleHR1YWwodGhpcy5zdGFuZGFyZENvbnRleHVhbFBlcmlvZHMpO1xuXHQgICAgfVxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogQSBmdW5jdGlvbiB0byBzZXQgdGhlIGFjdGl2ZSBwZXJpb2Qnc1xuXHQgICAgICogc3RhcnQgYW5kIGVuZCBwb2ludFxuXHQgICAgICogQHBhcmFtICB7bnVtYmVyfSBkYXRlIHN0YW1wIC0gQSBVTklYIHRpbWVzdGFtcCB0byBiZSBzZXQgYXMgdGhlIHN0YXJ0IHBvaW50IG9mIGFjdGl2ZSBwZXJpb2Rcblx0ICAgICAqIEBwYXJhbSAge251bWJlcn0gZGF0ZSBzdGFtcCAtIEEgVU5JWCB0aW1lc3RhbXAgdG8gYmUgc2V0IGFzIHRoZSBlbmQgcG9pbnQgb2YgYWN0aXZlIHBlcmlvZFxuXHQgICAgICovXG5cdFxuXHQgIH0sIHtcblx0ICAgIGtleTogJ3NldEFjdGl2ZVBlcmlvZCcsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gc2V0QWN0aXZlUGVyaW9kKCkge1xuXHQgICAgICB2YXIgc3RhcnQsIGVuZDtcblx0ICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEpIHtcblx0ICAgICAgICBlbmQgPSB0aGlzLmdsb2JhbFJlYWN0aXZlTW9kZWwubW9kZWxbJ3gtYXhpcy12aXNpYmxlLXJhbmdlLWVuZCddO1xuXHQgICAgICAgIHN0YXJ0ID0gZW5kIC0gYXJndW1lbnRzWzBdO1xuXHQgICAgICB9IGVsc2UgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDIpIHtcblx0ICAgICAgICBzdGFydCA9IGFyZ3VtZW50c1swXTtcblx0ICAgICAgICBlbmQgPSBhcmd1bWVudHNbMV07XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHRoaXMuc3RhcnRBY3RpdmVXaW5kb3cgPSBzdGFydDtcblx0ICAgICAgdGhpcy5lbmRBY3RpdmVXaW5kb3cgPSBlbmQ7XG5cdCAgICAgIHRoaXMuZ2VuZXJhdGVDYWxjdWxhdGVkQnV0dG9ucygpO1xuXHQgICAgICB0aGlzLmdsb2JhbFJlYWN0aXZlTW9kZWwubW9kZWxbJ3gtYXhpcy12aXNpYmxlLXJhbmdlLXN0YXJ0J10gPSB0aGlzLnN0YXJ0QWN0aXZlV2luZG93O1xuXHQgICAgICB0aGlzLmdsb2JhbFJlYWN0aXZlTW9kZWwubW9kZWxbJ3gtYXhpcy12aXNpYmxlLXJhbmdlLWVuZCddID0gdGhpcy5lbmRBY3RpdmVXaW5kb3c7XG5cdCAgICAgIHRoaXMuZ2VuZXJhdGVDb250ZXh0dWFsQnV0dG9ucygpO1xuXHQgICAgfVxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogQSBmdW5jdGlvbiB0byBzZXQgdGhlIHN0YXJ0IGFuZCBlbmQgcG9pbnQgb2YgdGhlXG5cdCAgICAgKiBlbnRpcmUgdGltZS1saW5lXG5cdCAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IGRhdGUgc3RhbXAgLSBBIFVOSVggdGltZXN0YW1wIHRvIGJlIHNldCBhcyB0aGUgc3RhcnQgcG9pbnQgb2YgdGltZS1saW5lXG5cdCAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IGRhdGUgc3RhbXAgLSBBIFVOSVggdGltZXN0YW1wIHRvIGJlIHNldCBhcyB0aGUgZW5kIHBvaW50IG9mIHRpbWUtbGluZVxuXHQgICAgICovXG5cdFxuXHQgIH0sIHtcblx0ICAgIGtleTogJ3NldFRpbWVsaW5lJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRUaW1lbGluZShzdGFydCwgZW5kKSB7XG5cdCAgICAgIHRoaXMuc3RhcnREYXRhc2V0ID0gc3RhcnQ7XG5cdCAgICAgIHRoaXMuZW5kRGF0YXNldCA9IGVuZDtcblx0ICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0YXJ0QWN0aXZlUmFuZ2UnKS5pbm5lckhUTUwgPSBuZXcgRGF0ZSh0aGlzLnN0YXJ0RGF0YXNldCk7XG5cdCAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbmRBY3RpdmVSYW5nZScpLmlubmVySFRNTCA9IG5ldyBEYXRlKHRoaXMuZW5kRGF0YXNldCk7XG5cdCAgICAgIHRoaXMuZ2VuZXJhdGVDYWxjdWxhdGVkQnV0dG9ucygpO1xuXHQgICAgfVxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogQSBmdW5jdGlvbiB0byBzZXQgdGhlIG9iamVjdCB0byBzZXQgdGhlIHVzZXIgcHJlZmVyZW5jZXNcblx0ICAgICAqL1xuXHRcblx0ICB9LCB7XG5cdCAgICBrZXk6ICdjb25maWd1cmUnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGNvbmZpZ3VyZShjb25maWcpIHtcblx0ICAgICAgdGhpcy5jb25maWcgPSBjb25maWc7XG5cdCAgICB9XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBGdXNpb25jaGFydHMgbGlmZSBjeWNsZSBtZXRob2QgZm9yIGV4dGVuc2lvblxuXHQgICAgICovXG5cdFxuXHQgIH0sIHtcblx0ICAgIGtleTogJ2luaXQnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGluaXQocmVxdWlyZSkge1xuXHQgICAgICB2YXIgaW5zdGFuY2UgPSB0aGlzO1xuXHQgICAgICByZXF1aXJlKFsneEF4aXMnLCAneUF4aXMnLCAnZ3JhcGhpY3MnLCAnY2hhcnQnLCAnZGF0YXNldCcsICdQbG90TWFuYWdlcicsICdjYW52YXNDb25maWcnLCAnTWFya2VyTWFuYWdlcicsICdyZWFjdGl2ZU1vZGVsJywgJ2dsb2JhbFJlYWN0aXZlTW9kZWwnLCAnc3BhY2VNYW5hZ2VySW5zdGFuY2UnLCAnc21hcnRMYWJlbCcsIGZ1bmN0aW9uICh4QXhpcywgeUF4aXMsIGdyYXBoaWNzLCBjaGFydCwgZGF0YXNldCwgcGxvdE1hbmFnZXIsIGNhbnZhc0NvbmZpZywgbWFya2VyTWFuYWdlciwgcmVhY3RpdmVNb2RlbCwgZ2xvYmFsUmVhY3RpdmVNb2RlbCwgc3BhY2VNYW5hZ2VySW5zdGFuY2UsIHNtYXJ0TGFiZWwpIHtcblx0ICAgICAgICBpbnN0YW5jZS54QXhpcyA9IHhBeGlzO1xuXHQgICAgICAgIGluc3RhbmNlLnlBeGlzID0geUF4aXM7XG5cdCAgICAgICAgaW5zdGFuY2UuZ3JhcGhpY3MgPSBncmFwaGljcztcblx0ICAgICAgICBpbnN0YW5jZS5jaGFydCA9IGNoYXJ0O1xuXHQgICAgICAgIGluc3RhbmNlLmRhdGFzZXQgPSBkYXRhc2V0O1xuXHQgICAgICAgIGluc3RhbmNlLnBsb3RNYW5hZ2VyID0gcGxvdE1hbmFnZXI7XG5cdCAgICAgICAgaW5zdGFuY2UubWFya2VyTWFuYWdlciA9IG1hcmtlck1hbmFnZXI7XG5cdCAgICAgICAgaW5zdGFuY2UuY2FudmFzQ29uZmlnID0gY2FudmFzQ29uZmlnO1xuXHQgICAgICAgIGluc3RhbmNlLnJlYWN0aXZlTW9kZWwgPSByZWFjdGl2ZU1vZGVsO1xuXHQgICAgICAgIGluc3RhbmNlLmdsb2JhbFJlYWN0aXZlTW9kZWwgPSBnbG9iYWxSZWFjdGl2ZU1vZGVsO1xuXHQgICAgICAgIGluc3RhbmNlLnNwYWNlTWFuYWdlckluc3RhbmNlID0gc3BhY2VNYW5hZ2VySW5zdGFuY2U7XG5cdCAgICAgICAgaW5zdGFuY2Uuc21hcnRMYWJlbCA9IHNtYXJ0TGFiZWw7XG5cdCAgICAgIH1dKTtcblx0ICAgICAgdGhpcy5zcGFjZU1hbmFnZXJJbnN0YW5jZSA9IGluc3RhbmNlLnNwYWNlTWFuYWdlckluc3RhbmNlO1xuXHQgICAgICB0aGlzLmdsb2JhbFJlYWN0aXZlTW9kZWwgPSBpbnN0YW5jZS5nbG9iYWxSZWFjdGl2ZU1vZGVsO1xuXHQgICAgICB0aGlzLmVuZEFjdGl2ZVdpbmRvdyA9IGluc3RhbmNlLmdsb2JhbFJlYWN0aXZlTW9kZWwubW9kZWxbJ3gtYXhpcy12aXNpYmxlLXJhbmdlLWVuZCddO1xuXHQgICAgICB0aGlzLnN0YXJ0QWN0aXZlV2luZG93ID0gaW5zdGFuY2UuZ2xvYmFsUmVhY3RpdmVNb2RlbC5tb2RlbFsneC1heGlzLXZpc2libGUtcmFuZ2Utc3RhcnQnXTtcblx0ICAgICAgdGhpcy5zdGFydERhdGFzZXQgPSBpbnN0YW5jZS5nbG9iYWxSZWFjdGl2ZU1vZGVsLm1vZGVsWyd4LWF4aXMtYWJzb2x1dGUtcmFuZ2Utc3RhcnQnXTtcblx0ICAgICAgdGhpcy5lbmREYXRhc2V0ID0gaW5zdGFuY2UuZ2xvYmFsUmVhY3RpdmVNb2RlbC5tb2RlbFsneC1heGlzLWFic29sdXRlLXJhbmdlLWVuZCddO1xuXHQgICAgICB0aGlzLnNldEFjdGl2ZVBlcmlvZCh0aGlzLnN0YXJ0QWN0aXZlV2luZG93LCB0aGlzLmVuZEFjdGl2ZVdpbmRvdyk7XG5cdCAgICAgIC8vIGluc3RhbmNlLmdsb2JhbFJlYWN0aXZlTW9kZWwubW9kZWxbJ194LWF4aXMtdmlzaWJsZS1yYW5nZS1zdGFydCddICs9IDEyNDQxNjAwMDAwMDtcblx0ICAgICAgdGhpcy5zZXRBY3RpdmVQZXJpb2QodGhpcy5zdGFydEFjdGl2ZVdpbmRvdywgdGhpcy5lbmRBY3RpdmVXaW5kb3cpO1xuXHRcblx0ICAgICAgdGhpcy50b29sYmFycyA9IFtdO1xuXHRcblx0ICAgICAgdGhpcy5tZWFzdXJlbWVudCA9IHt9O1xuXHRcblx0ICAgICAgdGhpcy50b29sYmFycy5wdXNoKHRoaXMuY3JlYXRlVG9vbGJhcigpKTtcblx0ICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnY3JlYXRlVG9vbGJhcicsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlVG9vbGJhcigpIHtcblx0ICAgICAgdmFyIF90aGlzID0gdGhpcztcblx0XG5cdCAgICAgIHZhciB1bmlncm91cCxcblx0ICAgICAgICAgIHRvb2xiYXIsXG5cdCAgICAgICAgICBjYWxjdWxhdGVkQnV0dG9ucyxcblx0ICAgICAgICAgIGNvbnRleHR1YWxCdXR0b25zLFxuXHQgICAgICAgICAgYWxsQnV0dG9uLFxuXHQgICAgICAgICAgc2VsZiA9IHRoaXMsXG5cdCAgICAgICAgICBlbmRBY3RpdmUgPSB0aGlzLmdsb2JhbFJlYWN0aXZlTW9kZWwubW9kZWxbJ3gtYXhpcy12aXNpYmxlLXJhbmdlLWVuZCddLFxuXHQgICAgICAgICAgZGVkdWN0b3JBciA9IFtdLFxuXHQgICAgICAgICAgc3RhcnRNdWx0aXBsaWVyLFxuXHQgICAgICAgICAgZGVkdWN0b3IsXG5cdCAgICAgICAgICBpLFxuXHQgICAgICAgICAgaixcblx0ICAgICAgICAgIG1hcmdpbixcblx0ICAgICAgICAgIGZyb21EYXRlTGFiZWwsXG5cdCAgICAgICAgICBncm91cDtcblx0XG5cdCAgICAgIGdyb3VwID0gbmV3IHRoaXMudG9vbGJveC5Db21wb25lbnRHcm91cCh7XG5cdCAgICAgICAgcGFwZXI6IHRoaXMuZ3JhcGhpY3MucGFwZXIsXG5cdCAgICAgICAgY2hhcnQ6IHRoaXMuY2hhcnQsXG5cdCAgICAgICAgc21hcnRMYWJlbDogdGhpcy5zbWFydExhYmVsLFxuXHQgICAgICAgIGNoYXJ0Q29udGFpbmVyOiB0aGlzLmdyYXBoaWNzLmNvbnRhaW5lclxuXHQgICAgICB9KTtcblx0XG5cdCAgICAgIHVuaWdyb3VwID0gbmV3IHRoaXMudG9vbGJveC5VbmlTZWxlY3RDb21wb25lbnRHcm91cCh7XG5cdCAgICAgICAgcGFwZXI6IHRoaXMuZ3JhcGhpY3MucGFwZXIsXG5cdCAgICAgICAgY2hhcnQ6IHRoaXMuY2hhcnQsXG5cdCAgICAgICAgc21hcnRMYWJlbDogdGhpcy5zbWFydExhYmVsLFxuXHQgICAgICAgIGNoYXJ0Q29udGFpbmVyOiB0aGlzLmdyYXBoaWNzLmNvbnRhaW5lclxuXHQgICAgICB9KTtcblx0ICAgICAgdW5pZ3JvdXAuc2V0Q29uZmlnKHtcblx0ICAgICAgICBmaWxsOiAnI2ZmZicsXG5cdCAgICAgICAgYm9yZGVyVGhpY2tuZXNzOiAwXG5cdCAgICAgIH0pO1xuXHQgICAgICBncm91cC5zZXRDb25maWcoe1xuXHQgICAgICAgIGZpbGw6ICcjZmZmJyxcblx0ICAgICAgICBib3JkZXJUaGlja25lc3M6IDBcblx0ICAgICAgfSk7XG5cdCAgICAgIHRvb2xiYXIgPSBuZXcgdGhpcy5Ib3Jpem9udGFsVG9vbGJhcih7XG5cdCAgICAgICAgcGFwZXI6IHRoaXMuZ3JhcGhpY3MucGFwZXIsXG5cdCAgICAgICAgY2hhcnQ6IHRoaXMuY2hhcnQsXG5cdCAgICAgICAgc21hcnRMYWJlbDogdGhpcy5zbWFydExhYmVsLFxuXHQgICAgICAgIGNoYXJ0Q29udGFpbmVyOiB0aGlzLmdyYXBoaWNzLmNvbnRhaW5lclxuXHQgICAgICB9KTtcblx0ICAgICAgdG9vbGJhci5zZXRDb25maWcoe1xuXHQgICAgICAgIGZpbGw6ICcjZmZmJyxcblx0ICAgICAgICBib3JkZXJUaGlja25lc3M6IDBcblx0ICAgICAgfSk7XG5cdCAgICAgIGZyb21EYXRlTGFiZWwgPSBuZXcgdGhpcy50b29sYm94LkxhYmVsKCdab29tOicsIHtcblx0ICAgICAgICBzbWFydExhYmVsOiB0aGlzLnNtYXJ0TGFiZWwsXG5cdCAgICAgICAgcGFwZXI6IHRoaXMuZ3JhcGhpY3MucGFwZXJcblx0ICAgICAgfSwge1xuXHQgICAgICAgIHRleHQ6IHtcblx0ICAgICAgICAgIHN0eWxlOiB7XG5cdCAgICAgICAgICAgICdmb250LXNpemUnOiAnMTUnLFxuXHQgICAgICAgICAgICAnZm9udEZhbWlseSc6ICdNeXJpYWRQcm8nXG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9KTtcblx0ICAgICAgZ3JvdXAuYWRkU3ltYm9sKGZyb21EYXRlTGFiZWwpO1xuXHQgICAgICBhbGxCdXR0b24gPSBuZXcgdGhpcy50b29sYm94LlN5bWJvbCgnQUxMJywgdHJ1ZSwge1xuXHQgICAgICAgIHBhcGVyOiB0aGlzLmdyYXBoaWNzLnBhcGVyLFxuXHQgICAgICAgIGNoYXJ0OiB0aGlzLmNoYXJ0LFxuXHQgICAgICAgIHNtYXJ0TGFiZWw6IHRoaXMuc21hcnRMYWJlbCxcblx0ICAgICAgICBjaGFydENvbnRhaW5lcjogdGhpcy5ncmFwaGljcy5jb250YWluZXJcblx0ICAgICAgfSwge1xuXHQgICAgICAgIGZpbGw6ICcjZmZmZmZmJyxcblx0ICAgICAgICBsYWJlbEZpbGw6ICcjNjk2OTY5Jyxcblx0ICAgICAgICBzeW1ib2xTdHJva2VXaWR0aDogJzInLFxuXHQgICAgICAgIHN5bWJvbFN0cm9rZTogJyMwMDAwMDAnLFxuXHQgICAgICAgIHN0cm9rZVdpZHRoOiAnMScsXG5cdCAgICAgICAgaG92ZXJGaWxsOiAnIzdmN2Y3ZicsXG5cdCAgICAgICAgcmFkaXVzOiAxLFxuXHQgICAgICAgIG1hcmdpbjoge1xuXHQgICAgICAgICAgcmlnaHQ6IDVcblx0ICAgICAgICB9XG5cdCAgICAgIH0pLmF0dGFjaEV2ZW50SGFuZGxlcnMoe1xuXHQgICAgICAgIGNsaWNrOiBmdW5jdGlvbiBjbGljaygpIHtcblx0ICAgICAgICAgIHNlbGYuc2V0QWN0aXZlUGVyaW9kKHNlbGYuc3RhcnREYXRhc2V0LCBzZWxmLmVuZERhdGFzZXQpO1xuXHQgICAgICAgICAgdG9vbGJhci5kaXNwb3NlKCk7XG5cdCAgICAgICAgICBzZWxmLmNsaWNrZWRJZCA9ICdBTEwnO1xuXHQgICAgICAgICAgc2VsZi50b29sYmFycy5wb3AoKTtcblx0ICAgICAgICAgIHNlbGYudG9vbGJhcnMucHVzaChzZWxmLmNyZWF0ZVRvb2xiYXIoKSk7XG5cdCAgICAgICAgICBzZWxmLmdldExvZ2ljYWxTcGFjZSgpO1xuXHQgICAgICAgICAgc2VsZi5kcmF3KCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9KTtcblx0XG5cdCAgICAgIHVuaWdyb3VwLmFkZFN5bWJvbChhbGxCdXR0b24pO1xuXHQgICAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgZm9yIChqID0gdGhpcy5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW2ldLm11bHRpcGxpZXJzLmxlbmd0aCAtIDE7IGogPj0gMDsgai0tKSB7XG5cdCAgICAgICAgICBkZWR1Y3RvckFyLnB1c2goc2VsZi5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW2ldLm11bHRpcGxpZXJzW2pdICogc2VsZi5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW2ldLm1pbGxpc2Vjb25kcyk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdFxuXHQgICAgICBjYWxjdWxhdGVkQnV0dG9ucyA9IFtdO1xuXHRcblx0ICAgICAgdmFyIF9sb29wID0gZnVuY3Rpb24gX2xvb3AoX2kpIHtcblx0ICAgICAgICBpZiAoX2kgPT09IHNlbGYuc3RhcnRQb2ludFVuaXQpIHtcblx0ICAgICAgICAgIHN0YXJ0TXVsdGlwbGllciA9IHNlbGYuc3RhcnRQb2ludE11bHRpcGxpZXI7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHN0YXJ0TXVsdGlwbGllciA9IHNlbGYuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kc1tfaV0ubXVsdGlwbGllcnMubGVuZ3RoIC0gMTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHZhciBfbG9vcDMgPSBmdW5jdGlvbiBfbG9vcDMoX2opIHtcblx0ICAgICAgICAgIG1hcmdpbiA9IF9pID09PSBzZWxmLm5vQ2FsY0J1dHRvbnMgJiYgX2ogPT09IDAgPyA1IDogMDtcblx0ICAgICAgICAgIGNvbnNvbGUubG9nKGVuZEFjdGl2ZSwgX2ksIHNlbGYubm9DYWxjQnV0dG9ucywgX2osIG1hcmdpbik7XG5cdCAgICAgICAgICBjYWxjdWxhdGVkQnV0dG9uc1tfaV0gPSBuZXcgX3RoaXMudG9vbGJveC5TeW1ib2woc2VsZi5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW19pXS5tdWx0aXBsaWVyc1tfal0gKyBzZWxmLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHNbX2ldLmFiYnJldmlhdGlvbiwgdHJ1ZSwge1xuXHQgICAgICAgICAgICBwYXBlcjogX3RoaXMuZ3JhcGhpY3MucGFwZXIsXG5cdCAgICAgICAgICAgIGNoYXJ0OiBfdGhpcy5jaGFydCxcblx0ICAgICAgICAgICAgc21hcnRMYWJlbDogX3RoaXMuc21hcnRMYWJlbCxcblx0ICAgICAgICAgICAgY2hhcnRDb250YWluZXI6IF90aGlzLmdyYXBoaWNzLmNvbnRhaW5lclxuXHQgICAgICAgICAgfSwge1xuXHQgICAgICAgICAgICBmaWxsOiAnI2ZmZmZmZicsXG5cdCAgICAgICAgICAgIGxhYmVsRmlsbDogJyM2OTY5NjknLFxuXHQgICAgICAgICAgICBzeW1ib2xTdHJva2VXaWR0aDogJzInLFxuXHQgICAgICAgICAgICBzeW1ib2xTdHJva2U6ICcjMDAwMDAwJyxcblx0ICAgICAgICAgICAgc3Ryb2tlV2lkdGg6ICcxJyxcblx0ICAgICAgICAgICAgaG92ZXJGaWxsOiAnIzdmN2Y3ZicsXG5cdCAgICAgICAgICAgIHJhZGl1czogMSxcblx0ICAgICAgICAgICAgbWFyZ2luOiB7XG5cdCAgICAgICAgICAgICAgcmlnaHQ6IG1hcmdpblxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9KS5hdHRhY2hFdmVudEhhbmRsZXJzKHtcblx0ICAgICAgICAgICAgJ2NsaWNrJzogZnVuY3Rpb24gY2xpY2soKSB7XG5cdCAgICAgICAgICAgICAgZGVkdWN0b3IgPSBzZWxmLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHNbX2ldLm11bHRpcGxpZXJzW19qXSAqIHNlbGYuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kc1tfaV0ubWlsbGlzZWNvbmRzO1xuXHQgICAgICAgICAgICAgIHNlbGYuY2xpY2tlZElkID0gc2VsZi5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW19pXS5tdWx0aXBsaWVyc1tfal0gKyBzZWxmLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHNbX2ldLmFiYnJldmlhdGlvbjtcblx0ICAgICAgICAgICAgICBzZWxmLnNldEFjdGl2ZVBlcmlvZChkZWR1Y3Rvcik7XG5cdCAgICAgICAgICAgICAgdG9vbGJhci5kaXNwb3NlKCk7XG5cdCAgICAgICAgICAgICAgc2VsZi50b29sYmFycy5wb3AoKTtcblx0ICAgICAgICAgICAgICBzZWxmLnRvb2xiYXJzLnB1c2goc2VsZi5jcmVhdGVUb29sYmFyKCkpO1xuXHQgICAgICAgICAgICAgIHNlbGYuZ2V0TG9naWNhbFNwYWNlKCk7XG5cdCAgICAgICAgICAgICAgc2VsZi5kcmF3KCk7XG5cdCAgICAgICAgICAgICAgLy8gdGhpcy50b29sYmFyc1t0aGlzLnRvb2xiYXJzLmxlbmd0aCAtIDFdID0gdGhpcy5jcmVhdGVUb29sYmFyKCk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgdW5pZ3JvdXAuYWRkU3ltYm9sKGNhbGN1bGF0ZWRCdXR0b25zW19pXSk7XG5cdCAgICAgICAgfTtcblx0XG5cdCAgICAgICAgZm9yICh2YXIgX2ogPSBzdGFydE11bHRpcGxpZXI7IF9qID49IDA7IF9qLS0pIHtcblx0ICAgICAgICAgIF9sb29wMyhfaik7XG5cdCAgICAgICAgfVxuXHQgICAgICB9O1xuXHRcblx0ICAgICAgZm9yICh2YXIgX2kgPSBzZWxmLnN0YXJ0UG9pbnRVbml0OyBfaSA+PSAwOyBfaS0tKSB7XG5cdCAgICAgICAgX2xvb3AoX2kpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBjb250ZXh0dWFsQnV0dG9ucyA9IFtdO1xuXHRcblx0ICAgICAgdmFyIF9sb29wMiA9IGZ1bmN0aW9uIF9sb29wMihfaTIpIHtcblx0ICAgICAgICBjb250ZXh0dWFsQnV0dG9uc1tfaTJdID0gbmV3IF90aGlzLnRvb2xib3guU3ltYm9sKF90aGlzLnN0YW5kYXJkQ29udGV4dWFsUGVyaW9kc1tfaTJdLmFiYnJldmlhdGlvbiwgdHJ1ZSwge1xuXHQgICAgICAgICAgcGFwZXI6IF90aGlzLmdyYXBoaWNzLnBhcGVyLFxuXHQgICAgICAgICAgY2hhcnQ6IF90aGlzLmNoYXJ0LFxuXHQgICAgICAgICAgc21hcnRMYWJlbDogX3RoaXMuc21hcnRMYWJlbCxcblx0ICAgICAgICAgIGNoYXJ0Q29udGFpbmVyOiBfdGhpcy5ncmFwaGljcy5jb250YWluZXJcblx0ICAgICAgICB9LCB7XG5cdCAgICAgICAgICBmaWxsOiAnI2ZmZmZmZicsXG5cdCAgICAgICAgICBsYWJlbEZpbGw6ICcjNjk2OTY5Jyxcblx0ICAgICAgICAgIHN5bWJvbFN0cm9rZVdpZHRoOiAnMicsXG5cdCAgICAgICAgICBzeW1ib2xTdHJva2U6ICcjMDAwMDAwJyxcblx0ICAgICAgICAgIHN0cm9rZVdpZHRoOiAnMScsXG5cdCAgICAgICAgICBob3ZlckZpbGw6ICcjN2Y3ZjdmJyxcblx0ICAgICAgICAgIHJhZGl1czogMSxcblx0ICAgICAgICAgIG1hcmdpbjoge1xuXHQgICAgICAgICAgICByaWdodDogMFxuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0pLmF0dGFjaEV2ZW50SGFuZGxlcnMoe1xuXHQgICAgICAgICAgJ2NsaWNrJzogZnVuY3Rpb24gY2xpY2soKSB7XG5cdCAgICAgICAgICAgIHNlbGYuc2V0QWN0aXZlUGVyaW9kKHNlbGYuc3RhbmRhcmRDb250ZXh1YWxQZXJpb2RzW19pMl0uZGF0ZVN0YXJ0LCBzZWxmLnN0YW5kYXJkQ29udGV4dWFsUGVyaW9kc1tfaTJdLmRhdGVFbmQpO1xuXHQgICAgICAgICAgICBzZWxmLmNsaWNrZWRJZCA9IHNlbGYuc3RhbmRhcmRDb250ZXh1YWxQZXJpb2RzW19pMl0uYWJicmV2aWF0aW9uO1xuXHQgICAgICAgICAgICB0b29sYmFyLmRpc3Bvc2UoKTtcblx0ICAgICAgICAgICAgc2VsZi50b29sYmFycy5wb3AoKTtcblx0ICAgICAgICAgICAgc2VsZi50b29sYmFycy5wdXNoKHNlbGYuY3JlYXRlVG9vbGJhcigpKTtcblx0ICAgICAgICAgICAgc2VsZi5nZXRMb2dpY2FsU3BhY2UoKTtcblx0ICAgICAgICAgICAgc2VsZi5kcmF3KCk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cdCAgICAgICAgdW5pZ3JvdXAuYWRkU3ltYm9sKGNvbnRleHR1YWxCdXR0b25zW19pMl0pO1xuXHQgICAgICB9O1xuXHRcblx0ICAgICAgZm9yICh2YXIgX2kyID0gMDsgX2kyIDwgdGhpcy5zdGFuZGFyZENvbnRleHVhbFBlcmlvZHMubGVuZ3RoOyBfaTIrKykge1xuXHQgICAgICAgIF9sb29wMihfaTIpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICAvLyBidG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdCVVRUT04nKTtcblx0ICAgICAgLy8gYnRuLmlkID0gc3RhbmRhcmRQZXJpb2RzW2ldLmFiYnJldmlhdGlvbjtcblx0ICAgICAgLy8gYnRuLmlubmVySFRNTCA9IHN0YW5kYXJkUGVyaW9kc1tpXS5hYmJyZXZpYXRpb247XG5cdCAgICAgIC8vIGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGV2ZW50QnRuLmJpbmQodGhpcywgc3RhbmRhcmRQZXJpb2RzW2ldKSk7XG5cdCAgICAgIC8vIGNvbnRleHR1YWxCdXR0b25zLmFwcGVuZENoaWxkKGJ0bik7XG5cdFxuXHQgICAgICB0aGlzLlN5bWJvbFN0b3JlLnJlZ2lzdGVyKCd0ZXh0Qm94SWNvbicsIGZ1bmN0aW9uICh4LCB5LCByYWQsIHcsIGgsIHBhZFgsIHBhZFkpIHtcblx0ICAgICAgICB2YXIgeDEgPSB4IC0gdyAvIDIgKyBwYWRYIC8gMixcblx0ICAgICAgICAgICAgeDIgPSB4ICsgdyAvIDIgLSBwYWRYIC8gMixcblx0ICAgICAgICAgICAgeTEgPSB5IC0gaCAvIDIgKyBwYWRZIC8gMixcblx0ICAgICAgICAgICAgeTIgPSB5ICsgaCAvIDIgLSBwYWRZIC8gMjtcblx0XG5cdCAgICAgICAgcmV0dXJuIFsnTScsIHgxLCB5MSwgJ0wnLCB4MiwgeTEsICdMJywgeDIsIHkyLCAnTCcsIHgxLCB5MiwgJ1onXTtcblx0ICAgICAgfSk7XG5cdFxuXHQgICAgICB0b29sYmFyLmFkZENvbXBvbmVudChncm91cCk7XG5cdCAgICAgIHRvb2xiYXIuYWRkQ29tcG9uZW50KHVuaWdyb3VwKTtcblx0ICAgICAgcmV0dXJuIHRvb2xiYXI7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnZ2V0TG9naWNhbFNwYWNlJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRMb2dpY2FsU3BhY2UoYXZhaWxhYmxlV2lkdGgsIGF2YWlsYWJsZUhlaWdodCkge1xuXHQgICAgICBhdmFpbGFibGVXaWR0aCAvPSAyO1xuXHQgICAgICB2YXIgbG9naWNhbFNwYWNlLFxuXHQgICAgICAgICAgd2lkdGggPSAwLFxuXHQgICAgICAgICAgaGVpZ2h0ID0gMCxcblx0ICAgICAgICAgIGksXG5cdCAgICAgICAgICBsbjtcblx0XG5cdCAgICAgIGZvciAoaSA9IDAsIGxuID0gdGhpcy50b29sYmFycy5sZW5ndGg7IGkgPCBsbjsgaSsrKSB7XG5cdCAgICAgICAgbG9naWNhbFNwYWNlID0gdGhpcy50b29sYmFyc1tpXS5nZXRMb2dpY2FsU3BhY2UoYXZhaWxhYmxlV2lkdGgsIGF2YWlsYWJsZUhlaWdodCk7XG5cdCAgICAgICAgd2lkdGggPSBNYXRoLm1heChsb2dpY2FsU3BhY2Uud2lkdGgsIHdpZHRoKTtcblx0ICAgICAgICBoZWlnaHQgKz0gbG9naWNhbFNwYWNlLmhlaWdodDtcblx0ICAgICAgICB0aGlzLnRvb2xiYXJzW2ldLndpZHRoID0gbG9naWNhbFNwYWNlLndpZHRoO1xuXHQgICAgICAgIHRoaXMudG9vbGJhcnNbaV0uaGVpZ2h0ID0gbG9naWNhbFNwYWNlLmhlaWdodDtcblx0ICAgICAgfVxuXHQgICAgICBoZWlnaHQgKz0gdGhpcy5wYWRkaW5nO1xuXHQgICAgICByZXR1cm4ge1xuXHQgICAgICAgIHdpZHRoOiB3aWR0aCxcblx0ICAgICAgICBoZWlnaHQ6IGhlaWdodFxuXHQgICAgICB9O1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ3BsYWNlSW5DYW52YXMnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHBsYWNlSW5DYW52YXMoKSB7XG5cdCAgICAgIHZhciBfc2VsZiA9IHRoaXM7XG5cdCAgICAgIF9zZWxmLnBhZGRpbmcgPSA1O1xuXHQgICAgICBfc2VsZi5zcGFjZU1hbmFnZXJJbnN0YW5jZS5hZGQoW3tcblx0ICAgICAgICBuYW1lOiBmdW5jdGlvbiBuYW1lKCkge1xuXHQgICAgICAgICAgcmV0dXJuICdzdGFuZGFyZC1wZXJpb2Qtc2VsZWN0b3ItZXh0Jztcblx0ICAgICAgICB9LFxuXHQgICAgICAgIHJlZjogZnVuY3Rpb24gcmVmKG9iaikge1xuXHQgICAgICAgICAgcmV0dXJuIG9ialsnMCddO1xuXHQgICAgICAgIH0sXG5cdCAgICAgICAgc2VsZjogZnVuY3Rpb24gc2VsZigpIHtcblx0ICAgICAgICAgIHJldHVybiBfc2VsZjtcblx0ICAgICAgICB9LFxuXHQgICAgICAgIHByaW9yaXR5OiBmdW5jdGlvbiBwcmlvcml0eSgpIHtcblx0ICAgICAgICAgIHJldHVybiAyO1xuXHQgICAgICAgIH0sXG5cdCAgICAgICAgbGF5b3V0OiBmdW5jdGlvbiBsYXlvdXQob2JqKSB7XG5cdCAgICAgICAgICByZXR1cm4gb2JqLmlubGluZTtcblx0ICAgICAgICB9LFxuXHQgICAgICAgIG9yaWVudGF0aW9uOiBbe1xuXHQgICAgICAgICAgdHlwZTogZnVuY3Rpb24gdHlwZShvYmopIHtcblx0ICAgICAgICAgICAgcmV0dXJuIG9iai5ob3Jpem9udGFsO1xuXHQgICAgICAgICAgfSxcblx0ICAgICAgICAgIHBvc2l0aW9uOiBbe1xuXHQgICAgICAgICAgICB0eXBlOiBmdW5jdGlvbiB0eXBlKG9iaikge1xuXHQgICAgICAgICAgICAgIHJldHVybiBvYmoudG9wO1xuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBhbGlnbm1lbnQ6IFt7XG5cdCAgICAgICAgICAgICAgdHlwZTogZnVuY3Rpb24gdHlwZShvYmopIHtcblx0ICAgICAgICAgICAgICAgIHJldHVybiBvYmoubGVmdDtcblx0ICAgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICAgIGRpbWVuc2lvbnM6IFtmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgICB2YXIgcGFyZW50ID0gdGhpcy5nZXRQYXJlbnRDb21wb25lbnRHcm91cCgpO1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuIF9zZWxmLmdldExvZ2ljYWxTcGFjZShwYXJlbnQuZ2V0V2lkdGgoKSwgcGFyZW50LmdldEhlaWdodCgpKTtcblx0ICAgICAgICAgICAgICB9XVxuXHQgICAgICAgICAgICB9XVxuXHQgICAgICAgICAgfV1cblx0ICAgICAgICB9XVxuXHQgICAgICB9XSk7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnc2V0RHJhd2luZ0NvbmZpZ3VyYXRpb24nLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHNldERyYXdpbmdDb25maWd1cmF0aW9uKHgsIHksIHdpZHRoLCBoZWlnaHQsIGdyb3VwKSB7XG5cdCAgICAgIHZhciBtZXMgPSB0aGlzLm1lYXN1cmVtZW50O1xuXHQgICAgICBtZXMueCA9IHg7XG5cdCAgICAgIG1lcy55ID0geTtcblx0ICAgICAgbWVzLndpZHRoID0gd2lkdGg7XG5cdCAgICAgIG1lcy5oZWlnaHQgPSBoZWlnaHQ7XG5cdFxuXHQgICAgICB0aGlzLnBhcmVudEdyb3VwID0gZ3JvdXA7XG5cdFxuXHQgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdkcmF3Jyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBkcmF3KHgsIHksIHdpZHRoLCBoZWlnaHQsIGdyb3VwKSB7XG5cdCAgICAgIHZhciBtZWFzdXJlbWVudCA9IHRoaXMubWVhc3VyZW1lbnQsXG5cdCAgICAgICAgICB0b29sYmFycyA9IHRoaXMudG9vbGJhcnMsXG5cdCAgICAgICAgICBsbixcblx0ICAgICAgICAgIGksXG5cdCAgICAgICAgICB0b29sYmFyLFxuXHQgICAgICAgICAgYm91bmRFbGVtZW50LFxuXHQgICAgICAgICAgYkJveCxcblx0ICAgICAgICAgIHgxLFxuXHQgICAgICAgICAgeDIsXG5cdCAgICAgICAgICB5Mjtcblx0XG5cdCAgICAgIHggPSB4ID09PSB1bmRlZmluZWQgPyBtZWFzdXJlbWVudC54IDogeDtcblx0ICAgICAgeSA9IHkgPT09IHVuZGVmaW5lZCA/IG1lYXN1cmVtZW50LnkgOiB5O1xuXHQgICAgICB3aWR0aCA9IHdpZHRoID09PSB1bmRlZmluZWQgPyBtZWFzdXJlbWVudC53aWR0aCA6IHdpZHRoO1xuXHQgICAgICBoZWlnaHQgPSBoZWlnaHQgPT09IHVuZGVmaW5lZCA/IG1lYXN1cmVtZW50LmhlaWdodCA6IGhlaWdodDtcblx0ICAgICAgZ3JvdXAgPSBncm91cCA9PT0gdW5kZWZpbmVkID8gdGhpcy5wYXJlbnRHcm91cCA6IGdyb3VwO1xuXHQgICAgICBpZiAod2lkdGggJiYgaGVpZ2h0KSB7XG5cdCAgICAgICAgZm9yIChpID0gMCwgbG4gPSB0b29sYmFycy5sZW5ndGg7IGkgPCBsbjsgaSsrKSB7XG5cdCAgICAgICAgICB0b29sYmFyID0gdG9vbGJhcnNbaV07XG5cdCAgICAgICAgICB0b29sYmFyLmRyYXcoeCwgeSwgZ3JvdXApO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICBjb25zb2xlLmxvZyh0b29sYmFycyk7XG5cdCAgICAgIGZvciAodmFyIF9pMyA9IDAsIGlpID0gdG9vbGJhcnNbMF0uY29tcG9uZW50R3JvdXBzWzFdLnN5bWJvbExpc3Q7IF9pMyA8IGlpLmxlbmd0aDsgX2kzKyspIHtcblx0ICAgICAgICBpZiAoaWlbX2kzXS5zeW1ib2wgPT09IHRoaXMuY2xpY2tlZElkKSB7XG5cdCAgICAgICAgICBib3VuZEVsZW1lbnQgPSBpaVtfaTNdLmdldEJvdW5kRWxlbWVudCgpO1xuXHQgICAgICAgICAgYkJveCA9IGJvdW5kRWxlbWVudC5nZXRCQm94KCk7XG5cdCAgICAgICAgICB4MSA9IGJCb3gueDtcblx0ICAgICAgICAgIHgyID0gYkJveC54Mjtcblx0ICAgICAgICAgIHkyID0gYkJveC55Mjtcblx0XG5cdCAgICAgICAgICB0aGlzLmdyYXBoaWNzLnBhcGVyLnBhdGgoe1xuXHQgICAgICAgICAgICBwYXRoOiBbJ00nLCB4MSwgeTIgLSAyIC8gMiwgJ0wnLCB4MiwgeTIgLSAyIC8gMl0sXG5cdCAgICAgICAgICAgICdzdHJva2UnOiAnI2ZmMDAwMCdcblx0ICAgICAgICAgIH0pLnRvRnJvbnQoKTtcblx0ICAgICAgICAgIC8vIHRoaXMuX3BhcmVudEdyb3VwLnNldFN0YXRlKHRoaXMpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1dKTtcblx0XG5cdCAgcmV0dXJuIFN0YW5kYXJkUGVyaW9kU2VsZWN0b3I7XG5cdH0oKTtcblx0XG5cdGlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgbW9kdWxlLmV4cG9ydHMgIT09ICd1bmRlZmluZWQnKSB7XG5cdCAgbW9kdWxlLmV4cG9ydHMgPSBTdGFuZGFyZFBlcmlvZFNlbGVjdG9yO1xuXHR9IGVsc2Uge1xuXHQgIHdpbmRvdy5TdGFuZGFyZFBlcmlvZCA9IFN0YW5kYXJkUGVyaW9kU2VsZWN0b3I7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGRlcCkge1xuXHQgIHZhciBTdGFuZGFyZFBlcmlvZFNlbGVjdG9yID0gZnVuY3Rpb24gKCkge1xuXHQgICAgZnVuY3Rpb24gU3RhbmRhcmRQZXJpb2RTZWxlY3RvcigpIHtcblx0ICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFN0YW5kYXJkUGVyaW9kU2VsZWN0b3IpO1xuXHRcblx0ICAgICAgLyoqXG5cdCAgICAgICAqIEBwcml2YXRlXG5cdCAgICAgICAqL1xuXHQgICAgICB0aGlzLnJhdGlvID0gODtcblx0ICAgICAgdGhpcy50b29sYm94ID0gRnVzaW9uQ2hhcnRzLmdldENvbXBvbmVudCgnYXBpJywgJ3Rvb2xib3gnKTtcblx0ICAgICAgdGhpcy5Ib3Jpem9udGFsVG9vbGJhciA9IHRoaXMudG9vbGJveC5Ib3Jpem9udGFsVG9vbGJhcjtcblx0ICAgICAgdGhpcy5Db21wb25lbnRHcm91cCA9IHRoaXMudG9vbGJveC5Db21wb25lbnRHcm91cDtcblx0ICAgICAgdGhpcy5TeW1ib2xTdG9yZSA9IHRoaXMudG9vbGJveC5TeW1ib2xTdG9yZTtcblx0ICAgICAgdGhpcy5hbGwgPSAxO1xuXHQgICAgICB0aGlzLmNhbGN1bGF0ZWRQZXJpb2RzID0gW107XG5cdCAgICAgIHRoaXMuc3RhcnREYXRhc2V0ID0gMDtcblx0ICAgICAgLy8gdGhpcy5lbmREYXRhc2V0ID0gdGhpcy5nbG9iYWxSZWFjdGl2ZU1vZGVsLm1vZGVsWyd4LWF4aXMtYWJzb2x1dGUtcmFuZ2UtZW5kJ107XG5cdCAgICAgIHRoaXMuc3RhcnRBY3RpdmVXaW5kb3cgPSAwO1xuXHQgICAgICB0aGlzLmVuZEFjdGl2ZVdpbmRvdyA9IDE7XG5cdCAgICAgIHRoaXMuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kcyA9IFtdO1xuXHQgICAgICB0aGlzLnN0YW5kYXJkQ29udGV4dWFsUGVyaW9kcyA9IFtdO1xuXHQgICAgICB0aGlzLnN0YXJ0UG9pbnRVbml0ID0gMDtcblx0ICAgICAgdGhpcy5zdGFydFBvaW50TXVsdGlwbGllciA9IDA7XG5cdCAgICAgIHRoaXMuY2xpY2tlZElkO1xuXHQgICAgICB0aGlzLm5vQ2FsY0J1dHRvbnMgPSAwO1xuXHQgICAgICB0aGlzLnRpbWVQZXJpb2RzID0gW3tcblx0ICAgICAgICAnbmFtZSc6ICdzZWNvbmQnLFxuXHQgICAgICAgICdtaWxsaXNlY29uZHMnOiAxMDAwLFxuXHQgICAgICAgICdzdGFydGluZ1BvaW50JzogMCxcblx0ICAgICAgICAndG90YWwnOiA2MCxcblx0ICAgICAgICAnYWJicmV2aWF0aW9uJzogJ3NlYycsXG5cdCAgICAgICAgJ2Rlc2NyaXB0aW9uJzogJ1NFQ09ORCcsXG5cdCAgICAgICAgJ3BhcmVudCc6ICdtaW51dGUnLFxuXHQgICAgICAgICdtdWx0aXBsaWVycyc6IFsxLCA1LCAxNSwgMzBdXG5cdCAgICAgIH0sIHtcblx0ICAgICAgICAnbmFtZSc6ICdtaW51dGUnLFxuXHQgICAgICAgICdtaWxsaXNlY29uZHMnOiA2MDAwMCxcblx0ICAgICAgICAnc3RhcnRpbmdQb2ludCc6IDAsXG5cdCAgICAgICAgJ3RvdGFsJzogNjAsXG5cdCAgICAgICAgJ2FiYnJldmlhdGlvbic6ICdtaW4nLFxuXHQgICAgICAgICdkZXNjcmlwdGlvbic6ICdNSU5VVEUnLFxuXHQgICAgICAgICdwYXJlbnQnOiAnaG91cicsXG5cdCAgICAgICAgJ211bHRpcGxpZXJzJzogWzEsIDUsIDE1LCAzMF1cblx0ICAgICAgfSwge1xuXHQgICAgICAgICduYW1lJzogJ2hvdXInLFxuXHQgICAgICAgICdtaWxsaXNlY29uZHMnOiAzNjAwMDAwLFxuXHQgICAgICAgICdzdGFydGluZ1BvaW50JzogMCxcblx0ICAgICAgICAndG90YWwnOiAyNCxcblx0ICAgICAgICAnYWJicmV2aWF0aW9uJzogJ2hyJyxcblx0ICAgICAgICAnZGVzY3JpcHRpb24nOiAnSE9VUicsXG5cdCAgICAgICAgJ3BhcmVudCc6ICdkYXknLFxuXHQgICAgICAgICdtdWx0aXBsaWVycyc6IFsxLCAzLCA2LCAxMl1cblx0ICAgICAgfSwge1xuXHQgICAgICAgICduYW1lJzogJ2RheScsXG5cdCAgICAgICAgJ21pbGxpc2Vjb25kcyc6IDg2NDAwMDAwLFxuXHQgICAgICAgICdzdGFydGluZ1BvaW50JzogMCxcblx0ICAgICAgICAndG90YWwnOiAzMCxcblx0ICAgICAgICAnYWJicmV2aWF0aW9uJzogJ0QnLFxuXHQgICAgICAgICdkZXNjcmlwdGlvbic6ICdEQVknLFxuXHQgICAgICAgICdwYXJlbnQnOiAnbW9udGgnLFxuXHQgICAgICAgICdtdWx0aXBsaWVycyc6IFsxLCA3LCAxNV1cblx0ICAgICAgfSwge1xuXHQgICAgICAgICduYW1lJzogJ21vbnRoJyxcblx0ICAgICAgICAnbWlsbGlzZWNvbmRzJzogMjU5MjAwMDAwMCxcblx0ICAgICAgICAnc3RhcnRpbmdQb2ludCc6IDAsXG5cdCAgICAgICAgJ3RvdGFsJzogMTIsXG5cdCAgICAgICAgJ2FiYnJldmlhdGlvbic6ICdNJyxcblx0ICAgICAgICAnZGVzY3JpcHRpb24nOiAnTU9OVEgnLFxuXHQgICAgICAgICdwYXJlbnQnOiAneWVhcicsXG5cdCAgICAgICAgJ211bHRpcGxpZXJzJzogWzEsIDMsIDZdXG5cdCAgICAgIH0sIHtcblx0ICAgICAgICAnbmFtZSc6ICd5ZWFyJyxcblx0ICAgICAgICAnbWlsbGlzZWNvbmRzJzogMzExMDQwMDAwMDAsXG5cdCAgICAgICAgJ3N0YXJ0aW5nUG9pbnQnOiAwLFxuXHQgICAgICAgICdhYmJyZXZpYXRpb24nOiAnWScsXG5cdCAgICAgICAgJ2Rlc2NyaXB0aW9uJzogJ1lFQVInLFxuXHQgICAgICAgICdtdWx0aXBsaWVycyc6IFsxLCAzLCA1XVxuXHQgICAgICB9XTtcblx0ICAgICAgdGhpcy50ZEJ1dHRvbnMgPSBbe1xuXHQgICAgICAgICduYW1lJzogJ1lURCcsXG5cdCAgICAgICAgJ2FiYnJldmlhdGlvbic6ICdZVEQnLFxuXHQgICAgICAgICdwYXJlbnQnOiAneWVhcicsXG5cdCAgICAgICAgJ21pbGxpc2Vjb25kcyc6IDMxMTA0MDAwMDAwLFxuXHQgICAgICAgICdkZXNjcmlwdGlvbic6ICdZZWFyIHRvIERhdGUnXG5cdCAgICAgIH0sIHtcblx0ICAgICAgICAnbmFtZSc6ICdRVEQnLFxuXHQgICAgICAgICdhYmJyZXZpYXRpb24nOiAnUVREJyxcblx0ICAgICAgICAncGFyZW50JzogJ21vbnRoJyxcblx0ICAgICAgICAnbXVsdGlwbGllcic6IDMsXG5cdCAgICAgICAgJ21pbGxpc2Vjb25kcyc6IDc3NzYwMDAwMDAsXG5cdCAgICAgICAgJ2Rlc2NyaXB0aW9uJzogJ1F1YXJ0ZXIgdG8gRGF0ZSdcblx0ICAgICAgfSwge1xuXHQgICAgICAgICduYW1lJzogJ01URCcsXG5cdCAgICAgICAgJ2FiYnJldmlhdGlvbic6ICdNVEQnLFxuXHQgICAgICAgICdwYXJlbnQnOiAnbW9udGgnLFxuXHQgICAgICAgICdtaWxsaXNlY29uZHMnOiAyNTkyMDAwMDAwLFxuXHQgICAgICAgICdkZXNjcmlwdGlvbic6ICdNb250aCB0byBEYXRlJ1xuXHQgICAgICB9LCB7XG5cdCAgICAgICAgJ25hbWUnOiAnV1REJyxcblx0ICAgICAgICAnYWJicmV2aWF0aW9uJzogJ1dURCcsXG5cdCAgICAgICAgJ3BhcmVudCc6ICdkYXknLFxuXHQgICAgICAgICdtdWx0aXBsaWVyJzogNyxcblx0ICAgICAgICAnbWlsbGlzZWNvbmRzJzogNjA0ODAwMDAwLFxuXHQgICAgICAgICdkZXNjcmlwdGlvbic6ICdXZWVrIHRvIERhdGUnXG5cdCAgICAgIH0sIHtcblx0ICAgICAgICAnbmFtZSc6ICdZJyxcblx0ICAgICAgICAnYWJicmV2aWF0aW9uJzogJ1knLFxuXHQgICAgICAgICdwYXJlbnQnOiAnZGF5Jyxcblx0ICAgICAgICAnbWlsbGlzZWNvbmRzJzogODY0MDAwMDAsXG5cdCAgICAgICAgJ2Rlc2NyaXB0aW9uJzogJ1llc3RlcmRheSdcblx0ICAgICAgfSwge1xuXHQgICAgICAgICduYW1lJzogJ1QnLFxuXHQgICAgICAgICdhYmJyZXZpYXRpb24nOiAnVCcsXG5cdCAgICAgICAgJ3BhcmVudCc6ICdkYXknLFxuXHQgICAgICAgICdtaWxsaXNlY29uZHMnOiA4NjQwMDAwMCxcblx0ICAgICAgICAnZGVzY3JpcHRpb24nOiAnVG9kYXknXG5cdCAgICAgIH1dO1xuXHQgICAgICB0aGlzLmNvbmZpZyA9IHtcblx0ICAgICAgICBhbmNob3JQb3NpdGlvbnM6ICdyaWdodCcsXG5cdCAgICAgICAgYWxsOiAnMScsXG5cdCAgICAgICAgY29udGV4dHVhbDogJzEnLFxuXHQgICAgICAgIGNhbGN1bGF0ZWQ6ICcxJyxcblx0ICAgICAgICB0ZXJ0aWFyeVRpbWVQZXJpb2RzOiB7fVxuXHQgICAgICB9O1xuXHQgICAgfVxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogQSBmdW5jdGlvbiB0byBnZW5lcmF0ZSB0aGUgY2FsY3VsYXRlZCBidXR0b25zIHVzaW5nXG5cdCAgICAgKiB0aGUgYWN0aXZlIHJhbmdlIGFuZCB0aGUgbG9jYXRpb24gb2YgdGhlIGFjdGl2ZSByYW5nZVxuXHQgICAgICovXG5cdFxuXHRcblx0ICAgIF9jcmVhdGVDbGFzcyhTdGFuZGFyZFBlcmlvZFNlbGVjdG9yLCBbe1xuXHQgICAgICBrZXk6ICdnZW5lcmF0ZUNhbGN1bGF0ZWRCdXR0b25zJyxcblx0ICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdlbmVyYXRlQ2FsY3VsYXRlZEJ1dHRvbnMoKSB7XG5cdCAgICAgICAgdmFyIHRhcmdldEJsb2NrID0gdGhpcy5lbmRBY3RpdmVXaW5kb3cgLSB0aGlzLnN0YXJ0RGF0YXNldCxcblx0ICAgICAgICAgICAgaSA9IDAsXG5cdCAgICAgICAgICAgIGogPSAwLFxuXHQgICAgICAgICAgICBhY3RpdmVXaW5kb3cgPSB0aGlzLmVuZEFjdGl2ZVdpbmRvdyAtIHRoaXMuc3RhcnRBY3RpdmVXaW5kb3csXG5cdCAgICAgICAgICAgIGNvdW50ID0gMDtcblx0ICAgICAgICB0aGlzLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHMgPSBbXTtcblx0ICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy50aW1lUGVyaW9kcy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgLy8gY2hlY2tpbmcgd2hldGhlciB0aGUgdW5pdCBpcyBhcHBsaWNhYmxlIGZvciB0aGUgY3VycmVudCB0YXJnZXQgYmxvY2tcblx0ICAgICAgICAgIGlmICh0YXJnZXRCbG9jayAvIHRoaXMudGltZVBlcmlvZHNbaV0ubWlsbGlzZWNvbmRzID49IDEpIHtcblx0ICAgICAgICAgICAgLy8gY2hlY2tpbmcgd2hldGhlciB0aGUgdW5pdCBpcyBvZiB0aGUgaGlnaGVyIG9yZGVyIGFuZCBvbmx5IG11bHRpcGxpZXIgMSBpcyBhcHBsaWNhYmxlXG5cdCAgICAgICAgICAgIGlmIChNYXRoLmZsb29yKGFjdGl2ZVdpbmRvdyAvIHRoaXMudGltZVBlcmlvZHNbaV0ubWlsbGlzZWNvbmRzKSA8IDEpIHtcblx0ICAgICAgICAgICAgICB0aGlzLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHMucHVzaCh7XG5cdCAgICAgICAgICAgICAgICAnYWJicmV2aWF0aW9uJzogdGhpcy50aW1lUGVyaW9kc1tpXS5hYmJyZXZpYXRpb24sXG5cdCAgICAgICAgICAgICAgICAnZGVzY3JpcHRpb24nOiB0aGlzLnRpbWVQZXJpb2RzW2ldLmRlc2NyaXB0aW9uLFxuXHQgICAgICAgICAgICAgICAgJ21pbGxpc2Vjb25kcyc6IHRoaXMudGltZVBlcmlvZHNbaV0ubWlsbGlzZWNvbmRzLFxuXHQgICAgICAgICAgICAgICAgJ211bHRpcGxpZXJzJzogWzFdXG5cdCAgICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgLy8gaWYgdGhlIHVuaXQgaXMgb2YgdGhlIG9yZGVyIG9mIHRoZSB0YXJnZXQgYmxvY2sgYW5kIGNhbGN1bGF0aW5nIHRoZSBtdWx0aXBsaWVyc1xuXHQgICAgICAgICAgICAgIHRoaXMuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kcy5wdXNoKHtcblx0ICAgICAgICAgICAgICAgICdhYmJyZXZpYXRpb24nOiB0aGlzLnRpbWVQZXJpb2RzW2ldLmFiYnJldmlhdGlvbixcblx0ICAgICAgICAgICAgICAgICdkZXNjcmlwdGlvbic6IHRoaXMudGltZVBlcmlvZHNbaV0uZGVzY3JpcHRpb24sXG5cdCAgICAgICAgICAgICAgICAnbWlsbGlzZWNvbmRzJzogdGhpcy50aW1lUGVyaW9kc1tpXS5taWxsaXNlY29uZHMsXG5cdCAgICAgICAgICAgICAgICAnbXVsdGlwbGllcnMnOiBbXVxuXHQgICAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICAgIC8vIGNhbGN1bGF0aW5nIGFuZCBwb3B1bGF0aW5nIHRoZSBhcHBsaWNhYmxlIG11bHRwbGllcnMgb2YgZWFjaCB1bml0XG5cdCAgICAgICAgICAgICAgZm9yIChqID0gMDsgaiA8IHRoaXMudGltZVBlcmlvZHNbaV0ubXVsdGlwbGllcnMubGVuZ3RoOyBqKyspIHtcblx0ICAgICAgICAgICAgICAgIGlmIChhY3RpdmVXaW5kb3cgLyB0aGlzLnJhdGlvIDwgdGhpcy50aW1lUGVyaW9kc1tpXS5tdWx0aXBsaWVyc1tqXSAqIHRoaXMudGltZVBlcmlvZHNbaV0ubWlsbGlzZWNvbmRzKSB7XG5cdCAgICAgICAgICAgICAgICAgIHRoaXMuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kc1t0aGlzLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHMubGVuZ3RoIC0gMV0ubXVsdGlwbGllcnMucHVzaCh0aGlzLnRpbWVQZXJpb2RzW2ldLm11bHRpcGxpZXJzW2pdKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgdGhpcy5ub0NhbGNCdXR0b25zID0gSW5maW5pdHk7XG5cdCAgICAgICAgZm9yIChpID0gMDsgaSA8IHRoaXMuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kcy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgZm9yIChqID0gMDsgaiA8IHRoaXMuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kc1tpXS5tdWx0aXBsaWVycy5sZW5ndGg7IGorKykge1xuXHQgICAgICAgICAgICArK2NvdW50O1xuXHQgICAgICAgICAgICBpZiAodGhpcy5ub0NhbGNCdXR0b25zID4gaSkge1xuXHQgICAgICAgICAgICAgIHRoaXMubm9DYWxjQnV0dG9ucyA9IGk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgaWYgKGNvdW50IDw9IDQpIHtcblx0ICAgICAgICAgICAgICB0aGlzLnN0YXJ0UG9pbnRNdWx0aXBsaWVyID0gajtcblx0ICAgICAgICAgICAgICB0aGlzLnN0YXJ0UG9pbnRVbml0ID0gaTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgLy8gdGhpcy5kcmF3QnV0dG9uc0NhbGN1bGF0ZWQodGhpcy5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgLyoqXG5cdCAgICAgICAqIEEgZnVuY3Rpb24gdG8gZ2VuZXJhdGUgdGhlIGNvbnRleHR1YWwgYnV0dG9ucyB1c2luZ1xuXHQgICAgICAgKiB0aGUgZW5kIHBvaW50IG9mIHRoZSB0aW1lLXNjYWxlXG5cdCAgICAgICAqL1xuXHRcblx0ICAgIH0sIHtcblx0ICAgICAga2V5OiAnZ2VuZXJhdGVDb250ZXh0dWFsQnV0dG9ucycsXG5cdCAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZW5lcmF0ZUNvbnRleHR1YWxCdXR0b25zKCkge1xuXHQgICAgICAgIC8vIGdlbmVyYXRpbmcgYW4gYXJyYXkgd2l0aCBhcHBsaWNhYmxlIFREIGJ1dHRvbnNcblx0ICAgICAgICB2YXIgYnV0dG9ucyA9IFtdLFxuXHQgICAgICAgICAgICBpID0gMCxcblx0ICAgICAgICAgICAgZW5kU3RhbXAgPSB0aGlzLmdsb2JhbFJlYWN0aXZlTW9kZWwubW9kZWxbJ3gtYXhpcy1hYnNvbHV0ZS1yYW5nZS1lbmQnXSxcblx0ICAgICAgICAgICAgZGF0ZVN0YXJ0ID0gZW5kU3RhbXAgLSAyLFxuXHQgICAgICAgICAgICBkYXRlRW5kID0gZW5kU3RhbXAsXG5cdCAgICAgICAgICAgIHJlbGF0aXZlVERCdXR0b24gPSB7fTtcblx0ICAgICAgICBmb3IgKDsgaSA8IHRoaXMudGRCdXR0b25zLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgICBkYXRlU3RhcnQgPSBuZXcgRGF0ZShlbmRTdGFtcCk7XG5cdCAgICAgICAgICBpZiAodGhpcy50ZEJ1dHRvbnNbaV0ubmFtZSA9PT0gJ1lURCcpIHtcblx0ICAgICAgICAgICAgZGF0ZVN0YXJ0LnNldE1vbnRoKDApO1xuXHQgICAgICAgICAgICBkYXRlU3RhcnQuc2V0RGF0ZSgxKTtcblx0ICAgICAgICAgICAgZGF0ZVN0YXJ0LnNldEhvdXJzKDApO1xuXHQgICAgICAgICAgICBkYXRlU3RhcnQuc2V0TWludXRlcygwKTtcblx0ICAgICAgICAgICAgZGF0ZVN0YXJ0LnNldFNlY29uZHMoMCk7XG5cdCAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMudGRCdXR0b25zW2ldLm5hbWUgPT09ICdNVEQnKSB7XG5cdCAgICAgICAgICAgIGRhdGVTdGFydC5zZXREYXRlKDEpO1xuXHQgICAgICAgICAgICBkYXRlU3RhcnQuc2V0SG91cnMoMCk7XG5cdCAgICAgICAgICAgIGRhdGVTdGFydC5zZXRNaW51dGVzKDApO1xuXHQgICAgICAgICAgICBkYXRlU3RhcnQuc2V0U2Vjb25kcygwKTtcblx0ICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy50ZEJ1dHRvbnNbaV0ubmFtZSA9PT0gJ1FURCcpIHtcblx0ICAgICAgICAgICAgZGF0ZVN0YXJ0LnNldE1vbnRoKDExIC0gZGF0ZVN0YXJ0LmdldE1vbnRoKCkgJSA0KTtcblx0ICAgICAgICAgICAgZGF0ZVN0YXJ0LnNldERhdGUoMCk7XG5cdCAgICAgICAgICAgIGRhdGVTdGFydC5zZXRIb3VycygwKTtcblx0ICAgICAgICAgICAgZGF0ZVN0YXJ0LnNldE1pbnV0ZXMoMCk7XG5cdCAgICAgICAgICAgIGRhdGVTdGFydC5zZXRTZWNvbmRzKDApO1xuXHQgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnRkQnV0dG9uc1tpXS5uYW1lID09PSAnV1REJykge1xuXHQgICAgICAgICAgICBkYXRlU3RhcnQuc2V0RGF0ZShkYXRlU3RhcnQuZ2V0RGF0ZSgpIC0gZGF0ZVN0YXJ0LmdldERheSgpKTtcblx0ICAgICAgICAgICAgZGF0ZVN0YXJ0LnNldEhvdXJzKDApO1xuXHQgICAgICAgICAgICBkYXRlU3RhcnQuc2V0TWludXRlcygwKTtcblx0ICAgICAgICAgICAgZGF0ZVN0YXJ0LnNldFNlY29uZHMoMCk7XG5cdCAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMudGRCdXR0b25zW2ldLm5hbWUgPT09ICdZJykge1xuXHQgICAgICAgICAgICBkYXRlU3RhcnQuc2V0SG91cnMoMCk7XG5cdCAgICAgICAgICAgIGRhdGVTdGFydC5zZXRNaW51dGVzKDApO1xuXHQgICAgICAgICAgICBkYXRlU3RhcnQuc2V0U2Vjb25kcygwKTtcblx0ICAgICAgICAgICAgZGF0ZVN0YXJ0IC09IDg2NDAwMDAwO1xuXHQgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnRkQnV0dG9uc1tpXS5uYW1lID09PSAnVCcpIHtcblx0ICAgICAgICAgICAgZGF0ZVN0YXJ0LnNldEhvdXJzKDApO1xuXHQgICAgICAgICAgICBkYXRlU3RhcnQuc2V0TWludXRlcygwKTtcblx0ICAgICAgICAgICAgZGF0ZVN0YXJ0LnNldFNlY29uZHMoMCk7XG5cdCAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgaWYgKGRhdGVFbmQgPCBkYXRlU3RhcnQpIHtcblx0ICAgICAgICAgICAgY29udGludWU7XG5cdCAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICB0aGlzLnRkQnV0dG9uc1tpXS5kYXRlU3RhcnQgPSBkYXRlU3RhcnQudmFsdWVPZigpO1xuXHQgICAgICAgICAgICB0aGlzLnRkQnV0dG9uc1tpXS5kYXRlRW5kID0gZGF0ZUVuZC52YWx1ZU9mKCk7XG5cdCAgICAgICAgICAgIGJ1dHRvbnMucHVzaCh0aGlzLnRkQnV0dG9uc1tpXSk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJlbGF0aXZlVERCdXR0b24ubWlsbGlzZWNvbmRzID0gSW5maW5pdHk7XG5cdCAgICAgICAgZm9yIChpID0gMDsgaSA8IHRoaXMudGRCdXR0b25zLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgICBpZiAoTWF0aC5hYnModGhpcy50ZEJ1dHRvbnNbaV0ubWlsbGlzZWNvbmRzIC0gKHRoaXMuZW5kQWN0aXZlV2luZG93IC0gdGhpcy5zdGFydEFjdGl2ZVdpbmRvdykpIDwgcmVsYXRpdmVUREJ1dHRvbi5taWxsaXNlY29uZHMpIHtcblx0ICAgICAgICAgICAgcmVsYXRpdmVUREJ1dHRvbi5taWxsaXNlY29uZHMgPSB0aGlzLnRkQnV0dG9uc1tpXS5taWxsaXNlY29uZHM7XG5cdCAgICAgICAgICAgIHJlbGF0aXZlVERCdXR0b24ubmFtZSA9IHRoaXMudGRCdXR0b25zW2ldLmFiYnJldmlhdGlvbjtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHRoaXMuc3RhbmRhcmRDb250ZXh1YWxQZXJpb2RzID0gYnV0dG9ucztcblx0ICAgICAgICAvLyB0aGlzLmRyYXdCdXR0b25zQ29udGV4dHVhbCh0aGlzLnN0YW5kYXJkQ29udGV4dWFsUGVyaW9kcyk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8qKlxuXHQgICAgICAgKiBBIGZ1bmN0aW9uIHRvIHNldCB0aGUgYWN0aXZlIHBlcmlvZCdzXG5cdCAgICAgICAqIHN0YXJ0IGFuZCBlbmQgcG9pbnRcblx0ICAgICAgICogQHBhcmFtICB7bnVtYmVyfSBkYXRlIHN0YW1wIC0gQSBVTklYIHRpbWVzdGFtcCB0byBiZSBzZXQgYXMgdGhlIHN0YXJ0IHBvaW50IG9mIGFjdGl2ZSBwZXJpb2Rcblx0ICAgICAgICogQHBhcmFtICB7bnVtYmVyfSBkYXRlIHN0YW1wIC0gQSBVTklYIHRpbWVzdGFtcCB0byBiZSBzZXQgYXMgdGhlIGVuZCBwb2ludCBvZiBhY3RpdmUgcGVyaW9kXG5cdCAgICAgICAqL1xuXHRcblx0ICAgIH0sIHtcblx0ICAgICAga2V5OiAnc2V0QWN0aXZlUGVyaW9kJyxcblx0ICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNldEFjdGl2ZVBlcmlvZCgpIHtcblx0ICAgICAgICB2YXIgc3RhcnQsIGVuZDtcblx0ICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkge1xuXHQgICAgICAgICAgZW5kID0gdGhpcy5nbG9iYWxSZWFjdGl2ZU1vZGVsLm1vZGVsWyd4LWF4aXMtdmlzaWJsZS1yYW5nZS1lbmQnXTtcblx0ICAgICAgICAgIHN0YXJ0ID0gZW5kIC0gYXJndW1lbnRzWzBdO1xuXHQgICAgICAgIH0gZWxzZSBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMikge1xuXHQgICAgICAgICAgc3RhcnQgPSBhcmd1bWVudHNbMF07XG5cdCAgICAgICAgICBlbmQgPSBhcmd1bWVudHNbMV07XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICB0aGlzLnN0YXJ0QWN0aXZlV2luZG93ID0gc3RhcnQ7XG5cdCAgICAgICAgdGhpcy5lbmRBY3RpdmVXaW5kb3cgPSBlbmQ7XG5cdCAgICAgICAgdGhpcy5nZW5lcmF0ZUNhbGN1bGF0ZWRCdXR0b25zKCk7XG5cdCAgICAgICAgdGhpcy5nbG9iYWxSZWFjdGl2ZU1vZGVsLm1vZGVsWyd4LWF4aXMtdmlzaWJsZS1yYW5nZS1zdGFydCddID0gdGhpcy5zdGFydEFjdGl2ZVdpbmRvdztcblx0ICAgICAgICB0aGlzLmdsb2JhbFJlYWN0aXZlTW9kZWwubW9kZWxbJ3gtYXhpcy12aXNpYmxlLXJhbmdlLWVuZCddID0gdGhpcy5lbmRBY3RpdmVXaW5kb3c7XG5cdCAgICAgICAgdGhpcy5nZW5lcmF0ZUNvbnRleHR1YWxCdXR0b25zKCk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8qKlxuXHQgICAgICAgKiBBIGZ1bmN0aW9uIHRvIHNldCB0aGUgc3RhcnQgYW5kIGVuZCBwb2ludCBvZiB0aGVcblx0ICAgICAgICogZW50aXJlIHRpbWUtbGluZVxuXHQgICAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IGRhdGUgc3RhbXAgLSBBIFVOSVggdGltZXN0YW1wIHRvIGJlIHNldCBhcyB0aGUgc3RhcnQgcG9pbnQgb2YgdGltZS1saW5lXG5cdCAgICAgICAqIEBwYXJhbSAge251bWJlcn0gZGF0ZSBzdGFtcCAtIEEgVU5JWCB0aW1lc3RhbXAgdG8gYmUgc2V0IGFzIHRoZSBlbmQgcG9pbnQgb2YgdGltZS1saW5lXG5cdCAgICAgICAqL1xuXHRcblx0ICAgIH0sIHtcblx0ICAgICAga2V5OiAnc2V0VGltZWxpbmUnLFxuXHQgICAgICB2YWx1ZTogZnVuY3Rpb24gc2V0VGltZWxpbmUoc3RhcnQsIGVuZCkge1xuXHQgICAgICAgIHRoaXMuc3RhcnREYXRhc2V0ID0gc3RhcnQ7XG5cdCAgICAgICAgdGhpcy5lbmREYXRhc2V0ID0gZW5kO1xuXHQgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdGFydEFjdGl2ZVJhbmdlJykuaW5uZXJIVE1MID0gbmV3IERhdGUodGhpcy5zdGFydERhdGFzZXQpO1xuXHQgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbmRBY3RpdmVSYW5nZScpLmlubmVySFRNTCA9IG5ldyBEYXRlKHRoaXMuZW5kRGF0YXNldCk7XG5cdCAgICAgICAgdGhpcy5nZW5lcmF0ZUNhbGN1bGF0ZWRCdXR0b25zKCk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8qKlxuXHQgICAgICAgKiBBIGZ1bmN0aW9uIHRvIHNldCB0aGUgb2JqZWN0IHRvIHNldCB0aGUgdXNlciBwcmVmZXJlbmNlc1xuXHQgICAgICAgKi9cblx0XG5cdCAgICB9LCB7XG5cdCAgICAgIGtleTogJ2NvbmZpZ3VyZScsXG5cdCAgICAgIHZhbHVlOiBmdW5jdGlvbiBjb25maWd1cmUoY29uZmlnKSB7XG5cdCAgICAgICAgdGhpcy5jb25maWcgPSBjb25maWc7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8qKlxuXHQgICAgICAgKiBGdXNpb25jaGFydHMgbGlmZSBjeWNsZSBtZXRob2QgZm9yIGV4dGVuc2lvblxuXHQgICAgICAgKi9cblx0XG5cdCAgICB9LCB7XG5cdCAgICAgIGtleTogJ2luaXQnLFxuXHQgICAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdChyZXF1aXJlKSB7XG5cdCAgICAgICAgdmFyIGluc3RhbmNlID0gdGhpcztcblx0ICAgICAgICByZXF1aXJlKFsneEF4aXMnLCAneUF4aXMnLCAnZ3JhcGhpY3MnLCAnY2hhcnQnLCAnZGF0YXNldCcsICdQbG90TWFuYWdlcicsICdjYW52YXNDb25maWcnLCAnTWFya2VyTWFuYWdlcicsICdyZWFjdGl2ZU1vZGVsJywgJ2dsb2JhbFJlYWN0aXZlTW9kZWwnLCAnc3BhY2VNYW5hZ2VySW5zdGFuY2UnLCAnc21hcnRMYWJlbCcsIGZ1bmN0aW9uICh4QXhpcywgeUF4aXMsIGdyYXBoaWNzLCBjaGFydCwgZGF0YXNldCwgcGxvdE1hbmFnZXIsIGNhbnZhc0NvbmZpZywgbWFya2VyTWFuYWdlciwgcmVhY3RpdmVNb2RlbCwgZ2xvYmFsUmVhY3RpdmVNb2RlbCwgc3BhY2VNYW5hZ2VySW5zdGFuY2UsIHNtYXJ0TGFiZWwpIHtcblx0ICAgICAgICAgIGluc3RhbmNlLnhBeGlzID0geEF4aXM7XG5cdCAgICAgICAgICBpbnN0YW5jZS55QXhpcyA9IHlBeGlzO1xuXHQgICAgICAgICAgaW5zdGFuY2UuZ3JhcGhpY3MgPSBncmFwaGljcztcblx0ICAgICAgICAgIGluc3RhbmNlLmNoYXJ0ID0gY2hhcnQ7XG5cdCAgICAgICAgICBpbnN0YW5jZS5kYXRhc2V0ID0gZGF0YXNldDtcblx0ICAgICAgICAgIGluc3RhbmNlLnBsb3RNYW5hZ2VyID0gcGxvdE1hbmFnZXI7XG5cdCAgICAgICAgICBpbnN0YW5jZS5tYXJrZXJNYW5hZ2VyID0gbWFya2VyTWFuYWdlcjtcblx0ICAgICAgICAgIGluc3RhbmNlLmNhbnZhc0NvbmZpZyA9IGNhbnZhc0NvbmZpZztcblx0ICAgICAgICAgIGluc3RhbmNlLnJlYWN0aXZlTW9kZWwgPSByZWFjdGl2ZU1vZGVsO1xuXHQgICAgICAgICAgaW5zdGFuY2UuZ2xvYmFsUmVhY3RpdmVNb2RlbCA9IGdsb2JhbFJlYWN0aXZlTW9kZWw7XG5cdCAgICAgICAgICBpbnN0YW5jZS5zcGFjZU1hbmFnZXJJbnN0YW5jZSA9IHNwYWNlTWFuYWdlckluc3RhbmNlO1xuXHQgICAgICAgICAgaW5zdGFuY2Uuc21hcnRMYWJlbCA9IHNtYXJ0TGFiZWw7XG5cdCAgICAgICAgfV0pO1xuXHQgICAgICAgIHRoaXMuc3BhY2VNYW5hZ2VySW5zdGFuY2UgPSBpbnN0YW5jZS5zcGFjZU1hbmFnZXJJbnN0YW5jZTtcblx0ICAgICAgICB0aGlzLmdsb2JhbFJlYWN0aXZlTW9kZWwgPSBpbnN0YW5jZS5nbG9iYWxSZWFjdGl2ZU1vZGVsO1xuXHQgICAgICAgIHRoaXMuZW5kQWN0aXZlV2luZG93ID0gaW5zdGFuY2UuZ2xvYmFsUmVhY3RpdmVNb2RlbC5tb2RlbFsneC1heGlzLXZpc2libGUtcmFuZ2UtZW5kJ107XG5cdCAgICAgICAgdGhpcy5zdGFydEFjdGl2ZVdpbmRvdyA9IGluc3RhbmNlLmdsb2JhbFJlYWN0aXZlTW9kZWwubW9kZWxbJ3gtYXhpcy12aXNpYmxlLXJhbmdlLXN0YXJ0J107XG5cdCAgICAgICAgdGhpcy5zdGFydERhdGFzZXQgPSBpbnN0YW5jZS5nbG9iYWxSZWFjdGl2ZU1vZGVsLm1vZGVsWyd4LWF4aXMtYWJzb2x1dGUtcmFuZ2Utc3RhcnQnXTtcblx0ICAgICAgICB0aGlzLmVuZERhdGFzZXQgPSBpbnN0YW5jZS5nbG9iYWxSZWFjdGl2ZU1vZGVsLm1vZGVsWyd4LWF4aXMtYWJzb2x1dGUtcmFuZ2UtZW5kJ107XG5cdCAgICAgICAgdGhpcy5zZXRBY3RpdmVQZXJpb2QodGhpcy5zdGFydEFjdGl2ZVdpbmRvdywgdGhpcy5lbmRBY3RpdmVXaW5kb3cpO1xuXHQgICAgICAgIC8vIGluc3RhbmNlLmdsb2JhbFJlYWN0aXZlTW9kZWwubW9kZWxbJ194LWF4aXMtdmlzaWJsZS1yYW5nZS1zdGFydCddICs9IDEyNDQxNjAwMDAwMDtcblx0ICAgICAgICB0aGlzLnNldEFjdGl2ZVBlcmlvZCh0aGlzLnN0YXJ0QWN0aXZlV2luZG93LCB0aGlzLmVuZEFjdGl2ZVdpbmRvdyk7XG5cdFxuXHQgICAgICAgIHRoaXMudG9vbGJhcnMgPSBbXTtcblx0XG5cdCAgICAgICAgdGhpcy5tZWFzdXJlbWVudCA9IHt9O1xuXHRcblx0ICAgICAgICB0aGlzLnRvb2xiYXJzLnB1c2godGhpcy5jcmVhdGVUb29sYmFyKCkpO1xuXHQgICAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgIGtleTogJ2NyZWF0ZVRvb2xiYXInLFxuXHQgICAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlVG9vbGJhcigpIHtcblx0ICAgICAgICB2YXIgX3RoaXMyID0gdGhpcztcblx0XG5cdCAgICAgICAgdmFyIHVuaWdyb3VwLFxuXHQgICAgICAgICAgICB0b29sYmFyLFxuXHQgICAgICAgICAgICBjYWxjdWxhdGVkQnV0dG9ucyxcblx0ICAgICAgICAgICAgY29udGV4dHVhbEJ1dHRvbnMsXG5cdCAgICAgICAgICAgIGFsbEJ1dHRvbixcblx0ICAgICAgICAgICAgc2VsZiA9IHRoaXMsXG5cdCAgICAgICAgICAgIGVuZEFjdGl2ZSA9IHRoaXMuZ2xvYmFsUmVhY3RpdmVNb2RlbC5tb2RlbFsneC1heGlzLXZpc2libGUtcmFuZ2UtZW5kJ10sXG5cdCAgICAgICAgICAgIGRlZHVjdG9yQXIgPSBbXSxcblx0ICAgICAgICAgICAgc3RhcnRNdWx0aXBsaWVyLFxuXHQgICAgICAgICAgICBkZWR1Y3Rvcixcblx0ICAgICAgICAgICAgaSxcblx0ICAgICAgICAgICAgaixcblx0ICAgICAgICAgICAgbWFyZ2luLFxuXHQgICAgICAgICAgICBmcm9tRGF0ZUxhYmVsLFxuXHQgICAgICAgICAgICBncm91cDtcblx0XG5cdCAgICAgICAgZ3JvdXAgPSBuZXcgdGhpcy50b29sYm94LkNvbXBvbmVudEdyb3VwKHtcblx0ICAgICAgICAgIHBhcGVyOiB0aGlzLmdyYXBoaWNzLnBhcGVyLFxuXHQgICAgICAgICAgY2hhcnQ6IHRoaXMuY2hhcnQsXG5cdCAgICAgICAgICBzbWFydExhYmVsOiB0aGlzLnNtYXJ0TGFiZWwsXG5cdCAgICAgICAgICBjaGFydENvbnRhaW5lcjogdGhpcy5ncmFwaGljcy5jb250YWluZXJcblx0ICAgICAgICB9KTtcblx0XG5cdCAgICAgICAgdW5pZ3JvdXAgPSBuZXcgdGhpcy50b29sYm94LlVuaVNlbGVjdENvbXBvbmVudEdyb3VwKHtcblx0ICAgICAgICAgIHBhcGVyOiB0aGlzLmdyYXBoaWNzLnBhcGVyLFxuXHQgICAgICAgICAgY2hhcnQ6IHRoaXMuY2hhcnQsXG5cdCAgICAgICAgICBzbWFydExhYmVsOiB0aGlzLnNtYXJ0TGFiZWwsXG5cdCAgICAgICAgICBjaGFydENvbnRhaW5lcjogdGhpcy5ncmFwaGljcy5jb250YWluZXJcblx0ICAgICAgICB9KTtcblx0ICAgICAgICB1bmlncm91cC5zZXRDb25maWcoe1xuXHQgICAgICAgICAgZmlsbDogJyNmZmYnLFxuXHQgICAgICAgICAgYm9yZGVyVGhpY2tuZXNzOiAwXG5cdCAgICAgICAgfSk7XG5cdCAgICAgICAgZ3JvdXAuc2V0Q29uZmlnKHtcblx0ICAgICAgICAgIGZpbGw6ICcjZmZmJyxcblx0ICAgICAgICAgIGJvcmRlclRoaWNrbmVzczogMFxuXHQgICAgICAgIH0pO1xuXHQgICAgICAgIHRvb2xiYXIgPSBuZXcgdGhpcy5Ib3Jpem9udGFsVG9vbGJhcih7XG5cdCAgICAgICAgICBwYXBlcjogdGhpcy5ncmFwaGljcy5wYXBlcixcblx0ICAgICAgICAgIGNoYXJ0OiB0aGlzLmNoYXJ0LFxuXHQgICAgICAgICAgc21hcnRMYWJlbDogdGhpcy5zbWFydExhYmVsLFxuXHQgICAgICAgICAgY2hhcnRDb250YWluZXI6IHRoaXMuZ3JhcGhpY3MuY29udGFpbmVyXG5cdCAgICAgICAgfSk7XG5cdCAgICAgICAgdG9vbGJhci5zZXRDb25maWcoe1xuXHQgICAgICAgICAgZmlsbDogJyNmZmYnLFxuXHQgICAgICAgICAgYm9yZGVyVGhpY2tuZXNzOiAwXG5cdCAgICAgICAgfSk7XG5cdCAgICAgICAgZnJvbURhdGVMYWJlbCA9IG5ldyB0aGlzLnRvb2xib3guTGFiZWwoJ1pvb206Jywge1xuXHQgICAgICAgICAgc21hcnRMYWJlbDogdGhpcy5zbWFydExhYmVsLFxuXHQgICAgICAgICAgcGFwZXI6IHRoaXMuZ3JhcGhpY3MucGFwZXJcblx0ICAgICAgICB9LCB7XG5cdCAgICAgICAgICB0ZXh0OiB7XG5cdCAgICAgICAgICAgIHN0eWxlOiB7XG5cdCAgICAgICAgICAgICAgJ2ZvbnQtc2l6ZSc6ICcxNScsXG5cdCAgICAgICAgICAgICAgJ2ZvbnRGYW1pbHknOiAnTXlyaWFkUHJvJ1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cdCAgICAgICAgZ3JvdXAuYWRkU3ltYm9sKGZyb21EYXRlTGFiZWwpO1xuXHQgICAgICAgIGFsbEJ1dHRvbiA9IG5ldyB0aGlzLnRvb2xib3guU3ltYm9sKCdBTEwnLCB0cnVlLCB7XG5cdCAgICAgICAgICBwYXBlcjogdGhpcy5ncmFwaGljcy5wYXBlcixcblx0ICAgICAgICAgIGNoYXJ0OiB0aGlzLmNoYXJ0LFxuXHQgICAgICAgICAgc21hcnRMYWJlbDogdGhpcy5zbWFydExhYmVsLFxuXHQgICAgICAgICAgY2hhcnRDb250YWluZXI6IHRoaXMuZ3JhcGhpY3MuY29udGFpbmVyXG5cdCAgICAgICAgfSwge1xuXHQgICAgICAgICAgZmlsbDogJyNmZmZmZmYnLFxuXHQgICAgICAgICAgbGFiZWxGaWxsOiAnIzY5Njk2OScsXG5cdCAgICAgICAgICBzeW1ib2xTdHJva2VXaWR0aDogJzInLFxuXHQgICAgICAgICAgc3ltYm9sU3Ryb2tlOiAnIzAwMDAwMCcsXG5cdCAgICAgICAgICBzdHJva2VXaWR0aDogJzEnLFxuXHQgICAgICAgICAgaG92ZXJGaWxsOiAnIzdmN2Y3ZicsXG5cdCAgICAgICAgICByYWRpdXM6IDEsXG5cdCAgICAgICAgICBtYXJnaW46IHtcblx0ICAgICAgICAgICAgcmlnaHQ6IDVcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9KS5hdHRhY2hFdmVudEhhbmRsZXJzKHtcblx0ICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbiBjbGljaygpIHtcblx0ICAgICAgICAgICAgc2VsZi5zZXRBY3RpdmVQZXJpb2Qoc2VsZi5zdGFydERhdGFzZXQsIHNlbGYuZW5kRGF0YXNldCk7XG5cdCAgICAgICAgICAgIHRvb2xiYXIuZGlzcG9zZSgpO1xuXHQgICAgICAgICAgICBzZWxmLmNsaWNrZWRJZCA9ICdBTEwnO1xuXHQgICAgICAgICAgICBzZWxmLnRvb2xiYXJzLnBvcCgpO1xuXHQgICAgICAgICAgICBzZWxmLnRvb2xiYXJzLnB1c2goc2VsZi5jcmVhdGVUb29sYmFyKCkpO1xuXHQgICAgICAgICAgICBzZWxmLmdldExvZ2ljYWxTcGFjZSgpO1xuXHQgICAgICAgICAgICBzZWxmLmRyYXcoKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9KTtcblx0XG5cdCAgICAgICAgdW5pZ3JvdXAuYWRkU3ltYm9sKGFsbEJ1dHRvbik7XG5cdCAgICAgICAgZm9yIChpID0gMDsgaSA8IHRoaXMuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kcy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgZm9yIChqID0gdGhpcy5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW2ldLm11bHRpcGxpZXJzLmxlbmd0aCAtIDE7IGogPj0gMDsgai0tKSB7XG5cdCAgICAgICAgICAgIGRlZHVjdG9yQXIucHVzaChzZWxmLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHNbaV0ubXVsdGlwbGllcnNbal0gKiBzZWxmLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHNbaV0ubWlsbGlzZWNvbmRzKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIGNhbGN1bGF0ZWRCdXR0b25zID0gW107XG5cdFxuXHQgICAgICAgIHZhciBfbG9vcDQgPSBmdW5jdGlvbiBfbG9vcDQoX2k0KSB7XG5cdCAgICAgICAgICBpZiAoX2k0ID09PSBzZWxmLnN0YXJ0UG9pbnRVbml0KSB7XG5cdCAgICAgICAgICAgIHN0YXJ0TXVsdGlwbGllciA9IHNlbGYuc3RhcnRQb2ludE11bHRpcGxpZXI7XG5cdCAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBzdGFydE11bHRpcGxpZXIgPSBzZWxmLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHNbX2k0XS5tdWx0aXBsaWVycy5sZW5ndGggLSAxO1xuXHQgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgIHZhciBfbG9vcDYgPSBmdW5jdGlvbiBfbG9vcDYoX2oyKSB7XG5cdCAgICAgICAgICAgIG1hcmdpbiA9IF9pNCA9PT0gc2VsZi5ub0NhbGNCdXR0b25zICYmIF9qMiA9PT0gMCA/IDUgOiAwO1xuXHQgICAgICAgICAgICBjb25zb2xlLmxvZyhlbmRBY3RpdmUsIF9pNCwgc2VsZi5ub0NhbGNCdXR0b25zLCBfajIsIG1hcmdpbik7XG5cdCAgICAgICAgICAgIGNhbGN1bGF0ZWRCdXR0b25zW19pNF0gPSBuZXcgX3RoaXMyLnRvb2xib3guU3ltYm9sKHNlbGYuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kc1tfaTRdLm11bHRpcGxpZXJzW19qMl0gKyBzZWxmLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHNbX2k0XS5hYmJyZXZpYXRpb24sIHRydWUsIHtcblx0ICAgICAgICAgICAgICBwYXBlcjogX3RoaXMyLmdyYXBoaWNzLnBhcGVyLFxuXHQgICAgICAgICAgICAgIGNoYXJ0OiBfdGhpczIuY2hhcnQsXG5cdCAgICAgICAgICAgICAgc21hcnRMYWJlbDogX3RoaXMyLnNtYXJ0TGFiZWwsXG5cdCAgICAgICAgICAgICAgY2hhcnRDb250YWluZXI6IF90aGlzMi5ncmFwaGljcy5jb250YWluZXJcblx0ICAgICAgICAgICAgfSwge1xuXHQgICAgICAgICAgICAgIGZpbGw6ICcjZmZmZmZmJyxcblx0ICAgICAgICAgICAgICBsYWJlbEZpbGw6ICcjNjk2OTY5Jyxcblx0ICAgICAgICAgICAgICBzeW1ib2xTdHJva2VXaWR0aDogJzInLFxuXHQgICAgICAgICAgICAgIHN5bWJvbFN0cm9rZTogJyMwMDAwMDAnLFxuXHQgICAgICAgICAgICAgIHN0cm9rZVdpZHRoOiAnMScsXG5cdCAgICAgICAgICAgICAgaG92ZXJGaWxsOiAnIzdmN2Y3ZicsXG5cdCAgICAgICAgICAgICAgcmFkaXVzOiAxLFxuXHQgICAgICAgICAgICAgIG1hcmdpbjoge1xuXHQgICAgICAgICAgICAgICAgcmlnaHQ6IG1hcmdpblxuXHQgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSkuYXR0YWNoRXZlbnRIYW5kbGVycyh7XG5cdCAgICAgICAgICAgICAgJ2NsaWNrJzogZnVuY3Rpb24gY2xpY2soKSB7XG5cdCAgICAgICAgICAgICAgICBkZWR1Y3RvciA9IHNlbGYuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kc1tfaTRdLm11bHRpcGxpZXJzW19qMl0gKiBzZWxmLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHNbX2k0XS5taWxsaXNlY29uZHM7XG5cdCAgICAgICAgICAgICAgICBzZWxmLmNsaWNrZWRJZCA9IHNlbGYuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kc1tfaTRdLm11bHRpcGxpZXJzW19qMl0gKyBzZWxmLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHNbX2k0XS5hYmJyZXZpYXRpb247XG5cdCAgICAgICAgICAgICAgICBzZWxmLnNldEFjdGl2ZVBlcmlvZChkZWR1Y3Rvcik7XG5cdCAgICAgICAgICAgICAgICB0b29sYmFyLmRpc3Bvc2UoKTtcblx0ICAgICAgICAgICAgICAgIHNlbGYudG9vbGJhcnMucG9wKCk7XG5cdCAgICAgICAgICAgICAgICBzZWxmLnRvb2xiYXJzLnB1c2goc2VsZi5jcmVhdGVUb29sYmFyKCkpO1xuXHQgICAgICAgICAgICAgICAgc2VsZi5nZXRMb2dpY2FsU3BhY2UoKTtcblx0ICAgICAgICAgICAgICAgIHNlbGYuZHJhdygpO1xuXHQgICAgICAgICAgICAgICAgLy8gdGhpcy50b29sYmFyc1t0aGlzLnRvb2xiYXJzLmxlbmd0aCAtIDFdID0gdGhpcy5jcmVhdGVUb29sYmFyKCk7XG5cdCAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgdW5pZ3JvdXAuYWRkU3ltYm9sKGNhbGN1bGF0ZWRCdXR0b25zW19pNF0pO1xuXHQgICAgICAgICAgfTtcblx0XG5cdCAgICAgICAgICBmb3IgKHZhciBfajIgPSBzdGFydE11bHRpcGxpZXI7IF9qMiA+PSAwOyBfajItLSkge1xuXHQgICAgICAgICAgICBfbG9vcDYoX2oyKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9O1xuXHRcblx0ICAgICAgICBmb3IgKHZhciBfaTQgPSBzZWxmLnN0YXJ0UG9pbnRVbml0OyBfaTQgPj0gMDsgX2k0LS0pIHtcblx0ICAgICAgICAgIF9sb29wNChfaTQpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgY29udGV4dHVhbEJ1dHRvbnMgPSBbXTtcblx0XG5cdCAgICAgICAgdmFyIF9sb29wNSA9IGZ1bmN0aW9uIF9sb29wNShfaTUpIHtcblx0ICAgICAgICAgIGNvbnRleHR1YWxCdXR0b25zW19pNV0gPSBuZXcgX3RoaXMyLnRvb2xib3guU3ltYm9sKF90aGlzMi5zdGFuZGFyZENvbnRleHVhbFBlcmlvZHNbX2k1XS5hYmJyZXZpYXRpb24sIHRydWUsIHtcblx0ICAgICAgICAgICAgcGFwZXI6IF90aGlzMi5ncmFwaGljcy5wYXBlcixcblx0ICAgICAgICAgICAgY2hhcnQ6IF90aGlzMi5jaGFydCxcblx0ICAgICAgICAgICAgc21hcnRMYWJlbDogX3RoaXMyLnNtYXJ0TGFiZWwsXG5cdCAgICAgICAgICAgIGNoYXJ0Q29udGFpbmVyOiBfdGhpczIuZ3JhcGhpY3MuY29udGFpbmVyXG5cdCAgICAgICAgICB9LCB7XG5cdCAgICAgICAgICAgIGZpbGw6ICcjZmZmZmZmJyxcblx0ICAgICAgICAgICAgbGFiZWxGaWxsOiAnIzY5Njk2OScsXG5cdCAgICAgICAgICAgIHN5bWJvbFN0cm9rZVdpZHRoOiAnMicsXG5cdCAgICAgICAgICAgIHN5bWJvbFN0cm9rZTogJyMwMDAwMDAnLFxuXHQgICAgICAgICAgICBzdHJva2VXaWR0aDogJzEnLFxuXHQgICAgICAgICAgICBob3ZlckZpbGw6ICcjN2Y3ZjdmJyxcblx0ICAgICAgICAgICAgcmFkaXVzOiAxLFxuXHQgICAgICAgICAgICBtYXJnaW46IHtcblx0ICAgICAgICAgICAgICByaWdodDogMFxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9KS5hdHRhY2hFdmVudEhhbmRsZXJzKHtcblx0ICAgICAgICAgICAgJ2NsaWNrJzogZnVuY3Rpb24gY2xpY2soKSB7XG5cdCAgICAgICAgICAgICAgc2VsZi5zZXRBY3RpdmVQZXJpb2Qoc2VsZi5zdGFuZGFyZENvbnRleHVhbFBlcmlvZHNbX2k1XS5kYXRlU3RhcnQsIHNlbGYuc3RhbmRhcmRDb250ZXh1YWxQZXJpb2RzW19pNV0uZGF0ZUVuZCk7XG5cdCAgICAgICAgICAgICAgc2VsZi5jbGlja2VkSWQgPSBzZWxmLnN0YW5kYXJkQ29udGV4dWFsUGVyaW9kc1tfaTVdLmFiYnJldmlhdGlvbjtcblx0ICAgICAgICAgICAgICB0b29sYmFyLmRpc3Bvc2UoKTtcblx0ICAgICAgICAgICAgICBzZWxmLnRvb2xiYXJzLnBvcCgpO1xuXHQgICAgICAgICAgICAgIHNlbGYudG9vbGJhcnMucHVzaChzZWxmLmNyZWF0ZVRvb2xiYXIoKSk7XG5cdCAgICAgICAgICAgICAgc2VsZi5nZXRMb2dpY2FsU3BhY2UoKTtcblx0ICAgICAgICAgICAgICBzZWxmLmRyYXcoKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfSk7XG5cdCAgICAgICAgICB1bmlncm91cC5hZGRTeW1ib2woY29udGV4dHVhbEJ1dHRvbnNbX2k1XSk7XG5cdCAgICAgICAgfTtcblx0XG5cdCAgICAgICAgZm9yICh2YXIgX2k1ID0gMDsgX2k1IDwgdGhpcy5zdGFuZGFyZENvbnRleHVhbFBlcmlvZHMubGVuZ3RoOyBfaTUrKykge1xuXHQgICAgICAgICAgX2xvb3A1KF9pNSk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICAvLyBidG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdCVVRUT04nKTtcblx0ICAgICAgICAvLyBidG4uaWQgPSBzdGFuZGFyZFBlcmlvZHNbaV0uYWJicmV2aWF0aW9uO1xuXHQgICAgICAgIC8vIGJ0bi5pbm5lckhUTUwgPSBzdGFuZGFyZFBlcmlvZHNbaV0uYWJicmV2aWF0aW9uO1xuXHQgICAgICAgIC8vIGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGV2ZW50QnRuLmJpbmQodGhpcywgc3RhbmRhcmRQZXJpb2RzW2ldKSk7XG5cdCAgICAgICAgLy8gY29udGV4dHVhbEJ1dHRvbnMuYXBwZW5kQ2hpbGQoYnRuKTtcblx0XG5cdCAgICAgICAgdGhpcy5TeW1ib2xTdG9yZS5yZWdpc3RlcigndGV4dEJveEljb24nLCBmdW5jdGlvbiAoeCwgeSwgcmFkLCB3LCBoLCBwYWRYLCBwYWRZKSB7XG5cdCAgICAgICAgICB2YXIgeDEgPSB4IC0gdyAvIDIgKyBwYWRYIC8gMixcblx0ICAgICAgICAgICAgICB4MiA9IHggKyB3IC8gMiAtIHBhZFggLyAyLFxuXHQgICAgICAgICAgICAgIHkxID0geSAtIGggLyAyICsgcGFkWSAvIDIsXG5cdCAgICAgICAgICAgICAgeTIgPSB5ICsgaCAvIDIgLSBwYWRZIC8gMjtcblx0XG5cdCAgICAgICAgICByZXR1cm4gWydNJywgeDEsIHkxLCAnTCcsIHgyLCB5MSwgJ0wnLCB4MiwgeTIsICdMJywgeDEsIHkyLCAnWiddO1xuXHQgICAgICAgIH0pO1xuXHRcblx0ICAgICAgICB0b29sYmFyLmFkZENvbXBvbmVudChncm91cCk7XG5cdCAgICAgICAgdG9vbGJhci5hZGRDb21wb25lbnQodW5pZ3JvdXApO1xuXHQgICAgICAgIHJldHVybiB0b29sYmFyO1xuXHQgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgIGtleTogJ2dldExvZ2ljYWxTcGFjZScsXG5cdCAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRMb2dpY2FsU3BhY2UoYXZhaWxhYmxlV2lkdGgsIGF2YWlsYWJsZUhlaWdodCkge1xuXHQgICAgICAgIGF2YWlsYWJsZVdpZHRoIC89IDI7XG5cdCAgICAgICAgdmFyIGxvZ2ljYWxTcGFjZSxcblx0ICAgICAgICAgICAgd2lkdGggPSAwLFxuXHQgICAgICAgICAgICBoZWlnaHQgPSAwLFxuXHQgICAgICAgICAgICBpLFxuXHQgICAgICAgICAgICBsbjtcblx0XG5cdCAgICAgICAgZm9yIChpID0gMCwgbG4gPSB0aGlzLnRvb2xiYXJzLmxlbmd0aDsgaSA8IGxuOyBpKyspIHtcblx0ICAgICAgICAgIGxvZ2ljYWxTcGFjZSA9IHRoaXMudG9vbGJhcnNbaV0uZ2V0TG9naWNhbFNwYWNlKGF2YWlsYWJsZVdpZHRoLCBhdmFpbGFibGVIZWlnaHQpO1xuXHQgICAgICAgICAgd2lkdGggPSBNYXRoLm1heChsb2dpY2FsU3BhY2Uud2lkdGgsIHdpZHRoKTtcblx0ICAgICAgICAgIGhlaWdodCArPSBsb2dpY2FsU3BhY2UuaGVpZ2h0O1xuXHQgICAgICAgICAgdGhpcy50b29sYmFyc1tpXS53aWR0aCA9IGxvZ2ljYWxTcGFjZS53aWR0aDtcblx0ICAgICAgICAgIHRoaXMudG9vbGJhcnNbaV0uaGVpZ2h0ID0gbG9naWNhbFNwYWNlLmhlaWdodDtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaGVpZ2h0ICs9IHRoaXMucGFkZGluZztcblx0ICAgICAgICByZXR1cm4ge1xuXHQgICAgICAgICAgd2lkdGg6IHdpZHRoLFxuXHQgICAgICAgICAgaGVpZ2h0OiBoZWlnaHRcblx0ICAgICAgICB9O1xuXHQgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgIGtleTogJ3BsYWNlSW5DYW52YXMnLFxuXHQgICAgICB2YWx1ZTogZnVuY3Rpb24gcGxhY2VJbkNhbnZhcygpIHtcblx0ICAgICAgICB2YXIgX3NlbGYyID0gdGhpcztcblx0ICAgICAgICBfc2VsZjIucGFkZGluZyA9IDU7XG5cdCAgICAgICAgX3NlbGYyLnNwYWNlTWFuYWdlckluc3RhbmNlLmFkZChbe1xuXHQgICAgICAgICAgbmFtZTogZnVuY3Rpb24gbmFtZSgpIHtcblx0ICAgICAgICAgICAgcmV0dXJuICdzdGFuZGFyZC1wZXJpb2Qtc2VsZWN0b3ItZXh0Jztcblx0ICAgICAgICAgIH0sXG5cdCAgICAgICAgICByZWY6IGZ1bmN0aW9uIHJlZihvYmopIHtcblx0ICAgICAgICAgICAgcmV0dXJuIG9ialsnMCddO1xuXHQgICAgICAgICAgfSxcblx0ICAgICAgICAgIHNlbGY6IGZ1bmN0aW9uIHNlbGYoKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBfc2VsZjI7XG5cdCAgICAgICAgICB9LFxuXHQgICAgICAgICAgcHJpb3JpdHk6IGZ1bmN0aW9uIHByaW9yaXR5KCkge1xuXHQgICAgICAgICAgICByZXR1cm4gMjtcblx0ICAgICAgICAgIH0sXG5cdCAgICAgICAgICBsYXlvdXQ6IGZ1bmN0aW9uIGxheW91dChvYmopIHtcblx0ICAgICAgICAgICAgcmV0dXJuIG9iai5pbmxpbmU7XG5cdCAgICAgICAgICB9LFxuXHQgICAgICAgICAgb3JpZW50YXRpb246IFt7XG5cdCAgICAgICAgICAgIHR5cGU6IGZ1bmN0aW9uIHR5cGUob2JqKSB7XG5cdCAgICAgICAgICAgICAgcmV0dXJuIG9iai5ob3Jpem9udGFsO1xuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBwb3NpdGlvbjogW3tcblx0ICAgICAgICAgICAgICB0eXBlOiBmdW5jdGlvbiB0eXBlKG9iaikge1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuIG9iai50b3A7XG5cdCAgICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgICBhbGlnbm1lbnQ6IFt7XG5cdCAgICAgICAgICAgICAgICB0eXBlOiBmdW5jdGlvbiB0eXBlKG9iaikge1xuXHQgICAgICAgICAgICAgICAgICByZXR1cm4gb2JqLmxlZnQ7XG5cdCAgICAgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICAgICAgZGltZW5zaW9uczogW2Z1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgICAgICAgdmFyIHBhcmVudCA9IHRoaXMuZ2V0UGFyZW50Q29tcG9uZW50R3JvdXAoKTtcblx0ICAgICAgICAgICAgICAgICAgcmV0dXJuIF9zZWxmMi5nZXRMb2dpY2FsU3BhY2UocGFyZW50LmdldFdpZHRoKCksIHBhcmVudC5nZXRIZWlnaHQoKSk7XG5cdCAgICAgICAgICAgICAgICB9XVxuXHQgICAgICAgICAgICAgIH1dXG5cdCAgICAgICAgICAgIH1dXG5cdCAgICAgICAgICB9XVxuXHQgICAgICAgIH1dKTtcblx0ICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICBrZXk6ICdzZXREcmF3aW5nQ29uZmlndXJhdGlvbicsXG5cdCAgICAgIHZhbHVlOiBmdW5jdGlvbiBzZXREcmF3aW5nQ29uZmlndXJhdGlvbih4LCB5LCB3aWR0aCwgaGVpZ2h0LCBncm91cCkge1xuXHQgICAgICAgIHZhciBtZXMgPSB0aGlzLm1lYXN1cmVtZW50O1xuXHQgICAgICAgIG1lcy54ID0geDtcblx0ICAgICAgICBtZXMueSA9IHk7XG5cdCAgICAgICAgbWVzLndpZHRoID0gd2lkdGg7XG5cdCAgICAgICAgbWVzLmhlaWdodCA9IGhlaWdodDtcblx0XG5cdCAgICAgICAgdGhpcy5wYXJlbnRHcm91cCA9IGdyb3VwO1xuXHRcblx0ICAgICAgICByZXR1cm4gdGhpcztcblx0ICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICBrZXk6ICdkcmF3Jyxcblx0ICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRyYXcoeCwgeSwgd2lkdGgsIGhlaWdodCwgZ3JvdXApIHtcblx0ICAgICAgICB2YXIgbWVhc3VyZW1lbnQgPSB0aGlzLm1lYXN1cmVtZW50LFxuXHQgICAgICAgICAgICB0b29sYmFycyA9IHRoaXMudG9vbGJhcnMsXG5cdCAgICAgICAgICAgIGxuLFxuXHQgICAgICAgICAgICBpLFxuXHQgICAgICAgICAgICB0b29sYmFyLFxuXHQgICAgICAgICAgICBib3VuZEVsZW1lbnQsXG5cdCAgICAgICAgICAgIGJCb3gsXG5cdCAgICAgICAgICAgIHgxLFxuXHQgICAgICAgICAgICB4Mixcblx0ICAgICAgICAgICAgeTI7XG5cdFxuXHQgICAgICAgIHggPSB4ID09PSB1bmRlZmluZWQgPyBtZWFzdXJlbWVudC54IDogeDtcblx0ICAgICAgICB5ID0geSA9PT0gdW5kZWZpbmVkID8gbWVhc3VyZW1lbnQueSA6IHk7XG5cdCAgICAgICAgd2lkdGggPSB3aWR0aCA9PT0gdW5kZWZpbmVkID8gbWVhc3VyZW1lbnQud2lkdGggOiB3aWR0aDtcblx0ICAgICAgICBoZWlnaHQgPSBoZWlnaHQgPT09IHVuZGVmaW5lZCA/IG1lYXN1cmVtZW50LmhlaWdodCA6IGhlaWdodDtcblx0ICAgICAgICBncm91cCA9IGdyb3VwID09PSB1bmRlZmluZWQgPyB0aGlzLnBhcmVudEdyb3VwIDogZ3JvdXA7XG5cdCAgICAgICAgaWYgKHdpZHRoICYmIGhlaWdodCkge1xuXHQgICAgICAgICAgZm9yIChpID0gMCwgbG4gPSB0b29sYmFycy5sZW5ndGg7IGkgPCBsbjsgaSsrKSB7XG5cdCAgICAgICAgICAgIHRvb2xiYXIgPSB0b29sYmFyc1tpXTtcblx0ICAgICAgICAgICAgdG9vbGJhci5kcmF3KHgsIHksIGdyb3VwKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgY29uc29sZS5sb2codG9vbGJhcnMpO1xuXHQgICAgICAgIGZvciAodmFyIF9pNiA9IDAsIGlpID0gdG9vbGJhcnNbMF0uY29tcG9uZW50R3JvdXBzWzFdLnN5bWJvbExpc3Q7IF9pNiA8IGlpLmxlbmd0aDsgX2k2KyspIHtcblx0ICAgICAgICAgIGlmIChpaVtfaTZdLnN5bWJvbCA9PT0gdGhpcy5jbGlja2VkSWQpIHtcblx0ICAgICAgICAgICAgYm91bmRFbGVtZW50ID0gaWlbX2k2XS5nZXRCb3VuZEVsZW1lbnQoKTtcblx0ICAgICAgICAgICAgYkJveCA9IGJvdW5kRWxlbWVudC5nZXRCQm94KCk7XG5cdCAgICAgICAgICAgIHgxID0gYkJveC54O1xuXHQgICAgICAgICAgICB4MiA9IGJCb3gueDI7XG5cdCAgICAgICAgICAgIHkyID0gYkJveC55Mjtcblx0XG5cdCAgICAgICAgICAgIHRoaXMuZ3JhcGhpY3MucGFwZXIucGF0aCh7XG5cdCAgICAgICAgICAgICAgcGF0aDogWydNJywgeDEsIHkyIC0gMiAvIDIsICdMJywgeDIsIHkyIC0gMiAvIDJdLFxuXHQgICAgICAgICAgICAgICdzdHJva2UnOiAnI2ZmMDAwMCdcblx0ICAgICAgICAgICAgfSkudG9Gcm9udCgpO1xuXHQgICAgICAgICAgICAvLyB0aGlzLl9wYXJlbnRHcm91cC5zZXRTdGF0ZSh0aGlzKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1dKTtcblx0XG5cdCAgICByZXR1cm4gU3RhbmRhcmRQZXJpb2RTZWxlY3Rvcjtcblx0ICB9KCk7XG5cdFxuXHQgIHJldHVybiBTdGFuZGFyZFBlcmlvZFNlbGVjdG9yO1xuXHR9O1xuXG4vKioqLyB9XG4vKioqKioqLyBdKTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gc3RhbmRhcmQtcGVyaW9kLXNlbGVjdG9yLWVzNS5taW4uanMiLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcblxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0ZXhwb3J0czoge30sXG4gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuIFx0XHRcdGxvYWRlZDogZmFsc2VcbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrL2Jvb3RzdHJhcCAwMzQ0ZGYwMmIxNmVhMzIyODk5YyIsIid1c2Ugc3RyaWN0JztcbmNvbnN0IFN0YW5kYXJkUGVyaW9kU2VsZWN0b3IgPSByZXF1aXJlKCcuL3N0YW5kYXJkLXBlcmlvZC1zZWxlY3RvcicpO1xuXG53aW5kb3cuc3RQUyA9IG5ldyBTdGFuZGFyZFBlcmlvZFNlbGVjdG9yKCk7XG5cbjsoZnVuY3Rpb24gKGVudiwgZmFjdG9yeSkge1xuICBpZiAodHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcgJiYgbW9kdWxlLmV4cG9ydHMpIHtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IGVudi5kb2N1bWVudFxuICAgICAgID8gZmFjdG9yeShlbnYpIDogZnVuY3Rpb24gKHdpbikge1xuICAgICAgICAgaWYgKCF3aW4uZG9jdW1lbnQpIHtcbiAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdXaW5kb3cgd2l0aCBkb2N1bWVudCBub3QgcHJlc2VudCcpO1xuICAgICAgICAgfVxuICAgICAgICAgcmV0dXJuIGZhY3Rvcnkod2luLCB0cnVlKTtcbiAgICAgICB9O1xuICB9IGVsc2Uge1xuICAgIGVudi5TdGFuZGFyZFBlcmlvZFNlbGVjdG9yID0gZmFjdG9yeShlbnYsIHRydWUpO1xuICB9XG59KSh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHRoaXMsIGZ1bmN0aW9uIChfd2luZG93LCB3aW5kb3dFeGlzdHMpIHtcbiAgdmFyIEZDID0gX3dpbmRvdy5GdXNpb25DaGFydHM7XG4gIEZDLnJlZ2lzdGVyKCdleHRlbnNpb24nLCBbJ3ByaXZhdGUnLCAnU3RhbmRhcmRQZXJpb2RTZWxlY3RvcicsIGZ1bmN0aW9uICgpIHtcbiAgICBGQy5yZWdpc3RlckNvbXBvbmVudCgnZXh0ZW5zaW9ucycsICdTdGFuZGFyZFBlcmlvZFNlbGVjdG9yJywgU3RhbmRhcmRQZXJpb2RTZWxlY3Rvcih7RnVzaW9uQ2hhcnRzOiBGQ30pKTtcbiAgfV0pO1xufSk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvaW5kZXguanMiLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuXHRpZighbW9kdWxlLndlYnBhY2tQb2x5ZmlsbCkge1xuXHRcdG1vZHVsZS5kZXByZWNhdGUgPSBmdW5jdGlvbigpIHt9O1xuXHRcdG1vZHVsZS5wYXRocyA9IFtdO1xuXHRcdC8vIG1vZHVsZS5wYXJlbnQgPSB1bmRlZmluZWQgYnkgZGVmYXVsdFxuXHRcdG1vZHVsZS5jaGlsZHJlbiA9IFtdO1xuXHRcdG1vZHVsZS53ZWJwYWNrUG9seWZpbGwgPSAxO1xuXHR9XG5cdHJldHVybiBtb2R1bGU7XG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAod2VicGFjaykvYnVpbGRpbi9tb2R1bGUuanNcbi8vIG1vZHVsZSBpZCA9IDFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIENsYXNzIGRlZmluaXRpb24gb2YgU3RhbmRhcmRQZXJpb2RTZWxlY3RvclxuICovXG5cbmNsYXNzIFN0YW5kYXJkUGVyaW9kU2VsZWN0b3Ige1xuICBjb25zdHJ1Y3RvciAoKSB7XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLnJhdGlvID0gODtcbiAgICB0aGlzLnRvb2xib3ggPSBGdXNpb25DaGFydHMuZ2V0Q29tcG9uZW50KCdhcGknLCAndG9vbGJveCcpO1xuICAgIHRoaXMuSG9yaXpvbnRhbFRvb2xiYXIgPSB0aGlzLnRvb2xib3guSG9yaXpvbnRhbFRvb2xiYXI7XG4gICAgdGhpcy5Db21wb25lbnRHcm91cCA9IHRoaXMudG9vbGJveC5Db21wb25lbnRHcm91cDtcbiAgICB0aGlzLlN5bWJvbFN0b3JlID0gdGhpcy50b29sYm94LlN5bWJvbFN0b3JlO1xuICAgIHRoaXMuYWxsID0gMTtcbiAgICB0aGlzLmNhbGN1bGF0ZWRQZXJpb2RzID0gW107XG4gICAgdGhpcy5zdGFydERhdGFzZXQgPSAwO1xuICAgIC8vIHRoaXMuZW5kRGF0YXNldCA9IHRoaXMuZ2xvYmFsUmVhY3RpdmVNb2RlbC5tb2RlbFsneC1heGlzLWFic29sdXRlLXJhbmdlLWVuZCddO1xuICAgIHRoaXMuc3RhcnRBY3RpdmVXaW5kb3cgPSAwO1xuICAgIHRoaXMuZW5kQWN0aXZlV2luZG93ID0gMTtcbiAgICB0aGlzLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHMgPSBbXTtcbiAgICB0aGlzLnN0YW5kYXJkQ29udGV4dWFsUGVyaW9kcyA9IFtdO1xuICAgIHRoaXMuc3RhcnRQb2ludFVuaXQgPSAwO1xuICAgIHRoaXMuc3RhcnRQb2ludE11bHRpcGxpZXIgPSAwO1xuICAgIHRoaXMuY2xpY2tlZElkO1xuICAgIHRoaXMubm9DYWxjQnV0dG9ucyA9IDA7XG4gICAgdGhpcy50aW1lUGVyaW9kcyA9IFt7XG4gICAgICAnbmFtZSc6ICdzZWNvbmQnLFxuICAgICAgJ21pbGxpc2Vjb25kcyc6IDEwMDAsXG4gICAgICAnc3RhcnRpbmdQb2ludCc6IDAsXG4gICAgICAndG90YWwnOiA2MCxcbiAgICAgICdhYmJyZXZpYXRpb24nOiAnc2VjJyxcbiAgICAgICdkZXNjcmlwdGlvbic6ICdTRUNPTkQnLFxuICAgICAgJ3BhcmVudCc6ICdtaW51dGUnLFxuICAgICAgJ211bHRpcGxpZXJzJzogWzEsIDUsIDE1LCAzMF1cbiAgICB9LCB7XG4gICAgICAnbmFtZSc6ICdtaW51dGUnLFxuICAgICAgJ21pbGxpc2Vjb25kcyc6IDYwMDAwLFxuICAgICAgJ3N0YXJ0aW5nUG9pbnQnOiAwLFxuICAgICAgJ3RvdGFsJzogNjAsXG4gICAgICAnYWJicmV2aWF0aW9uJzogJ21pbicsXG4gICAgICAnZGVzY3JpcHRpb24nOiAnTUlOVVRFJyxcbiAgICAgICdwYXJlbnQnOiAnaG91cicsXG4gICAgICAnbXVsdGlwbGllcnMnOiBbMSwgNSwgMTUsIDMwXVxuICAgIH0sIHtcbiAgICAgICduYW1lJzogJ2hvdXInLFxuICAgICAgJ21pbGxpc2Vjb25kcyc6IDM2MDAwMDAsXG4gICAgICAnc3RhcnRpbmdQb2ludCc6IDAsXG4gICAgICAndG90YWwnOiAyNCxcbiAgICAgICdhYmJyZXZpYXRpb24nOiAnaHInLFxuICAgICAgJ2Rlc2NyaXB0aW9uJzogJ0hPVVInLFxuICAgICAgJ3BhcmVudCc6ICdkYXknLFxuICAgICAgJ211bHRpcGxpZXJzJzogWzEsIDMsIDYsIDEyXVxuICAgIH0sIHtcbiAgICAgICduYW1lJzogJ2RheScsXG4gICAgICAnbWlsbGlzZWNvbmRzJzogODY0MDAwMDAsXG4gICAgICAnc3RhcnRpbmdQb2ludCc6IDAsXG4gICAgICAndG90YWwnOiAzMCxcbiAgICAgICdhYmJyZXZpYXRpb24nOiAnRCcsXG4gICAgICAnZGVzY3JpcHRpb24nOiAnREFZJyxcbiAgICAgICdwYXJlbnQnOiAnbW9udGgnLFxuICAgICAgJ211bHRpcGxpZXJzJzogWzEsIDcsIDE1XVxuICAgIH0sIHtcbiAgICAgICduYW1lJzogJ21vbnRoJyxcbiAgICAgICdtaWxsaXNlY29uZHMnOiAyNTkyMDAwMDAwLFxuICAgICAgJ3N0YXJ0aW5nUG9pbnQnOiAwLFxuICAgICAgJ3RvdGFsJzogMTIsXG4gICAgICAnYWJicmV2aWF0aW9uJzogJ00nLFxuICAgICAgJ2Rlc2NyaXB0aW9uJzogJ01PTlRIJyxcbiAgICAgICdwYXJlbnQnOiAneWVhcicsXG4gICAgICAnbXVsdGlwbGllcnMnOiBbMSwgMywgNl1cbiAgICB9LCB7XG4gICAgICAnbmFtZSc6ICd5ZWFyJyxcbiAgICAgICdtaWxsaXNlY29uZHMnOiAzMTEwNDAwMDAwMCxcbiAgICAgICdzdGFydGluZ1BvaW50JzogMCxcbiAgICAgICdhYmJyZXZpYXRpb24nOiAnWScsXG4gICAgICAnZGVzY3JpcHRpb24nOiAnWUVBUicsXG4gICAgICAnbXVsdGlwbGllcnMnOiBbMSwgMywgNV1cbiAgICB9XTtcbiAgICB0aGlzLnRkQnV0dG9ucyA9IFtcbiAgICAgIHtcbiAgICAgICAgJ25hbWUnOiAnWVREJyxcbiAgICAgICAgJ2FiYnJldmlhdGlvbic6ICdZVEQnLFxuICAgICAgICAncGFyZW50JzogJ3llYXInLFxuICAgICAgICAnbWlsbGlzZWNvbmRzJzogMzExMDQwMDAwMDAsXG4gICAgICAgICdkZXNjcmlwdGlvbic6ICdZZWFyIHRvIERhdGUnXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICAnbmFtZSc6ICdRVEQnLFxuICAgICAgICAnYWJicmV2aWF0aW9uJzogJ1FURCcsXG4gICAgICAgICdwYXJlbnQnOiAnbW9udGgnLFxuICAgICAgICAnbXVsdGlwbGllcic6IDMsXG4gICAgICAgICdtaWxsaXNlY29uZHMnOiA3Nzc2MDAwMDAwLFxuICAgICAgICAnZGVzY3JpcHRpb24nOiAnUXVhcnRlciB0byBEYXRlJ1xuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgJ25hbWUnOiAnTVREJyxcbiAgICAgICAgJ2FiYnJldmlhdGlvbic6ICdNVEQnLFxuICAgICAgICAncGFyZW50JzogJ21vbnRoJyxcbiAgICAgICAgJ21pbGxpc2Vjb25kcyc6IDI1OTIwMDAwMDAsXG4gICAgICAgICdkZXNjcmlwdGlvbic6ICdNb250aCB0byBEYXRlJ1xuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgJ25hbWUnOiAnV1REJyxcbiAgICAgICAgJ2FiYnJldmlhdGlvbic6ICdXVEQnLFxuICAgICAgICAncGFyZW50JzogJ2RheScsXG4gICAgICAgICdtdWx0aXBsaWVyJzogNyxcbiAgICAgICAgJ21pbGxpc2Vjb25kcyc6IDYwNDgwMDAwMCxcbiAgICAgICAgJ2Rlc2NyaXB0aW9uJzogJ1dlZWsgdG8gRGF0ZSdcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgICduYW1lJzogJ1knLFxuICAgICAgICAnYWJicmV2aWF0aW9uJzogJ1knLFxuICAgICAgICAncGFyZW50JzogJ2RheScsXG4gICAgICAgICdtaWxsaXNlY29uZHMnOiA4NjQwMDAwMCxcbiAgICAgICAgJ2Rlc2NyaXB0aW9uJzogJ1llc3RlcmRheSdcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgICduYW1lJzogJ1QnLFxuICAgICAgICAnYWJicmV2aWF0aW9uJzogJ1QnLFxuICAgICAgICAncGFyZW50JzogJ2RheScsXG4gICAgICAgICdtaWxsaXNlY29uZHMnOiA4NjQwMDAwMCxcbiAgICAgICAgJ2Rlc2NyaXB0aW9uJzogJ1RvZGF5J1xuICAgICAgfVxuICAgIF07XG4gICAgdGhpcy5jb25maWcgPSB7XG4gICAgICBhbmNob3JQb3NpdGlvbnM6ICdyaWdodCcsXG4gICAgICBhbGw6ICcxJyxcbiAgICAgIGNvbnRleHR1YWw6ICcxJyxcbiAgICAgIGNhbGN1bGF0ZWQ6ICcxJyxcbiAgICAgIHRlcnRpYXJ5VGltZVBlcmlvZHM6IHt9XG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBIGZ1bmN0aW9uIHRvIGdlbmVyYXRlIHRoZSBjYWxjdWxhdGVkIGJ1dHRvbnMgdXNpbmdcbiAgICogdGhlIGFjdGl2ZSByYW5nZSBhbmQgdGhlIGxvY2F0aW9uIG9mIHRoZSBhY3RpdmUgcmFuZ2VcbiAgICovXG4gIGdlbmVyYXRlQ2FsY3VsYXRlZEJ1dHRvbnMgKCkge1xuICAgIHZhciB0YXJnZXRCbG9jayA9IHRoaXMuZW5kQWN0aXZlV2luZG93IC0gdGhpcy5zdGFydERhdGFzZXQsXG4gICAgICBpID0gMCxcbiAgICAgIGogPSAwLFxuICAgICAgYWN0aXZlV2luZG93ID0gdGhpcy5lbmRBY3RpdmVXaW5kb3cgLSB0aGlzLnN0YXJ0QWN0aXZlV2luZG93LFxuICAgICAgY291bnQgPSAwO1xuICAgIHRoaXMuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kcyA9IFtdO1xuICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLnRpbWVQZXJpb2RzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAvLyBjaGVja2luZyB3aGV0aGVyIHRoZSB1bml0IGlzIGFwcGxpY2FibGUgZm9yIHRoZSBjdXJyZW50IHRhcmdldCBibG9ja1xuICAgICAgaWYgKHRhcmdldEJsb2NrIC8gdGhpcy50aW1lUGVyaW9kc1tpXS5taWxsaXNlY29uZHMgPj0gMSkge1xuICAgICAgICAvLyBjaGVja2luZyB3aGV0aGVyIHRoZSB1bml0IGlzIG9mIHRoZSBoaWdoZXIgb3JkZXIgYW5kIG9ubHkgbXVsdGlwbGllciAxIGlzIGFwcGxpY2FibGVcbiAgICAgICAgaWYgKE1hdGguZmxvb3IoKGFjdGl2ZVdpbmRvdykgLyB0aGlzLnRpbWVQZXJpb2RzW2ldLm1pbGxpc2Vjb25kcykgPCAxKSB7XG4gICAgICAgICAgdGhpcy5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzLnB1c2goe1xuICAgICAgICAgICAgJ2FiYnJldmlhdGlvbic6IHRoaXMudGltZVBlcmlvZHNbaV0uYWJicmV2aWF0aW9uLFxuICAgICAgICAgICAgJ2Rlc2NyaXB0aW9uJzogdGhpcy50aW1lUGVyaW9kc1tpXS5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgICdtaWxsaXNlY29uZHMnOiB0aGlzLnRpbWVQZXJpb2RzW2ldLm1pbGxpc2Vjb25kcyxcbiAgICAgICAgICAgICdtdWx0aXBsaWVycyc6IFsxXVxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2UgeyAvLyBpZiB0aGUgdW5pdCBpcyBvZiB0aGUgb3JkZXIgb2YgdGhlIHRhcmdldCBibG9jayBhbmQgY2FsY3VsYXRpbmcgdGhlIG11bHRpcGxpZXJzXG4gICAgICAgICAgdGhpcy5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzLnB1c2goe1xuICAgICAgICAgICAgJ2FiYnJldmlhdGlvbic6IHRoaXMudGltZVBlcmlvZHNbaV0uYWJicmV2aWF0aW9uLFxuICAgICAgICAgICAgJ2Rlc2NyaXB0aW9uJzogdGhpcy50aW1lUGVyaW9kc1tpXS5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgICdtaWxsaXNlY29uZHMnOiB0aGlzLnRpbWVQZXJpb2RzW2ldLm1pbGxpc2Vjb25kcyxcbiAgICAgICAgICAgICdtdWx0aXBsaWVycyc6IFtdXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgLy8gY2FsY3VsYXRpbmcgYW5kIHBvcHVsYXRpbmcgdGhlIGFwcGxpY2FibGUgbXVsdHBsaWVycyBvZiBlYWNoIHVuaXRcbiAgICAgICAgICBmb3IgKGogPSAwOyBqIDwgdGhpcy50aW1lUGVyaW9kc1tpXS5tdWx0aXBsaWVycy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgaWYgKGFjdGl2ZVdpbmRvdyAvIHRoaXMucmF0aW8gPCB0aGlzLnRpbWVQZXJpb2RzW2ldLm11bHRpcGxpZXJzW2pdICogdGhpcy50aW1lUGVyaW9kc1tpXS5taWxsaXNlY29uZHMpIHtcbiAgICAgICAgICAgICAgdGhpcy5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW3RoaXMuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kcy5sZW5ndGggLSAxXS5tdWx0aXBsaWVycy5wdXNoKFxuICAgICAgICAgICAgICAgIHRoaXMudGltZVBlcmlvZHNbaV0ubXVsdGlwbGllcnNbal1cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLm5vQ2FsY0J1dHRvbnMgPSBJbmZpbml0eTtcbiAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBmb3IgKGogPSAwOyBqIDwgdGhpcy5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW2ldLm11bHRpcGxpZXJzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICsrY291bnQ7XG4gICAgICAgIGlmICh0aGlzLm5vQ2FsY0J1dHRvbnMgPiBpKSB7XG4gICAgICAgICAgdGhpcy5ub0NhbGNCdXR0b25zID0gaTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY291bnQgPD0gNCkge1xuICAgICAgICAgIHRoaXMuc3RhcnRQb2ludE11bHRpcGxpZXIgPSBqO1xuICAgICAgICAgIHRoaXMuc3RhcnRQb2ludFVuaXQgPSBpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gdGhpcy5kcmF3QnV0dG9uc0NhbGN1bGF0ZWQodGhpcy5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBIGZ1bmN0aW9uIHRvIGdlbmVyYXRlIHRoZSBjb250ZXh0dWFsIGJ1dHRvbnMgdXNpbmdcbiAgICogdGhlIGVuZCBwb2ludCBvZiB0aGUgdGltZS1zY2FsZVxuICAgKi9cbiAgZ2VuZXJhdGVDb250ZXh0dWFsQnV0dG9ucyAoKSB7XG4gICAgLy8gZ2VuZXJhdGluZyBhbiBhcnJheSB3aXRoIGFwcGxpY2FibGUgVEQgYnV0dG9uc1xuICAgIHZhciBidXR0b25zID0gW10sXG4gICAgICBpID0gMCxcbiAgICAgIGVuZFN0YW1wID0gdGhpcy5nbG9iYWxSZWFjdGl2ZU1vZGVsLm1vZGVsWyd4LWF4aXMtYWJzb2x1dGUtcmFuZ2UtZW5kJ10sXG4gICAgICBkYXRlU3RhcnQgPSBlbmRTdGFtcCAtIDIsXG4gICAgICBkYXRlRW5kID0gZW5kU3RhbXAsXG4gICAgICByZWxhdGl2ZVREQnV0dG9uID0ge307XG4gICAgZm9yICg7IGkgPCB0aGlzLnRkQnV0dG9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgZGF0ZVN0YXJ0ID0gbmV3IERhdGUoZW5kU3RhbXApO1xuICAgICAgaWYgKHRoaXMudGRCdXR0b25zW2ldLm5hbWUgPT09ICdZVEQnKSB7XG4gICAgICAgIGRhdGVTdGFydC5zZXRNb250aCgwKTtcbiAgICAgICAgZGF0ZVN0YXJ0LnNldERhdGUoMSk7XG4gICAgICAgIGRhdGVTdGFydC5zZXRIb3VycygwKTtcbiAgICAgICAgZGF0ZVN0YXJ0LnNldE1pbnV0ZXMoMCk7XG4gICAgICAgIGRhdGVTdGFydC5zZXRTZWNvbmRzKDApO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLnRkQnV0dG9uc1tpXS5uYW1lID09PSAnTVREJykge1xuICAgICAgICBkYXRlU3RhcnQuc2V0RGF0ZSgxKTtcbiAgICAgICAgZGF0ZVN0YXJ0LnNldEhvdXJzKDApO1xuICAgICAgICBkYXRlU3RhcnQuc2V0TWludXRlcygwKTtcbiAgICAgICAgZGF0ZVN0YXJ0LnNldFNlY29uZHMoMCk7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMudGRCdXR0b25zW2ldLm5hbWUgPT09ICdRVEQnKSB7XG4gICAgICAgIGRhdGVTdGFydC5zZXRNb250aCgxMSAtIChkYXRlU3RhcnQuZ2V0TW9udGgoKSAlIDQpKTtcbiAgICAgICAgZGF0ZVN0YXJ0LnNldERhdGUoMCk7XG4gICAgICAgIGRhdGVTdGFydC5zZXRIb3VycygwKTtcbiAgICAgICAgZGF0ZVN0YXJ0LnNldE1pbnV0ZXMoMCk7XG4gICAgICAgIGRhdGVTdGFydC5zZXRTZWNvbmRzKDApO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLnRkQnV0dG9uc1tpXS5uYW1lID09PSAnV1REJykge1xuICAgICAgICBkYXRlU3RhcnQuc2V0RGF0ZShkYXRlU3RhcnQuZ2V0RGF0ZSgpIC0gZGF0ZVN0YXJ0LmdldERheSgpKTtcbiAgICAgICAgZGF0ZVN0YXJ0LnNldEhvdXJzKDApO1xuICAgICAgICBkYXRlU3RhcnQuc2V0TWludXRlcygwKTtcbiAgICAgICAgZGF0ZVN0YXJ0LnNldFNlY29uZHMoMCk7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMudGRCdXR0b25zW2ldLm5hbWUgPT09ICdZJykge1xuICAgICAgICBkYXRlU3RhcnQuc2V0SG91cnMoMCk7XG4gICAgICAgIGRhdGVTdGFydC5zZXRNaW51dGVzKDApO1xuICAgICAgICBkYXRlU3RhcnQuc2V0U2Vjb25kcygwKTtcbiAgICAgICAgZGF0ZVN0YXJ0IC09IDg2NDAwMDAwO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLnRkQnV0dG9uc1tpXS5uYW1lID09PSAnVCcpIHtcbiAgICAgICAgZGF0ZVN0YXJ0LnNldEhvdXJzKDApO1xuICAgICAgICBkYXRlU3RhcnQuc2V0TWludXRlcygwKTtcbiAgICAgICAgZGF0ZVN0YXJ0LnNldFNlY29uZHMoMCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChkYXRlRW5kIDwgZGF0ZVN0YXJ0KSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy50ZEJ1dHRvbnNbaV0uZGF0ZVN0YXJ0ID0gZGF0ZVN0YXJ0LnZhbHVlT2YoKTtcbiAgICAgICAgdGhpcy50ZEJ1dHRvbnNbaV0uZGF0ZUVuZCA9IGRhdGVFbmQudmFsdWVPZigpO1xuICAgICAgICBidXR0b25zLnB1c2godGhpcy50ZEJ1dHRvbnNbaV0pO1xuICAgICAgfVxuICAgIH1cbiAgICByZWxhdGl2ZVREQnV0dG9uLm1pbGxpc2Vjb25kcyA9IEluZmluaXR5O1xuICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLnRkQnV0dG9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKE1hdGguYWJzKHRoaXMudGRCdXR0b25zW2ldLm1pbGxpc2Vjb25kcyAtICh0aGlzLmVuZEFjdGl2ZVdpbmRvdyAtIHRoaXMuc3RhcnRBY3RpdmVXaW5kb3cpKSA8IHJlbGF0aXZlVERCdXR0b24ubWlsbGlzZWNvbmRzKSB7XG4gICAgICAgIHJlbGF0aXZlVERCdXR0b24ubWlsbGlzZWNvbmRzID0gdGhpcy50ZEJ1dHRvbnNbaV0ubWlsbGlzZWNvbmRzO1xuICAgICAgICByZWxhdGl2ZVREQnV0dG9uLm5hbWUgPSB0aGlzLnRkQnV0dG9uc1tpXS5hYmJyZXZpYXRpb247XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5zdGFuZGFyZENvbnRleHVhbFBlcmlvZHMgPSBidXR0b25zO1xuICAgIC8vIHRoaXMuZHJhd0J1dHRvbnNDb250ZXh0dWFsKHRoaXMuc3RhbmRhcmRDb250ZXh1YWxQZXJpb2RzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBIGZ1bmN0aW9uIHRvIHNldCB0aGUgYWN0aXZlIHBlcmlvZCdzXG4gICAqIHN0YXJ0IGFuZCBlbmQgcG9pbnRcbiAgICogQHBhcmFtICB7bnVtYmVyfSBkYXRlIHN0YW1wIC0gQSBVTklYIHRpbWVzdGFtcCB0byBiZSBzZXQgYXMgdGhlIHN0YXJ0IHBvaW50IG9mIGFjdGl2ZSBwZXJpb2RcbiAgICogQHBhcmFtICB7bnVtYmVyfSBkYXRlIHN0YW1wIC0gQSBVTklYIHRpbWVzdGFtcCB0byBiZSBzZXQgYXMgdGhlIGVuZCBwb2ludCBvZiBhY3RpdmUgcGVyaW9kXG4gICAqL1xuICBzZXRBY3RpdmVQZXJpb2QgKCkge1xuICAgIHZhciBzdGFydCxcbiAgICAgIGVuZDtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgZW5kID0gdGhpcy5nbG9iYWxSZWFjdGl2ZU1vZGVsLm1vZGVsWyd4LWF4aXMtdmlzaWJsZS1yYW5nZS1lbmQnXTtcbiAgICAgIHN0YXJ0ID0gZW5kIC0gYXJndW1lbnRzWzBdO1xuICAgIH0gZWxzZSBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMikge1xuICAgICAgc3RhcnQgPSBhcmd1bWVudHNbMF07XG4gICAgICBlbmQgPSBhcmd1bWVudHNbMV07XG4gICAgfVxuXG4gICAgdGhpcy5zdGFydEFjdGl2ZVdpbmRvdyA9IHN0YXJ0O1xuICAgIHRoaXMuZW5kQWN0aXZlV2luZG93ID0gZW5kO1xuICAgIHRoaXMuZ2VuZXJhdGVDYWxjdWxhdGVkQnV0dG9ucygpO1xuICAgIHRoaXMuZ2xvYmFsUmVhY3RpdmVNb2RlbC5tb2RlbFsneC1heGlzLXZpc2libGUtcmFuZ2Utc3RhcnQnXSA9IHRoaXMuc3RhcnRBY3RpdmVXaW5kb3c7XG4gICAgdGhpcy5nbG9iYWxSZWFjdGl2ZU1vZGVsLm1vZGVsWyd4LWF4aXMtdmlzaWJsZS1yYW5nZS1lbmQnXSA9IHRoaXMuZW5kQWN0aXZlV2luZG93O1xuICAgIHRoaXMuZ2VuZXJhdGVDb250ZXh0dWFsQnV0dG9ucygpO1xuICB9XG5cbiAgLyoqXG4gICAqIEEgZnVuY3Rpb24gdG8gc2V0IHRoZSBzdGFydCBhbmQgZW5kIHBvaW50IG9mIHRoZVxuICAgKiBlbnRpcmUgdGltZS1saW5lXG4gICAqIEBwYXJhbSAge251bWJlcn0gZGF0ZSBzdGFtcCAtIEEgVU5JWCB0aW1lc3RhbXAgdG8gYmUgc2V0IGFzIHRoZSBzdGFydCBwb2ludCBvZiB0aW1lLWxpbmVcbiAgICogQHBhcmFtICB7bnVtYmVyfSBkYXRlIHN0YW1wIC0gQSBVTklYIHRpbWVzdGFtcCB0byBiZSBzZXQgYXMgdGhlIGVuZCBwb2ludCBvZiB0aW1lLWxpbmVcbiAgICovXG4gIHNldFRpbWVsaW5lIChzdGFydCwgZW5kKSB7XG4gICAgdGhpcy5zdGFydERhdGFzZXQgPSBzdGFydDtcbiAgICB0aGlzLmVuZERhdGFzZXQgPSBlbmQ7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0YXJ0QWN0aXZlUmFuZ2UnKS5pbm5lckhUTUwgPSBuZXcgRGF0ZSh0aGlzLnN0YXJ0RGF0YXNldCk7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VuZEFjdGl2ZVJhbmdlJykuaW5uZXJIVE1MID0gbmV3IERhdGUodGhpcy5lbmREYXRhc2V0KTtcbiAgICB0aGlzLmdlbmVyYXRlQ2FsY3VsYXRlZEJ1dHRvbnMoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBIGZ1bmN0aW9uIHRvIHNldCB0aGUgb2JqZWN0IHRvIHNldCB0aGUgdXNlciBwcmVmZXJlbmNlc1xuICAgKi9cbiAgY29uZmlndXJlIChjb25maWcpIHtcbiAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgfVxuXG4gIC8qKlxuICAgKiBGdXNpb25jaGFydHMgbGlmZSBjeWNsZSBtZXRob2QgZm9yIGV4dGVuc2lvblxuICAgKi9cbiAgaW5pdCAocmVxdWlyZSkge1xuICAgIHZhciBpbnN0YW5jZSA9IHRoaXM7XG4gICAgcmVxdWlyZShbXG4gICAgICAneEF4aXMnLFxuICAgICAgJ3lBeGlzJyxcbiAgICAgICdncmFwaGljcycsXG4gICAgICAnY2hhcnQnLFxuICAgICAgJ2RhdGFzZXQnLFxuICAgICAgJ1Bsb3RNYW5hZ2VyJyxcbiAgICAgICdjYW52YXNDb25maWcnLFxuICAgICAgJ01hcmtlck1hbmFnZXInLFxuICAgICAgJ3JlYWN0aXZlTW9kZWwnLFxuICAgICAgJ2dsb2JhbFJlYWN0aXZlTW9kZWwnLFxuICAgICAgJ3NwYWNlTWFuYWdlckluc3RhbmNlJyxcbiAgICAgICdzbWFydExhYmVsJyxcbiAgICAgIGZ1bmN0aW9uIChcbiAgICAgICAgICAgIHhBeGlzLFxuICAgICAgICAgICAgeUF4aXMsXG4gICAgICAgICAgICBncmFwaGljcyxcbiAgICAgICAgICAgIGNoYXJ0LFxuICAgICAgICAgICAgZGF0YXNldCxcbiAgICAgICAgICAgIHBsb3RNYW5hZ2VyLFxuICAgICAgICAgICAgY2FudmFzQ29uZmlnLFxuICAgICAgICAgICAgbWFya2VyTWFuYWdlcixcbiAgICAgICAgICAgIHJlYWN0aXZlTW9kZWwsXG4gICAgICAgICAgICBnbG9iYWxSZWFjdGl2ZU1vZGVsLFxuICAgICAgICAgICAgc3BhY2VNYW5hZ2VySW5zdGFuY2UsXG4gICAgICAgICAgICBzbWFydExhYmVsKSB7XG4gICAgICAgIGluc3RhbmNlLnhBeGlzID0geEF4aXM7XG4gICAgICAgIGluc3RhbmNlLnlBeGlzID0geUF4aXM7XG4gICAgICAgIGluc3RhbmNlLmdyYXBoaWNzID0gZ3JhcGhpY3M7XG4gICAgICAgIGluc3RhbmNlLmNoYXJ0ID0gY2hhcnQ7XG4gICAgICAgIGluc3RhbmNlLmRhdGFzZXQgPSBkYXRhc2V0O1xuICAgICAgICBpbnN0YW5jZS5wbG90TWFuYWdlciA9IHBsb3RNYW5hZ2VyO1xuICAgICAgICBpbnN0YW5jZS5tYXJrZXJNYW5hZ2VyID0gbWFya2VyTWFuYWdlcjtcbiAgICAgICAgaW5zdGFuY2UuY2FudmFzQ29uZmlnID0gY2FudmFzQ29uZmlnO1xuICAgICAgICBpbnN0YW5jZS5yZWFjdGl2ZU1vZGVsID0gcmVhY3RpdmVNb2RlbDtcbiAgICAgICAgaW5zdGFuY2UuZ2xvYmFsUmVhY3RpdmVNb2RlbCA9IGdsb2JhbFJlYWN0aXZlTW9kZWw7XG4gICAgICAgIGluc3RhbmNlLnNwYWNlTWFuYWdlckluc3RhbmNlID0gc3BhY2VNYW5hZ2VySW5zdGFuY2U7XG4gICAgICAgIGluc3RhbmNlLnNtYXJ0TGFiZWwgPSBzbWFydExhYmVsO1xuICAgICAgfVxuICAgIF0pO1xuICAgIHRoaXMuc3BhY2VNYW5hZ2VySW5zdGFuY2UgPSBpbnN0YW5jZS5zcGFjZU1hbmFnZXJJbnN0YW5jZTtcbiAgICB0aGlzLmdsb2JhbFJlYWN0aXZlTW9kZWwgPSBpbnN0YW5jZS5nbG9iYWxSZWFjdGl2ZU1vZGVsO1xuICAgIHRoaXMuZW5kQWN0aXZlV2luZG93ID0gaW5zdGFuY2UuZ2xvYmFsUmVhY3RpdmVNb2RlbC5tb2RlbFsneC1heGlzLXZpc2libGUtcmFuZ2UtZW5kJ107XG4gICAgdGhpcy5zdGFydEFjdGl2ZVdpbmRvdyA9IGluc3RhbmNlLmdsb2JhbFJlYWN0aXZlTW9kZWwubW9kZWxbJ3gtYXhpcy12aXNpYmxlLXJhbmdlLXN0YXJ0J107XG4gICAgdGhpcy5zdGFydERhdGFzZXQgPSBpbnN0YW5jZS5nbG9iYWxSZWFjdGl2ZU1vZGVsLm1vZGVsWyd4LWF4aXMtYWJzb2x1dGUtcmFuZ2Utc3RhcnQnXTtcbiAgICB0aGlzLmVuZERhdGFzZXQgPSBpbnN0YW5jZS5nbG9iYWxSZWFjdGl2ZU1vZGVsLm1vZGVsWyd4LWF4aXMtYWJzb2x1dGUtcmFuZ2UtZW5kJ107XG4gICAgdGhpcy5zZXRBY3RpdmVQZXJpb2QodGhpcy5zdGFydEFjdGl2ZVdpbmRvdywgdGhpcy5lbmRBY3RpdmVXaW5kb3cpO1xuICAgIC8vIGluc3RhbmNlLmdsb2JhbFJlYWN0aXZlTW9kZWwubW9kZWxbJ194LWF4aXMtdmlzaWJsZS1yYW5nZS1zdGFydCddICs9IDEyNDQxNjAwMDAwMDtcbiAgICB0aGlzLnNldEFjdGl2ZVBlcmlvZCh0aGlzLnN0YXJ0QWN0aXZlV2luZG93LCB0aGlzLmVuZEFjdGl2ZVdpbmRvdyk7XG5cbiAgICB0aGlzLnRvb2xiYXJzID0gW107XG5cbiAgICB0aGlzLm1lYXN1cmVtZW50ID0ge307XG5cbiAgICB0aGlzLnRvb2xiYXJzLnB1c2godGhpcy5jcmVhdGVUb29sYmFyKCkpO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIGNyZWF0ZVRvb2xiYXIgKCkge1xuICAgIHZhciB1bmlncm91cCxcbiAgICAgIHRvb2xiYXIsXG4gICAgICBjYWxjdWxhdGVkQnV0dG9ucyxcbiAgICAgIGNvbnRleHR1YWxCdXR0b25zLFxuICAgICAgYWxsQnV0dG9uLFxuICAgICAgc2VsZiA9IHRoaXMsXG4gICAgICBlbmRBY3RpdmUgPSB0aGlzLmdsb2JhbFJlYWN0aXZlTW9kZWwubW9kZWxbJ3gtYXhpcy12aXNpYmxlLXJhbmdlLWVuZCddLFxuICAgICAgZGVkdWN0b3JBciA9IFtdLFxuICAgICAgc3RhcnRNdWx0aXBsaWVyLFxuICAgICAgZGVkdWN0b3IsXG4gICAgICBpLFxuICAgICAgaixcbiAgICAgIG1hcmdpbixcbiAgICAgIGZyb21EYXRlTGFiZWwsXG4gICAgICBncm91cDtcblxuICAgIGdyb3VwID0gbmV3IHRoaXMudG9vbGJveC5Db21wb25lbnRHcm91cCh7XG4gICAgICBwYXBlcjogdGhpcy5ncmFwaGljcy5wYXBlcixcbiAgICAgIGNoYXJ0OiB0aGlzLmNoYXJ0LFxuICAgICAgc21hcnRMYWJlbDogdGhpcy5zbWFydExhYmVsLFxuICAgICAgY2hhcnRDb250YWluZXI6IHRoaXMuZ3JhcGhpY3MuY29udGFpbmVyXG4gICAgfSk7XG5cbiAgICB1bmlncm91cCA9IG5ldyB0aGlzLnRvb2xib3guVW5pU2VsZWN0Q29tcG9uZW50R3JvdXAoe1xuICAgICAgcGFwZXI6IHRoaXMuZ3JhcGhpY3MucGFwZXIsXG4gICAgICBjaGFydDogdGhpcy5jaGFydCxcbiAgICAgIHNtYXJ0TGFiZWw6IHRoaXMuc21hcnRMYWJlbCxcbiAgICAgIGNoYXJ0Q29udGFpbmVyOiB0aGlzLmdyYXBoaWNzLmNvbnRhaW5lclxuICAgIH0pO1xuICAgIHVuaWdyb3VwLnNldENvbmZpZyh7XG4gICAgICBmaWxsOiAnI2ZmZicsXG4gICAgICBib3JkZXJUaGlja25lc3M6IDBcbiAgICB9KTtcbiAgICBncm91cC5zZXRDb25maWcoe1xuICAgICAgZmlsbDogJyNmZmYnLFxuICAgICAgYm9yZGVyVGhpY2tuZXNzOiAwXG4gICAgfSk7XG4gICAgdG9vbGJhciA9IG5ldyB0aGlzLkhvcml6b250YWxUb29sYmFyKHtcbiAgICAgIHBhcGVyOiB0aGlzLmdyYXBoaWNzLnBhcGVyLFxuICAgICAgY2hhcnQ6IHRoaXMuY2hhcnQsXG4gICAgICBzbWFydExhYmVsOiB0aGlzLnNtYXJ0TGFiZWwsXG4gICAgICBjaGFydENvbnRhaW5lcjogdGhpcy5ncmFwaGljcy5jb250YWluZXJcbiAgICB9KTtcbiAgICB0b29sYmFyLnNldENvbmZpZyh7XG4gICAgICBmaWxsOiAnI2ZmZicsXG4gICAgICBib3JkZXJUaGlja25lc3M6IDBcbiAgICB9KTtcbiAgICBmcm9tRGF0ZUxhYmVsID0gbmV3IHRoaXMudG9vbGJveC5MYWJlbCgnWm9vbTonLCB7XG4gICAgICBzbWFydExhYmVsOiB0aGlzLnNtYXJ0TGFiZWwsXG4gICAgICBwYXBlcjogdGhpcy5ncmFwaGljcy5wYXBlclxuICAgIH0sIHtcbiAgICAgIHRleHQ6IHtcbiAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICAnZm9udC1zaXplJzogJzE1JyxcbiAgICAgICAgICAnZm9udEZhbWlseSc6ICdNeXJpYWRQcm8nXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgICBncm91cC5hZGRTeW1ib2woZnJvbURhdGVMYWJlbCk7XG4gICAgYWxsQnV0dG9uID0gbmV3IHRoaXMudG9vbGJveC5TeW1ib2woJ0FMTCcsIHRydWUsIHtcbiAgICAgIHBhcGVyOiB0aGlzLmdyYXBoaWNzLnBhcGVyLFxuICAgICAgY2hhcnQ6IHRoaXMuY2hhcnQsXG4gICAgICBzbWFydExhYmVsOiB0aGlzLnNtYXJ0TGFiZWwsXG4gICAgICBjaGFydENvbnRhaW5lcjogdGhpcy5ncmFwaGljcy5jb250YWluZXJcbiAgICB9LCB7XG4gICAgICBmaWxsOiAnI2ZmZmZmZicsXG4gICAgICBsYWJlbEZpbGw6ICcjNjk2OTY5JyxcbiAgICAgIHN5bWJvbFN0cm9rZVdpZHRoOiAnMicsXG4gICAgICBzeW1ib2xTdHJva2U6ICcjMDAwMDAwJyxcbiAgICAgIHN0cm9rZVdpZHRoOiAnMScsXG4gICAgICBob3ZlckZpbGw6ICcjN2Y3ZjdmJyxcbiAgICAgIHJhZGl1czogMSxcbiAgICAgIG1hcmdpbjoge1xuICAgICAgICByaWdodDogNVxuICAgICAgfVxuICAgIH0pLmF0dGFjaEV2ZW50SGFuZGxlcnMoe1xuICAgICAgY2xpY2s6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc2VsZi5zZXRBY3RpdmVQZXJpb2Qoc2VsZi5zdGFydERhdGFzZXQsIHNlbGYuZW5kRGF0YXNldCk7XG4gICAgICAgIHRvb2xiYXIuZGlzcG9zZSgpO1xuICAgICAgICBzZWxmLmNsaWNrZWRJZCA9ICdBTEwnO1xuICAgICAgICBzZWxmLnRvb2xiYXJzLnBvcCgpO1xuICAgICAgICBzZWxmLnRvb2xiYXJzLnB1c2goc2VsZi5jcmVhdGVUb29sYmFyKCkpO1xuICAgICAgICBzZWxmLmdldExvZ2ljYWxTcGFjZSgpO1xuICAgICAgICBzZWxmLmRyYXcoKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHVuaWdyb3VwLmFkZFN5bWJvbChhbGxCdXR0b24pO1xuICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGZvciAoaiA9IHRoaXMuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kc1tpXS5tdWx0aXBsaWVycy5sZW5ndGggLSAxOyBqID49IDA7IGotLSkge1xuICAgICAgICBkZWR1Y3RvckFyLnB1c2goc2VsZi5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW2ldLm11bHRpcGxpZXJzW2pdICogc2VsZi5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW2ldLm1pbGxpc2Vjb25kcyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY2FsY3VsYXRlZEJ1dHRvbnMgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gc2VsZi5zdGFydFBvaW50VW5pdDsgaSA+PSAwOyBpLS0pIHtcbiAgICAgIGlmIChpID09PSBzZWxmLnN0YXJ0UG9pbnRVbml0KSB7XG4gICAgICAgIHN0YXJ0TXVsdGlwbGllciA9IHNlbGYuc3RhcnRQb2ludE11bHRpcGxpZXI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdGFydE11bHRpcGxpZXIgPSBzZWxmLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHNbaV0ubXVsdGlwbGllcnMubGVuZ3RoIC0gMTtcbiAgICAgIH1cbiAgICAgIGZvciAobGV0IGogPSBzdGFydE11bHRpcGxpZXI7IGogPj0gMDsgai0tKSB7XG4gICAgICAgIG1hcmdpbiA9IChpID09PSBzZWxmLm5vQ2FsY0J1dHRvbnMgJiYgaiA9PT0gMCkgPyA1IDogMDtcbiAgICAgICAgY29uc29sZS5sb2coZW5kQWN0aXZlLCBpLCBzZWxmLm5vQ2FsY0J1dHRvbnMsIGosIG1hcmdpbik7XG4gICAgICAgIGNhbGN1bGF0ZWRCdXR0b25zW2ldID0gbmV3IHRoaXMudG9vbGJveC5TeW1ib2woc2VsZi5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW2ldLm11bHRpcGxpZXJzW2pdICsgc2VsZi5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW2ldLmFiYnJldmlhdGlvbiwgdHJ1ZSwge1xuICAgICAgICAgIHBhcGVyOiB0aGlzLmdyYXBoaWNzLnBhcGVyLFxuICAgICAgICAgIGNoYXJ0OiB0aGlzLmNoYXJ0LFxuICAgICAgICAgIHNtYXJ0TGFiZWw6IHRoaXMuc21hcnRMYWJlbCxcbiAgICAgICAgICBjaGFydENvbnRhaW5lcjogdGhpcy5ncmFwaGljcy5jb250YWluZXJcbiAgICAgICAgfSwge1xuICAgICAgICAgIGZpbGw6ICcjZmZmZmZmJyxcbiAgICAgICAgICBsYWJlbEZpbGw6ICcjNjk2OTY5JyxcbiAgICAgICAgICBzeW1ib2xTdHJva2VXaWR0aDogJzInLFxuICAgICAgICAgIHN5bWJvbFN0cm9rZTogJyMwMDAwMDAnLFxuICAgICAgICAgIHN0cm9rZVdpZHRoOiAnMScsXG4gICAgICAgICAgaG92ZXJGaWxsOiAnIzdmN2Y3ZicsXG4gICAgICAgICAgcmFkaXVzOiAxLFxuICAgICAgICAgIG1hcmdpbjoge1xuICAgICAgICAgICAgcmlnaHQ6IG1hcmdpblxuICAgICAgICAgIH1cbiAgICAgICAgfSkuYXR0YWNoRXZlbnRIYW5kbGVycyh7XG4gICAgICAgICAgJ2NsaWNrJzogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZGVkdWN0b3IgPSAoc2VsZi5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW2ldLm11bHRpcGxpZXJzW2pdICogc2VsZi5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW2ldLm1pbGxpc2Vjb25kcyk7XG4gICAgICAgICAgICBzZWxmLmNsaWNrZWRJZCA9IHNlbGYuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kc1tpXS5tdWx0aXBsaWVyc1tqXSArIHNlbGYuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kc1tpXS5hYmJyZXZpYXRpb247XG4gICAgICAgICAgICBzZWxmLnNldEFjdGl2ZVBlcmlvZChkZWR1Y3Rvcik7XG4gICAgICAgICAgICB0b29sYmFyLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgIHNlbGYudG9vbGJhcnMucG9wKCk7XG4gICAgICAgICAgICBzZWxmLnRvb2xiYXJzLnB1c2goc2VsZi5jcmVhdGVUb29sYmFyKCkpO1xuICAgICAgICAgICAgc2VsZi5nZXRMb2dpY2FsU3BhY2UoKTtcbiAgICAgICAgICAgIHNlbGYuZHJhdygpO1xuICAgICAgICAgICAgLy8gdGhpcy50b29sYmFyc1t0aGlzLnRvb2xiYXJzLmxlbmd0aCAtIDFdID0gdGhpcy5jcmVhdGVUb29sYmFyKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdW5pZ3JvdXAuYWRkU3ltYm9sKGNhbGN1bGF0ZWRCdXR0b25zW2ldKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb250ZXh0dWFsQnV0dG9ucyA9IFtdO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnN0YW5kYXJkQ29udGV4dWFsUGVyaW9kcy5sZW5ndGg7IGkrKykge1xuICAgICAgY29udGV4dHVhbEJ1dHRvbnNbaV0gPSBuZXcgdGhpcy50b29sYm94LlN5bWJvbCh0aGlzLnN0YW5kYXJkQ29udGV4dWFsUGVyaW9kc1tpXS5hYmJyZXZpYXRpb24sIHRydWUsIHtcbiAgICAgICAgcGFwZXI6IHRoaXMuZ3JhcGhpY3MucGFwZXIsXG4gICAgICAgIGNoYXJ0OiB0aGlzLmNoYXJ0LFxuICAgICAgICBzbWFydExhYmVsOiB0aGlzLnNtYXJ0TGFiZWwsXG4gICAgICAgIGNoYXJ0Q29udGFpbmVyOiB0aGlzLmdyYXBoaWNzLmNvbnRhaW5lclxuICAgICAgfSwge1xuICAgICAgICBmaWxsOiAnI2ZmZmZmZicsXG4gICAgICAgIGxhYmVsRmlsbDogJyM2OTY5NjknLFxuICAgICAgICBzeW1ib2xTdHJva2VXaWR0aDogJzInLFxuICAgICAgICBzeW1ib2xTdHJva2U6ICcjMDAwMDAwJyxcbiAgICAgICAgc3Ryb2tlV2lkdGg6ICcxJyxcbiAgICAgICAgaG92ZXJGaWxsOiAnIzdmN2Y3ZicsXG4gICAgICAgIHJhZGl1czogMSxcbiAgICAgICAgbWFyZ2luOiB7XG4gICAgICAgICAgcmlnaHQ6IDBcbiAgICAgICAgfVxuICAgICAgfSkuYXR0YWNoRXZlbnRIYW5kbGVycyh7XG4gICAgICAgICdjbGljayc6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBzZWxmLnNldEFjdGl2ZVBlcmlvZChzZWxmLnN0YW5kYXJkQ29udGV4dWFsUGVyaW9kc1tpXS5kYXRlU3RhcnQsIHNlbGYuc3RhbmRhcmRDb250ZXh1YWxQZXJpb2RzW2ldLmRhdGVFbmQpO1xuICAgICAgICAgIHNlbGYuY2xpY2tlZElkID0gc2VsZi5zdGFuZGFyZENvbnRleHVhbFBlcmlvZHNbaV0uYWJicmV2aWF0aW9uO1xuICAgICAgICAgIHRvb2xiYXIuZGlzcG9zZSgpO1xuICAgICAgICAgIHNlbGYudG9vbGJhcnMucG9wKCk7XG4gICAgICAgICAgc2VsZi50b29sYmFycy5wdXNoKHNlbGYuY3JlYXRlVG9vbGJhcigpKTtcbiAgICAgICAgICBzZWxmLmdldExvZ2ljYWxTcGFjZSgpO1xuICAgICAgICAgIHNlbGYuZHJhdygpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHVuaWdyb3VwLmFkZFN5bWJvbChjb250ZXh0dWFsQnV0dG9uc1tpXSk7XG4gICAgfVxuXG4gICAgICAvLyBidG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdCVVRUT04nKTtcbiAgICAgIC8vIGJ0bi5pZCA9IHN0YW5kYXJkUGVyaW9kc1tpXS5hYmJyZXZpYXRpb247XG4gICAgICAvLyBidG4uaW5uZXJIVE1MID0gc3RhbmRhcmRQZXJpb2RzW2ldLmFiYnJldmlhdGlvbjtcbiAgICAgIC8vIGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGV2ZW50QnRuLmJpbmQodGhpcywgc3RhbmRhcmRQZXJpb2RzW2ldKSk7XG4gICAgICAvLyBjb250ZXh0dWFsQnV0dG9ucy5hcHBlbmRDaGlsZChidG4pO1xuXG4gICAgdGhpcy5TeW1ib2xTdG9yZS5yZWdpc3RlcigndGV4dEJveEljb24nLCBmdW5jdGlvbiAoeCwgeSwgcmFkLCB3LCBoLCBwYWRYLCBwYWRZKSB7XG4gICAgICB2YXIgeDEgPSB4IC0gdyAvIDIgKyBwYWRYIC8gMixcbiAgICAgICAgeDIgPSB4ICsgdyAvIDIgLSBwYWRYIC8gMixcbiAgICAgICAgeTEgPSB5IC0gaCAvIDIgKyBwYWRZIC8gMixcbiAgICAgICAgeTIgPSB5ICsgaCAvIDIgLSBwYWRZIC8gMjtcblxuICAgICAgcmV0dXJuIFsnTScsIHgxLCB5MSwgJ0wnLCB4MiwgeTEsICdMJywgeDIsIHkyLCAnTCcsIHgxLCB5MiwgJ1onXTtcbiAgICB9KTtcblxuICAgIHRvb2xiYXIuYWRkQ29tcG9uZW50KGdyb3VwKTtcbiAgICB0b29sYmFyLmFkZENvbXBvbmVudCh1bmlncm91cCk7XG4gICAgcmV0dXJuIHRvb2xiYXI7XG4gIH07XG5cbiAgZ2V0TG9naWNhbFNwYWNlIChhdmFpbGFibGVXaWR0aCwgYXZhaWxhYmxlSGVpZ2h0KSB7XG4gICAgYXZhaWxhYmxlV2lkdGggLz0gMjtcbiAgICB2YXIgbG9naWNhbFNwYWNlLFxuICAgICAgd2lkdGggPSAwLFxuICAgICAgaGVpZ2h0ID0gMCxcbiAgICAgIGksXG4gICAgICBsbjtcblxuICAgIGZvciAoaSA9IDAsIGxuID0gdGhpcy50b29sYmFycy5sZW5ndGg7IGkgPCBsbjsgaSsrKSB7XG4gICAgICBsb2dpY2FsU3BhY2UgPSB0aGlzLnRvb2xiYXJzW2ldLmdldExvZ2ljYWxTcGFjZShhdmFpbGFibGVXaWR0aCwgYXZhaWxhYmxlSGVpZ2h0KTtcbiAgICAgIHdpZHRoID0gTWF0aC5tYXgobG9naWNhbFNwYWNlLndpZHRoLCB3aWR0aCk7XG4gICAgICBoZWlnaHQgKz0gbG9naWNhbFNwYWNlLmhlaWdodDtcbiAgICAgIHRoaXMudG9vbGJhcnNbaV0ud2lkdGggPSBsb2dpY2FsU3BhY2Uud2lkdGg7XG4gICAgICB0aGlzLnRvb2xiYXJzW2ldLmhlaWdodCA9IGxvZ2ljYWxTcGFjZS5oZWlnaHQ7XG4gICAgfVxuICAgIGhlaWdodCArPSB0aGlzLnBhZGRpbmc7XG4gICAgcmV0dXJuIHtcbiAgICAgIHdpZHRoOiB3aWR0aCxcbiAgICAgIGhlaWdodDogaGVpZ2h0XG4gICAgfTtcbiAgfTtcblxuICBwbGFjZUluQ2FudmFzICgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgc2VsZi5wYWRkaW5nID0gNTtcbiAgICBzZWxmLnNwYWNlTWFuYWdlckluc3RhbmNlLmFkZChbe1xuICAgICAgbmFtZTogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gJ3N0YW5kYXJkLXBlcmlvZC1zZWxlY3Rvci1leHQnO1xuICAgICAgfSxcbiAgICAgIHJlZjogZnVuY3Rpb24gKG9iaikge1xuICAgICAgICByZXR1cm4gb2JqWycwJ107XG4gICAgICB9LFxuICAgICAgc2VsZjogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gc2VsZjtcbiAgICAgIH0sXG4gICAgICBwcmlvcml0eTogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gMjtcbiAgICAgIH0sXG4gICAgICBsYXlvdXQ6IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgcmV0dXJuIG9iai5pbmxpbmU7XG4gICAgICB9LFxuICAgICAgb3JpZW50YXRpb246IFt7XG4gICAgICAgIHR5cGU6IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgICByZXR1cm4gb2JqLmhvcml6b250YWw7XG4gICAgICAgIH0sXG4gICAgICAgIHBvc2l0aW9uOiBbe1xuICAgICAgICAgIHR5cGU6IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgICAgIHJldHVybiBvYmoudG9wO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgYWxpZ25tZW50OiBbe1xuICAgICAgICAgICAgdHlwZTogZnVuY3Rpb24gKG9iaikge1xuICAgICAgICAgICAgICByZXR1cm4gb2JqLmxlZnQ7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZGltZW5zaW9uczogW2Z1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgdmFyIHBhcmVudCA9IHRoaXMuZ2V0UGFyZW50Q29tcG9uZW50R3JvdXAoKTtcbiAgICAgICAgICAgICAgcmV0dXJuIHNlbGYuZ2V0TG9naWNhbFNwYWNlKHBhcmVudC5nZXRXaWR0aCgpLCBwYXJlbnQuZ2V0SGVpZ2h0KCkpO1xuICAgICAgICAgICAgfV1cbiAgICAgICAgICB9XVxuICAgICAgICB9XVxuICAgICAgfV1cbiAgICB9XSk7XG4gIH07XG5cbiAgc2V0RHJhd2luZ0NvbmZpZ3VyYXRpb24gKHgsIHksIHdpZHRoLCBoZWlnaHQsIGdyb3VwKSB7XG4gICAgdmFyIG1lcyA9IHRoaXMubWVhc3VyZW1lbnQ7XG4gICAgbWVzLnggPSB4O1xuICAgIG1lcy55ID0geTtcbiAgICBtZXMud2lkdGggPSB3aWR0aDtcbiAgICBtZXMuaGVpZ2h0ID0gaGVpZ2h0O1xuXG4gICAgdGhpcy5wYXJlbnRHcm91cCA9IGdyb3VwO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgZHJhdyAoeCwgeSwgd2lkdGgsIGhlaWdodCwgZ3JvdXApIHtcbiAgICB2YXIgbWVhc3VyZW1lbnQgPSB0aGlzLm1lYXN1cmVtZW50LFxuICAgICAgdG9vbGJhcnMgPSB0aGlzLnRvb2xiYXJzLFxuICAgICAgbG4sXG4gICAgICBpLFxuICAgICAgdG9vbGJhcixcbiAgICAgIGJvdW5kRWxlbWVudCxcbiAgICAgIGJCb3gsXG4gICAgICB4MSxcbiAgICAgIHgyLFxuICAgICAgeTI7XG5cbiAgICB4ID0geCA9PT0gdW5kZWZpbmVkID8gbWVhc3VyZW1lbnQueCA6IHg7XG4gICAgeSA9IHkgPT09IHVuZGVmaW5lZCA/IG1lYXN1cmVtZW50LnkgOiB5O1xuICAgIHdpZHRoID0gd2lkdGggPT09IHVuZGVmaW5lZCA/IG1lYXN1cmVtZW50LndpZHRoIDogd2lkdGg7XG4gICAgaGVpZ2h0ID0gaGVpZ2h0ID09PSB1bmRlZmluZWQgPyBtZWFzdXJlbWVudC5oZWlnaHQgOiBoZWlnaHQ7XG4gICAgZ3JvdXAgPSBncm91cCA9PT0gdW5kZWZpbmVkID8gdGhpcy5wYXJlbnRHcm91cCA6IGdyb3VwO1xuICAgIGlmICh3aWR0aCAmJiBoZWlnaHQpIHtcbiAgICAgIGZvciAoaSA9IDAsIGxuID0gdG9vbGJhcnMubGVuZ3RoOyBpIDwgbG47IGkrKykge1xuICAgICAgICB0b29sYmFyID0gdG9vbGJhcnNbaV07XG4gICAgICAgIHRvb2xiYXIuZHJhdyh4LCB5LCBncm91cCk7XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnNvbGUubG9nKHRvb2xiYXJzKTtcbiAgICBmb3IgKGxldCBpID0gMCwgaWkgPSB0b29sYmFyc1swXS5jb21wb25lbnRHcm91cHNbMV0uc3ltYm9sTGlzdDsgaSA8IGlpLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoaWlbaV0uc3ltYm9sID09PSB0aGlzLmNsaWNrZWRJZCkge1xuICAgICAgICBib3VuZEVsZW1lbnQgPSBpaVtpXS5nZXRCb3VuZEVsZW1lbnQoKTtcbiAgICAgICAgYkJveCA9IGJvdW5kRWxlbWVudC5nZXRCQm94KCk7XG4gICAgICAgIHgxID0gYkJveC54O1xuICAgICAgICB4MiA9IGJCb3gueDI7XG4gICAgICAgIHkyID0gYkJveC55MjtcblxuICAgICAgICB0aGlzLmdyYXBoaWNzLnBhcGVyLnBhdGgoe1xuICAgICAgICAgIHBhdGg6IFsnTScsIHgxLCB5MiAtIDIgLyAyLCAnTCcsIHgyLCB5MiAtIDIgLyAyXSxcbiAgICAgICAgICAnc3Ryb2tlJzogJyNmZjAwMDAnXG4gICAgICAgIH0pLnRvRnJvbnQoKTtcbiAgICAgICAgLy8gdGhpcy5fcGFyZW50R3JvdXAuc2V0U3RhdGUodGhpcyk7XG4gICAgICB9XG4gICAgfVxuICB9O1xufVxuXG5pZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIG1vZHVsZS5leHBvcnRzICE9PSAndW5kZWZpbmVkJykge1xuICBtb2R1bGUuZXhwb3J0cyA9IFN0YW5kYXJkUGVyaW9kU2VsZWN0b3I7XG59IGVsc2Uge1xuICB3aW5kb3cuU3RhbmRhcmRQZXJpb2QgPSBTdGFuZGFyZFBlcmlvZFNlbGVjdG9yO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChkZXApIHtcbiAgY2xhc3MgU3RhbmRhcmRQZXJpb2RTZWxlY3RvciB7XG4gICAgY29uc3RydWN0b3IgKCkge1xuICAgICAgLyoqXG4gICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICovXG4gICAgICB0aGlzLnJhdGlvID0gODtcbiAgICAgIHRoaXMudG9vbGJveCA9IEZ1c2lvbkNoYXJ0cy5nZXRDb21wb25lbnQoJ2FwaScsICd0b29sYm94Jyk7XG4gICAgICB0aGlzLkhvcml6b250YWxUb29sYmFyID0gdGhpcy50b29sYm94Lkhvcml6b250YWxUb29sYmFyO1xuICAgICAgdGhpcy5Db21wb25lbnRHcm91cCA9IHRoaXMudG9vbGJveC5Db21wb25lbnRHcm91cDtcbiAgICAgIHRoaXMuU3ltYm9sU3RvcmUgPSB0aGlzLnRvb2xib3guU3ltYm9sU3RvcmU7XG4gICAgICB0aGlzLmFsbCA9IDE7XG4gICAgICB0aGlzLmNhbGN1bGF0ZWRQZXJpb2RzID0gW107XG4gICAgICB0aGlzLnN0YXJ0RGF0YXNldCA9IDA7XG4gICAgICAvLyB0aGlzLmVuZERhdGFzZXQgPSB0aGlzLmdsb2JhbFJlYWN0aXZlTW9kZWwubW9kZWxbJ3gtYXhpcy1hYnNvbHV0ZS1yYW5nZS1lbmQnXTtcbiAgICAgIHRoaXMuc3RhcnRBY3RpdmVXaW5kb3cgPSAwO1xuICAgICAgdGhpcy5lbmRBY3RpdmVXaW5kb3cgPSAxO1xuICAgICAgdGhpcy5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzID0gW107XG4gICAgICB0aGlzLnN0YW5kYXJkQ29udGV4dWFsUGVyaW9kcyA9IFtdO1xuICAgICAgdGhpcy5zdGFydFBvaW50VW5pdCA9IDA7XG4gICAgICB0aGlzLnN0YXJ0UG9pbnRNdWx0aXBsaWVyID0gMDtcbiAgICAgIHRoaXMuY2xpY2tlZElkO1xuICAgICAgdGhpcy5ub0NhbGNCdXR0b25zID0gMDtcbiAgICAgIHRoaXMudGltZVBlcmlvZHMgPSBbe1xuICAgICAgICAnbmFtZSc6ICdzZWNvbmQnLFxuICAgICAgICAnbWlsbGlzZWNvbmRzJzogMTAwMCxcbiAgICAgICAgJ3N0YXJ0aW5nUG9pbnQnOiAwLFxuICAgICAgICAndG90YWwnOiA2MCxcbiAgICAgICAgJ2FiYnJldmlhdGlvbic6ICdzZWMnLFxuICAgICAgICAnZGVzY3JpcHRpb24nOiAnU0VDT05EJyxcbiAgICAgICAgJ3BhcmVudCc6ICdtaW51dGUnLFxuICAgICAgICAnbXVsdGlwbGllcnMnOiBbMSwgNSwgMTUsIDMwXVxuICAgICAgfSwge1xuICAgICAgICAnbmFtZSc6ICdtaW51dGUnLFxuICAgICAgICAnbWlsbGlzZWNvbmRzJzogNjAwMDAsXG4gICAgICAgICdzdGFydGluZ1BvaW50JzogMCxcbiAgICAgICAgJ3RvdGFsJzogNjAsXG4gICAgICAgICdhYmJyZXZpYXRpb24nOiAnbWluJyxcbiAgICAgICAgJ2Rlc2NyaXB0aW9uJzogJ01JTlVURScsXG4gICAgICAgICdwYXJlbnQnOiAnaG91cicsXG4gICAgICAgICdtdWx0aXBsaWVycyc6IFsxLCA1LCAxNSwgMzBdXG4gICAgICB9LCB7XG4gICAgICAgICduYW1lJzogJ2hvdXInLFxuICAgICAgICAnbWlsbGlzZWNvbmRzJzogMzYwMDAwMCxcbiAgICAgICAgJ3N0YXJ0aW5nUG9pbnQnOiAwLFxuICAgICAgICAndG90YWwnOiAyNCxcbiAgICAgICAgJ2FiYnJldmlhdGlvbic6ICdocicsXG4gICAgICAgICdkZXNjcmlwdGlvbic6ICdIT1VSJyxcbiAgICAgICAgJ3BhcmVudCc6ICdkYXknLFxuICAgICAgICAnbXVsdGlwbGllcnMnOiBbMSwgMywgNiwgMTJdXG4gICAgICB9LCB7XG4gICAgICAgICduYW1lJzogJ2RheScsXG4gICAgICAgICdtaWxsaXNlY29uZHMnOiA4NjQwMDAwMCxcbiAgICAgICAgJ3N0YXJ0aW5nUG9pbnQnOiAwLFxuICAgICAgICAndG90YWwnOiAzMCxcbiAgICAgICAgJ2FiYnJldmlhdGlvbic6ICdEJyxcbiAgICAgICAgJ2Rlc2NyaXB0aW9uJzogJ0RBWScsXG4gICAgICAgICdwYXJlbnQnOiAnbW9udGgnLFxuICAgICAgICAnbXVsdGlwbGllcnMnOiBbMSwgNywgMTVdXG4gICAgICB9LCB7XG4gICAgICAgICduYW1lJzogJ21vbnRoJyxcbiAgICAgICAgJ21pbGxpc2Vjb25kcyc6IDI1OTIwMDAwMDAsXG4gICAgICAgICdzdGFydGluZ1BvaW50JzogMCxcbiAgICAgICAgJ3RvdGFsJzogMTIsXG4gICAgICAgICdhYmJyZXZpYXRpb24nOiAnTScsXG4gICAgICAgICdkZXNjcmlwdGlvbic6ICdNT05USCcsXG4gICAgICAgICdwYXJlbnQnOiAneWVhcicsXG4gICAgICAgICdtdWx0aXBsaWVycyc6IFsxLCAzLCA2XVxuICAgICAgfSwge1xuICAgICAgICAnbmFtZSc6ICd5ZWFyJyxcbiAgICAgICAgJ21pbGxpc2Vjb25kcyc6IDMxMTA0MDAwMDAwLFxuICAgICAgICAnc3RhcnRpbmdQb2ludCc6IDAsXG4gICAgICAgICdhYmJyZXZpYXRpb24nOiAnWScsXG4gICAgICAgICdkZXNjcmlwdGlvbic6ICdZRUFSJyxcbiAgICAgICAgJ211bHRpcGxpZXJzJzogWzEsIDMsIDVdXG4gICAgICB9XTtcbiAgICAgIHRoaXMudGRCdXR0b25zID0gW1xuICAgICAgICB7XG4gICAgICAgICAgJ25hbWUnOiAnWVREJyxcbiAgICAgICAgICAnYWJicmV2aWF0aW9uJzogJ1lURCcsXG4gICAgICAgICAgJ3BhcmVudCc6ICd5ZWFyJyxcbiAgICAgICAgICAnbWlsbGlzZWNvbmRzJzogMzExMDQwMDAwMDAsXG4gICAgICAgICAgJ2Rlc2NyaXB0aW9uJzogJ1llYXIgdG8gRGF0ZSdcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICduYW1lJzogJ1FURCcsXG4gICAgICAgICAgJ2FiYnJldmlhdGlvbic6ICdRVEQnLFxuICAgICAgICAgICdwYXJlbnQnOiAnbW9udGgnLFxuICAgICAgICAgICdtdWx0aXBsaWVyJzogMyxcbiAgICAgICAgICAnbWlsbGlzZWNvbmRzJzogNzc3NjAwMDAwMCxcbiAgICAgICAgICAnZGVzY3JpcHRpb24nOiAnUXVhcnRlciB0byBEYXRlJ1xuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgJ25hbWUnOiAnTVREJyxcbiAgICAgICAgICAnYWJicmV2aWF0aW9uJzogJ01URCcsXG4gICAgICAgICAgJ3BhcmVudCc6ICdtb250aCcsXG4gICAgICAgICAgJ21pbGxpc2Vjb25kcyc6IDI1OTIwMDAwMDAsXG4gICAgICAgICAgJ2Rlc2NyaXB0aW9uJzogJ01vbnRoIHRvIERhdGUnXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAnbmFtZSc6ICdXVEQnLFxuICAgICAgICAgICdhYmJyZXZpYXRpb24nOiAnV1REJyxcbiAgICAgICAgICAncGFyZW50JzogJ2RheScsXG4gICAgICAgICAgJ211bHRpcGxpZXInOiA3LFxuICAgICAgICAgICdtaWxsaXNlY29uZHMnOiA2MDQ4MDAwMDAsXG4gICAgICAgICAgJ2Rlc2NyaXB0aW9uJzogJ1dlZWsgdG8gRGF0ZSdcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICduYW1lJzogJ1knLFxuICAgICAgICAgICdhYmJyZXZpYXRpb24nOiAnWScsXG4gICAgICAgICAgJ3BhcmVudCc6ICdkYXknLFxuICAgICAgICAgICdtaWxsaXNlY29uZHMnOiA4NjQwMDAwMCxcbiAgICAgICAgICAnZGVzY3JpcHRpb24nOiAnWWVzdGVyZGF5J1xuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgJ25hbWUnOiAnVCcsXG4gICAgICAgICAgJ2FiYnJldmlhdGlvbic6ICdUJyxcbiAgICAgICAgICAncGFyZW50JzogJ2RheScsXG4gICAgICAgICAgJ21pbGxpc2Vjb25kcyc6IDg2NDAwMDAwLFxuICAgICAgICAgICdkZXNjcmlwdGlvbic6ICdUb2RheSdcbiAgICAgICAgfVxuICAgICAgXTtcbiAgICAgIHRoaXMuY29uZmlnID0ge1xuICAgICAgICBhbmNob3JQb3NpdGlvbnM6ICdyaWdodCcsXG4gICAgICAgIGFsbDogJzEnLFxuICAgICAgICBjb250ZXh0dWFsOiAnMScsXG4gICAgICAgIGNhbGN1bGF0ZWQ6ICcxJyxcbiAgICAgICAgdGVydGlhcnlUaW1lUGVyaW9kczoge31cbiAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQSBmdW5jdGlvbiB0byBnZW5lcmF0ZSB0aGUgY2FsY3VsYXRlZCBidXR0b25zIHVzaW5nXG4gICAgICogdGhlIGFjdGl2ZSByYW5nZSBhbmQgdGhlIGxvY2F0aW9uIG9mIHRoZSBhY3RpdmUgcmFuZ2VcbiAgICAgKi9cbiAgICBnZW5lcmF0ZUNhbGN1bGF0ZWRCdXR0b25zICgpIHtcbiAgICAgIHZhciB0YXJnZXRCbG9jayA9IHRoaXMuZW5kQWN0aXZlV2luZG93IC0gdGhpcy5zdGFydERhdGFzZXQsXG4gICAgICAgIGkgPSAwLFxuICAgICAgICBqID0gMCxcbiAgICAgICAgYWN0aXZlV2luZG93ID0gdGhpcy5lbmRBY3RpdmVXaW5kb3cgLSB0aGlzLnN0YXJ0QWN0aXZlV2luZG93LFxuICAgICAgICBjb3VudCA9IDA7XG4gICAgICB0aGlzLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHMgPSBbXTtcbiAgICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLnRpbWVQZXJpb2RzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIC8vIGNoZWNraW5nIHdoZXRoZXIgdGhlIHVuaXQgaXMgYXBwbGljYWJsZSBmb3IgdGhlIGN1cnJlbnQgdGFyZ2V0IGJsb2NrXG4gICAgICAgIGlmICh0YXJnZXRCbG9jayAvIHRoaXMudGltZVBlcmlvZHNbaV0ubWlsbGlzZWNvbmRzID49IDEpIHtcbiAgICAgICAgICAvLyBjaGVja2luZyB3aGV0aGVyIHRoZSB1bml0IGlzIG9mIHRoZSBoaWdoZXIgb3JkZXIgYW5kIG9ubHkgbXVsdGlwbGllciAxIGlzIGFwcGxpY2FibGVcbiAgICAgICAgICBpZiAoTWF0aC5mbG9vcigoYWN0aXZlV2luZG93KSAvIHRoaXMudGltZVBlcmlvZHNbaV0ubWlsbGlzZWNvbmRzKSA8IDEpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kcy5wdXNoKHtcbiAgICAgICAgICAgICAgJ2FiYnJldmlhdGlvbic6IHRoaXMudGltZVBlcmlvZHNbaV0uYWJicmV2aWF0aW9uLFxuICAgICAgICAgICAgICAnZGVzY3JpcHRpb24nOiB0aGlzLnRpbWVQZXJpb2RzW2ldLmRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgICAnbWlsbGlzZWNvbmRzJzogdGhpcy50aW1lUGVyaW9kc1tpXS5taWxsaXNlY29uZHMsXG4gICAgICAgICAgICAgICdtdWx0aXBsaWVycyc6IFsxXVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIHsgLy8gaWYgdGhlIHVuaXQgaXMgb2YgdGhlIG9yZGVyIG9mIHRoZSB0YXJnZXQgYmxvY2sgYW5kIGNhbGN1bGF0aW5nIHRoZSBtdWx0aXBsaWVyc1xuICAgICAgICAgICAgdGhpcy5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzLnB1c2goe1xuICAgICAgICAgICAgICAnYWJicmV2aWF0aW9uJzogdGhpcy50aW1lUGVyaW9kc1tpXS5hYmJyZXZpYXRpb24sXG4gICAgICAgICAgICAgICdkZXNjcmlwdGlvbic6IHRoaXMudGltZVBlcmlvZHNbaV0uZGVzY3JpcHRpb24sXG4gICAgICAgICAgICAgICdtaWxsaXNlY29uZHMnOiB0aGlzLnRpbWVQZXJpb2RzW2ldLm1pbGxpc2Vjb25kcyxcbiAgICAgICAgICAgICAgJ211bHRpcGxpZXJzJzogW11cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gY2FsY3VsYXRpbmcgYW5kIHBvcHVsYXRpbmcgdGhlIGFwcGxpY2FibGUgbXVsdHBsaWVycyBvZiBlYWNoIHVuaXRcbiAgICAgICAgICAgIGZvciAoaiA9IDA7IGogPCB0aGlzLnRpbWVQZXJpb2RzW2ldLm11bHRpcGxpZXJzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgIGlmIChhY3RpdmVXaW5kb3cgLyB0aGlzLnJhdGlvIDwgdGhpcy50aW1lUGVyaW9kc1tpXS5tdWx0aXBsaWVyc1tqXSAqIHRoaXMudGltZVBlcmlvZHNbaV0ubWlsbGlzZWNvbmRzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW3RoaXMuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kcy5sZW5ndGggLSAxXS5tdWx0aXBsaWVycy5wdXNoKFxuICAgICAgICAgICAgICAgICAgdGhpcy50aW1lUGVyaW9kc1tpXS5tdWx0aXBsaWVyc1tqXVxuICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy5ub0NhbGNCdXR0b25zID0gSW5maW5pdHk7XG4gICAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGZvciAoaiA9IDA7IGogPCB0aGlzLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHNbaV0ubXVsdGlwbGllcnMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICArK2NvdW50O1xuICAgICAgICAgIGlmICh0aGlzLm5vQ2FsY0J1dHRvbnMgPiBpKSB7XG4gICAgICAgICAgICB0aGlzLm5vQ2FsY0J1dHRvbnMgPSBpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoY291bnQgPD0gNCkge1xuICAgICAgICAgICAgdGhpcy5zdGFydFBvaW50TXVsdGlwbGllciA9IGo7XG4gICAgICAgICAgICB0aGlzLnN0YXJ0UG9pbnRVbml0ID0gaTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gdGhpcy5kcmF3QnV0dG9uc0NhbGN1bGF0ZWQodGhpcy5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBIGZ1bmN0aW9uIHRvIGdlbmVyYXRlIHRoZSBjb250ZXh0dWFsIGJ1dHRvbnMgdXNpbmdcbiAgICAgKiB0aGUgZW5kIHBvaW50IG9mIHRoZSB0aW1lLXNjYWxlXG4gICAgICovXG4gICAgZ2VuZXJhdGVDb250ZXh0dWFsQnV0dG9ucyAoKSB7XG4gICAgICAvLyBnZW5lcmF0aW5nIGFuIGFycmF5IHdpdGggYXBwbGljYWJsZSBURCBidXR0b25zXG4gICAgICB2YXIgYnV0dG9ucyA9IFtdLFxuICAgICAgICBpID0gMCxcbiAgICAgICAgZW5kU3RhbXAgPSB0aGlzLmdsb2JhbFJlYWN0aXZlTW9kZWwubW9kZWxbJ3gtYXhpcy1hYnNvbHV0ZS1yYW5nZS1lbmQnXSxcbiAgICAgICAgZGF0ZVN0YXJ0ID0gZW5kU3RhbXAgLSAyLFxuICAgICAgICBkYXRlRW5kID0gZW5kU3RhbXAsXG4gICAgICAgIHJlbGF0aXZlVERCdXR0b24gPSB7fTtcbiAgICAgIGZvciAoOyBpIDwgdGhpcy50ZEJ1dHRvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZGF0ZVN0YXJ0ID0gbmV3IERhdGUoZW5kU3RhbXApO1xuICAgICAgICBpZiAodGhpcy50ZEJ1dHRvbnNbaV0ubmFtZSA9PT0gJ1lURCcpIHtcbiAgICAgICAgICBkYXRlU3RhcnQuc2V0TW9udGgoMCk7XG4gICAgICAgICAgZGF0ZVN0YXJ0LnNldERhdGUoMSk7XG4gICAgICAgICAgZGF0ZVN0YXJ0LnNldEhvdXJzKDApO1xuICAgICAgICAgIGRhdGVTdGFydC5zZXRNaW51dGVzKDApO1xuICAgICAgICAgIGRhdGVTdGFydC5zZXRTZWNvbmRzKDApO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMudGRCdXR0b25zW2ldLm5hbWUgPT09ICdNVEQnKSB7XG4gICAgICAgICAgZGF0ZVN0YXJ0LnNldERhdGUoMSk7XG4gICAgICAgICAgZGF0ZVN0YXJ0LnNldEhvdXJzKDApO1xuICAgICAgICAgIGRhdGVTdGFydC5zZXRNaW51dGVzKDApO1xuICAgICAgICAgIGRhdGVTdGFydC5zZXRTZWNvbmRzKDApO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMudGRCdXR0b25zW2ldLm5hbWUgPT09ICdRVEQnKSB7XG4gICAgICAgICAgZGF0ZVN0YXJ0LnNldE1vbnRoKDExIC0gKGRhdGVTdGFydC5nZXRNb250aCgpICUgNCkpO1xuICAgICAgICAgIGRhdGVTdGFydC5zZXREYXRlKDApO1xuICAgICAgICAgIGRhdGVTdGFydC5zZXRIb3VycygwKTtcbiAgICAgICAgICBkYXRlU3RhcnQuc2V0TWludXRlcygwKTtcbiAgICAgICAgICBkYXRlU3RhcnQuc2V0U2Vjb25kcygwKTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnRkQnV0dG9uc1tpXS5uYW1lID09PSAnV1REJykge1xuICAgICAgICAgIGRhdGVTdGFydC5zZXREYXRlKGRhdGVTdGFydC5nZXREYXRlKCkgLSBkYXRlU3RhcnQuZ2V0RGF5KCkpO1xuICAgICAgICAgIGRhdGVTdGFydC5zZXRIb3VycygwKTtcbiAgICAgICAgICBkYXRlU3RhcnQuc2V0TWludXRlcygwKTtcbiAgICAgICAgICBkYXRlU3RhcnQuc2V0U2Vjb25kcygwKTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnRkQnV0dG9uc1tpXS5uYW1lID09PSAnWScpIHtcbiAgICAgICAgICBkYXRlU3RhcnQuc2V0SG91cnMoMCk7XG4gICAgICAgICAgZGF0ZVN0YXJ0LnNldE1pbnV0ZXMoMCk7XG4gICAgICAgICAgZGF0ZVN0YXJ0LnNldFNlY29uZHMoMCk7XG4gICAgICAgICAgZGF0ZVN0YXJ0IC09IDg2NDAwMDAwO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMudGRCdXR0b25zW2ldLm5hbWUgPT09ICdUJykge1xuICAgICAgICAgIGRhdGVTdGFydC5zZXRIb3VycygwKTtcbiAgICAgICAgICBkYXRlU3RhcnQuc2V0TWludXRlcygwKTtcbiAgICAgICAgICBkYXRlU3RhcnQuc2V0U2Vjb25kcygwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChkYXRlRW5kIDwgZGF0ZVN0YXJ0KSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy50ZEJ1dHRvbnNbaV0uZGF0ZVN0YXJ0ID0gZGF0ZVN0YXJ0LnZhbHVlT2YoKTtcbiAgICAgICAgICB0aGlzLnRkQnV0dG9uc1tpXS5kYXRlRW5kID0gZGF0ZUVuZC52YWx1ZU9mKCk7XG4gICAgICAgICAgYnV0dG9ucy5wdXNoKHRoaXMudGRCdXR0b25zW2ldKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmVsYXRpdmVUREJ1dHRvbi5taWxsaXNlY29uZHMgPSBJbmZpbml0eTtcbiAgICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLnRkQnV0dG9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoTWF0aC5hYnModGhpcy50ZEJ1dHRvbnNbaV0ubWlsbGlzZWNvbmRzIC0gKHRoaXMuZW5kQWN0aXZlV2luZG93IC0gdGhpcy5zdGFydEFjdGl2ZVdpbmRvdykpIDwgcmVsYXRpdmVUREJ1dHRvbi5taWxsaXNlY29uZHMpIHtcbiAgICAgICAgICByZWxhdGl2ZVREQnV0dG9uLm1pbGxpc2Vjb25kcyA9IHRoaXMudGRCdXR0b25zW2ldLm1pbGxpc2Vjb25kcztcbiAgICAgICAgICByZWxhdGl2ZVREQnV0dG9uLm5hbWUgPSB0aGlzLnRkQnV0dG9uc1tpXS5hYmJyZXZpYXRpb247XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdGhpcy5zdGFuZGFyZENvbnRleHVhbFBlcmlvZHMgPSBidXR0b25zO1xuICAgICAgLy8gdGhpcy5kcmF3QnV0dG9uc0NvbnRleHR1YWwodGhpcy5zdGFuZGFyZENvbnRleHVhbFBlcmlvZHMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEEgZnVuY3Rpb24gdG8gc2V0IHRoZSBhY3RpdmUgcGVyaW9kJ3NcbiAgICAgKiBzdGFydCBhbmQgZW5kIHBvaW50XG4gICAgICogQHBhcmFtICB7bnVtYmVyfSBkYXRlIHN0YW1wIC0gQSBVTklYIHRpbWVzdGFtcCB0byBiZSBzZXQgYXMgdGhlIHN0YXJ0IHBvaW50IG9mIGFjdGl2ZSBwZXJpb2RcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IGRhdGUgc3RhbXAgLSBBIFVOSVggdGltZXN0YW1wIHRvIGJlIHNldCBhcyB0aGUgZW5kIHBvaW50IG9mIGFjdGl2ZSBwZXJpb2RcbiAgICAgKi9cbiAgICBzZXRBY3RpdmVQZXJpb2QgKCkge1xuICAgICAgdmFyIHN0YXJ0LFxuICAgICAgICBlbmQ7XG4gICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBlbmQgPSB0aGlzLmdsb2JhbFJlYWN0aXZlTW9kZWwubW9kZWxbJ3gtYXhpcy12aXNpYmxlLXJhbmdlLWVuZCddO1xuICAgICAgICBzdGFydCA9IGVuZCAtIGFyZ3VtZW50c1swXTtcbiAgICAgIH0gZWxzZSBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMikge1xuICAgICAgICBzdGFydCA9IGFyZ3VtZW50c1swXTtcbiAgICAgICAgZW5kID0gYXJndW1lbnRzWzFdO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnN0YXJ0QWN0aXZlV2luZG93ID0gc3RhcnQ7XG4gICAgICB0aGlzLmVuZEFjdGl2ZVdpbmRvdyA9IGVuZDtcbiAgICAgIHRoaXMuZ2VuZXJhdGVDYWxjdWxhdGVkQnV0dG9ucygpO1xuICAgICAgdGhpcy5nbG9iYWxSZWFjdGl2ZU1vZGVsLm1vZGVsWyd4LWF4aXMtdmlzaWJsZS1yYW5nZS1zdGFydCddID0gdGhpcy5zdGFydEFjdGl2ZVdpbmRvdztcbiAgICAgIHRoaXMuZ2xvYmFsUmVhY3RpdmVNb2RlbC5tb2RlbFsneC1heGlzLXZpc2libGUtcmFuZ2UtZW5kJ10gPSB0aGlzLmVuZEFjdGl2ZVdpbmRvdztcbiAgICAgIHRoaXMuZ2VuZXJhdGVDb250ZXh0dWFsQnV0dG9ucygpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEEgZnVuY3Rpb24gdG8gc2V0IHRoZSBzdGFydCBhbmQgZW5kIHBvaW50IG9mIHRoZVxuICAgICAqIGVudGlyZSB0aW1lLWxpbmVcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IGRhdGUgc3RhbXAgLSBBIFVOSVggdGltZXN0YW1wIHRvIGJlIHNldCBhcyB0aGUgc3RhcnQgcG9pbnQgb2YgdGltZS1saW5lXG4gICAgICogQHBhcmFtICB7bnVtYmVyfSBkYXRlIHN0YW1wIC0gQSBVTklYIHRpbWVzdGFtcCB0byBiZSBzZXQgYXMgdGhlIGVuZCBwb2ludCBvZiB0aW1lLWxpbmVcbiAgICAgKi9cbiAgICBzZXRUaW1lbGluZSAoc3RhcnQsIGVuZCkge1xuICAgICAgdGhpcy5zdGFydERhdGFzZXQgPSBzdGFydDtcbiAgICAgIHRoaXMuZW5kRGF0YXNldCA9IGVuZDtcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdGFydEFjdGl2ZVJhbmdlJykuaW5uZXJIVE1MID0gbmV3IERhdGUodGhpcy5zdGFydERhdGFzZXQpO1xuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VuZEFjdGl2ZVJhbmdlJykuaW5uZXJIVE1MID0gbmV3IERhdGUodGhpcy5lbmREYXRhc2V0KTtcbiAgICAgIHRoaXMuZ2VuZXJhdGVDYWxjdWxhdGVkQnV0dG9ucygpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEEgZnVuY3Rpb24gdG8gc2V0IHRoZSBvYmplY3QgdG8gc2V0IHRoZSB1c2VyIHByZWZlcmVuY2VzXG4gICAgICovXG4gICAgY29uZmlndXJlIChjb25maWcpIHtcbiAgICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZ1c2lvbmNoYXJ0cyBsaWZlIGN5Y2xlIG1ldGhvZCBmb3IgZXh0ZW5zaW9uXG4gICAgICovXG4gICAgaW5pdCAocmVxdWlyZSkge1xuICAgICAgdmFyIGluc3RhbmNlID0gdGhpcztcbiAgICAgIHJlcXVpcmUoW1xuICAgICAgICAneEF4aXMnLFxuICAgICAgICAneUF4aXMnLFxuICAgICAgICAnZ3JhcGhpY3MnLFxuICAgICAgICAnY2hhcnQnLFxuICAgICAgICAnZGF0YXNldCcsXG4gICAgICAgICdQbG90TWFuYWdlcicsXG4gICAgICAgICdjYW52YXNDb25maWcnLFxuICAgICAgICAnTWFya2VyTWFuYWdlcicsXG4gICAgICAgICdyZWFjdGl2ZU1vZGVsJyxcbiAgICAgICAgJ2dsb2JhbFJlYWN0aXZlTW9kZWwnLFxuICAgICAgICAnc3BhY2VNYW5hZ2VySW5zdGFuY2UnLFxuICAgICAgICAnc21hcnRMYWJlbCcsXG4gICAgICAgIGZ1bmN0aW9uIChcbiAgICAgICAgICAgICAgeEF4aXMsXG4gICAgICAgICAgICAgIHlBeGlzLFxuICAgICAgICAgICAgICBncmFwaGljcyxcbiAgICAgICAgICAgICAgY2hhcnQsXG4gICAgICAgICAgICAgIGRhdGFzZXQsXG4gICAgICAgICAgICAgIHBsb3RNYW5hZ2VyLFxuICAgICAgICAgICAgICBjYW52YXNDb25maWcsXG4gICAgICAgICAgICAgIG1hcmtlck1hbmFnZXIsXG4gICAgICAgICAgICAgIHJlYWN0aXZlTW9kZWwsXG4gICAgICAgICAgICAgIGdsb2JhbFJlYWN0aXZlTW9kZWwsXG4gICAgICAgICAgICAgIHNwYWNlTWFuYWdlckluc3RhbmNlLFxuICAgICAgICAgICAgICBzbWFydExhYmVsKSB7XG4gICAgICAgICAgaW5zdGFuY2UueEF4aXMgPSB4QXhpcztcbiAgICAgICAgICBpbnN0YW5jZS55QXhpcyA9IHlBeGlzO1xuICAgICAgICAgIGluc3RhbmNlLmdyYXBoaWNzID0gZ3JhcGhpY3M7XG4gICAgICAgICAgaW5zdGFuY2UuY2hhcnQgPSBjaGFydDtcbiAgICAgICAgICBpbnN0YW5jZS5kYXRhc2V0ID0gZGF0YXNldDtcbiAgICAgICAgICBpbnN0YW5jZS5wbG90TWFuYWdlciA9IHBsb3RNYW5hZ2VyO1xuICAgICAgICAgIGluc3RhbmNlLm1hcmtlck1hbmFnZXIgPSBtYXJrZXJNYW5hZ2VyO1xuICAgICAgICAgIGluc3RhbmNlLmNhbnZhc0NvbmZpZyA9IGNhbnZhc0NvbmZpZztcbiAgICAgICAgICBpbnN0YW5jZS5yZWFjdGl2ZU1vZGVsID0gcmVhY3RpdmVNb2RlbDtcbiAgICAgICAgICBpbnN0YW5jZS5nbG9iYWxSZWFjdGl2ZU1vZGVsID0gZ2xvYmFsUmVhY3RpdmVNb2RlbDtcbiAgICAgICAgICBpbnN0YW5jZS5zcGFjZU1hbmFnZXJJbnN0YW5jZSA9IHNwYWNlTWFuYWdlckluc3RhbmNlO1xuICAgICAgICAgIGluc3RhbmNlLnNtYXJ0TGFiZWwgPSBzbWFydExhYmVsO1xuICAgICAgICB9XG4gICAgICBdKTtcbiAgICAgIHRoaXMuc3BhY2VNYW5hZ2VySW5zdGFuY2UgPSBpbnN0YW5jZS5zcGFjZU1hbmFnZXJJbnN0YW5jZTtcbiAgICAgIHRoaXMuZ2xvYmFsUmVhY3RpdmVNb2RlbCA9IGluc3RhbmNlLmdsb2JhbFJlYWN0aXZlTW9kZWw7XG4gICAgICB0aGlzLmVuZEFjdGl2ZVdpbmRvdyA9IGluc3RhbmNlLmdsb2JhbFJlYWN0aXZlTW9kZWwubW9kZWxbJ3gtYXhpcy12aXNpYmxlLXJhbmdlLWVuZCddO1xuICAgICAgdGhpcy5zdGFydEFjdGl2ZVdpbmRvdyA9IGluc3RhbmNlLmdsb2JhbFJlYWN0aXZlTW9kZWwubW9kZWxbJ3gtYXhpcy12aXNpYmxlLXJhbmdlLXN0YXJ0J107XG4gICAgICB0aGlzLnN0YXJ0RGF0YXNldCA9IGluc3RhbmNlLmdsb2JhbFJlYWN0aXZlTW9kZWwubW9kZWxbJ3gtYXhpcy1hYnNvbHV0ZS1yYW5nZS1zdGFydCddO1xuICAgICAgdGhpcy5lbmREYXRhc2V0ID0gaW5zdGFuY2UuZ2xvYmFsUmVhY3RpdmVNb2RlbC5tb2RlbFsneC1heGlzLWFic29sdXRlLXJhbmdlLWVuZCddO1xuICAgICAgdGhpcy5zZXRBY3RpdmVQZXJpb2QodGhpcy5zdGFydEFjdGl2ZVdpbmRvdywgdGhpcy5lbmRBY3RpdmVXaW5kb3cpO1xuICAgICAgLy8gaW5zdGFuY2UuZ2xvYmFsUmVhY3RpdmVNb2RlbC5tb2RlbFsnX3gtYXhpcy12aXNpYmxlLXJhbmdlLXN0YXJ0J10gKz0gMTI0NDE2MDAwMDAwO1xuICAgICAgdGhpcy5zZXRBY3RpdmVQZXJpb2QodGhpcy5zdGFydEFjdGl2ZVdpbmRvdywgdGhpcy5lbmRBY3RpdmVXaW5kb3cpO1xuXG4gICAgICB0aGlzLnRvb2xiYXJzID0gW107XG5cbiAgICAgIHRoaXMubWVhc3VyZW1lbnQgPSB7fTtcblxuICAgICAgdGhpcy50b29sYmFycy5wdXNoKHRoaXMuY3JlYXRlVG9vbGJhcigpKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBjcmVhdGVUb29sYmFyICgpIHtcbiAgICAgIHZhciB1bmlncm91cCxcbiAgICAgICAgdG9vbGJhcixcbiAgICAgICAgY2FsY3VsYXRlZEJ1dHRvbnMsXG4gICAgICAgIGNvbnRleHR1YWxCdXR0b25zLFxuICAgICAgICBhbGxCdXR0b24sXG4gICAgICAgIHNlbGYgPSB0aGlzLFxuICAgICAgICBlbmRBY3RpdmUgPSB0aGlzLmdsb2JhbFJlYWN0aXZlTW9kZWwubW9kZWxbJ3gtYXhpcy12aXNpYmxlLXJhbmdlLWVuZCddLFxuICAgICAgICBkZWR1Y3RvckFyID0gW10sXG4gICAgICAgIHN0YXJ0TXVsdGlwbGllcixcbiAgICAgICAgZGVkdWN0b3IsXG4gICAgICAgIGksXG4gICAgICAgIGosXG4gICAgICAgIG1hcmdpbixcbiAgICAgICAgZnJvbURhdGVMYWJlbCxcbiAgICAgICAgZ3JvdXA7XG5cbiAgICAgIGdyb3VwID0gbmV3IHRoaXMudG9vbGJveC5Db21wb25lbnRHcm91cCh7XG4gICAgICAgIHBhcGVyOiB0aGlzLmdyYXBoaWNzLnBhcGVyLFxuICAgICAgICBjaGFydDogdGhpcy5jaGFydCxcbiAgICAgICAgc21hcnRMYWJlbDogdGhpcy5zbWFydExhYmVsLFxuICAgICAgICBjaGFydENvbnRhaW5lcjogdGhpcy5ncmFwaGljcy5jb250YWluZXJcbiAgICAgIH0pO1xuXG4gICAgICB1bmlncm91cCA9IG5ldyB0aGlzLnRvb2xib3guVW5pU2VsZWN0Q29tcG9uZW50R3JvdXAoe1xuICAgICAgICBwYXBlcjogdGhpcy5ncmFwaGljcy5wYXBlcixcbiAgICAgICAgY2hhcnQ6IHRoaXMuY2hhcnQsXG4gICAgICAgIHNtYXJ0TGFiZWw6IHRoaXMuc21hcnRMYWJlbCxcbiAgICAgICAgY2hhcnRDb250YWluZXI6IHRoaXMuZ3JhcGhpY3MuY29udGFpbmVyXG4gICAgICB9KTtcbiAgICAgIHVuaWdyb3VwLnNldENvbmZpZyh7XG4gICAgICAgIGZpbGw6ICcjZmZmJyxcbiAgICAgICAgYm9yZGVyVGhpY2tuZXNzOiAwXG4gICAgICB9KTtcbiAgICAgIGdyb3VwLnNldENvbmZpZyh7XG4gICAgICAgIGZpbGw6ICcjZmZmJyxcbiAgICAgICAgYm9yZGVyVGhpY2tuZXNzOiAwXG4gICAgICB9KTtcbiAgICAgIHRvb2xiYXIgPSBuZXcgdGhpcy5Ib3Jpem9udGFsVG9vbGJhcih7XG4gICAgICAgIHBhcGVyOiB0aGlzLmdyYXBoaWNzLnBhcGVyLFxuICAgICAgICBjaGFydDogdGhpcy5jaGFydCxcbiAgICAgICAgc21hcnRMYWJlbDogdGhpcy5zbWFydExhYmVsLFxuICAgICAgICBjaGFydENvbnRhaW5lcjogdGhpcy5ncmFwaGljcy5jb250YWluZXJcbiAgICAgIH0pO1xuICAgICAgdG9vbGJhci5zZXRDb25maWcoe1xuICAgICAgICBmaWxsOiAnI2ZmZicsXG4gICAgICAgIGJvcmRlclRoaWNrbmVzczogMFxuICAgICAgfSk7XG4gICAgICBmcm9tRGF0ZUxhYmVsID0gbmV3IHRoaXMudG9vbGJveC5MYWJlbCgnWm9vbTonLCB7XG4gICAgICAgIHNtYXJ0TGFiZWw6IHRoaXMuc21hcnRMYWJlbCxcbiAgICAgICAgcGFwZXI6IHRoaXMuZ3JhcGhpY3MucGFwZXJcbiAgICAgIH0sIHtcbiAgICAgICAgdGV4dDoge1xuICAgICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgICAnZm9udC1zaXplJzogJzE1JyxcbiAgICAgICAgICAgICdmb250RmFtaWx5JzogJ015cmlhZFBybydcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgZ3JvdXAuYWRkU3ltYm9sKGZyb21EYXRlTGFiZWwpO1xuICAgICAgYWxsQnV0dG9uID0gbmV3IHRoaXMudG9vbGJveC5TeW1ib2woJ0FMTCcsIHRydWUsIHtcbiAgICAgICAgcGFwZXI6IHRoaXMuZ3JhcGhpY3MucGFwZXIsXG4gICAgICAgIGNoYXJ0OiB0aGlzLmNoYXJ0LFxuICAgICAgICBzbWFydExhYmVsOiB0aGlzLnNtYXJ0TGFiZWwsXG4gICAgICAgIGNoYXJ0Q29udGFpbmVyOiB0aGlzLmdyYXBoaWNzLmNvbnRhaW5lclxuICAgICAgfSwge1xuICAgICAgICBmaWxsOiAnI2ZmZmZmZicsXG4gICAgICAgIGxhYmVsRmlsbDogJyM2OTY5NjknLFxuICAgICAgICBzeW1ib2xTdHJva2VXaWR0aDogJzInLFxuICAgICAgICBzeW1ib2xTdHJva2U6ICcjMDAwMDAwJyxcbiAgICAgICAgc3Ryb2tlV2lkdGg6ICcxJyxcbiAgICAgICAgaG92ZXJGaWxsOiAnIzdmN2Y3ZicsXG4gICAgICAgIHJhZGl1czogMSxcbiAgICAgICAgbWFyZ2luOiB7XG4gICAgICAgICAgcmlnaHQ6IDVcbiAgICAgICAgfVxuICAgICAgfSkuYXR0YWNoRXZlbnRIYW5kbGVycyh7XG4gICAgICAgIGNsaWNrOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgc2VsZi5zZXRBY3RpdmVQZXJpb2Qoc2VsZi5zdGFydERhdGFzZXQsIHNlbGYuZW5kRGF0YXNldCk7XG4gICAgICAgICAgdG9vbGJhci5kaXNwb3NlKCk7XG4gICAgICAgICAgc2VsZi5jbGlja2VkSWQgPSAnQUxMJztcbiAgICAgICAgICBzZWxmLnRvb2xiYXJzLnBvcCgpO1xuICAgICAgICAgIHNlbGYudG9vbGJhcnMucHVzaChzZWxmLmNyZWF0ZVRvb2xiYXIoKSk7XG4gICAgICAgICAgc2VsZi5nZXRMb2dpY2FsU3BhY2UoKTtcbiAgICAgICAgICBzZWxmLmRyYXcoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIHVuaWdyb3VwLmFkZFN5bWJvbChhbGxCdXR0b24pO1xuICAgICAgZm9yIChpID0gMDsgaSA8IHRoaXMuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBmb3IgKGogPSB0aGlzLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHNbaV0ubXVsdGlwbGllcnMubGVuZ3RoIC0gMTsgaiA+PSAwOyBqLS0pIHtcbiAgICAgICAgICBkZWR1Y3RvckFyLnB1c2goc2VsZi5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW2ldLm11bHRpcGxpZXJzW2pdICogc2VsZi5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW2ldLm1pbGxpc2Vjb25kcyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY2FsY3VsYXRlZEJ1dHRvbnMgPSBbXTtcbiAgICAgIGZvciAobGV0IGkgPSBzZWxmLnN0YXJ0UG9pbnRVbml0OyBpID49IDA7IGktLSkge1xuICAgICAgICBpZiAoaSA9PT0gc2VsZi5zdGFydFBvaW50VW5pdCkge1xuICAgICAgICAgIHN0YXJ0TXVsdGlwbGllciA9IHNlbGYuc3RhcnRQb2ludE11bHRpcGxpZXI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3RhcnRNdWx0aXBsaWVyID0gc2VsZi5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW2ldLm11bHRpcGxpZXJzLmxlbmd0aCAtIDE7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgaiA9IHN0YXJ0TXVsdGlwbGllcjsgaiA+PSAwOyBqLS0pIHtcbiAgICAgICAgICBtYXJnaW4gPSAoaSA9PT0gc2VsZi5ub0NhbGNCdXR0b25zICYmIGogPT09IDApID8gNSA6IDA7XG4gICAgICAgICAgY29uc29sZS5sb2coZW5kQWN0aXZlLCBpLCBzZWxmLm5vQ2FsY0J1dHRvbnMsIGosIG1hcmdpbik7XG4gICAgICAgICAgY2FsY3VsYXRlZEJ1dHRvbnNbaV0gPSBuZXcgdGhpcy50b29sYm94LlN5bWJvbChzZWxmLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHNbaV0ubXVsdGlwbGllcnNbal0gKyBzZWxmLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHNbaV0uYWJicmV2aWF0aW9uLCB0cnVlLCB7XG4gICAgICAgICAgICBwYXBlcjogdGhpcy5ncmFwaGljcy5wYXBlcixcbiAgICAgICAgICAgIGNoYXJ0OiB0aGlzLmNoYXJ0LFxuICAgICAgICAgICAgc21hcnRMYWJlbDogdGhpcy5zbWFydExhYmVsLFxuICAgICAgICAgICAgY2hhcnRDb250YWluZXI6IHRoaXMuZ3JhcGhpY3MuY29udGFpbmVyXG4gICAgICAgICAgfSwge1xuICAgICAgICAgICAgZmlsbDogJyNmZmZmZmYnLFxuICAgICAgICAgICAgbGFiZWxGaWxsOiAnIzY5Njk2OScsXG4gICAgICAgICAgICBzeW1ib2xTdHJva2VXaWR0aDogJzInLFxuICAgICAgICAgICAgc3ltYm9sU3Ryb2tlOiAnIzAwMDAwMCcsXG4gICAgICAgICAgICBzdHJva2VXaWR0aDogJzEnLFxuICAgICAgICAgICAgaG92ZXJGaWxsOiAnIzdmN2Y3ZicsXG4gICAgICAgICAgICByYWRpdXM6IDEsXG4gICAgICAgICAgICBtYXJnaW46IHtcbiAgICAgICAgICAgICAgcmlnaHQ6IG1hcmdpblxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pLmF0dGFjaEV2ZW50SGFuZGxlcnMoe1xuICAgICAgICAgICAgJ2NsaWNrJzogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICBkZWR1Y3RvciA9IChzZWxmLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHNbaV0ubXVsdGlwbGllcnNbal0gKiBzZWxmLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHNbaV0ubWlsbGlzZWNvbmRzKTtcbiAgICAgICAgICAgICAgc2VsZi5jbGlja2VkSWQgPSBzZWxmLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHNbaV0ubXVsdGlwbGllcnNbal0gKyBzZWxmLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHNbaV0uYWJicmV2aWF0aW9uO1xuICAgICAgICAgICAgICBzZWxmLnNldEFjdGl2ZVBlcmlvZChkZWR1Y3Rvcik7XG4gICAgICAgICAgICAgIHRvb2xiYXIuZGlzcG9zZSgpO1xuICAgICAgICAgICAgICBzZWxmLnRvb2xiYXJzLnBvcCgpO1xuICAgICAgICAgICAgICBzZWxmLnRvb2xiYXJzLnB1c2goc2VsZi5jcmVhdGVUb29sYmFyKCkpO1xuICAgICAgICAgICAgICBzZWxmLmdldExvZ2ljYWxTcGFjZSgpO1xuICAgICAgICAgICAgICBzZWxmLmRyYXcoKTtcbiAgICAgICAgICAgICAgLy8gdGhpcy50b29sYmFyc1t0aGlzLnRvb2xiYXJzLmxlbmd0aCAtIDFdID0gdGhpcy5jcmVhdGVUb29sYmFyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdW5pZ3JvdXAuYWRkU3ltYm9sKGNhbGN1bGF0ZWRCdXR0b25zW2ldKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb250ZXh0dWFsQnV0dG9ucyA9IFtdO1xuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc3RhbmRhcmRDb250ZXh1YWxQZXJpb2RzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnRleHR1YWxCdXR0b25zW2ldID0gbmV3IHRoaXMudG9vbGJveC5TeW1ib2wodGhpcy5zdGFuZGFyZENvbnRleHVhbFBlcmlvZHNbaV0uYWJicmV2aWF0aW9uLCB0cnVlLCB7XG4gICAgICAgICAgcGFwZXI6IHRoaXMuZ3JhcGhpY3MucGFwZXIsXG4gICAgICAgICAgY2hhcnQ6IHRoaXMuY2hhcnQsXG4gICAgICAgICAgc21hcnRMYWJlbDogdGhpcy5zbWFydExhYmVsLFxuICAgICAgICAgIGNoYXJ0Q29udGFpbmVyOiB0aGlzLmdyYXBoaWNzLmNvbnRhaW5lclxuICAgICAgICB9LCB7XG4gICAgICAgICAgZmlsbDogJyNmZmZmZmYnLFxuICAgICAgICAgIGxhYmVsRmlsbDogJyM2OTY5NjknLFxuICAgICAgICAgIHN5bWJvbFN0cm9rZVdpZHRoOiAnMicsXG4gICAgICAgICAgc3ltYm9sU3Ryb2tlOiAnIzAwMDAwMCcsXG4gICAgICAgICAgc3Ryb2tlV2lkdGg6ICcxJyxcbiAgICAgICAgICBob3ZlckZpbGw6ICcjN2Y3ZjdmJyxcbiAgICAgICAgICByYWRpdXM6IDEsXG4gICAgICAgICAgbWFyZ2luOiB7XG4gICAgICAgICAgICByaWdodDogMFxuICAgICAgICAgIH1cbiAgICAgICAgfSkuYXR0YWNoRXZlbnRIYW5kbGVycyh7XG4gICAgICAgICAgJ2NsaWNrJzogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgc2VsZi5zZXRBY3RpdmVQZXJpb2Qoc2VsZi5zdGFuZGFyZENvbnRleHVhbFBlcmlvZHNbaV0uZGF0ZVN0YXJ0LCBzZWxmLnN0YW5kYXJkQ29udGV4dWFsUGVyaW9kc1tpXS5kYXRlRW5kKTtcbiAgICAgICAgICAgIHNlbGYuY2xpY2tlZElkID0gc2VsZi5zdGFuZGFyZENvbnRleHVhbFBlcmlvZHNbaV0uYWJicmV2aWF0aW9uO1xuICAgICAgICAgICAgdG9vbGJhci5kaXNwb3NlKCk7XG4gICAgICAgICAgICBzZWxmLnRvb2xiYXJzLnBvcCgpO1xuICAgICAgICAgICAgc2VsZi50b29sYmFycy5wdXNoKHNlbGYuY3JlYXRlVG9vbGJhcigpKTtcbiAgICAgICAgICAgIHNlbGYuZ2V0TG9naWNhbFNwYWNlKCk7XG4gICAgICAgICAgICBzZWxmLmRyYXcoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB1bmlncm91cC5hZGRTeW1ib2woY29udGV4dHVhbEJ1dHRvbnNbaV0pO1xuICAgICAgfVxuXG4gICAgICAgIC8vIGJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ0JVVFRPTicpO1xuICAgICAgICAvLyBidG4uaWQgPSBzdGFuZGFyZFBlcmlvZHNbaV0uYWJicmV2aWF0aW9uO1xuICAgICAgICAvLyBidG4uaW5uZXJIVE1MID0gc3RhbmRhcmRQZXJpb2RzW2ldLmFiYnJldmlhdGlvbjtcbiAgICAgICAgLy8gYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZXZlbnRCdG4uYmluZCh0aGlzLCBzdGFuZGFyZFBlcmlvZHNbaV0pKTtcbiAgICAgICAgLy8gY29udGV4dHVhbEJ1dHRvbnMuYXBwZW5kQ2hpbGQoYnRuKTtcblxuICAgICAgdGhpcy5TeW1ib2xTdG9yZS5yZWdpc3RlcigndGV4dEJveEljb24nLCBmdW5jdGlvbiAoeCwgeSwgcmFkLCB3LCBoLCBwYWRYLCBwYWRZKSB7XG4gICAgICAgIHZhciB4MSA9IHggLSB3IC8gMiArIHBhZFggLyAyLFxuICAgICAgICAgIHgyID0geCArIHcgLyAyIC0gcGFkWCAvIDIsXG4gICAgICAgICAgeTEgPSB5IC0gaCAvIDIgKyBwYWRZIC8gMixcbiAgICAgICAgICB5MiA9IHkgKyBoIC8gMiAtIHBhZFkgLyAyO1xuXG4gICAgICAgIHJldHVybiBbJ00nLCB4MSwgeTEsICdMJywgeDIsIHkxLCAnTCcsIHgyLCB5MiwgJ0wnLCB4MSwgeTIsICdaJ107XG4gICAgICB9KTtcblxuICAgICAgdG9vbGJhci5hZGRDb21wb25lbnQoZ3JvdXApO1xuICAgICAgdG9vbGJhci5hZGRDb21wb25lbnQodW5pZ3JvdXApO1xuICAgICAgcmV0dXJuIHRvb2xiYXI7XG4gICAgfTtcblxuICAgIGdldExvZ2ljYWxTcGFjZSAoYXZhaWxhYmxlV2lkdGgsIGF2YWlsYWJsZUhlaWdodCkge1xuICAgICAgYXZhaWxhYmxlV2lkdGggLz0gMjtcbiAgICAgIHZhciBsb2dpY2FsU3BhY2UsXG4gICAgICAgIHdpZHRoID0gMCxcbiAgICAgICAgaGVpZ2h0ID0gMCxcbiAgICAgICAgaSxcbiAgICAgICAgbG47XG5cbiAgICAgIGZvciAoaSA9IDAsIGxuID0gdGhpcy50b29sYmFycy5sZW5ndGg7IGkgPCBsbjsgaSsrKSB7XG4gICAgICAgIGxvZ2ljYWxTcGFjZSA9IHRoaXMudG9vbGJhcnNbaV0uZ2V0TG9naWNhbFNwYWNlKGF2YWlsYWJsZVdpZHRoLCBhdmFpbGFibGVIZWlnaHQpO1xuICAgICAgICB3aWR0aCA9IE1hdGgubWF4KGxvZ2ljYWxTcGFjZS53aWR0aCwgd2lkdGgpO1xuICAgICAgICBoZWlnaHQgKz0gbG9naWNhbFNwYWNlLmhlaWdodDtcbiAgICAgICAgdGhpcy50b29sYmFyc1tpXS53aWR0aCA9IGxvZ2ljYWxTcGFjZS53aWR0aDtcbiAgICAgICAgdGhpcy50b29sYmFyc1tpXS5oZWlnaHQgPSBsb2dpY2FsU3BhY2UuaGVpZ2h0O1xuICAgICAgfVxuICAgICAgaGVpZ2h0ICs9IHRoaXMucGFkZGluZztcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHdpZHRoOiB3aWR0aCxcbiAgICAgICAgaGVpZ2h0OiBoZWlnaHRcbiAgICAgIH07XG4gICAgfTtcblxuICAgIHBsYWNlSW5DYW52YXMgKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgc2VsZi5wYWRkaW5nID0gNTtcbiAgICAgIHNlbGYuc3BhY2VNYW5hZ2VySW5zdGFuY2UuYWRkKFt7XG4gICAgICAgIG5hbWU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICByZXR1cm4gJ3N0YW5kYXJkLXBlcmlvZC1zZWxlY3Rvci1leHQnO1xuICAgICAgICB9LFxuICAgICAgICByZWY6IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgICByZXR1cm4gb2JqWycwJ107XG4gICAgICAgIH0sXG4gICAgICAgIHNlbGY6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICByZXR1cm4gc2VsZjtcbiAgICAgICAgfSxcbiAgICAgICAgcHJpb3JpdHk6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICByZXR1cm4gMjtcbiAgICAgICAgfSxcbiAgICAgICAgbGF5b3V0OiBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgICAgcmV0dXJuIG9iai5pbmxpbmU7XG4gICAgICAgIH0sXG4gICAgICAgIG9yaWVudGF0aW9uOiBbe1xuICAgICAgICAgIHR5cGU6IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgICAgIHJldHVybiBvYmouaG9yaXpvbnRhbDtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHBvc2l0aW9uOiBbe1xuICAgICAgICAgICAgdHlwZTogZnVuY3Rpb24gKG9iaikge1xuICAgICAgICAgICAgICByZXR1cm4gb2JqLnRvcDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhbGlnbm1lbnQ6IFt7XG4gICAgICAgICAgICAgIHR5cGU6IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JqLmxlZnQ7XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGRpbWVuc2lvbnM6IFtmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHBhcmVudCA9IHRoaXMuZ2V0UGFyZW50Q29tcG9uZW50R3JvdXAoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi5nZXRMb2dpY2FsU3BhY2UocGFyZW50LmdldFdpZHRoKCksIHBhcmVudC5nZXRIZWlnaHQoKSk7XG4gICAgICAgICAgICAgIH1dXG4gICAgICAgICAgICB9XVxuICAgICAgICAgIH1dXG4gICAgICAgIH1dXG4gICAgICB9XSk7XG4gICAgfTtcblxuICAgIHNldERyYXdpbmdDb25maWd1cmF0aW9uICh4LCB5LCB3aWR0aCwgaGVpZ2h0LCBncm91cCkge1xuICAgICAgdmFyIG1lcyA9IHRoaXMubWVhc3VyZW1lbnQ7XG4gICAgICBtZXMueCA9IHg7XG4gICAgICBtZXMueSA9IHk7XG4gICAgICBtZXMud2lkdGggPSB3aWR0aDtcbiAgICAgIG1lcy5oZWlnaHQgPSBoZWlnaHQ7XG5cbiAgICAgIHRoaXMucGFyZW50R3JvdXAgPSBncm91cDtcblxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIGRyYXcgKHgsIHksIHdpZHRoLCBoZWlnaHQsIGdyb3VwKSB7XG4gICAgICB2YXIgbWVhc3VyZW1lbnQgPSB0aGlzLm1lYXN1cmVtZW50LFxuICAgICAgICB0b29sYmFycyA9IHRoaXMudG9vbGJhcnMsXG4gICAgICAgIGxuLFxuICAgICAgICBpLFxuICAgICAgICB0b29sYmFyLFxuICAgICAgICBib3VuZEVsZW1lbnQsXG4gICAgICAgIGJCb3gsXG4gICAgICAgIHgxLFxuICAgICAgICB4MixcbiAgICAgICAgeTI7XG5cbiAgICAgIHggPSB4ID09PSB1bmRlZmluZWQgPyBtZWFzdXJlbWVudC54IDogeDtcbiAgICAgIHkgPSB5ID09PSB1bmRlZmluZWQgPyBtZWFzdXJlbWVudC55IDogeTtcbiAgICAgIHdpZHRoID0gd2lkdGggPT09IHVuZGVmaW5lZCA/IG1lYXN1cmVtZW50LndpZHRoIDogd2lkdGg7XG4gICAgICBoZWlnaHQgPSBoZWlnaHQgPT09IHVuZGVmaW5lZCA/IG1lYXN1cmVtZW50LmhlaWdodCA6IGhlaWdodDtcbiAgICAgIGdyb3VwID0gZ3JvdXAgPT09IHVuZGVmaW5lZCA/IHRoaXMucGFyZW50R3JvdXAgOiBncm91cDtcbiAgICAgIGlmICh3aWR0aCAmJiBoZWlnaHQpIHtcbiAgICAgICAgZm9yIChpID0gMCwgbG4gPSB0b29sYmFycy5sZW5ndGg7IGkgPCBsbjsgaSsrKSB7XG4gICAgICAgICAgdG9vbGJhciA9IHRvb2xiYXJzW2ldO1xuICAgICAgICAgIHRvb2xiYXIuZHJhdyh4LCB5LCBncm91cCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnNvbGUubG9nKHRvb2xiYXJzKTtcbiAgICAgIGZvciAobGV0IGkgPSAwLCBpaSA9IHRvb2xiYXJzWzBdLmNvbXBvbmVudEdyb3Vwc1sxXS5zeW1ib2xMaXN0OyBpIDwgaWkubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGlpW2ldLnN5bWJvbCA9PT0gdGhpcy5jbGlja2VkSWQpIHtcbiAgICAgICAgICBib3VuZEVsZW1lbnQgPSBpaVtpXS5nZXRCb3VuZEVsZW1lbnQoKTtcbiAgICAgICAgICBiQm94ID0gYm91bmRFbGVtZW50LmdldEJCb3goKTtcbiAgICAgICAgICB4MSA9IGJCb3gueDtcbiAgICAgICAgICB4MiA9IGJCb3gueDI7XG4gICAgICAgICAgeTIgPSBiQm94LnkyO1xuXG4gICAgICAgICAgdGhpcy5ncmFwaGljcy5wYXBlci5wYXRoKHtcbiAgICAgICAgICAgIHBhdGg6IFsnTScsIHgxLCB5MiAtIDIgLyAyLCAnTCcsIHgyLCB5MiAtIDIgLyAyXSxcbiAgICAgICAgICAgICdzdHJva2UnOiAnI2ZmMDAwMCdcbiAgICAgICAgICB9KS50b0Zyb250KCk7XG4gICAgICAgICAgLy8gdGhpcy5fcGFyZW50R3JvdXAuc2V0U3RhdGUodGhpcyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICB9XG4gIHJldHVybiBTdGFuZGFyZFBlcmlvZFNlbGVjdG9yO1xufTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9zdGFuZGFyZC1wZXJpb2Qtc2VsZWN0b3IuanMiXSwic291cmNlUm9vdCI6IiJ9