!function(e){function t(i){if(a[i])return a[i].exports;var n=a[i]={exports:{},id:i,loaded:!1};return e[i].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var a={};return t.m=e,t.c=a,t.p="",t(0)}([function(e,t,a){(function(e){"use strict";var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=a(2);!function(a,i){"object"===t(e)&&e.exports?e.exports=a.document?i(a):function(e){if(!e.document)throw new Error("Window with document not present");return i(e,!0)}:a.StandardPeriodSelector=i(a,!0)}("undefined"!=typeof window?window:void 0,function(e,t){var a=e.FusionCharts;a.register("extension",["private","standard-period-selector",function(){a.registerComponent("extensions","standard-period-selector",i({FusionCharts:a}))}])})}).call(t,a(1)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}();e.exports=function(e){var t=function(){function e(){a(this,e);var t=this;t.ratio=8,t.toolbox=FusionCharts.getComponent("api","toolbox"),t.HorizontalToolbar=t.toolbox.HorizontalToolbar,t.ComponentGroup=t.toolbox.ComponentGroup,t.SymbolStore=t.toolbox.SymbolStore,t.all=1,t.calculatedPeriods=[],t.startDataset=0,t.startActiveWindow=0,t.endActiveWindow=1,t.standardCalculatedPeriods=[],t.standardContexualPeriods=[],t.startPointUnit=0,t.startPointMultiplier=0,t.noCalcButtons=0,t.minimumBucket=1,t.buttonGroup={},t.toolbar={},t.categoryClicked,t.btns={contextualObj:{},calculatedObj:{}},t.tdButtons=[{name:"YTD",abbreviation:"YTD",parent:"year",milliseconds:31104e6,description:"Year to Date"},{name:"QTD",abbreviation:"QTD",parent:"month",multiplier:3,milliseconds:7776e6,description:"Quarter to Date"},{name:"MTD",abbreviation:"MTD",parent:"month",milliseconds:2592e6,description:"Month to Date"},{name:"WTD",abbreviation:"WTD",parent:"day",multiplier:7,milliseconds:6048e5,description:"Week to Date"},{name:"Y",abbreviation:"Y",parent:"day",milliseconds:864e5,description:"Yesterday"},{name:"T",abbreviation:"T",parent:"day",milliseconds:864e5,description:"Today"}],t.config={anchorPositions:"right",all:"1",contextual:"1",calculated:"1",tertiaryTimePeriods:{}},t._babTimer=0,t.propsChangeListener=function(e,a){t.startActiveWindow=e[1],t.endActiveWindow=a[1],t._babTimer?t.updatePending||(t.updatePending=!0,setTimeout(function(){t.updatePending=!1,t.onActiveRangeChange()},t._babTimer)):(t._babTimer=200,t.onActiveRangeChange())}}return i(e,[{key:"hideAllCalcBtns",value:function(){var e,t=this,a=t.btns.calculatedObj;for(e in a)a[e].btn.hide()}},{key:"showApplicableCalculatedButtons",value:function(){var e,t,a,i,n=this,o=0,l=0,r=n.endActiveWindow-n.startActiveWindow,s=n.anchorPositions,c=n.btns.calculatedObj,d=n.timePeriods,u=0,b=[],h=n.minimumBucket;for("right"===s?e=n.endActiveWindow-n.startDataset:"left"===s&&(e=n.endDataset-n.startActiveWindow),n.hideAllCalcBtns(),o=0;o<d.length;o++)if(u=d[o].interval,a=d[o].name,i=d[o].abbreviation.single,e/u>=1)if(Math.floor(r/u)<1)b.push({name:a,abbreviation:i,multipliers:[1]});else for(b.push({name:a,abbreviation:i,multipliers:[]}),l=0;l<d[o].multipliers.length;l++)r/n.ratio<d[o].multipliers[l]*u&&d[o].multipliers[l]*u>h&&b[b.length-1].multipliers.push(d[o].multipliers[l]);for(o=0;o<b.length;o++)for(l=0;l<b[o].multipliers.length;l++)t=b[o].multipliers[l]+b[o].name,c[t].btn&&c[t].btn.show();n.standardCalculatedPeriods=b,n.toolbar&&n.toolbar.redraw()}},{key:"highlightActiveRange",value:function(){var e,t,a,i,n,o,l=this,r=l.saveSelectLine,s=l.clickedId,c=l.btns.contextualObj,d=l.btns.calculatedObj;r||(r=l.saveSelectLine||(l.saveSelectLine=l.graphics.paper.path({stroke:"#c95a5a","stroke-width":"2px"}).toFront())),o=c[s]||d[s]||l.btns[s],o?(e=o.btn.svgElems.node,t=e.getBBox(),a=t.x,i=a+t.width,n=t.y+t.height,r.show().attr({path:["M",a-.5,n-.5,"L",i+.5,n-.5]})):r.hide()}},{key:"onActiveRangeChange",value:function(){var e,t,a,i=this,n=i.categoryClicked,o=i.clickedId,l=i.startDataset,r=i.endDataset,s=i.startActiveWindow,c=i.endActiveWindow,d=i.btns.contextualObj,u=i.btns.calculatedObj;if("ALL"===n)l===s&&r===c||(delete i.clickedId,delete i.categoryClicked);else if("contextual"===n)a=d[o],!a||s===a.contextStart&&c===a.contextEnd||(delete i.clickedId,delete i.categoryClicked);else if("calculated"===n)a=u[o],a&&c-s!==a.interval&&(delete i.clickedId,delete i.categoryClicked);else if(l===s&&r===c)i.clickedId="ALL",i.categoryClicked="ALL";else{for(e in d)a=d[e],s===a.contextStart&&c===a.contextEnd&&(i.clickedId=e,i.categoryClicked="contextual",t=!0);if(!t)for(e in u)a=u[e],c-s===a.interval&&(i.clickedId=e,i.categoryClicked="calculated")}i.showApplicableCalculatedButtons(),i.highlightActiveRange()}},{key:"processMultipliers",value:function(e,t){for(var a=0;a<e.length;a++){var i=e[a].possibleFactors.length,n=e[a]&&e[a].name,o=e&&e[a];o.multipliers=[],t[n]?o.multipliers=t[n]:1===i?o.multipliers.push(o.possibleFactors[0]):2===i?(o.multipliers.push(o.possibleFactors[0]),o.multipliers.push(o.possibleFactors[i-1])):(o.multipliers.push(o.possibleFactors[0]),o.multipliers.push(Math.floor(o.possibleFactors[i-1]/2)),o.multipliers.push(o.possibleFactors[i-1]))}return e}},{key:"createCalculatedButtons",value:function(e){for(var t,a,i=this,n=this,o=n.btns.calculatedObj,l=n.anchorPositions,r=this.minimumBucket,s=n.globalReactiveModel.model,c=n.timePeriods.length-1;c>=0;c--)for(var d=function(d){var u=n.timePeriods[c].multipliers[d]+n.timePeriods[c].abbreviation.single,b=n.timePeriods[c].multipliers[d]+n.timePeriods[c].name,h=n.timePeriods[c].multipliers[d]*n.timePeriods[c].interval;h>r&&(a=o[b]={interval:h,fn:function(){n.clickedId=b,n.categoryClicked="calculated",n.highlightActiveRange(),"right"===l?s["x-axis-absolute-range-start"]>n.endActiveWindow-h?n.globalReactiveModel.lock().prop("x-axis-visible-range-end",s["x-axis-visible-range-start"]+h).prop("x-axis-visible-range-start",n.startDataset).unlock():s["x-axis-visible-range-start"]=n.endActiveWindow-h:s["x-axis-absolute-range-end"]<n.startActiveWindow+h?n.globalReactiveModel.lock().prop("x-axis-visible-range-end",n.endDataset).prop("x-axis-visible-range-start",s["x-axis-absolute-range-end"]-h).unlock():s["x-axis-visible-range-end"]=n.startActiveWindow+h},shortKey:u},t=new i.toolbox.Symbol(u,!0,{paper:i.graphics.paper,chart:i.chart,smartLabel:i.smartLabel,chartContainer:i.graphics.container},n.extData.style["calculated-config"]).attachEventHandlers({click:a.fn,tooltext:n.timePeriods[c].multipliers[d]+" "+n.timePeriods[c].description}),a.btn=t,e.addSymbol(t))},u=n.timePeriods[c].multipliers.length-1;u>=0;u--)d(u)}},{key:"generateCtxBtnList",value:function(){for(var e=this,t=e.standardContexualPeriods,a=0,i=e.globalReactiveModel.model["x-axis-absolute-range-end"]||9999999,n=i-2,o=i,l={},r=e.tdButtons,s=e.minimumBucket||1,c=e.startActiveWindow,d=e.endActiveWindow;a<r.length;a++)n=new Date(i),"YTD"===r[a].name?(n.setMonth(0),n.setDate(1),n.setHours(0),n.setMinutes(0),n.setSeconds(0)):"MTD"===r[a].name?(n.setDate(1),n.setHours(0),n.setMinutes(0),n.setSeconds(0)):"QTD"===r[a].name?(n.setMonth(11-n.getMonth()%4),n.setDate(0),n.setHours(0),n.setMinutes(0),n.setSeconds(0)):"WTD"===r[a].name?(n.setDate(n.getDate()-n.getDay()),n.setHours(0),n.setMinutes(0),n.setSeconds(0)):"Y"===r[a].name?(n.setHours(0),n.setMinutes(0),n.setSeconds(0),n-=864e5):"T"===r[a].name&&(n.setHours(0),n.setMinutes(0),n.setSeconds(0),i===+n&&(n=+n-864e5)),o<n&&o-n<s||(r[a].dateStart=n.valueOf(),r[a].dateEnd=o.valueOf(),t.push(r[a]));for(l.milliseconds=1/0,a=0;a<r.length;a++)Math.abs(r[a].milliseconds-(d-c))<l.milliseconds&&(l.milliseconds=r[a].milliseconds,l.name=r[a].abbreviation)}},{key:"createContextualButtons",value:function(e){var t,a,i,n=this,o=this,l=o.btns.contextualObj;o.generateCtxBtnList();for(var r=function(r){t=0===r?o.extData.style["contextual-config-first"]:o.extData.style["contextual-config"],i=n.standardContexualPeriods[r].abbreviation,a=l[i]={contextStart:o.standardContexualPeriods[r].dateStart,contextEnd:o.standardContexualPeriods[r].dateEnd,fn:function(){o.categoryClicked="contextual",o.clickedId=o.standardContexualPeriods[r].abbreviation,o.highlightActiveRange(),o.globalReactiveModel.lock().prop("x-axis-visible-range-end",o.standardContexualPeriods[r].dateEnd).prop("x-axis-visible-range-start",o.standardContexualPeriods[r].dateStart).unlock()}},a.btn=new n.toolbox.Symbol(n.standardContexualPeriods[r].abbreviation,!0,{paper:n.graphics.paper,chart:n.chart,smartLabel:n.smartLabel,chartContainer:n.graphics.container},t).attachEventHandlers({click:a.fn,tooltext:n.standardContexualPeriods[r].description}),o.standardContexualPeriods[r].dateEnd-o.standardContexualPeriods[r].dateStart>=o.minimumBucket&&e.addSymbol(a.btn)},s=0;s<this.standardContexualPeriods.length;s++)r(s)}},{key:"createToolbar",value:function(){var e,t,a,i,n,o=this;return t=new o.HorizontalToolbar({paper:o.graphics.paper,chart:o.chart,smartLabel:o.smartLabel,chartContainer:o.graphics.container}),t.setConfig({fill:"#fff",borderThickness:0}),n=new o.toolbox.ComponentGroup({paper:o.graphics.paper,chart:o.chart,smartLabel:o.smartLabel,chartContainer:o.graphics.container}),e=new o.toolbox.ComponentGroup({paper:o.graphics.paper,chart:o.chart,smartLabel:o.smartLabel,chartContainer:o.graphics.container}),e.setConfig({fill:"#fff",borderThickness:0}),n.setConfig({fill:"#fff",borderThickness:0}),i=new o.toolbox.Label("Zoom:",{smartLabel:o.smartLabel,paper:o.graphics.paper},o.extData.style["label-config"]),n.addSymbol(i),a=o.allButtonShow&&{fn:function(){o.clickedId="ALL",o.categoryClicked="ALL",o.highlightActiveRange(),o.globalReactiveModel.lock().prop("x-axis-visible-range-end",o.endDataset).prop("x-axis-visible-range-start",o.startDataset).unlock()}},a&&(a.btn=new o.toolbox.Symbol("ALL",!0,{paper:o.graphics.paper,chart:o.chart,smartLabel:o.smartLabel,chartContainer:o.graphics.container},o.extData.style["all-config"]).attachEventHandlers({click:a.fn,tooltext:"ALL"}),o.btns.ALL=a,e.addSymbol(a.btn)),t.addComponent(n),t.addComponent(e),o.toolbar=t,o.buttonGroup=e,t}},{key:"init",value:function(e){var t,a,i,n=this,o=n.btns.calculatedObj,l=n.btns.contextualObj;if(e(["graphics","chart","canvasConfig","MarkerManager","reactiveModel","globalReactiveModel","spaceManagerInstance","smartLabel","extData","chartInstance",function(e,t,a,i,o,l,r,s,c,d){n.graphics=e,n.chart=t,n.markerManager=i,n.canvasConfig=a,n.reactiveModel=o,n.globalReactiveModel=l,n.spaceManagerInstance=r,n.smartLabel=s,n.extDataUser=c,n.chartInstance=d}]),n.extData={disabled:"false","default-select":"ALL","all-button":!0,"contextual-button":!0,"calculated-button":!0,"anchor-align":"left",posWrtCanvas:"top",layout:"inline",alignment:"left",orientation:"horizontal",customMultipliers:{millisecond:[1,500],second:[1,5,15,30],minute:[1,5,15,30],hour:[1,3,6,12],day:[1,7,15],month:[1,3,6],year:[1,3,5]},style:{"label-config":{text:{style:{"font-family":'"Lucida Grande", sans-serif',"font-size":"13",fill:"#4b4b4b"}},container:{height:22}},"all-config":{fill:"#ffffff",labelFill:"#4b4b4b",symbolStrokeWidth:"2",stroke:"#ced5d4",strokeWidth:"1",hoverFill:"#f7f7f7",height:22,radius:1,margin:{right:5},btnTextStyle:{fontFamily:'"Lucida Grande", sans-serif',fontSize:"13",fill:"#4b4b4b","line-height":"1","letter-spacing":"-0.04em"}},"calculated-config":{fill:"#ffffff",labelFill:"#4b4b4b",symbolStrokeWidth:"2",stroke:"#ced5d4",strokeWidth:"1",hoverFill:"#f7f7f7",height:22,radius:1,margin:{right:0},btnTextStyle:{fontFamily:'"Lucida Grande", sans-serif',fontSize:"13",fill:"#4b4b4b","line-height":"1","letter-spacing":"-0.04em"}},"contextual-config-first":{fill:"#ffffff",labelFill:"#4b4b4b",symbolStrokeWidth:"2",stroke:"#ced5d4",strokeWidth:"1",height:22,hoverFill:"#f7f7f7",radius:1,margin:{right:0,left:5},btnTextStyle:{fontFamily:'"Lucida Grande", sans-serif',fontSize:"13",fill:"#696969","line-height":"1","letter-spacing":"-0.04em"}},"contextual-config":{fill:"#ffffff",labelFill:"#4b4b4b",symbolStrokeWidth:"2",stroke:"#ced5d4",strokeWidth:"1",height:22,hoverFill:"#f7f7f7",radius:1,margin:{right:0,left:0},btnTextStyle:{fontFamily:'"Lucida Grande", sans-serif',fontSize:"13",fill:"#4b4b4b","line-height":"1","letter-spacing":"-0.04em"}}}},Object.assign(n.extData,n.extDataUser),n.endActiveWindow=n.globalReactiveModel.model["x-axis-visible-range-end"],n.startActiveWindow=n.globalReactiveModel.model["x-axis-visible-range-start"],n.startDataset=n.globalReactiveModel.model["x-axis-absolute-range-start"],n.endDataset=n.globalReactiveModel.model["x-axis-absolute-range-end"],n.timeRules=n.chartInstance.apiInstance.getComponentStore(),n.timeRules=n.timeRules.getCanvasByIndex(0).composition.impl,n.timeRules=n.timeRules.getDataAggregator(),n.timeRules=n.timeRules.getAggregationTimeRules(),n.timePeriods=n.processMultipliers(n.timeRules,n.extData.customMultipliers),n.allButtonShow=n.extData["all-button"],n.calculatedButtonShow=n.extData["calculated-button"],n.contextualButtonShow=n.extData["contextual-button"],n.anchorPositions=n.extData["anchor-align"],n.customMultipliers=n.extData.customMultipliers,t=n.extData["default-select"])if("ALL"===t)n.clickedId="ALL";else if(l[t])n.clickedId=t;else{i=!0;for(a in o)i&&o[a].shortKey===t&&(n.clickedId=o[a].shortKey,i=!1)}return n.measurement={},n.flag=!0,n.toolbars=[],n.toolbars.push(n.createToolbar()),n.globalReactiveModel.onPropsChange(["x-axis-visible-range-start","x-axis-visible-range-end"],n.propsChangeListener),n.globalReactiveModel.onPropChange("x-axis-absolute-range-end",function(e){"contextual"===n.categoryClicked&&(n.globalReactiveModel.model["x-axis-visible-range-end"]=n.globalReactiveModel.model["x-axis-absolute-range-end"])}),n}},{key:"getLogicalSpace",value:function(){var e,t,a,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._pWidth,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._pHeight,o=420,l=0,r=this;for(t=0,a=r.toolbars.length;t<a;t++)e=r.toolbars[t].getLogicalSpace(i,n),l+=e.height,r.toolbars[t].width=e.width,r.toolbars[t].height=e.height;return l+=r.padding,{width:o,height:l}}},{key:"getDefaultGroup",value:function(){return this.parentGroup}},{key:"placeInCanvas",value:function(){var e=this;e.padding=5,e.spaceManagerInstance.add([{name:function(){return"standard-period-selector-ext"},ref:function(e){return e[0]},self:function(){return e},priority:function(){return 2},layout:function(t){return t[e.extData.layout]||"inline"},orientation:[{type:function(t){return t[e.extData.orientation]||"horizontal"},position:[{type:function(t){return t[e.extData.posWrtCanvas]||"top"},alignment:[{type:function(t){return t[e.extData.alignment]||"left"},dimensions:[function(){var t=this.getParentComponentGroup();return e._ref=this,e.getLogicalSpace(e._pWidth=t.getWidth(),e._pHeight=t.getHeight())}]}]}]}]}])}},{key:"setDrawingConfiguration",value:function(e,t,a,i,n){var o=this.measurement;return o.x=e,o.y=t,o.width=a,o.height=i,this.parentGroup=n,this}},{key:"draw",value:function(e,t,a,i,n){var o,l,r,s,c=this,d=c.measurement,u=c.toolbars,b=c.btns.contextualObj,h=c.btns.calculatedObj,p=c.clickedId,f=c.globalReactiveModel.model,g=c.minimumBucket,m=c.buttonGroup;if(g=f["minimum-consecutive-datestamp-diff"]*f["x-axis-maximum-allowed-ticks"],c.minimumBucket=g,c.calculatedButtonShow&&c.createCalculatedButtons(m),c.contextualButtonShow&&c.createContextualButtons(m),e=void 0===e?d.x:e,t=void 0===t?d.y:t,a=void 0===a?d.width:a,i=void 0===i?d.height:i,n=void 0===n?this.parentGroup:n,a&&i)for(l=0,o=u.length;l<o;l++)r=u[l],r.draw(e,t,n);p?(s=h[p]||b[p]||c.btns[p],s?s.fn&&s.fn():c.onActiveRangeChange()):c.onActiveRangeChange()}}]),e}();return t}}]);
//# sourceMappingURL=standard-period-selector-es5.min.js.map