!function(i){function e(n){if(t[n])return t[n].exports;var o=t[n]={exports:{},id:n,loaded:!1};return i[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var t={};return e.m=i,e.c=t,e.p="",e(0)}([function(i,e,t){"use strict";var n=t(1);window.stPS=new n,window.timePeriods=[{name:"minute",milliseconds:6e4,startingPoint:0,abbreviation:"min",description:"MINUTE",parent:"hour",multipliers:[1,15,30]},{name:"hour",milliseconds:36e5,startingPoint:0,abbreviation:"hr",description:"HOUR",parent:"day",multipliers:[1,3,6,12]},{name:"day",milliseconds:864e5,startingPoint:0,abbreviation:"D",description:"DAY",parent:"month",multipliers:[1,7,15]},{name:"month",milliseconds:2592e6,startingPoint:0,abbreviation:"M",description:"MONTH",parent:"year",multipliers:[1,3,6]},{name:"year",milliseconds:31104e6,startingPoint:0,abbreviation:"Y",description:"YEAR",multipliers:[1,3,5]}]},function(i,e){"use strict";function t(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function(){function i(i,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,n.key,n)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),o=function(){function i(){t(this,i),this.all=1,this.calculatedPeriods=[],this.startDataset=0,this.endDataset=7999999999999,this.startActiveWindow=55e6,this.endActiveWindow=6e7,this.standardPeriods=[],this.config={}}return n(i,[{key:"calculateApplicableUnitPeriods",value:function(){var i=this.endActiveWindow-this.startDataset,e=[],t=0,n=0,o=this.endActiveWindow-this.startActiveWindow;for(console.log("activeWindow",o),t=0;t<window.timePeriods.length;t++)if(i/window.timePeriods[t].milliseconds>=1){if(console.log(window.timePeriods[t].description),Math.floor(o/window.timePeriods[t].milliseconds)<1)window.timePeriods[t].applicableMultipliers=window.timePeriods[t].multipliers[0],this.standardPeriods.push({multipliers:[window.timePeriods[t].multipliers[0]],milliseconds:window.timePeriods[t].milliseconds,abbreviation:window.timePeriods[t].abbreviation,description:window.timePeriods[t].description}),console.log(window.timePeriods[t].multipliers[0]+window.timePeriods[t].abbreviation);else for(n=0;n<window.timePeriods[t].multipliers.length;n++)o/5<window.timePeriods[t].multipliers[n]*window.timePeriods[t].milliseconds&&(void 0===window.timePeriods[t].applicableMultipliers&&(window.timePeriods[t].applicableMultipliers=[]),void 0===this.standardPeriods[this.standardPeriods.length-1]&&this.standardPeriods.push({multipliers:[],milliseconds:window.timePeriods[t].milliseconds,abbreviation:window.timePeriods[t].abbreviation,description:window.timePeriods[t].description}),this.standardPeriods[this.standardPeriods.length-1].multipliers.push(window.timePeriods[t].multipliers[n]),console.log(window.timePeriods[t].multipliers[n]+window.timePeriods[t].abbreviation));e.push(window.timePeriods[t]),console.log("================")}return e}},{key:"calculateApplicableStandardPeriods",value:function(){var i=this.calculateApplicableStandardPeriods();return i}},{key:"setActivePeriod",value:function(i,e){console.log(i,e),this.startActiveWindow=i,this.endActiveWindow=e,document.getElementById("startActiveRange").innerHTML=this.startActiveWindow,document.getElementById("endActiveRange").innerHTML=this.endActiveWindow,this.calculateApplicableUnitPeriods()}},{key:"setActivePeriodStart",value:function(i){this.startActiveWindow=this.endActiveWindow-i,this.calculateApplicableUnitPeriods()}},{key:"setActivePeriodEnd",value:function(i){this.endActiveWindow=this.startActiveWindow+i,this.calculateApplicableUnitPeriods()}},{key:"drawButtons",value:function(){var i,e=document.getElementById("calculated"),t=0,n=0,o=0,s=this;for(e.innerHTML="",console.clear(),t=this.standardPeriods.length-1;t>=0;t--)for(n=this.standardPeriods[t].multipliers.length-1;n>=0;n--)console.log(this.standardPeriods[t].multipliers[n]+this.standardPeriods[t].abbreviation),i=document.createElement("BUTTON"),i.id=this.standardPeriods[t].multipliers[n]+this.standardPeriods[t].abbreviation,i.innerHTML=this.standardPeriods[t].multipliers[n]+this.standardPeriods[t].abbreviation,o=s.standardPeriods[t].multipliers[n]*this.standardPeriods[t].milliseconds,i.multiplierValue=o,console.log(o),i.addEventListener("click",function(i){console.log(i.srcElement.multiplierValue),s.setActivePeriod(s.endActiveWindow-i.srcElement.multiplierValue,s.endActiveWindow),s.drawButtons()}),e.appendChild(i);this.standardPeriods=[]}},{key:"setChartRangeObButtonClick",value:function(){}},{key:"configure",value:function(i){this.config=i}},{key:"init",value:function(i){i("X-Axis","Y-Axis","graphics","chart","extensionData","dateFormatter",function(i,e,t,n,o,s){})}},{key:"placeInCanvas",value:function(){}},{key:"draw",value:function(){}},{key:"dispose",value:function(){}}]),i}();"undefined"!=typeof i&&"undefined"!=typeof i.exports?i.exports=o:window.StandardPeriod=o}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3RhbmRhcmQtcGVyaW9kLXNlbGVjdG9yLWVzNS5taW4uanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svYm9vdHN0cmFwIDYzZjI4NDQxOGViNTBhMjk4YTdhIiwid2VicGFjazovLy8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvc3RhbmRhcmQtcGVyaW9kLXNlbGVjdG9yLmpzIl0sIm5hbWVzIjpbIm1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJpbnN0YWxsZWRNb2R1bGVzIiwiZXhwb3J0cyIsIm1vZHVsZSIsImlkIiwibG9hZGVkIiwiY2FsbCIsIm0iLCJjIiwicCIsIlN0YW5kYXJkUGVyaW9kU2VsZWN0b3IiLCJ3aW5kb3ciLCJzdFBTIiwidGltZVBlcmlvZHMiLCJuYW1lIiwibWlsbGlzZWNvbmRzIiwic3RhcnRpbmdQb2ludCIsImFiYnJldmlhdGlvbiIsImRlc2NyaXB0aW9uIiwicGFyZW50IiwibXVsdGlwbGllcnMiLCJfY2xhc3NDYWxsQ2hlY2siLCJpbnN0YW5jZSIsIkNvbnN0cnVjdG9yIiwiVHlwZUVycm9yIiwiX2NyZWF0ZUNsYXNzIiwiZGVmaW5lUHJvcGVydGllcyIsInRhcmdldCIsInByb3BzIiwiaSIsImxlbmd0aCIsImRlc2NyaXB0b3IiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImtleSIsInByb3RvUHJvcHMiLCJzdGF0aWNQcm9wcyIsInByb3RvdHlwZSIsInRoaXMiLCJhbGwiLCJjYWxjdWxhdGVkUGVyaW9kcyIsInN0YXJ0RGF0YXNldCIsImVuZERhdGFzZXQiLCJzdGFydEFjdGl2ZVdpbmRvdyIsImVuZEFjdGl2ZVdpbmRvdyIsInN0YW5kYXJkUGVyaW9kcyIsImNvbmZpZyIsInZhbHVlIiwidGFyZ2V0QmxvY2siLCJhcHBsaWNhYmxlU3RhbmRhcmRVbml0UGVyaW9kIiwiaiIsImFjdGl2ZVdpbmRvdyIsImNvbnNvbGUiLCJsb2ciLCJNYXRoIiwiZmxvb3IiLCJhcHBsaWNhYmxlTXVsdGlwbGllcnMiLCJwdXNoIiwidW5kZWZpbmVkIiwiY2FsY3VsYXRlQXBwbGljYWJsZVN0YW5kYXJkUGVyaW9kcyIsInN0YXJ0IiwiZW5kIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImlubmVySFRNTCIsImNhbGN1bGF0ZUFwcGxpY2FibGVVbml0UGVyaW9kcyIsImJ0biIsImNhbGN1bGF0ZWRCdXR0b25zIiwibXVsdGlwbGllclZhbHVlIiwic2VsZiIsImNsZWFyIiwiY3JlYXRlRWxlbWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsInNyY0VsZW1lbnQiLCJzZXRBY3RpdmVQZXJpb2QiLCJkcmF3QnV0dG9ucyIsImFwcGVuZENoaWxkIiwicmVxdWlyZSIsIngiLCJ5IiwiZ3JhcGhpY3MiLCJjaGFydCIsImV4dERhdGEiLCJkYXRlRm9ybWF0dGVyIiwiU3RhbmRhcmRQZXJpb2QiXSwibWFwcGluZ3MiOiJDQUFTLFNBQVVBLEdDSW5CLFFBQUFDLEdBQUFDLEdBR0EsR0FBQUMsRUFBQUQsR0FDQSxNQUFBQyxHQUFBRCxHQUFBRSxPQUdBLElBQUFDLEdBQUFGLEVBQUFELElBQ0FFLFdBQ0FFLEdBQUFKLEVBQ0FLLFFBQUEsRUFVQSxPQU5BUCxHQUFBRSxHQUFBTSxLQUFBSCxFQUFBRCxRQUFBQyxJQUFBRCxRQUFBSCxHQUdBSSxFQUFBRSxRQUFBLEVBR0FGLEVBQUFELFFBdkJBLEdBQUFELEtBcUNBLE9BVEFGLEdBQUFRLEVBQUFULEVBR0FDLEVBQUFTLEVBQUFQLEVBR0FGLEVBQUFVLEVBQUEsR0FHQVYsRUFBQSxLRE1NLFNBQVNJLEVBQVFELEVBQVNILEdFNUNoQyxZQUNBLElBQU1XLEdBQXlCWCxFQUFRLEVBRXZDWSxRQUFPQyxLQUFPLEdBQUlGLEdBQ2xCQyxPQUFPRSxjQUNMQyxLQUFRLFNBQ1JDLGFBQWdCLElBQ2hCQyxjQUFpQixFQUNqQkMsYUFBZ0IsTUFDaEJDLFlBQWUsU0FD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QUNMYSxNQUFPLFNHNUhKK0IsR0FDSkEsRUFBUSxTQUFVLFNBQVUsV0FBWSxRQUFTLGdCQUFpQixnQkFDaEUsU0FBVUMsRUFBR0MsRUFBR0MsRUFBVUMsRUFBT0MsRUFBU0MsU0g4SDNDbEQsSUFBSyxnQkFDTGEsTUFBTyxlQUVQYixJQUFLLE9BQ0xhLE1BQU8sZUFJUGIsSUFBSyxVQUNMYSxNQUFPLGdCQUdGeEMsSUc1SFksb0JBQVhQLElBQW9ELG1CQUFuQkEsR0FBT0QsUUFDakRDLEVBQU9ELFFBQVVRLEVBRWpCQyxPQUFPNkUsZUFBaUI5RSIsImZpbGUiOiJzdGFuZGFyZC1wZXJpb2Qtc2VsZWN0b3ItZXM1Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKioqKiovIChmdW5jdGlvbihtb2R1bGVzKSB7IC8vIHdlYnBhY2tCb290c3RyYXBcbi8qKioqKiovIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbi8qKioqKiovIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbi8qKioqKiovIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbi8qKioqKiovIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuLyoqKioqKi8gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbi8qKioqKiovIFx0XHRcdGV4cG9ydHM6IHt9LFxuLyoqKioqKi8gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuLyoqKioqKi8gXHRcdFx0bG9hZGVkOiBmYWxzZVxuLyoqKioqKi8gXHRcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuLyoqKioqKi8gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4vKioqKioqLyBcdFx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4vKioqKioqLyBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuLyoqKioqKi8gXHR9XG4vKioqKioqL1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vKioqKioqLyBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuLyoqKioqKi8gfSlcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqKioqLyAoW1xuLyogMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIFN0YW5kYXJkUGVyaW9kU2VsZWN0b3IgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXHRcblx0d2luZG93LnN0UFMgPSBuZXcgU3RhbmRhcmRQZXJpb2RTZWxlY3RvcigpO1xuXHR3aW5kb3cudGltZVBlcmlvZHMgPSBbe1xuXHQgICduYW1lJzogJ21pbnV0ZScsXG5cdCAgJ21pbGxpc2Vjb25kcyc6IDYwMDAwLFxuXHQgICdzdGFydGluZ1BvaW50JzogMCxcblx0ICAnYWJicmV2aWF0aW9uJzogJ21pbicsXG5cdCAgJ2Rlc2NyaXB0aW9uJzogJ01JTlVURScsXG5cdCAgJ3BhcmVudCc6ICdob3VyJyxcblx0ICAnbXVsdGlwbGllcnMnOiBbMSwgMTUsIDMwXVxuXHR9LCB7XG5cdCAgJ25hbWUnOiAnaG91cicsXG5cdCAgJ21pbGxpc2Vjb25kcyc6IDM2MDAwMDAsXG5cdCAgJ3N0YXJ0aW5nUG9pbnQnOiAwLFxuXHQgICdhYmJyZXZpYXRpb24nOiAnaHInLFxuXHQgICdkZXNjcmlwdGlvbic6ICdIT1VSJyxcblx0ICAncGFyZW50JzogJ2RheScsXG5cdCAgJ211bHRpcGxpZXJzJzogWzEsIDMsIDYsIDEyXVxuXHR9LCB7XG5cdCAgJ25hbWUnOiAnZGF5Jyxcblx0ICAnbWlsbGlzZWNvbmRzJzogODY0MDAwMDAsXG5cdCAgJ3N0YXJ0aW5nUG9pbnQnOiAwLFxuXHQgICdhYmJyZXZpYXRpb24nOiAnRCcsXG5cdCAgJ2Rlc2NyaXB0aW9uJzogJ0RBWScsXG5cdCAgJ3BhcmVudCc6ICdtb250aCcsXG5cdCAgJ211bHRpcGxpZXJzJzogWzEsIDcsIDE1XVxuXHR9LCB7XG5cdCAgJ25hbWUnOiAnbW9udGgnLFxuXHQgICdtaWxsaXNlY29uZHMnOiAyNTkyMDAwMDAwLFxuXHQgICdzdGFydGluZ1BvaW50JzogMCxcblx0ICAnYWJicmV2aWF0aW9uJzogJ00nLFxuXHQgICdkZXNjcmlwdGlvbic6ICdNT05USCcsXG5cdCAgJ3BhcmVudCc6ICd5ZWFyJyxcblx0ICAnbXVsdGlwbGllcnMnOiBbMSwgMywgNl1cblx0fSwge1xuXHQgICduYW1lJzogJ3llYXInLFxuXHQgICdtaWxsaXNlY29uZHMnOiAzMTEwNDAwMDAwMCxcblx0ICAnc3RhcnRpbmdQb2ludCc6IDAsXG5cdCAgJ2FiYnJldmlhdGlvbic6ICdZJyxcblx0ICAnZGVzY3JpcHRpb24nOiAnWUVBUicsXG5cdCAgJ211bHRpcGxpZXJzJzogWzEsIDMsIDVdXG5cdH1dO1xuXHRcblx0Ly8gdmFyIGZjID0gbmV3IEZ1c2lvbkNoYXJ0cygpO1xuXHRcblx0LyogRnVzaW9uQ2hhcnRzLnJlZ2lzdGVyKCdleHRlbnNpb24nLCBbJ3N0YW5kYXJkLXBlcmlvZC1zZWxlY3RvcicsIGZ1bmN0aW9uIChpZCkge1xuXHQgIHZhciBnbG9iYWwgPSB0aGlzO1xuXHQgIHZhciBleHRBUEkgPSBnbG9iYWwuZXh0QVBJO1xuXG5cdCAgLy8gdmFyIG90aGVyQVBJID0gRnVzaW9uQ2hhcnRzLmdldEV4dENvbXBvbmVudChpZCwgJ2FwaScsICdsZWdhY3lleHRhcGknKTtcblx0ICAvLyB2YXIgdG9vbEJveEFwaSA9IEZ1c2lvbkNoYXJ0cy5nZXRDb21wb25lbnQoJ2FwaScsICd0b29sYm94Jyk7XG5cblx0ICB3aW5kb3cuc3RQUyA9IG5ldyBTdGFuZGFyZFBlcmlvZFNlbGVjdG9yKCk7XG5cdCAgZXh0QVBJKHdpbmRvdy5zdFBTKTtcblx0fV0pOyAqL1xuXG4vKioqLyB9LFxuLyogMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cdFxuXHR2YXIgU3RhbmRhcmRQZXJpb2RTZWxlY3RvciA9IGZ1bmN0aW9uICgpIHtcblx0ICBmdW5jdGlvbiBTdGFuZGFyZFBlcmlvZFNlbGVjdG9yKCkge1xuXHQgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFN0YW5kYXJkUGVyaW9kU2VsZWN0b3IpO1xuXHRcblx0ICAgIHRoaXMuYWxsID0gMTtcblx0ICAgIHRoaXMuY2FsY3VsYXRlZFBlcmlvZHMgPSBbXTtcblx0ICAgIHRoaXMuc3RhcnREYXRhc2V0ID0gMDtcblx0ICAgIHRoaXMuZW5kRGF0YXNldCA9IDc5OTk5OTk5OTk5OTk7XG5cdCAgICB0aGlzLnN0YXJ0QWN0aXZlV2luZG93ID0gNTUwMDAwMDA7XG5cdCAgICB0aGlzLmVuZEFjdGl2ZVdpbmRvdyA9IDYwMDAwMDAwO1xuXHQgICAgdGhpcy5zdGFuZGFyZFBlcmlvZHMgPSBbXTtcblx0ICAgIHRoaXMuY29uZmlnID0ge307XG5cdCAgfVxuXHRcblx0ICBfY3JlYXRlQ2xhc3MoU3RhbmRhcmRQZXJpb2RTZWxlY3RvciwgW3tcblx0ICAgIGtleTogJ2NhbGN1bGF0ZUFwcGxpY2FibGVVbml0UGVyaW9kcycsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gY2FsY3VsYXRlQXBwbGljYWJsZVVuaXRQZXJpb2RzKCkge1xuXHQgICAgICB2YXIgdGFyZ2V0QmxvY2sgPSB0aGlzLmVuZEFjdGl2ZVdpbmRvdyAtIHRoaXMuc3RhcnREYXRhc2V0O1xuXHQgICAgICB2YXIgYXBwbGljYWJsZVN0YW5kYXJkVW5pdFBlcmlvZCA9IFtdO1xuXHQgICAgICB2YXIgaSA9IDA7XG5cdCAgICAgIHZhciBqID0gMDtcblx0ICAgICAgLy8gdmFyIGNvdW50ZXIgPSAwO1xuXHQgICAgICB2YXIgYWN0aXZlV2luZG93ID0gdGhpcy5lbmRBY3RpdmVXaW5kb3cgLSB0aGlzLnN0YXJ0QWN0aXZlV2luZG93O1xuXHQgICAgICAvLyBjb3VudGVyID0gLTE7XG5cdCAgICAgIC8vIHRoaXMuc3RhbmRhcmRQZXJpb2RzID0gW107XG5cdCAgICAgIGNvbnNvbGUubG9nKCdhY3RpdmVXaW5kb3cnLCBhY3RpdmVXaW5kb3cpO1xuXHQgICAgICBmb3IgKGkgPSAwOyBpIDwgd2luZG93LnRpbWVQZXJpb2RzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgLy8gY29uc29sZS5sb2coJ3dpbmRvdy50aW1lUGVyaW9kc1tpXS5taWxsaXNlY29uZHMnLCB3aW5kb3cudGltZVBlcmlvZHNbaV0ubWlsbGlzZWNvbmRzKTtcblx0ICAgICAgICAvLyBjb25zb2xlLmxvZyhNYXRoLnJvdW5kKChhY3RpdmVXaW5kb3cpIC8gd2luZG93LnRpbWVQZXJpb2RzW2ldLm1pbGxpc2Vjb25kcykpO1xuXHQgICAgICAgIC8vIGNvbnNvbGUubG9nKCd3aW5kb3cudGltZVBlcmlvZHNbaV0ubWlsbGlzZWNvbmRzJywgd2luZG93LnRpbWVQZXJpb2RzW2ldLm11bHRpcGxpZXJzKTtcblx0ICAgICAgICBpZiAodGFyZ2V0QmxvY2sgLyB3aW5kb3cudGltZVBlcmlvZHNbaV0ubWlsbGlzZWNvbmRzID49IDEpIHtcblx0ICAgICAgICAgIGNvbnNvbGUubG9nKHdpbmRvdy50aW1lUGVyaW9kc1tpXS5kZXNjcmlwdGlvbik7XG5cdCAgICAgICAgICBpZiAoTWF0aC5mbG9vcihhY3RpdmVXaW5kb3cgLyB3aW5kb3cudGltZVBlcmlvZHNbaV0ubWlsbGlzZWNvbmRzKSA8IDEpIHtcblx0ICAgICAgICAgICAgd2luZG93LnRpbWVQZXJpb2RzW2ldLmFwcGxpY2FibGVNdWx0aXBsaWVycyA9IHdpbmRvdy50aW1lUGVyaW9kc1tpXS5tdWx0aXBsaWVyc1swXTtcblx0ICAgICAgICAgICAgdGhpcy5zdGFuZGFyZFBlcmlvZHMucHVzaCh7ICdtdWx0aXBsaWVycyc6IFt3aW5kb3cudGltZVBlcmlvZHNbaV0ubXVsdGlwbGllcnNbMF1dLFxuXHQgICAgICAgICAgICAgICdtaWxsaXNlY29uZHMnOiB3aW5kb3cudGltZVBlcmlvZHNbaV0ubWlsbGlzZWNvbmRzLFxuXHQgICAgICAgICAgICAgICdhYmJyZXZpYXRpb24nOiB3aW5kb3cudGltZVBlcmlvZHNbaV0uYWJicmV2aWF0aW9uLFxuXHQgICAgICAgICAgICAgICdkZXNjcmlwdGlvbic6IHdpbmRvdy50aW1lUGVyaW9kc1tpXS5kZXNjcmlwdGlvbiB9KTtcblx0ICAgICAgICAgICAgLy8gY291bnRlcisrO1xuXHQgICAgICAgICAgICBjb25zb2xlLmxvZyh3aW5kb3cudGltZVBlcmlvZHNbaV0ubXVsdGlwbGllcnNbMF0gKyB3aW5kb3cudGltZVBlcmlvZHNbaV0uYWJicmV2aWF0aW9uKTtcblx0ICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIGZvciAoaiA9IDA7IGogPCB3aW5kb3cudGltZVBlcmlvZHNbaV0ubXVsdGlwbGllcnMubGVuZ3RoOyBqKyspIHtcblx0ICAgICAgICAgICAgICBpZiAoYWN0aXZlV2luZG93IC8gNSA8IHdpbmRvdy50aW1lUGVyaW9kc1tpXS5tdWx0aXBsaWVyc1tqXSAqIHdpbmRvdy50aW1lUGVyaW9kc1tpXS5taWxsaXNlY29uZHMpIHtcblx0ICAgICAgICAgICAgICAgIGlmICh3aW5kb3cudGltZVBlcmlvZHNbaV0uYXBwbGljYWJsZU11bHRpcGxpZXJzID09PSB1bmRlZmluZWQpIHtcblx0ICAgICAgICAgICAgICAgICAgd2luZG93LnRpbWVQZXJpb2RzW2ldLmFwcGxpY2FibGVNdWx0aXBsaWVycyA9IFtdO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgaWYgKHRoaXMuc3RhbmRhcmRQZXJpb2RzW3RoaXMuc3RhbmRhcmRQZXJpb2RzLmxlbmd0aCAtIDFdID09PSB1bmRlZmluZWQpIHtcblx0ICAgICAgICAgICAgICAgICAgdGhpcy5zdGFuZGFyZFBlcmlvZHMucHVzaCh7ICdtdWx0aXBsaWVycyc6IFtdLFxuXHQgICAgICAgICAgICAgICAgICAgICdtaWxsaXNlY29uZHMnOiB3aW5kb3cudGltZVBlcmlvZHNbaV0ubWlsbGlzZWNvbmRzLFxuXHQgICAgICAgICAgICAgICAgICAgICdhYmJyZXZpYXRpb24nOiB3aW5kb3cudGltZVBlcmlvZHNbaV0uYWJicmV2aWF0aW9uLFxuXHQgICAgICAgICAgICAgICAgICAgICdkZXNjcmlwdGlvbic6IHdpbmRvdy50aW1lUGVyaW9kc1tpXS5kZXNjcmlwdGlvbiB9KTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIHRoaXMuc3RhbmRhcmRQZXJpb2RzW3RoaXMuc3RhbmRhcmRQZXJpb2RzLmxlbmd0aCAtIDFdLm11bHRpcGxpZXJzLnB1c2god2luZG93LnRpbWVQZXJpb2RzW2ldLm11bHRpcGxpZXJzW2pdKTtcblx0ICAgICAgICAgICAgICAgIC8vIHRoaXMuc3RhbmRhcmRQZXJpb2RzW3RoaXMuc3RhbmRhcmRQZXJpb2RzLmxlbmd0aCAtIDFdXG5cdCAgICAgICAgICAgICAgICAvLyAgIC5hYmJyZXZpYXRpb24gPSB3aW5kb3cudGltZVBlcmlvZHNbaV0uYWJicmV2aWF0aW9uO1xuXHQgICAgICAgICAgICAgICAgLy8gdGhpcy5zdGFuZGFyZFBlcmlvZHNbdGhpcy5zdGFuZGFyZFBlcmlvZHMubGVuZ3RoIC0gMV1cblx0ICAgICAgICAgICAgICAgIC8vICAgLm1pbGxpc2Vjb25kcyA9IHdpbmRvdy50aW1lUGVyaW9kc1tpXS5taWxsaXNlY29uZHM7XG5cdCAgICAgICAgICAgICAgICAvLyB3aW5kb3cudGltZVBlcmlvZHNbaV0uYXBwbGljYWJsZU11bHRpcGxpZXJzLnB1c2god2luZG93LnRpbWVQZXJpb2RzW2ldLm11bHRpcGxpZXJzW2pdKTtcblx0ICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHdpbmRvdy50aW1lUGVyaW9kc1tpXS5tdWx0aXBsaWVyc1tqXSArIHdpbmRvdy50aW1lUGVyaW9kc1tpXS5hYmJyZXZpYXRpb24pO1xuXHQgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgYXBwbGljYWJsZVN0YW5kYXJkVW5pdFBlcmlvZC5wdXNoKHdpbmRvdy50aW1lUGVyaW9kc1tpXSk7XG5cdCAgICAgICAgICBjb25zb2xlLmxvZygnPT09PT09PT09PT09PT09PScpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gYXBwbGljYWJsZVN0YW5kYXJkVW5pdFBlcmlvZDtcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdjYWxjdWxhdGVBcHBsaWNhYmxlU3RhbmRhcmRQZXJpb2RzJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBjYWxjdWxhdGVBcHBsaWNhYmxlU3RhbmRhcmRQZXJpb2RzKCkge1xuXHQgICAgICB2YXIgYXBwbGljYWJsZVN0YW5kYXJkVW5pdFBlcmlvZCA9IHRoaXMuY2FsY3VsYXRlQXBwbGljYWJsZVN0YW5kYXJkUGVyaW9kcygpO1xuXHQgICAgICByZXR1cm4gYXBwbGljYWJsZVN0YW5kYXJkVW5pdFBlcmlvZDtcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdzZXRBY3RpdmVQZXJpb2QnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHNldEFjdGl2ZVBlcmlvZChzdGFydCwgZW5kKSB7XG5cdCAgICAgIGNvbnNvbGUubG9nKHN0YXJ0LCBlbmQpO1xuXHQgICAgICB0aGlzLnN0YXJ0QWN0aXZlV2luZG93ID0gc3RhcnQ7XG5cdCAgICAgIHRoaXMuZW5kQWN0aXZlV2luZG93ID0gZW5kO1xuXHQgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3RhcnRBY3RpdmVSYW5nZScpLmlubmVySFRNTCA9IHRoaXMuc3RhcnRBY3RpdmVXaW5kb3c7XG5cdCAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbmRBY3RpdmVSYW5nZScpLmlubmVySFRNTCA9IHRoaXMuZW5kQWN0aXZlV2luZG93O1xuXHQgICAgICB0aGlzLmNhbGN1bGF0ZUFwcGxpY2FibGVVbml0UGVyaW9kcygpO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ3NldEFjdGl2ZVBlcmlvZFN0YXJ0Jyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRBY3RpdmVQZXJpb2RTdGFydChzdGFydCkge1xuXHQgICAgICB0aGlzLnN0YXJ0QWN0aXZlV2luZG93ID0gdGhpcy5lbmRBY3RpdmVXaW5kb3cgLSBzdGFydDtcblx0ICAgICAgdGhpcy5jYWxjdWxhdGVBcHBsaWNhYmxlVW5pdFBlcmlvZHMoKTtcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdzZXRBY3RpdmVQZXJpb2RFbmQnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHNldEFjdGl2ZVBlcmlvZEVuZChlbmQpIHtcblx0ICAgICAgdGhpcy5lbmRBY3RpdmVXaW5kb3cgPSB0aGlzLnN0YXJ0QWN0aXZlV2luZG93ICsgZW5kO1xuXHQgICAgICB0aGlzLmNhbGN1bGF0ZUFwcGxpY2FibGVVbml0UGVyaW9kcygpO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ2RyYXdCdXR0b25zJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBkcmF3QnV0dG9ucygpIHtcblx0ICAgICAgdmFyIGNhbGN1bGF0ZWRCdXR0b25zID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhbGN1bGF0ZWQnKTtcblx0ICAgICAgdmFyIGJ0bjtcblx0ICAgICAgdmFyIGkgPSAwO1xuXHQgICAgICB2YXIgaiA9IDA7XG5cdCAgICAgIHZhciBtdWx0aXBsaWVyVmFsdWUgPSAwO1xuXHQgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgICAgIGNhbGN1bGF0ZWRCdXR0b25zLmlubmVySFRNTCA9ICcnO1xuXHQgICAgICBjb25zb2xlLmNsZWFyKCk7XG5cdCAgICAgIGZvciAoaSA9IHRoaXMuc3RhbmRhcmRQZXJpb2RzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG5cdCAgICAgICAgZm9yIChqID0gdGhpcy5zdGFuZGFyZFBlcmlvZHNbaV0ubXVsdGlwbGllcnMubGVuZ3RoIC0gMTsgaiA+PSAwOyBqLS0pIHtcblx0ICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuc3RhbmRhcmRQZXJpb2RzW2ldLm11bHRpcGxpZXJzW2pdICsgdGhpcy5zdGFuZGFyZFBlcmlvZHNbaV0uYWJicmV2aWF0aW9uKTtcblx0ICAgICAgICAgIGJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ0JVVFRPTicpO1xuXHQgICAgICAgICAgYnRuLmlkID0gdGhpcy5zdGFuZGFyZFBlcmlvZHNbaV0ubXVsdGlwbGllcnNbal0gKyB0aGlzLnN0YW5kYXJkUGVyaW9kc1tpXS5hYmJyZXZpYXRpb247XG5cdCAgICAgICAgICBidG4uaW5uZXJIVE1MID0gdGhpcy5zdGFuZGFyZFBlcmlvZHNbaV0ubXVsdGlwbGllcnNbal0gKyB0aGlzLnN0YW5kYXJkUGVyaW9kc1tpXS5hYmJyZXZpYXRpb247XG5cdCAgICAgICAgICBtdWx0aXBsaWVyVmFsdWUgPSBzZWxmLnN0YW5kYXJkUGVyaW9kc1tpXS5tdWx0aXBsaWVyc1tqXSAqIHRoaXMuc3RhbmRhcmRQZXJpb2RzW2ldLm1pbGxpc2Vjb25kcztcblx0ICAgICAgICAgIGJ0bi5tdWx0aXBsaWVyVmFsdWUgPSBtdWx0aXBsaWVyVmFsdWU7XG5cdCAgICAgICAgICBjb25zb2xlLmxvZyhtdWx0aXBsaWVyVmFsdWUpO1xuXHQgICAgICAgICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7XG5cdCAgICAgICAgICAgIGNvbnNvbGUubG9nKGV2ZW50LnNyY0VsZW1lbnQubXVsdGlwbGllclZhbHVlKTtcblx0ICAgICAgICAgICAgc2VsZi5zZXRBY3RpdmVQZXJpb2Qoc2VsZi5lbmRBY3RpdmVXaW5kb3cgLSBldmVudC5zcmNFbGVtZW50Lm11bHRpcGxpZXJWYWx1ZSwgc2VsZi5lbmRBY3RpdmVXaW5kb3cpO1xuXHQgICAgICAgICAgICBzZWxmLmRyYXdCdXR0b25zKCk7XG5cdCAgICAgICAgICB9KTtcblx0ICAgICAgICAgIGNhbGN1bGF0ZWRCdXR0b25zLmFwcGVuZENoaWxkKGJ0bik7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIHRoaXMuc3RhbmRhcmRQZXJpb2RzID0gW107XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnc2V0Q2hhcnRSYW5nZU9iQnV0dG9uQ2xpY2snLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHNldENoYXJ0UmFuZ2VPYkJ1dHRvbkNsaWNrKCkge31cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdjb25maWd1cmUnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGNvbmZpZ3VyZShjb25maWcpIHtcblx0ICAgICAgdGhpcy5jb25maWcgPSBjb25maWc7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnaW5pdCcsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdChyZXF1aXJlKSB7XG5cdCAgICAgIHJlcXVpcmUoJ1gtQXhpcycsICdZLUF4aXMnLCAnZ3JhcGhpY3MnLCAnY2hhcnQnLCAnZXh0ZW5zaW9uRGF0YScsICdkYXRlRm9ybWF0dGVyJywgZnVuY3Rpb24gKHgsIHksIGdyYXBoaWNzLCBjaGFydCwgZXh0RGF0YSwgZGF0ZUZvcm1hdHRlcikge30pO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ3BsYWNlSW5DYW52YXMnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHBsYWNlSW5DYW52YXMoKSB7fVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ2RyYXcnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGRyYXcoKSB7XG5cdCAgICAgIC8vIGRyYXdpbmcgb2YgdGhlIHN0YW5kYXJkIHRpbWUgcGVyaW9kcyBoYXBwZW5zIGhlcmVcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdkaXNwb3NlJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBkaXNwb3NlKCkge31cblx0ICB9XSk7XG5cdFxuXHQgIHJldHVybiBTdGFuZGFyZFBlcmlvZFNlbGVjdG9yO1xuXHR9KCk7XG5cdFxuXHRpZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIG1vZHVsZS5leHBvcnRzICE9PSAndW5kZWZpbmVkJykge1xuXHQgIG1vZHVsZS5leHBvcnRzID0gU3RhbmRhcmRQZXJpb2RTZWxlY3Rvcjtcblx0fSBlbHNlIHtcblx0ICB3aW5kb3cuU3RhbmRhcmRQZXJpb2QgPSBTdGFuZGFyZFBlcmlvZFNlbGVjdG9yO1xuXHR9XG5cbi8qKiovIH1cbi8qKioqKiovIF0pO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBzdGFuZGFyZC1wZXJpb2Qtc2VsZWN0b3ItZXM1Lm1pbi5qcyIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuXG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRleHBvcnRzOiB7fSxcbiBcdFx0XHRpZDogbW9kdWxlSWQsXG4gXHRcdFx0bG9hZGVkOiBmYWxzZVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2svYm9vdHN0cmFwIDYzZjI4NDQxOGViNTBhMjk4YTdhIiwiJ3VzZSBzdHJpY3QnO1xuY29uc3QgU3RhbmRhcmRQZXJpb2RTZWxlY3RvciA9IHJlcXVpcmUoJy4vc3RhbmRhcmQtcGVyaW9kLXNlbGVjdG9yJyk7XG5cbndpbmRvdy5zdFBTID0gbmV3IFN0YW5kYXJkUGVyaW9kU2VsZWN0b3IoKTtcbndpbmRvdy50aW1lUGVyaW9kcyA9IFt7XG4gICduYW1lJzogJ21pbnV0ZScsXG4gICdtaWxsaXNlY29uZHMnOiA2MDAwMCxcbiAgJ3N0YXJ0aW5nUG9pbnQnOiAwLFxuICAnYWJicmV2aWF0aW9uJzogJ21pbicsXG4gICdkZXNjcmlwdGlvbic6ICdNSU5VVEUnLFxuICAncGFyZW50JzogJ2hvdXInLFxuICAnbXVsdGlwbGllcnMnOiBbMSwgMTUsIDMwXVxufSwge1xuICAnbmFtZSc6ICdob3VyJyxcbiAgJ21pbGxpc2Vjb25kcyc6IDM2MDAwMDAsXG4gICdzdGFydGluZ1BvaW50JzogMCxcbiAgJ2FiYnJldmlhdGlvbic6ICdocicsXG4gICdkZXNjcmlwdGlvbic6ICdIT1VSJyxcbiAgJ3BhcmVudCc6ICdkYXknLFxuICAnbXVsdGlwbGllcnMnOiBbMSwgMywgNiwgMTJdXG59LCB7XG4gICduYW1lJzogJ2RheScsXG4gICdtaWxsaXNlY29uZHMnOiA4NjQwMDAwMCxcbiAgJ3N0YXJ0aW5nUG9pbnQnOiAwLFxuICAnYWJicmV2aWF0aW9uJzogJ0QnLFxuICAnZGVzY3JpcHRpb24nOiAnREFZJyxcbiAgJ3BhcmVudCc6ICdtb250aCcsXG4gICdtdWx0aXBsaWVycyc6IFsxLCA3LCAxNV1cbn0sIHtcbiAgJ25hbWUnOiAnbW9udGgnLFxuICAnbWlsbGlzZWNvbmRzJzogMjU5MjAwMDAwMCxcbiAgJ3N0YXJ0aW5nUG9pbnQnOiAwLFxuICAnYWJicmV2aWF0aW9uJzogJ00nLFxuICAnZGVzY3JpcHRpb24nOiAnTU9OVEgnLFxuICAncGFyZW50JzogJ3llYXInLFxuICAnbXVsdGlwbGllcnMnOiBbMSwgMywgNl1cbn0sIHtcbiAgJ25hbWUnOiAneWVhcicsXG4gICdtaWxsaXNlY29uZHMnOiAzMTEwNDAwMDAwMCxcbiAgJ3N0YXJ0aW5nUG9pbnQnOiAwLFxuICAnYWJicmV2aWF0aW9uJzogJ1knLFxuICAnZGVzY3JpcHRpb24nOiAnWUVBUicsXG4gICdtdWx0aXBsaWVycyc6IFsxLCAzLCA1XVxufV07XG5cbi8vIHZhciBmYyA9IG5ldyBGdXNpb25DaGFydHMoKTtcblxuLyogRnVzaW9uQ2hhcnRzLnJlZ2lzdGVyKCdleHRlbnNpb24nLCBbJ3N0YW5kYXJkLXBlcmlvZC1zZWxlY3RvcicsIGZ1bmN0aW9uIChpZCkge1xuICB2YXIgZ2xvYmFsID0gdGhpcztcbiAgdmFyIGV4dEFQSSA9IGdsb2JhbC5leHRBUEk7XG5cbiAgLy8gdmFyIG90aGVyQVBJID0gRnVzaW9uQ2hhcnRzLmdldEV4dENvbXBvbmVudChpZCwgJ2FwaScsICdsZWdhY3lleHRhcGknKTtcbiAgLy8gdmFyIHRvb2xCb3hBcGkgPSBGdXNpb25DaGFydHMuZ2V0Q29tcG9uZW50KCdhcGknLCAndG9vbGJveCcpO1xuXG4gIHdpbmRvdy5zdFBTID0gbmV3IFN0YW5kYXJkUGVyaW9kU2VsZWN0b3IoKTtcbiAgZXh0QVBJKHdpbmRvdy5zdFBTKTtcbn1dKTsgKi9cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9pbmRleC5qcyIsIid1c2Ugc3RyaWN0JztcblxuY2xhc3MgU3RhbmRhcmRQZXJpb2RTZWxlY3RvciB7XG4gIGNvbnN0cnVjdG9yICgpIHtcbiAgICB0aGlzLmFsbCA9IDE7XG4gICAgdGhpcy5jYWxjdWxhdGVkUGVyaW9kcyA9IFtdO1xuICAgIHRoaXMuc3RhcnREYXRhc2V0ID0gMDtcbiAgICB0aGlzLmVuZERhdGFzZXQgPSA3OTk5OTk5OTk5OTk5O1xuICAgIHRoaXMuc3RhcnRBY3RpdmVXaW5kb3cgPSA1NTAwMDAwMDtcbiAgICB0aGlzLmVuZEFjdGl2ZVdpbmRvdyA9IDYwMDAwMDAwO1xuICAgIHRoaXMuc3RhbmRhcmRQZXJpb2RzID0gW107XG4gICAgdGhpcy5jb25maWcgPSB7fTtcbiAgfVxuXG4gIGNhbGN1bGF0ZUFwcGxpY2FibGVVbml0UGVyaW9kcyAoKSB7XG4gICAgdmFyIHRhcmdldEJsb2NrID0gdGhpcy5lbmRBY3RpdmVXaW5kb3cgLSB0aGlzLnN0YXJ0RGF0YXNldDtcbiAgICB2YXIgYXBwbGljYWJsZVN0YW5kYXJkVW5pdFBlcmlvZCA9IFtdO1xuICAgIHZhciBpID0gMDtcbiAgICB2YXIgaiA9IDA7XG4gICAgLy8gdmFyIGNvdW50ZXIgPSAwO1xuICAgIHZhciBhY3RpdmVXaW5kb3cgPSB0aGlzLmVuZEFjdGl2ZVdpbmRvdyAtIHRoaXMuc3RhcnRBY3RpdmVXaW5kb3c7XG4gICAgLy8gY291bnRlciA9IC0xO1xuICAgIC8vIHRoaXMuc3RhbmRhcmRQZXJpb2RzID0gW107XG4gICAgY29uc29sZS5sb2coJ2FjdGl2ZVdpbmRvdycsIGFjdGl2ZVdpbmRvdyk7XG4gICAgZm9yIChpID0gMDsgaSA8IHdpbmRvdy50aW1lUGVyaW9kcy5sZW5ndGg7IGkrKykge1xuICAgICAgLy8gY29uc29sZS5sb2coJ3dpbmRvdy50aW1lUGVyaW9kc1tpXS5taWxsaXNlY29uZHMnLCB3aW5kb3cudGltZVBlcmlvZHNbaV0ubWlsbGlzZWNvbmRzKTtcbiAgICAgIC8vIGNvbnNvbGUubG9nKE1hdGgucm91bmQoKGFjdGl2ZVdpbmRvdykgLyB3aW5kb3cudGltZVBlcmlvZHNbaV0ubWlsbGlzZWNvbmRzKSk7XG4gICAgICAvLyBjb25zb2xlLmxvZygnd2luZG93LnRpbWVQZXJpb2RzW2ldLm1pbGxpc2Vjb25kcycsIHdpbmRvdy50aW1lUGVyaW9kc1tpXS5tdWx0aXBsaWVycyk7XG4gICAgICBpZiAodGFyZ2V0QmxvY2sgLyB3aW5kb3cudGltZVBlcmlvZHNbaV0ubWlsbGlzZWNvbmRzID49IDEpIHtcbiAgICAgICAgY29uc29sZS5sb2cod2luZG93LnRpbWVQZXJpb2RzW2ldLmRlc2NyaXB0aW9uKTtcbiAgICAgICAgaWYgKE1hdGguZmxvb3IoKGFjdGl2ZVdpbmRvdykgLyB3aW5kb3cudGltZVBlcmlvZHNbaV0ubWlsbGlzZWNvbmRzKSA8IDEpIHtcbiAgICAgICAgICB3aW5kb3cudGltZVBlcmlvZHNbaV0uYXBwbGljYWJsZU11bHRpcGxpZXJzID0gd2luZG93LnRpbWVQZXJpb2RzW2ldLm11bHRpcGxpZXJzWzBdO1xuICAgICAgICAgIHRoaXMuc3RhbmRhcmRQZXJpb2RzLnB1c2goeyAnbXVsdGlwbGllcnMnOiBbd2luZG93LnRpbWVQZXJpb2RzW2ldLm11bHRpcGxpZXJzWzBdXSxcbiAgICAgICAgICAgICdtaWxsaXNlY29uZHMnOiB3aW5kb3cudGltZVBlcmlvZHNbaV0ubWlsbGlzZWNvbmRzLFxuICAgICAgICAgICAgJ2FiYnJldmlhdGlvbic6IHdpbmRvdy50aW1lUGVyaW9kc1tpXS5hYmJyZXZpYXRpb24sXG4gICAgICAgICAgICAnZGVzY3JpcHRpb24nOiB3aW5kb3cudGltZVBlcmlvZHNbaV0uZGVzY3JpcHRpb259KTtcbiAgICAgICAgICAvLyBjb3VudGVyKys7XG4gICAgICAgICAgY29uc29sZS5sb2cod2luZG93LnRpbWVQZXJpb2RzW2ldLm11bHRpcGxpZXJzWzBdICsgd2luZG93LnRpbWVQZXJpb2RzW2ldLmFiYnJldmlhdGlvbik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZm9yIChqID0gMDsgaiA8IHdpbmRvdy50aW1lUGVyaW9kc1tpXS5tdWx0aXBsaWVycy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgaWYgKGFjdGl2ZVdpbmRvdyAvIDUgPCB3aW5kb3cudGltZVBlcmlvZHNbaV0ubXVsdGlwbGllcnNbal0gKiB3aW5kb3cudGltZVBlcmlvZHNbaV0ubWlsbGlzZWNvbmRzKSB7XG4gICAgICAgICAgICAgIGlmICh3aW5kb3cudGltZVBlcmlvZHNbaV0uYXBwbGljYWJsZU11bHRpcGxpZXJzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB3aW5kb3cudGltZVBlcmlvZHNbaV0uYXBwbGljYWJsZU11bHRpcGxpZXJzID0gW107XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYgKHRoaXMuc3RhbmRhcmRQZXJpb2RzW3RoaXMuc3RhbmRhcmRQZXJpb2RzLmxlbmd0aCAtIDFdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YW5kYXJkUGVyaW9kcy5wdXNoKHsgJ211bHRpcGxpZXJzJzogW10sXG4gICAgICAgICAgICAgICAgICAnbWlsbGlzZWNvbmRzJzogd2luZG93LnRpbWVQZXJpb2RzW2ldLm1pbGxpc2Vjb25kcyxcbiAgICAgICAgICAgICAgICAgICdhYmJyZXZpYXRpb24nOiB3aW5kb3cudGltZVBlcmlvZHNbaV0uYWJicmV2aWF0aW9uLFxuICAgICAgICAgICAgICAgICAgJ2Rlc2NyaXB0aW9uJzogd2luZG93LnRpbWVQZXJpb2RzW2ldLmRlc2NyaXB0aW9ufSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgdGhpcy5zdGFuZGFyZFBlcmlvZHNbdGhpcy5zdGFuZGFyZFBlcmlvZHMubGVuZ3RoIC0gMV1cbiAgICAgICAgICAgICAgICAubXVsdGlwbGllcnMucHVzaCh3aW5kb3cudGltZVBlcmlvZHNbaV0ubXVsdGlwbGllcnNbal0pO1xuICAgICAgICAgICAgICAvLyB0aGlzLnN0YW5kYXJkUGVyaW9kc1t0aGlzLnN0YW5kYXJkUGVyaW9kcy5sZW5ndGggLSAxXVxuICAgICAgICAgICAgICAvLyAgIC5hYmJyZXZpYXRpb24gPSB3aW5kb3cudGltZVBlcmlvZHNbaV0uYWJicmV2aWF0aW9uO1xuICAgICAgICAgICAgICAvLyB0aGlzLnN0YW5kYXJkUGVyaW9kc1t0aGlzLnN0YW5kYXJkUGVyaW9kcy5sZW5ndGggLSAxXVxuICAgICAgICAgICAgICAvLyAgIC5taWxsaXNlY29uZHMgPSB3aW5kb3cudGltZVBlcmlvZHNbaV0ubWlsbGlzZWNvbmRzO1xuICAgICAgICAgICAgICAvLyB3aW5kb3cudGltZVBlcmlvZHNbaV0uYXBwbGljYWJsZU11bHRpcGxpZXJzLnB1c2god2luZG93LnRpbWVQZXJpb2RzW2ldLm11bHRpcGxpZXJzW2pdKTtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2cod2luZG93LnRpbWVQZXJpb2RzW2ldLm11bHRpcGxpZXJzW2pdICsgd2luZG93LnRpbWVQZXJpb2RzW2ldLmFiYnJldmlhdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGFwcGxpY2FibGVTdGFuZGFyZFVuaXRQZXJpb2QucHVzaCh3aW5kb3cudGltZVBlcmlvZHNbaV0pO1xuICAgICAgICBjb25zb2xlLmxvZygnPT09PT09PT09PT09PT09PScpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gYXBwbGljYWJsZVN0YW5kYXJkVW5pdFBlcmlvZDtcbiAgfVxuXG4gIGNhbGN1bGF0ZUFwcGxpY2FibGVTdGFuZGFyZFBlcmlvZHMgKCkge1xuICAgIHZhciBhcHBsaWNhYmxlU3RhbmRhcmRVbml0UGVyaW9kID0gdGhpcy5jYWxjdWxhdGVBcHBsaWNhYmxlU3RhbmRhcmRQZXJpb2RzKCk7XG4gICAgcmV0dXJuIGFwcGxpY2FibGVTdGFuZGFyZFVuaXRQZXJpb2Q7XG4gIH1cblxuICBzZXRBY3RpdmVQZXJpb2QgKHN0YXJ0LCBlbmQpIHtcbiAgICBjb25zb2xlLmxvZyhzdGFydCwgZW5kKTtcbiAgICB0aGlzLnN0YXJ0QWN0aXZlV2luZG93ID0gc3RhcnQ7XG4gICAgdGhpcy5lbmRBY3RpdmVXaW5kb3cgPSBlbmQ7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0YXJ0QWN0aXZlUmFuZ2UnKS5pbm5lckhUTUwgPSB0aGlzLnN0YXJ0QWN0aXZlV2luZG93O1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbmRBY3RpdmVSYW5nZScpLmlubmVySFRNTCA9IHRoaXMuZW5kQWN0aXZlV2luZG93O1xuICAgIHRoaXMuY2FsY3VsYXRlQXBwbGljYWJsZVVuaXRQZXJpb2RzKCk7XG4gIH1cblxuICBzZXRBY3RpdmVQZXJpb2RTdGFydCAoc3RhcnQpIHtcbiAgICB0aGlzLnN0YXJ0QWN0aXZlV2luZG93ID0gdGhpcy5lbmRBY3RpdmVXaW5kb3cgLSBzdGFydDtcbiAgICB0aGlzLmNhbGN1bGF0ZUFwcGxpY2FibGVVbml0UGVyaW9kcygpO1xuICB9XG5cbiAgc2V0QWN0aXZlUGVyaW9kRW5kIChlbmQpIHtcbiAgICB0aGlzLmVuZEFjdGl2ZVdpbmRvdyA9IHRoaXMuc3RhcnRBY3RpdmVXaW5kb3cgKyBlbmQ7XG4gICAgdGhpcy5jYWxjdWxhdGVBcHBsaWNhYmxlVW5pdFBlcmlvZHMoKTtcbiAgfVxuXG4gIGRyYXdCdXR0b25zICgpIHtcbiAgICB2YXIgY2FsY3VsYXRlZEJ1dHRvbnMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FsY3VsYXRlZCcpO1xuICAgIHZhciBidG47XG4gICAgdmFyIGkgPSAwO1xuICAgIHZhciBqID0gMDtcbiAgICB2YXIgbXVsdGlwbGllclZhbHVlID0gMDtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgY2FsY3VsYXRlZEJ1dHRvbnMuaW5uZXJIVE1MID0gJyc7XG4gICAgY29uc29sZS5jbGVhcigpO1xuICAgIGZvciAoaSA9IHRoaXMuc3RhbmRhcmRQZXJpb2RzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICBmb3IgKGogPSB0aGlzLnN0YW5kYXJkUGVyaW9kc1tpXS5tdWx0aXBsaWVycy5sZW5ndGggLSAxOyBqID49IDA7IGotLSkge1xuICAgICAgICBjb25zb2xlLmxvZyh0aGlzLnN0YW5kYXJkUGVyaW9kc1tpXS5tdWx0aXBsaWVyc1tqXSArIHRoaXMuc3RhbmRhcmRQZXJpb2RzW2ldLmFiYnJldmlhdGlvbik7XG4gICAgICAgIGJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ0JVVFRPTicpO1xuICAgICAgICBidG4uaWQgPSB0aGlzLnN0YW5kYXJkUGVyaW9kc1tpXS5tdWx0aXBsaWVyc1tqXSArIHRoaXMuc3RhbmRhcmRQZXJpb2RzW2ldLmFiYnJldmlhdGlvbjtcbiAgICAgICAgYnRuLmlubmVySFRNTCA9IHRoaXMuc3RhbmRhcmRQZXJpb2RzW2ldLm11bHRpcGxpZXJzW2pdICsgdGhpcy5zdGFuZGFyZFBlcmlvZHNbaV0uYWJicmV2aWF0aW9uO1xuICAgICAgICBtdWx0aXBsaWVyVmFsdWUgPSBzZWxmLnN0YW5kYXJkUGVyaW9kc1tpXS5tdWx0aXBsaWVyc1tqXSAqIHRoaXMuc3RhbmRhcmRQZXJpb2RzW2ldLm1pbGxpc2Vjb25kcztcbiAgICAgICAgYnRuLm11bHRpcGxpZXJWYWx1ZSA9IG11bHRpcGxpZXJWYWx1ZTtcbiAgICAgICAgY29uc29sZS5sb2cobXVsdGlwbGllclZhbHVlKTtcbiAgICAgICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgY29uc29sZS5sb2coZXZlbnQuc3JjRWxlbWVudC5tdWx0aXBsaWVyVmFsdWUpO1xuICAgICAgICAgIHNlbGYuc2V0QWN0aXZlUGVyaW9kKHNlbGYuZW5kQWN0aXZlV2luZG93IC0gZXZlbnQuc3JjRWxlbWVudC5tdWx0aXBsaWVyVmFsdWUsIHNlbGYuZW5kQWN0aXZlV2luZG93KTtcbiAgICAgICAgICBzZWxmLmRyYXdCdXR0b25zKCk7XG4gICAgICAgIH0pO1xuICAgICAgICBjYWxjdWxhdGVkQnV0dG9ucy5hcHBlbmRDaGlsZChidG4pO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLnN0YW5kYXJkUGVyaW9kcyA9IFtdO1xuICB9XG5cbiAgc2V0Q2hhcnRSYW5nZU9iQnV0dG9uQ2xpY2sgKCkge31cblxuICBjb25maWd1cmUgKGNvbmZpZykge1xuICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuICB9XG5cbiAgaW5pdCAocmVxdWlyZSkge1xuICAgIHJlcXVpcmUoJ1gtQXhpcycsICdZLUF4aXMnLCAnZ3JhcGhpY3MnLCAnY2hhcnQnLCAnZXh0ZW5zaW9uRGF0YScsICdkYXRlRm9ybWF0dGVyJyxcbiAgICAgIGZ1bmN0aW9uICh4LCB5LCBncmFwaGljcywgY2hhcnQsIGV4dERhdGEsIGRhdGVGb3JtYXR0ZXIpIHtcblxuICAgICAgfSk7XG4gIH1cblxuICBwbGFjZUluQ2FudmFzICgpIHt9XG5cbiAgZHJhdyAoKSB7XG4gICAgLy8gZHJhd2luZyBvZiB0aGUgc3RhbmRhcmQgdGltZSBwZXJpb2RzIGhhcHBlbnMgaGVyZVxuICB9XG5cbiAgZGlzcG9zZSAoKSB7fVxufVxuXG5pZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIG1vZHVsZS5leHBvcnRzICE9PSAndW5kZWZpbmVkJykge1xuICBtb2R1bGUuZXhwb3J0cyA9IFN0YW5kYXJkUGVyaW9kU2VsZWN0b3I7XG59IGVsc2Uge1xuICB3aW5kb3cuU3RhbmRhcmRQZXJpb2QgPSBTdGFuZGFyZFBlcmlvZFNlbGVjdG9yO1xufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3N0YW5kYXJkLXBlcmlvZC1zZWxlY3Rvci5qcyJdLCJzb3VyY2VSb290IjoiIn0=