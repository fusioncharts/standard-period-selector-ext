!function(t){function e(a){if(i[a])return i[a].exports;var s=i[a]={exports:{},id:a,loaded:!1};return t[a].call(s.exports,s,s.exports,e),s.loaded=!0,s.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){(function(t){"use strict";var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=i(2);window.stPS=new a,function(i,a){"object"===e(t)&&t.exports?t.exports=i.document?a(i):function(t){if(!t.document)throw new Error("Window with document not present");return a(t,!0)}:i.StandardPeriodSelector=a(i,!0)}("undefined"!=typeof window?window:void 0,function(t,e){var i=t.FusionCharts;i.register("extension",["private","StandardPeriodSelector",function(){i.registerComponent("extensions","StandardPeriodSelector",a({FusionCharts:i}))}])})}).call(e,i(1)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}();t.exports=function(t){var e=function(){function t(){i(this,t),this.ratio=8,this.toolbox=FusionCharts.getComponent("api","toolbox"),this.HorizontalToolbar=this.toolbox.HorizontalToolbar,this.ComponentGroup=this.toolbox.ComponentGroup,this.SymbolStore=this.toolbox.SymbolStore,this.all=1,this.calculatedPeriods=[],this.startDataset=0,this.startActiveWindow=0,this.endActiveWindow=1,this.standardCalculatedPeriods=[],this.standardContexualPeriods=[],this.startPointUnit=0,this.startPointMultiplier=0,this.clickedId="ALL",this.noCalcButtons=0,this.tdButtons=[{name:"YTD",abbreviation:"YTD",parent:"year",milliseconds:31104e6,description:"Year to Date"},{name:"QTD",abbreviation:"QTD",parent:"month",multiplier:3,milliseconds:7776e6,description:"Quarter to Date"},{name:"MTD",abbreviation:"MTD",parent:"month",milliseconds:2592e6,description:"Month to Date"},{name:"WTD",abbreviation:"WTD",parent:"day",multiplier:7,milliseconds:6048e5,description:"Week to Date"},{name:"Y",abbreviation:"Y",parent:"day",milliseconds:864e5,description:"Yesterday"},{name:"T",abbreviation:"T",parent:"day",milliseconds:864e5,description:"Today"}],this.config={anchorPositions:"right",all:"1",contextual:"1",calculated:"1",tertiaryTimePeriods:{}}}return a(t,[{key:"generateCalculatedButtons",value:function(){var t=this.endActiveWindow-this.startDataset,e=0,i=0,a=this.endActiveWindow-this.startActiveWindow,s=0;for(this.standardCalculatedPeriods=[],e=0;e<this.timePeriods.length;e++)if(t/this.timePeriods[e].interval>=1)if(Math.floor(a/this.timePeriods[e].interval)<1)this.standardCalculatedPeriods.push({abbreviation:this.timePeriods[e].abbreviation.single,description:this.timePeriods[e].description,milliseconds:this.timePeriods[e].interval,name:this.timePeriods[e].name,multipliers:[1]});else for(this.standardCalculatedPeriods.push({abbreviation:this.timePeriods[e].abbreviation.single,description:this.timePeriods[e].description,milliseconds:this.timePeriods[e].interval,name:this.timePeriods[e].name,multipliers:[]}),i=0;i<this.timePeriods[e].multipliers.length;i++)a/this.ratio<this.timePeriods[e].multipliers[i]*this.timePeriods[e].interval&&this.standardCalculatedPeriods[this.standardCalculatedPeriods.length-1].multipliers.push(this.timePeriods[e].multipliers[i]);for(this.noCalcButtons=1/0,e=0;e<this.standardCalculatedPeriods.length;e++)for(i=0;i<this.standardCalculatedPeriods[e].multipliers.length;i++)++s,this.noCalcButtons>e&&(this.noCalcButtons=e),s<=4&&(this.startPointMultiplier=i,this.startPointUnit=e)}},{key:"generateContextualButtons",value:function(){for(var t=[],e=0,i=this.globalReactiveModel.model["x-axis-absolute-range-end"],a=i-2,s=i,o={};e<this.tdButtons.length;e++)a=new Date(i),"YTD"===this.tdButtons[e].name?(a.setMonth(0),a.setDate(1),a.setHours(0),a.setMinutes(0),a.setSeconds(0)):"MTD"===this.tdButtons[e].name?(a.setDate(1),a.setHours(0),a.setMinutes(0),a.setSeconds(0)):"QTD"===this.tdButtons[e].name?(a.setMonth(11-a.getMonth()%4),a.setDate(0),a.setHours(0),a.setMinutes(0),a.setSeconds(0)):"WTD"===this.tdButtons[e].name?(a.setDate(a.getDate()-a.getDay()),a.setHours(0),a.setMinutes(0),a.setSeconds(0)):"Y"===this.tdButtons[e].name?(a.setHours(0),a.setMinutes(0),a.setSeconds(0),a-=864e5):"T"===this.tdButtons[e].name&&(a.setHours(0),a.setMinutes(0),a.setSeconds(0)),s<a||(this.tdButtons[e].dateStart=a.valueOf(),this.tdButtons[e].dateEnd=s.valueOf(),t.push(this.tdButtons[e]));for(o.milliseconds=1/0,e=0;e<this.tdButtons.length;e++)Math.abs(this.tdButtons[e].milliseconds-(this.endActiveWindow-this.startActiveWindow))<o.milliseconds&&(o.milliseconds=this.tdButtons[e].milliseconds,o.name=this.tdButtons[e].abbreviation);this.standardContexualPeriods=t}},{key:"processMultipliers",value:function(t){for(var e=0;e<t.length;e++){var i=t[e].possibleFactors.length;t[e].multipliers=[],1===i?t[e].multipliers.push(t[e].possibleFactors[0]):2===i?(t[e].multipliers.push(t[e].possibleFactors[0]),t[e].multipliers.push(t[e].possibleFactors[i-1])):(t[e].multipliers.push(t[e].possibleFactors[0]),t[e].multipliers.push(Math.floor(t[e].possibleFactors[i-1]/2)),t[e].multipliers.push(t[e].possibleFactors[i-1]))}return t}},{key:"setActivePeriod",value:function(){var t,e;window.performance.now();1===arguments.length?(e=this.globalReactiveModel.model["x-axis-visible-range-end"],t=e-arguments[0]):2===arguments.length&&(t=arguments[0],e=arguments[1]),this.startActiveWindow=t,this.endActiveWindow=e,this.generateCalculatedButtons(),this.globalReactiveModel.model["x-axis-visible-range-start"]=this.startActiveWindow,this.globalReactiveModel.model["x-axis-visible-range-end"]=this.endActiveWindow,this.generateContextualButtons()}},{key:"configure",value:function(t){this.config=t}},{key:"init",value:function(t){var e=this;return t(["xAxis","yAxis","graphics","chart","dataset","PlotManager","canvasConfig","MarkerManager","reactiveModel","globalReactiveModel","spaceManagerInstance","smartLabel","extData","chartInstance",function(t,i,a,s,o,r,n,l,d,c,h,u,p,m){e.xAxis=t,e.yAxis=i,e.graphics=a,e.chart=s,e.dataset=o,e.plotManager=r,e.markerManager=l,e.canvasConfig=n,e.reactiveModel=d,e.globalReactiveModel=c,e.spaceManagerInstance=h,e.smartLabel=u,e.extData=p,e.chartInstance=m}]),this.spaceManagerInstance=e.spaceManagerInstance,this.globalReactiveModel=e.globalReactiveModel,this.endActiveWindow=e.globalReactiveModel.model["x-axis-visible-range-end"],this.startActiveWindow=e.globalReactiveModel.model["x-axis-visible-range-start"],this.startDataset=e.globalReactiveModel.model["x-axis-absolute-range-start"],this.endDataset=e.globalReactiveModel.model["x-axis-absolute-range-end"],this.timeRules=this.chartInstance.apiInstance.getComponentStore(),this.timeRules=this.timeRules.getCanvasByIndex(0).composition.impl,this.timeRules=this.timeRules.getDataAggregator(),this.timeRules=this.timeRules.getAggregationTimeRules(),this.timePeriods=this.processMultipliers(this.timeRules),this.setActivePeriod(this.startActiveWindow,this.endActiveWindow),this.toolbars=[],this.measurement={},this.flag=!0,this.toolbars.push(this.createToolbar()),this.globalReactiveModel.onPropsChange(["x-axis-visible-range-start","x-axis-visible-range-end"],function(t,i){if(e.flag){e.flag=!1,e.setActivePeriod(t[1],i[1]);for(var a=0;a<e.standardCalculatedPeriods.length;a++)for(var s=0;s<e.standardCalculatedPeriods[a].multipliers.length;s++)i[1]-t[1]>=e.timePeriods[a].multipliers[s]*e.timePeriods[a].interval&&(e.clickedId=e.timePeriods[a].multipliers[s]+e.timePeriods[a].abbreviation.single,console.log(e.clickedId));e.toolbar.dispose(),e.toolbars.pop(),e.toolbars.push(e.createToolbar()),e.getLogicalSpace(),e.draw()}}),this}},{key:"createToolbar",value:function(){var t,e,i,a,s,o,r,n,l,d,c,h,u=this,p=this,m=[];for(h=new this.toolbox.ComponentGroup({paper:this.graphics.paper,chart:this.chart,smartLabel:this.smartLabel,chartContainer:this.graphics.container}),t=new this.toolbox.UniSelectComponentGroup({paper:this.graphics.paper,chart:this.chart,smartLabel:this.smartLabel,chartContainer:this.graphics.container}),t.setConfig({fill:"#fff",borderThickness:0}),h.setConfig({fill:"#fff",borderThickness:0}),e=new this.HorizontalToolbar({paper:this.graphics.paper,chart:this.chart,smartLabel:this.smartLabel,chartContainer:this.graphics.container}),e.setConfig({fill:"#fff",borderThickness:0}),c=new this.toolbox.Label("Zoom:",{smartLabel:this.smartLabel,paper:this.graphics.paper},{text:{style:{"font-family":'"Lucida Grande", sans-serif',"font-size":"13",fill:"#696969","font-weight":"bold"}},container:{height:22}}),h.addSymbol(c),s=new this.toolbox.Symbol("ALL",!0,{paper:this.graphics.paper,chart:this.chart,smartLabel:this.smartLabel,chartContainer:this.graphics.container},{fill:"#ffffff",labelFill:"#696969",symbolStrokeWidth:"2",stroke:"#ced5d4",strokeWidth:"1",hoverFill:"#ced5d4",height:22,radius:1,margin:{right:5},btnTextStyle:{fontFamily:'"Lucida Grande", sans-serif',fontSize:"13",fill:"#696969","line-height":"1","letter-spacing":"-0.04em"}}).attachEventHandlers({click:function(){p.setActivePeriod(p.startDataset,p.endDataset),e.dispose(),p.clickedId="ALL",p.toolbars.pop(),p.toolbars.push(p.createToolbar()),p.getLogicalSpace(),p.draw()},tooltext:"ALL"}),t.addSymbol(s),n=0;n<this.standardCalculatedPeriods.length;n++)for(l=this.standardCalculatedPeriods[n].multipliers.length-1;l>=0;l--)m.push(p.standardCalculatedPeriods[n].multipliers[l]*p.standardCalculatedPeriods[n].milliseconds);i=[];for(var f=function(a){o=a===p.startPointUnit?p.startPointMultiplier:p.standardCalculatedPeriods[a].multipliers.length-1;for(var s=function(s){d=a===p.noCalcButtons&&0===s?5:0,i[a]=new u.toolbox.Symbol(p.standardCalculatedPeriods[a].multipliers[s]+p.standardCalculatedPeriods[a].abbreviation,!0,{paper:u.graphics.paper,chart:u.chart,smartLabel:u.smartLabel,chartContainer:u.graphics.container},{fill:"#ffffff",labelFill:"#696969",symbolStrokeWidth:"2",stroke:"#ced5d4",strokeWidth:"1",hoverFill:"#ced5d4",height:22,radius:1,margin:{right:d},btnTextStyle:{fontFamily:'"Lucida Grande", sans-serif',fontSize:"13",fill:"#696969","line-height":"1","letter-spacing":"-0.04em"}}).attachEventHandlers({click:function(){r=p.standardCalculatedPeriods[a].multipliers[s]*p.standardCalculatedPeriods[a].milliseconds,p.clickedId=p.standardCalculatedPeriods[a].multipliers[s]+p.standardCalculatedPeriods[a].abbreviation,p.setActivePeriod(r),e.dispose(),p.toolbars.pop(),p.toolbars.push(p.createToolbar()),p.getLogicalSpace(),p.draw()},tooltext:p.standardCalculatedPeriods[a].multipliers[s]+" "+p.standardCalculatedPeriods[a].description}),t.addSymbol(i[a])},n=o;n>=0;n--)s(n)},g=p.startPointUnit;g>=0;g--)f(g);a=[];for(var b=function(i){a[i]=new u.toolbox.Symbol(u.standardContexualPeriods[i].abbreviation,!0,{paper:u.graphics.paper,chart:u.chart,smartLabel:u.smartLabel,chartContainer:u.graphics.container},{fill:"#ffffff",labelFill:"#696969",symbolStrokeWidth:"2",stroke:"#ced5d4",strokeWidth:"1",height:22,hoverFill:"#ced5d4",radius:1,margin:{right:0},btnTextStyle:{fontFamily:'"Lucida Grande", sans-serif',fontSize:"13",fill:"#696969","line-height":"1","letter-spacing":"-0.04em"}}).attachEventHandlers({click:function(){p.setActivePeriod(p.standardContexualPeriods[i].dateStart,p.standardContexualPeriods[i].dateEnd),p.clickedId=p.standardContexualPeriods[i].abbreviation,e.dispose(),p.toolbars.pop(),p.toolbars.push(p.createToolbar()),p.getLogicalSpace(),p.draw()},tooltext:u.standardContexualPeriods[i].description}),t.addSymbol(a[i])},v=0;v<this.standardContexualPeriods.length;v++)b(v);return this.SymbolStore.register("textBoxIcon",function(t,e,i,a,s,o,r){var n=t-a/2+o/2,l=t+a/2-o/2,d=e-s/2+r/2,c=e+s/2-r/2;return["M",n,d,"L",l,d,"L",l,c,"L",n,c,"Z"]}),e.addComponent(h),e.addComponent(t),this.toolbar=e,e}},{key:"getLogicalSpace",value:function(){var t,e,i,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._pWidth,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._pHeight,o=420,r=0;for(e=0,i=this.toolbars.length;e<i;e++)t=this.toolbars[e].getLogicalSpace(a,s),r+=t.height,this.toolbars[e].width=t.width,this.toolbars[e].height=t.height;return r+=this.padding,{width:o,height:r}}},{key:"getDefaultGroup",value:function(){return this.parentGroup}},{key:"placeInCanvas",value:function(){var t=this;t.padding=5,t.spaceManagerInstance.add([{name:function(){return"standard-period-selector-ext"},ref:function(t){return t[0]},self:function(){return t},priority:function(){return 2},layout:function(t){return t.inline},orientation:[{type:function(t){return t.horizontal},position:[{type:function(t){return t.top},alignment:[{type:function(t){return t.left},dimensions:[function(){var e=this.getParentComponentGroup();return t._ref=this,t.getLogicalSpace(t._pWidth=e.getWidth(),t._pHeight=e.getHeight())}]}]}]}]}])}},{key:"setDrawingConfiguration",value:function(t,e,i,a,s){var o=this.measurement;return o.x=t,o.y=e,o.width=i,o.height=a,this.parentGroup=s,this}},{key:"draw",value:function(t,e,i,a,s){var o,r,n,l,d,c,h,u,p,m=this.measurement,f=this.toolbars;this.globalReactiveModel;if(this.flag=!0,p=this.saveSelectLine||this.graphics.paper.path({stroke:"#c95a5a","stroke-width":"2px"}).toFront(),t=void 0===t?m.x:t,e=void 0===e?m.y:e,i=void 0===i?m.width:i,a=void 0===a?m.height:a,s=void 0===s?this.parentGroup:s,i&&a)for(r=0,o=f.length;r<o;r++)n=f[r],n.draw(t,e,s);this.saveSelectLine=p;for(var g=0,b=f[0].componentGroups[1].symbolList;g<b.length;g++)b[g].symbol===this.clickedId&&(l=b[g].getBoundElement(),d=l.getBBox(),c=d.x,h=d.x2,u=d.y2,p.attr({path:["M",c-.5,u-.5,"L",h+.5,u-.5]}))}}]),t}();return e}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3RhbmRhcmQtcGVyaW9kLXNlbGVjdG9yLWVzNS5taW4uanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svYm9vdHN0cmFwIDA2ZGI5Njg3OTY1M2MyNGMyYzIyIiwid2VicGFjazovLy8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL2J1aWxkaW4vbW9kdWxlLmpzIiwid2VicGFjazovLy8uL3NyYy9zdGFuZGFyZC1wZXJpb2Qtc2VsZWN0b3IuanMiXSwibmFtZXMiOlsibW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImluc3RhbGxlZE1vZHVsZXMiLCJleHBvcnRzIiwibW9kdWxlIiwiaWQiLCJsb2FkZWQiLCJjYWxsIiwibSIsImMiLCJwIiwiX3R5cGVvZiIsIlN5bWJvbCIsIml0ZXJhdG9yIiwib2JqIiwiY29uc3RydWN0b3IiLCJwcm90b3R5cGUiLCJTdGFuZGFyZFBlcmlvZFNlbGVjdG9yIiwid2luZG93Iiwic3RQUyIsImVudiIsImZhY3RvcnkiLCJkb2N1bWVudCIsIndpbiIsIkVycm9yIiwidW5kZWZpbmVkIiwiX3dpbmRvdyIsIndpbmRvd0V4aXN0cyIsIkZDIiwiRnVzaW9uQ2hhcnRzIiwicmVnaXN0ZXIiLCJyZWdpc3RlckNvbXBvbmVudCIsIndlYnBhY2tQb2x5ZmlsbCIsImRlcHJlY2F0ZSIsInBhdGhzIiwiY2hpbGRyZW4iLCJfY2xhc3NDYWxsQ2hlY2siLCJpbnN0YW5jZSIsIkNvbnN0cnVjdG9yIiwiVHlwZUVycm9yIiwiX2NyZWF0ZUNsYXNzIiwiZGVmaW5lUHJvcGVydGllcyIsInRhcmdldCIsInByb3BzIiwiaSIsImxlbmd0aCIsImRlc2NyaXB0b3IiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImtleSIsInByb3RvUHJvcHMiLCJzdGF0aWNQcm9wcyIsImRlcCIsInRoaXMiLCJyYXRpbyIsInRvb2xib3giLCJnZXRDb21wb25lbnQiLCJIb3Jpem9udGFsVG9vbGJhciIsIkNvbXBvbmVudEdyb3VwIiwiU3ltYm9sU3RvcmUiLCJhbGwiLCJjYWxjdWxhdGVkUGVyaW9kcyIsInN0YXJ0RGF0YXNldCIsInN0YXJ0QWN0aXZlV2luZG93IiwiZW5kQWN0aXZlV2luZG93Iiwic3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kcyIsInN0YW5kYXJkQ29udGV4dWFsUGVyaW9kcyIsInN0YXJ0UG9pbnRVbml0Iiwic3RhcnRQb2ludE11bHRpcGxpZXIiLCJjbGlja2VkSWQiLCJub0NhbGNCdXR0b25zIiwidGRCdXR0b25zIiwibmFtZSIsImFiYnJldmlhdGlvbiIsInBhcmVudCIsIm1pbGxpc2Vjb25kcyIsImRlc2NyaXB0aW9uIiwibXVsdGlwbGllciIsImNvbmZpZyIsImFuY2hvclBvc2l0aW9ucyIsImNvbnRleHR1YWwiLCJjYWxjdWxhdGVkIiwidGVydGlhcnlUaW1lUGVyaW9kcyIsInZhbHVlIiwidGFyZ2V0QmxvY2siLCJqIiwiYWN0aXZlV2luZG93IiwiY291bnQiLCJ0aW1lUGVyaW9kcyIsImludGVydmFsIiwiTWF0aCIsImZsb29yIiwicHVzaCIsInNpbmdsZSIsIm11bHRpcGxpZXJzIiwiSW5maW5pdHkiLCJidXR0b25zIiwiZW5kU3RhbXAiLCJnbG9iYWxSZWFjdGl2ZU1vZGVsIiwibW9kZWwiLCJkYXRlU3RhcnQiLCJkYXRlRW5kIiwicmVsYXRpdmVUREJ1dHRvbiIsIkRhdGUiLCJzZXRNb250aCIsInNldERhdGUiLCJzZXRIb3VycyIsInNldE1pbnV0ZXMiLCJzZXRTZWNvbmRzIiwiZ2V0TW9udGgiLCJnZXREYXRlIiwiZ2V0RGF5IiwidmFsdWVPZiIsImFicyIsInRpbWVBcnIiLCJsZW4iLCJwb3NzaWJsZUZhY3RvcnMiLCJzdGFydCIsImVuZCIsInBlcmZvcm1hbmNlIiwibm93IiwiYXJndW1lbnRzIiwiZ2VuZXJhdGVDYWxjdWxhdGVkQnV0dG9ucyIsImdlbmVyYXRlQ29udGV4dHVhbEJ1dHRvbnMiLCJyZXF1aXJlIiwieEF4aXMiLCJ5QXhpcyIsImdyYXBoaWNzIiwiY2hhcnQiLCJkYXRhc2V0IiwicGxvdE1hbmFnZXIiLCJjYW52YXNDb25maWciLCJtYXJrZXJNYW5hZ2VyIiwicmVhY3RpdmVNb2RlbCIsInNwYWNlTWFuYWdlckluc3RhbmNlIiwic21hcnRMYWJlbCIsImV4dERhdGEiLCJjaGFydEluc3RhbmNlIiwiZW5kRGF0YXNldCIsInRpbWVSdWxlcyIsImFwaUluc3RhbmNlIiwiZ2V0Q29tcG9uZW50U3RvcmUiLCJnZXRDYW52YXNCeUluZGV4IiwiY29tcG9zaXRpb24iLCJpbXBsIiwiZ2V0RGF0YUFnZ3JlZ2F0b3IiLCJnZXRBZ2dyZWdhdGlvblRpbWVSdWxlcyIsInByb2Nlc3NNdWx0aXBsaWVycyIsInNldEFjdGl2ZVBlcmlvZCIsInRvb2xiYXJzIiwibWVhc3VyZW1lbnQiLCJmbGFnIiwiY3JlYXRlVG9vbGJhciIsIm9uUHJvcHNDaGFuZ2UiLCJjb25zb2xlIiwibG9nIiwidG9vbGJhciIsImRpc3Bvc2UiLCJwb3AiLCJnZXRMb2dpY2FsU3BhY2UiLCJkcmF3IiwidW5pZ3JvdXAiLCJjYWxjdWxhdGVkQnV0dG9ucyIsImNvbnRleHR1YWxCdXR0b25zIiwiYWxsQnV0dG9uIiwic3RhcnRNdWx0aXBsaWVyIiwiZGVkdWN0b3IiLCJtYXJnaW4iLCJmcm9tRGF0ZUxhYmVsIiwiZ3JvdXAiLCJfdGhpcyIsInNlbGYiLCJkZWR1Y3RvckFyIiwicGFwZXIiLCJjaGFydENvbnRhaW5lciIsImNvbnRhaW5lciIsIlVuaVNlbGVjdENvbXBvbmVudEdyb3VwIiwic2V0Q29uZmlnIiwiZmlsbCIsImJvcmRlclRoaWNrbmVzcyIsIkxhYmVsIiwidGV4dCIsInN0eWxlIiwiZm9udC1mYW1pbHkiLCJmb250LXNpemUiLCJmb250LXdlaWdodCIsImhlaWdodCIsImFkZFN5bWJvbCIsImxhYmVsRmlsbCIsInN5bWJvbFN0cm9rZVdpZHRoIiwic3Ryb2tlIiwic3Ryb2tlV2lkdGgiLCJob3ZlckZpbGwiLCJyYWRpdXMiLCJyaWdodCIsImJ0blRleHRTdHlsZSIsImZvbnRGYW1pbHkiLCJmb250U2l6ZSIsImxpbmUtaGVpZ2h0IiwibGV0dGVyLXNwYWNpbmciLCJhdHRhY2hFdmVudEhhbmRsZXJzIiwiY2xpY2siLCJ0b29sdGV4dCIsIl9sb29wIiwiX2xvb3AzIiwiX2xvb3AyIiwieCIsInkiLCJyYWQiLCJ3IiwiaCIsInBhZFgiLCJwYWRZIiwieDEiLCJ4MiIsInkxIiwieTIiLCJhZGRDb21wb25lbnQiLCJsb2dpY2FsU3BhY2UiLCJsbiIsImF2YWlsYWJsZVdpZHRoIiwiX3BXaWR0aCIsImF2YWlsYWJsZUhlaWdodCIsIl9wSGVpZ2h0Iiwid2lkdGgiLCJwYWRkaW5nIiwicGFyZW50R3JvdXAiLCJhZGQiLCJyZWYiLCJwcmlvcml0eSIsImxheW91dCIsImlubGluZSIsIm9yaWVudGF0aW9uIiwidHlwZSIsImhvcml6b250YWwiLCJwb3NpdGlvbiIsInRvcCIsImFsaWdubWVudCIsImxlZnQiLCJkaW1lbnNpb25zIiwiZ2V0UGFyZW50Q29tcG9uZW50R3JvdXAiLCJfcmVmIiwiZ2V0V2lkdGgiLCJnZXRIZWlnaHQiLCJtZXMiLCJib3VuZEVsZW1lbnQiLCJiQm94Iiwic2VsZWN0TGluZSIsInNhdmVTZWxlY3RMaW5lIiwicGF0aCIsInN0cm9rZS13aWR0aCIsInRvRnJvbnQiLCJpaSIsImNvbXBvbmVudEdyb3VwcyIsInN5bWJvbExpc3QiLCJzeW1ib2wiLCJnZXRCb3VuZEVsZW1lbnQiLCJnZXRCQm94IiwiYXR0ciJdLCJtYXBwaW5ncyI6IkNBQVMsU0FBVUEsR0NJbkIsUUFBQUMsR0FBQUMsR0FHQSxHQUFBQyxFQUFBRCxHQUNBLE1BQUFDLEdBQUFELEdBQUFFLE9BR0EsSUFBQUMsR0FBQUYsRUFBQUQsSUFDQUUsV0FDQUUsR0FBQUosRUFDQUssUUFBQSxFQVVBLE9BTkFQLEdBQUFFLEdBQUFNLEtBQUFILEVBQUFELFFBQUFDLElBQUFELFFBQUFILEdBR0FJLEVBQUFFLFFBQUEsRUFHQUYsRUFBQUQs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UUFDZkMsVUFDSDdDLEVBQVV4TCxTQUFOd0wsRUFBa0J4RCxFQUFZd0QsRUFBSUEsRUFDdENDLEVBQVV6TCxTQUFOeUwsRUFBa0J6RCxFQUFZeUQsRUFBSUEsRUFDdENpQixFQUFrQjFNLFNBQVYwTSxFQUFzQjFFLEVBQVkwRSxNQUFRQSxFQUNsRHRDLEVBQW9CcEssU0FBWG9LLEVBQXVCcEMsRUFBWW9DLE9BQVNBLEVBQ3JEakIsRUFBa0JuSixTQUFWbUosRUFBc0JwSCxLQUFLNkssWUFBY3pELEVBQzdDdUQsR0FBU3RDLEVBQ1gsSUFBS2pKLEVBQUksRUFBR2tMLEVBQUt0RSxFQUFTM0csT0FBUUQsRUFBSWtMLEVBQUlsTCxJQUN4Q21ILEVBQVVQLEVBQVM1RyxHQUNuQm1ILEVBQVFJLEtBQUs4QyxFQUFHQyxFQUFHdEMsRUFHdkJwSCxNQUFLbU0sZUFBaUJELENBRXRCLEtBQUssR0FBSTlNLEdBQUksRUFBR21OLEVBQUt2RyxFQUFTLEdBQUd3RyxnQkFBZ0IsR0FBR0MsV0FBWXJOLEVBQUltTixFQUFHbE4sT0FBUUQsSUFDekVtTixFQUFHbk4sR0FBR3NOLFNBQVcxTSxLQUFLZ0IsWUFDeEJnTCxFQUFlTyxFQUFHbk4sR0FBR3VOLGtCQUNyQlYsRUFBT0QsRUFBYVksVUFDcEI1QyxFQUFLaUMsRUFBS3hDLEVBQ1ZRLEVBQUtnQyxFQUFLaEMsR0FDVkUsRUFBSzhCLEVBQUs5QixHQUVWK0IsRUFBV1csTUFDVFQsTUFBTyxJQUFLcEMsRUFBSyxHQUFLRyxFQUFLLEdBQUssSUFBS0YsRUFBSyxHQUFLRSxFQUFLLFdBeHZCaEMxTSxJQTh2QjlCLE9BQU9BIiwiZmlsZSI6InN0YW5kYXJkLXBlcmlvZC1zZWxlY3Rvci1lczUubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqKioqKi8gKGZ1bmN0aW9uKG1vZHVsZXMpIHsgLy8gd2VicGFja0Jvb3RzdHJhcFxuLyoqKioqKi8gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuLyoqKioqKi8gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuLyoqKioqKi8gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuLyoqKioqKi8gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4vKioqKioqLyBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuLyoqKioqKi8gXHRcdFx0ZXhwb3J0czoge30sXG4vKioqKioqLyBcdFx0XHRpZDogbW9kdWxlSWQsXG4vKioqKioqLyBcdFx0XHRsb2FkZWQ6IGZhbHNlXG4vKioqKioqLyBcdFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4vKioqKioqLyBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbi8qKioqKiovIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbi8qKioqKiovIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4vKioqKioqLyBcdH1cbi8qKioqKiovXG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8qKioqKiovIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMCk7XG4vKioqKioqLyB9KVxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKioqKiovIChbXG4vKiAwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24obW9kdWxlKSB7J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXHRcblx0dmFyIFN0YW5kYXJkUGVyaW9kU2VsZWN0b3IgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHRcblx0d2luZG93LnN0UFMgPSBuZXcgU3RhbmRhcmRQZXJpb2RTZWxlY3RvcigpO1xuXHRcblx0OyhmdW5jdGlvbiAoZW52LCBmYWN0b3J5KSB7XG5cdCAgaWYgKCggZmFsc2UgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YobW9kdWxlKSkgPT09ICdvYmplY3QnICYmIG1vZHVsZS5leHBvcnRzKSB7XG5cdCAgICBtb2R1bGUuZXhwb3J0cyA9IGVudi5kb2N1bWVudCA/IGZhY3RvcnkoZW52KSA6IGZ1bmN0aW9uICh3aW4pIHtcblx0ICAgICAgaWYgKCF3aW4uZG9jdW1lbnQpIHtcblx0ICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1dpbmRvdyB3aXRoIGRvY3VtZW50IG5vdCBwcmVzZW50Jyk7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIGZhY3Rvcnkod2luLCB0cnVlKTtcblx0ICAgIH07XG5cdCAgfSBlbHNlIHtcblx0ICAgIGVudi5TdGFuZGFyZFBlcmlvZFNlbGVjdG9yID0gZmFjdG9yeShlbnYsIHRydWUpO1xuXHQgIH1cblx0fSkodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cgOiB1bmRlZmluZWQsIGZ1bmN0aW9uIChfd2luZG93LCB3aW5kb3dFeGlzdHMpIHtcblx0ICB2YXIgRkMgPSBfd2luZG93LkZ1c2lvbkNoYXJ0cztcblx0ICBGQy5yZWdpc3RlcignZXh0ZW5zaW9uJywgWydwcml2YXRlJywgJ1N0YW5kYXJkUGVyaW9kU2VsZWN0b3InLCBmdW5jdGlvbiAoKSB7XG5cdCAgICBGQy5yZWdpc3RlckNvbXBvbmVudCgnZXh0ZW5zaW9ucycsICdTdGFuZGFyZFBlcmlvZFNlbGVjdG9yJywgU3RhbmRhcmRQZXJpb2RTZWxlY3Rvcih7IEZ1c2lvbkNoYXJ0czogRkMgfSkpO1xuXHQgIH1dKTtcblx0fSk7XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpKG1vZHVsZSkpKVxuXG4vKioqLyB9LFxuLyogMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihtb2R1bGUpIHtcblx0XHRpZighbW9kdWxlLndlYnBhY2tQb2x5ZmlsbCkge1xuXHRcdFx0bW9kdWxlLmRlcHJlY2F0ZSA9IGZ1bmN0aW9uKCkge307XG5cdFx0XHRtb2R1bGUucGF0aHMgPSBbXTtcblx0XHRcdC8vIG1vZHVsZS5wYXJlbnQgPSB1bmRlZmluZWQgYnkgZGVmYXVsdFxuXHRcdFx0bW9kdWxlLmNoaWxkcmVuID0gW107XG5cdFx0XHRtb2R1bGUud2VicGFja1BvbHlmaWxsID0gMTtcblx0XHR9XG5cdFx0cmV0dXJuIG1vZHVsZTtcblx0fVxuXG5cbi8qKiovIH0sXG4vKiAyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHQvKipcblx0ICogQ2xhc3MgZGVmaW5pdGlvbiBvZiBTdGFuZGFyZFBlcmlvZFNlbGVjdG9yXG5cdCAqL1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChkZXApIHtcblx0ICB2YXIgU3RhbmRhcmRQZXJpb2RTZWxlY3RvciA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIFN0YW5kYXJkUGVyaW9kU2VsZWN0b3IoKSB7XG5cdCAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTdGFuZGFyZFBlcmlvZFNlbGVjdG9yKTtcblx0XG5cdCAgICAgIC8qKlxuXHQgICAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICAgKi9cblx0ICAgICAgdGhpcy5yYXRpbyA9IDg7XG5cdCAgICAgIHRoaXMudG9vbGJveCA9IEZ1c2lvbkNoYXJ0cy5nZXRDb21wb25lbnQoJ2FwaScsICd0b29sYm94Jyk7XG5cdCAgICAgIHRoaXMuSG9yaXpvbnRhbFRvb2xiYXIgPSB0aGlzLnRvb2xib3guSG9yaXpvbnRhbFRvb2xiYXI7XG5cdCAgICAgIHRoaXMuQ29tcG9uZW50R3JvdXAgPSB0aGlzLnRvb2xib3guQ29tcG9uZW50R3JvdXA7XG5cdCAgICAgIHRoaXMuU3ltYm9sU3RvcmUgPSB0aGlzLnRvb2xib3guU3ltYm9sU3RvcmU7XG5cdCAgICAgIHRoaXMuYWxsID0gMTtcblx0ICAgICAgdGhpcy5jYWxjdWxhdGVkUGVyaW9kcyA9IFtdO1xuXHQgICAgICB0aGlzLnN0YXJ0RGF0YXNldCA9IDA7XG5cdCAgICAgIC8vIHRoaXMuZW5kRGF0YXNldCA9IHRoaXMuZ2xvYmFsUmVhY3RpdmVNb2RlbC5tb2RlbFsneC1heGlzLWFic29sdXRlLXJhbmdlLWVuZCddO1xuXHQgICAgICB0aGlzLnN0YXJ0QWN0aXZlV2luZG93ID0gMDtcblx0ICAgICAgdGhpcy5lbmRBY3RpdmVXaW5kb3cgPSAxO1xuXHQgICAgICB0aGlzLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHMgPSBbXTtcblx0ICAgICAgdGhpcy5zdGFuZGFyZENvbnRleHVhbFBlcmlvZHMgPSBbXTtcblx0ICAgICAgdGhpcy5zdGFydFBvaW50VW5pdCA9IDA7XG5cdCAgICAgIHRoaXMuc3RhcnRQb2ludE11bHRpcGxpZXIgPSAwO1xuXHQgICAgICB0aGlzLmNsaWNrZWRJZCA9ICdBTEwnO1xuXHQgICAgICB0aGlzLm5vQ2FsY0J1dHRvbnMgPSAwO1xuXHQgICAgICAvLyB0aGlzLnRpbWVQZXJpb2RzID0gW1xuXHQgICAgICAvLyAgIHtcblx0ICAgICAgLy8gICAgICduYW1lJzogJ3NlY29uZCcsXG5cdCAgICAgIC8vICAgICAnbWlsbGlzZWNvbmRzJzogMTAwMCxcblx0ICAgICAgLy8gICAgICdzdGFydGluZ1BvaW50JzogMCxcblx0ICAgICAgLy8gICAgICd0b3RhbCc6IDYwLFxuXHQgICAgICAvLyAgICAgJ2FiYnJldmlhdGlvbic6ICdzJyxcblx0ICAgICAgLy8gICAgICdkZXNjcmlwdGlvbic6ICdTRUNPTkQnLFxuXHQgICAgICAvLyAgICAgJ3BhcmVudCc6ICdtaW51dGUnLFxuXHQgICAgICAvLyAgICAgJ211bHRpcGxpZXJzJzogWzEsIDUsIDE1LCAzMF1cblx0ICAgICAgLy8gICB9LFxuXHQgICAgICAvLyAgIHtcblx0ICAgICAgLy8gICAgICduYW1lJzogJ21pbnV0ZScsXG5cdCAgICAgIC8vICAgICAnbWlsbGlzZWNvbmRzJzogNjAwMDAsXG5cdCAgICAgIC8vICAgICAnc3RhcnRpbmdQb2ludCc6IDAsXG5cdCAgICAgIC8vICAgICAndG90YWwnOiA2MCxcblx0ICAgICAgLy8gICAgICdhYmJyZXZpYXRpb24nOiAnbScsXG5cdCAgICAgIC8vICAgICAnZGVzY3JpcHRpb24nOiAnTUlOVVRFJyxcblx0ICAgICAgLy8gICAgICdwYXJlbnQnOiAnaG91cicsXG5cdCAgICAgIC8vICAgICAnbXVsdGlwbGllcnMnOiBbMSwgNSwgMTUsIDMwXVxuXHQgICAgICAvLyAgIH0sXG5cdCAgICAgIC8vICAge1xuXHQgICAgICAvLyAgICAgJ25hbWUnOiAnaG91cicsXG5cdCAgICAgIC8vICAgICAnbWlsbGlzZWNvbmRzJzogMzYwMDAwMCxcblx0ICAgICAgLy8gICAgICdzdGFydGluZ1BvaW50JzogMCxcblx0ICAgICAgLy8gICAgICd0b3RhbCc6IDI0LFxuXHQgICAgICAvLyAgICAgJ2FiYnJldmlhdGlvbic6ICdoJyxcblx0ICAgICAgLy8gICAgICdkZXNjcmlwdGlvbic6ICdIT1VSJyxcblx0ICAgICAgLy8gICAgICdwYXJlbnQnOiAnZGF5Jyxcblx0ICAgICAgLy8gICAgICdtdWx0aXBsaWVycyc6IFsxLCAzLCA2LCAxMl1cblx0ICAgICAgLy8gICB9LFxuXHQgICAgICAvLyAgIHtcblx0ICAgICAgLy8gICAgICduYW1lJzogJ2RheScsXG5cdCAgICAgIC8vICAgICAnbWlsbGlzZWNvbmRzJzogODY0MDAwMDAsXG5cdCAgICAgIC8vICAgICAnc3RhcnRpbmdQb2ludCc6IDAsXG5cdCAgICAgIC8vICAgICAndG90YWwnOiAzMCxcblx0ICAgICAgLy8gICAgICdhYmJyZXZpYXRpb24nOiAnRCcsXG5cdCAgICAgIC8vICAgICAnZGVzY3JpcHRpb24nOiAnREFZJyxcblx0ICAgICAgLy8gICAgICdwYXJlbnQnOiAnbW9udGgnLFxuXHQgICAgICAvLyAgICAgJ211bHRpcGxpZXJzJzogWzEsIDcsIDE1XVxuXHQgICAgICAvLyAgIH0sXG5cdCAgICAgIC8vICAge1xuXHQgICAgICAvLyAgICAgJ25hbWUnOiAnbW9udGgnLFxuXHQgICAgICAvLyAgICAgJ21pbGxpc2Vjb25kcyc6IDI1OTIwMDAwMDAsXG5cdCAgICAgIC8vICAgICAnc3RhcnRpbmdQb2ludCc6IDAsXG5cdCAgICAgIC8vICAgICAndG90YWwnOiAxMixcblx0ICAgICAgLy8gICAgICdhYmJyZXZpYXRpb24nOiAnTScsXG5cdCAgICAgIC8vICAgICAnZGVzY3JpcHRpb24nOiAnTU9OVEgnLFxuXHQgICAgICAvLyAgICAgJ3BhcmVudCc6ICd5ZWFyJyxcblx0ICAgICAgLy8gICAgICdtdWx0aXBsaWVycyc6IFsxLCAzLCA2XVxuXHQgICAgICAvLyAgIH0sXG5cdCAgICAgIC8vICAge1xuXHQgICAgICAvLyAgICAgJ25hbWUnOiAneWVhcicsXG5cdCAgICAgIC8vICAgICAnbWlsbGlzZWNvbmRzJzogMzExMDQwMDAwMDAsXG5cdCAgICAgIC8vICAgICAnc3RhcnRpbmdQb2ludCc6IDAsXG5cdCAgICAgIC8vICAgICAnYWJicmV2aWF0aW9uJzogJ1knLFxuXHQgICAgICAvLyAgICAgJ2Rlc2NyaXB0aW9uJzogJ1lFQVInLFxuXHQgICAgICAvLyAgICAgJ211bHRpcGxpZXJzJzogWzFdXG5cdCAgICAgIC8vICAgfV07XG5cdCAgICAgIHRoaXMudGRCdXR0b25zID0gW3tcblx0ICAgICAgICAnbmFtZSc6ICdZVEQnLFxuXHQgICAgICAgICdhYmJyZXZpYXRpb24nOiAnWVREJyxcblx0ICAgICAgICAncGFyZW50JzogJ3llYXInLFxuXHQgICAgICAgICdtaWxsaXNlY29uZHMnOiAzMTEwNDAwMDAwMCxcblx0ICAgICAgICAnZGVzY3JpcHRpb24nOiAnWWVhciB0byBEYXRlJ1xuXHQgICAgICB9LCB7XG5cdCAgICAgICAgJ25hbWUnOiAnUVREJyxcblx0ICAgICAgICAnYWJicmV2aWF0aW9uJzogJ1FURCcsXG5cdCAgICAgICAgJ3BhcmVudCc6ICdtb250aCcsXG5cdCAgICAgICAgJ211bHRpcGxpZXInOiAzLFxuXHQgICAgICAgICdtaWxsaXNlY29uZHMnOiA3Nzc2MDAwMDAwLFxuXHQgICAgICAgICdkZXNjcmlwdGlvbic6ICdRdWFydGVyIHRvIERhdGUnXG5cdCAgICAgIH0sIHtcblx0ICAgICAgICAnbmFtZSc6ICdNVEQnLFxuXHQgICAgICAgICdhYmJyZXZpYXRpb24nOiAnTVREJyxcblx0ICAgICAgICAncGFyZW50JzogJ21vbnRoJyxcblx0ICAgICAgICAnbWlsbGlzZWNvbmRzJzogMjU5MjAwMDAwMCxcblx0ICAgICAgICAnZGVzY3JpcHRpb24nOiAnTW9udGggdG8gRGF0ZSdcblx0ICAgICAgfSwge1xuXHQgICAgICAgICduYW1lJzogJ1dURCcsXG5cdCAgICAgICAgJ2FiYnJldmlhdGlvbic6ICdXVEQnLFxuXHQgICAgICAgICdwYXJlbnQnOiAnZGF5Jyxcblx0ICAgICAgICAnbXVsdGlwbGllcic6IDcsXG5cdCAgICAgICAgJ21pbGxpc2Vjb25kcyc6IDYwNDgwMDAwMCxcblx0ICAgICAgICAnZGVzY3JpcHRpb24nOiAnV2VlayB0byBEYXRlJ1xuXHQgICAgICB9LCB7XG5cdCAgICAgICAgJ25hbWUnOiAnWScsXG5cdCAgICAgICAgJ2FiYnJldmlhdGlvbic6ICdZJyxcblx0ICAgICAgICAncGFyZW50JzogJ2RheScsXG5cdCAgICAgICAgJ21pbGxpc2Vjb25kcyc6IDg2NDAwMDAwLFxuXHQgICAgICAgICdkZXNjcmlwdGlvbic6ICdZZXN0ZXJkYXknXG5cdCAgICAgIH0sIHtcblx0ICAgICAgICAnbmFtZSc6ICdUJyxcblx0ICAgICAgICAnYWJicmV2aWF0aW9uJzogJ1QnLFxuXHQgICAgICAgICdwYXJlbnQnOiAnZGF5Jyxcblx0ICAgICAgICAnbWlsbGlzZWNvbmRzJzogODY0MDAwMDAsXG5cdCAgICAgICAgJ2Rlc2NyaXB0aW9uJzogJ1RvZGF5J1xuXHQgICAgICB9XTtcblx0ICAgICAgdGhpcy5jb25maWcgPSB7XG5cdCAgICAgICAgYW5jaG9yUG9zaXRpb25zOiAncmlnaHQnLFxuXHQgICAgICAgIGFsbDogJzEnLFxuXHQgICAgICAgIGNvbnRleHR1YWw6ICcxJyxcblx0ICAgICAgICBjYWxjdWxhdGVkOiAnMScsXG5cdCAgICAgICAgdGVydGlhcnlUaW1lUGVyaW9kczoge31cblx0ICAgICAgfTtcblx0ICAgIH1cblx0XG5cdCAgICAvKipcblx0ICAgICAqIEEgZnVuY3Rpb24gdG8gZ2VuZXJhdGUgdGhlIGNhbGN1bGF0ZWQgYnV0dG9ucyB1c2luZ1xuXHQgICAgICogdGhlIGFjdGl2ZSByYW5nZSBhbmQgdGhlIGxvY2F0aW9uIG9mIHRoZSBhY3RpdmUgcmFuZ2Vcblx0ICAgICAqL1xuXHRcblx0XG5cdCAgICBfY3JlYXRlQ2xhc3MoU3RhbmRhcmRQZXJpb2RTZWxlY3RvciwgW3tcblx0ICAgICAga2V5OiAnZ2VuZXJhdGVDYWxjdWxhdGVkQnV0dG9ucycsXG5cdCAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZW5lcmF0ZUNhbGN1bGF0ZWRCdXR0b25zKCkge1xuXHQgICAgICAgIHZhciB0YXJnZXRCbG9jayA9IHRoaXMuZW5kQWN0aXZlV2luZG93IC0gdGhpcy5zdGFydERhdGFzZXQsXG5cdCAgICAgICAgICAgIGkgPSAwLFxuXHQgICAgICAgICAgICBqID0gMCxcblx0ICAgICAgICAgICAgYWN0aXZlV2luZG93ID0gdGhpcy5lbmRBY3RpdmVXaW5kb3cgLSB0aGlzLnN0YXJ0QWN0aXZlV2luZG93LFxuXHQgICAgICAgICAgICBjb3VudCA9IDA7XG5cdCAgICAgICAgdGhpcy5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzID0gW107XG5cdCAgICAgICAgZm9yIChpID0gMDsgaSA8IHRoaXMudGltZVBlcmlvZHMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICAgIC8vIGNoZWNraW5nIHdoZXRoZXIgdGhlIHVuaXQgaXMgYXBwbGljYWJsZSBmb3IgdGhlIGN1cnJlbnQgdGFyZ2V0IGJsb2NrXG5cdCAgICAgICAgICBpZiAodGFyZ2V0QmxvY2sgLyB0aGlzLnRpbWVQZXJpb2RzW2ldLmludGVydmFsID49IDEpIHtcblx0ICAgICAgICAgICAgLy8gY2hlY2tpbmcgd2hldGhlciB0aGUgdW5pdCBpcyBvZiB0aGUgaGlnaGVyIG9yZGVyIGFuZCBvbmx5IG11bHRpcGxpZXIgMSBpcyBhcHBsaWNhYmxlXG5cdCAgICAgICAgICAgIGlmIChNYXRoLmZsb29yKGFjdGl2ZVdpbmRvdyAvIHRoaXMudGltZVBlcmlvZHNbaV0uaW50ZXJ2YWwpIDwgMSkge1xuXHQgICAgICAgICAgICAgIHRoaXMuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kcy5wdXNoKHtcblx0ICAgICAgICAgICAgICAgICdhYmJyZXZpYXRpb24nOiB0aGlzLnRpbWVQZXJpb2RzW2ldLmFiYnJldmlhdGlvbi5zaW5nbGUsXG5cdCAgICAgICAgICAgICAgICAnZGVzY3JpcHRpb24nOiB0aGlzLnRpbWVQZXJpb2RzW2ldLmRlc2NyaXB0aW9uLFxuXHQgICAgICAgICAgICAgICAgJ21pbGxpc2Vjb25kcyc6IHRoaXMudGltZVBlcmlvZHNbaV0uaW50ZXJ2YWwsXG5cdCAgICAgICAgICAgICAgICAnbmFtZSc6IHRoaXMudGltZVBlcmlvZHNbaV0ubmFtZSxcblx0ICAgICAgICAgICAgICAgICdtdWx0aXBsaWVycyc6IFsxXVxuXHQgICAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgIC8vIGlmIHRoZSB1bml0IGlzIG9mIHRoZSBvcmRlciBvZiB0aGUgdGFyZ2V0IGJsb2NrIGFuZCBjYWxjdWxhdGluZyB0aGUgbXVsdGlwbGllcnNcblx0ICAgICAgICAgICAgICB0aGlzLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHMucHVzaCh7XG5cdCAgICAgICAgICAgICAgICAnYWJicmV2aWF0aW9uJzogdGhpcy50aW1lUGVyaW9kc1tpXS5hYmJyZXZpYXRpb24uc2luZ2xlLFxuXHQgICAgICAgICAgICAgICAgJ2Rlc2NyaXB0aW9uJzogdGhpcy50aW1lUGVyaW9kc1tpXS5kZXNjcmlwdGlvbixcblx0ICAgICAgICAgICAgICAgICdtaWxsaXNlY29uZHMnOiB0aGlzLnRpbWVQZXJpb2RzW2ldLmludGVydmFsLFxuXHQgICAgICAgICAgICAgICAgJ25hbWUnOiB0aGlzLnRpbWVQZXJpb2RzW2ldLm5hbWUsXG5cdCAgICAgICAgICAgICAgICAnbXVsdGlwbGllcnMnOiBbXVxuXHQgICAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICAgIC8vIGNhbGN1bGF0aW5nIGFuZCBwb3B1bGF0aW5nIHRoZSBhcHBsaWNhYmxlIG11bHRwbGllcnMgb2YgZWFjaCB1bml0XG5cdCAgICAgICAgICAgICAgZm9yIChqID0gMDsgaiA8IHRoaXMudGltZVBlcmlvZHNbaV0ubXVsdGlwbGllcnMubGVuZ3RoOyBqKyspIHtcblx0ICAgICAgICAgICAgICAgIGlmIChhY3RpdmVXaW5kb3cgLyB0aGlzLnJhdGlvIDwgdGhpcy50aW1lUGVyaW9kc1tpXS5tdWx0aXBsaWVyc1tqXSAqIHRoaXMudGltZVBlcmlvZHNbaV0uaW50ZXJ2YWwpIHtcblx0ICAgICAgICAgICAgICAgICAgdGhpcy5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW3RoaXMuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kcy5sZW5ndGggLSAxXS5tdWx0aXBsaWVycy5wdXNoKHRoaXMudGltZVBlcmlvZHNbaV0ubXVsdGlwbGllcnNbal0pO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLm5vQ2FsY0J1dHRvbnMgPSBJbmZpbml0eTtcblx0ICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgICBmb3IgKGogPSAwOyBqIDwgdGhpcy5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW2ldLm11bHRpcGxpZXJzLmxlbmd0aDsgaisrKSB7XG5cdCAgICAgICAgICAgICsrY291bnQ7XG5cdCAgICAgICAgICAgIGlmICh0aGlzLm5vQ2FsY0J1dHRvbnMgPiBpKSB7XG5cdCAgICAgICAgICAgICAgdGhpcy5ub0NhbGNCdXR0b25zID0gaTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBpZiAoY291bnQgPD0gNCkge1xuXHQgICAgICAgICAgICAgIHRoaXMuc3RhcnRQb2ludE11bHRpcGxpZXIgPSBqO1xuXHQgICAgICAgICAgICAgIHRoaXMuc3RhcnRQb2ludFVuaXQgPSBpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICAvLyB0aGlzLmRyYXdCdXR0b25zQ2FsY3VsYXRlZCh0aGlzLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHMpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICAvKipcblx0ICAgICAgICogQSBmdW5jdGlvbiB0byBnZW5lcmF0ZSB0aGUgY29udGV4dHVhbCBidXR0b25zIHVzaW5nXG5cdCAgICAgICAqIHRoZSBlbmQgcG9pbnQgb2YgdGhlIHRpbWUtc2NhbGVcblx0ICAgICAgICovXG5cdFxuXHQgICAgfSwge1xuXHQgICAgICBrZXk6ICdnZW5lcmF0ZUNvbnRleHR1YWxCdXR0b25zJyxcblx0ICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdlbmVyYXRlQ29udGV4dHVhbEJ1dHRvbnMoKSB7XG5cdCAgICAgICAgLy8gZ2VuZXJhdGluZyBhbiBhcnJheSB3aXRoIGFwcGxpY2FibGUgVEQgYnV0dG9uc1xuXHQgICAgICAgIHZhciBidXR0b25zID0gW10sXG5cdCAgICAgICAgICAgIGkgPSAwLFxuXHQgICAgICAgICAgICBlbmRTdGFtcCA9IHRoaXMuZ2xvYmFsUmVhY3RpdmVNb2RlbC5tb2RlbFsneC1heGlzLWFic29sdXRlLXJhbmdlLWVuZCddLFxuXHQgICAgICAgICAgICBkYXRlU3RhcnQgPSBlbmRTdGFtcCAtIDIsXG5cdCAgICAgICAgICAgIGRhdGVFbmQgPSBlbmRTdGFtcCxcblx0ICAgICAgICAgICAgcmVsYXRpdmVUREJ1dHRvbiA9IHt9O1xuXHQgICAgICAgIGZvciAoOyBpIDwgdGhpcy50ZEJ1dHRvbnMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICAgIGRhdGVTdGFydCA9IG5ldyBEYXRlKGVuZFN0YW1wKTtcblx0ICAgICAgICAgIGlmICh0aGlzLnRkQnV0dG9uc1tpXS5uYW1lID09PSAnWVREJykge1xuXHQgICAgICAgICAgICBkYXRlU3RhcnQuc2V0TW9udGgoMCk7XG5cdCAgICAgICAgICAgIGRhdGVTdGFydC5zZXREYXRlKDEpO1xuXHQgICAgICAgICAgICBkYXRlU3RhcnQuc2V0SG91cnMoMCk7XG5cdCAgICAgICAgICAgIGRhdGVTdGFydC5zZXRNaW51dGVzKDApO1xuXHQgICAgICAgICAgICBkYXRlU3RhcnQuc2V0U2Vjb25kcygwKTtcblx0ICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy50ZEJ1dHRvbnNbaV0ubmFtZSA9PT0gJ01URCcpIHtcblx0ICAgICAgICAgICAgZGF0ZVN0YXJ0LnNldERhdGUoMSk7XG5cdCAgICAgICAgICAgIGRhdGVTdGFydC5zZXRIb3VycygwKTtcblx0ICAgICAgICAgICAgZGF0ZVN0YXJ0LnNldE1pbnV0ZXMoMCk7XG5cdCAgICAgICAgICAgIGRhdGVTdGFydC5zZXRTZWNvbmRzKDApO1xuXHQgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnRkQnV0dG9uc1tpXS5uYW1lID09PSAnUVREJykge1xuXHQgICAgICAgICAgICBkYXRlU3RhcnQuc2V0TW9udGgoMTEgLSBkYXRlU3RhcnQuZ2V0TW9udGgoKSAlIDQpO1xuXHQgICAgICAgICAgICBkYXRlU3RhcnQuc2V0RGF0ZSgwKTtcblx0ICAgICAgICAgICAgZGF0ZVN0YXJ0LnNldEhvdXJzKDApO1xuXHQgICAgICAgICAgICBkYXRlU3RhcnQuc2V0TWludXRlcygwKTtcblx0ICAgICAgICAgICAgZGF0ZVN0YXJ0LnNldFNlY29uZHMoMCk7XG5cdCAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMudGRCdXR0b25zW2ldLm5hbWUgPT09ICdXVEQnKSB7XG5cdCAgICAgICAgICAgIGRhdGVTdGFydC5zZXREYXRlKGRhdGVTdGFydC5nZXREYXRlKCkgLSBkYXRlU3RhcnQuZ2V0RGF5KCkpO1xuXHQgICAgICAgICAgICBkYXRlU3RhcnQuc2V0SG91cnMoMCk7XG5cdCAgICAgICAgICAgIGRhdGVTdGFydC5zZXRNaW51dGVzKDApO1xuXHQgICAgICAgICAgICBkYXRlU3RhcnQuc2V0U2Vjb25kcygwKTtcblx0ICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy50ZEJ1dHRvbnNbaV0ubmFtZSA9PT0gJ1knKSB7XG5cdCAgICAgICAgICAgIGRhdGVTdGFydC5zZXRIb3VycygwKTtcblx0ICAgICAgICAgICAgZGF0ZVN0YXJ0LnNldE1pbnV0ZXMoMCk7XG5cdCAgICAgICAgICAgIGRhdGVTdGFydC5zZXRTZWNvbmRzKDApO1xuXHQgICAgICAgICAgICBkYXRlU3RhcnQgLT0gODY0MDAwMDA7XG5cdCAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMudGRCdXR0b25zW2ldLm5hbWUgPT09ICdUJykge1xuXHQgICAgICAgICAgICBkYXRlU3RhcnQuc2V0SG91cnMoMCk7XG5cdCAgICAgICAgICAgIGRhdGVTdGFydC5zZXRNaW51dGVzKDApO1xuXHQgICAgICAgICAgICBkYXRlU3RhcnQuc2V0U2Vjb25kcygwKTtcblx0ICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICBpZiAoZGF0ZUVuZCA8IGRhdGVTdGFydCkge1xuXHQgICAgICAgICAgICBjb250aW51ZTtcblx0ICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIHRoaXMudGRCdXR0b25zW2ldLmRhdGVTdGFydCA9IGRhdGVTdGFydC52YWx1ZU9mKCk7XG5cdCAgICAgICAgICAgIHRoaXMudGRCdXR0b25zW2ldLmRhdGVFbmQgPSBkYXRlRW5kLnZhbHVlT2YoKTtcblx0ICAgICAgICAgICAgYnV0dG9ucy5wdXNoKHRoaXMudGRCdXR0b25zW2ldKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgcmVsYXRpdmVUREJ1dHRvbi5taWxsaXNlY29uZHMgPSBJbmZpbml0eTtcblx0ICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy50ZEJ1dHRvbnMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICAgIGlmIChNYXRoLmFicyh0aGlzLnRkQnV0dG9uc1tpXS5taWxsaXNlY29uZHMgLSAodGhpcy5lbmRBY3RpdmVXaW5kb3cgLSB0aGlzLnN0YXJ0QWN0aXZlV2luZG93KSkgPCByZWxhdGl2ZVREQnV0dG9uLm1pbGxpc2Vjb25kcykge1xuXHQgICAgICAgICAgICByZWxhdGl2ZVREQnV0dG9uLm1pbGxpc2Vjb25kcyA9IHRoaXMudGRCdXR0b25zW2ldLm1pbGxpc2Vjb25kcztcblx0ICAgICAgICAgICAgcmVsYXRpdmVUREJ1dHRvbi5uYW1lID0gdGhpcy50ZEJ1dHRvbnNbaV0uYWJicmV2aWF0aW9uO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgdGhpcy5zdGFuZGFyZENvbnRleHVhbFBlcmlvZHMgPSBidXR0b25zO1xuXHQgICAgICAgIC8vIHRoaXMuZHJhd0J1dHRvbnNDb250ZXh0dWFsKHRoaXMuc3RhbmRhcmRDb250ZXh1YWxQZXJpb2RzKTtcblx0ICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICBrZXk6ICdwcm9jZXNzTXVsdGlwbGllcnMnLFxuXHQgICAgICB2YWx1ZTogZnVuY3Rpb24gcHJvY2Vzc011bHRpcGxpZXJzKHRpbWVBcnIpIHtcblx0ICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRpbWVBcnIubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICAgIHZhciBsZW4gPSB0aW1lQXJyW2ldLnBvc3NpYmxlRmFjdG9ycy5sZW5ndGg7XG5cdCAgICAgICAgICB0aW1lQXJyW2ldLm11bHRpcGxpZXJzID0gW107XG5cdCAgICAgICAgICBpZiAobGVuID09PSAxKSB7XG5cdCAgICAgICAgICAgIHRpbWVBcnJbaV0ubXVsdGlwbGllcnMucHVzaCh0aW1lQXJyW2ldLnBvc3NpYmxlRmFjdG9yc1swXSk7XG5cdCAgICAgICAgICB9IGVsc2UgaWYgKGxlbiA9PT0gMikge1xuXHQgICAgICAgICAgICB0aW1lQXJyW2ldLm11bHRpcGxpZXJzLnB1c2godGltZUFycltpXS5wb3NzaWJsZUZhY3RvcnNbMF0pO1xuXHQgICAgICAgICAgICB0aW1lQXJyW2ldLm11bHRpcGxpZXJzLnB1c2godGltZUFycltpXS5wb3NzaWJsZUZhY3RvcnNbbGVuIC0gMV0pO1xuXHQgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgdGltZUFycltpXS5tdWx0aXBsaWVycy5wdXNoKHRpbWVBcnJbaV0ucG9zc2libGVGYWN0b3JzWzBdKTtcblx0ICAgICAgICAgICAgdGltZUFycltpXS5tdWx0aXBsaWVycy5wdXNoKE1hdGguZmxvb3IodGltZUFycltpXS5wb3NzaWJsZUZhY3RvcnNbbGVuIC0gMV0gLyAyKSk7XG5cdCAgICAgICAgICAgIHRpbWVBcnJbaV0ubXVsdGlwbGllcnMucHVzaCh0aW1lQXJyW2ldLnBvc3NpYmxlRmFjdG9yc1tsZW4gLSAxXSk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVybiB0aW1lQXJyO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICAvKipcblx0ICAgICAgICogQSBmdW5jdGlvbiB0byBzZXQgdGhlIGFjdGl2ZSBwZXJpb2Qnc1xuXHQgICAgICAgKiBzdGFydCBhbmQgZW5kIHBvaW50XG5cdCAgICAgICAqIEBwYXJhbSAge251bWJlcn0gZGF0ZSBzdGFtcCAtIEEgVU5JWCB0aW1lc3RhbXAgdG8gYmUgc2V0IGFzIHRoZSBzdGFydCBwb2ludCBvZiBhY3RpdmUgcGVyaW9kXG5cdCAgICAgICAqIEBwYXJhbSAge251bWJlcn0gZGF0ZSBzdGFtcCAtIEEgVU5JWCB0aW1lc3RhbXAgdG8gYmUgc2V0IGFzIHRoZSBlbmQgcG9pbnQgb2YgYWN0aXZlIHBlcmlvZFxuXHQgICAgICAgKi9cblx0XG5cdCAgICB9LCB7XG5cdCAgICAgIGtleTogJ3NldEFjdGl2ZVBlcmlvZCcsXG5cdCAgICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRBY3RpdmVQZXJpb2QoKSB7XG5cdCAgICAgICAgdmFyIHN0YXJ0LFxuXHQgICAgICAgICAgICBlbmQsXG5cdCAgICAgICAgICAgIHRlbXAgPSB3aW5kb3cucGVyZm9ybWFuY2Uubm93KCk7XG5cdCAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEpIHtcblx0ICAgICAgICAgIGVuZCA9IHRoaXMuZ2xvYmFsUmVhY3RpdmVNb2RlbC5tb2RlbFsneC1heGlzLXZpc2libGUtcmFuZ2UtZW5kJ107XG5cdCAgICAgICAgICBzdGFydCA9IGVuZCAtIGFyZ3VtZW50c1swXTtcblx0ICAgICAgICB9IGVsc2UgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDIpIHtcblx0ICAgICAgICAgIHN0YXJ0ID0gYXJndW1lbnRzWzBdO1xuXHQgICAgICAgICAgZW5kID0gYXJndW1lbnRzWzFdO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLnN0YXJ0QWN0aXZlV2luZG93ID0gc3RhcnQ7XG5cdCAgICAgICAgdGhpcy5lbmRBY3RpdmVXaW5kb3cgPSBlbmQ7XG5cdCAgICAgICAgdGhpcy5nZW5lcmF0ZUNhbGN1bGF0ZWRCdXR0b25zKCk7XG5cdCAgICAgICAgdGhpcy5nbG9iYWxSZWFjdGl2ZU1vZGVsLm1vZGVsWyd4LWF4aXMtdmlzaWJsZS1yYW5nZS1zdGFydCddID0gdGhpcy5zdGFydEFjdGl2ZVdpbmRvdztcblx0ICAgICAgICB0aGlzLmdsb2JhbFJlYWN0aXZlTW9kZWwubW9kZWxbJ3gtYXhpcy12aXNpYmxlLXJhbmdlLWVuZCddID0gdGhpcy5lbmRBY3RpdmVXaW5kb3c7XG5cdCAgICAgICAgdGhpcy5nZW5lcmF0ZUNvbnRleHR1YWxCdXR0b25zKCk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8qKlxuXHQgICAgICAgKiBBIGZ1bmN0aW9uIHRvIHNldCB0aGUgc3RhcnQgYW5kIGVuZCBwb2ludCBvZiB0aGVcblx0ICAgICAgICogZW50aXJlIHRpbWUtbGluZVxuXHQgICAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IGRhdGUgc3RhbXAgLSBBIFVOSVggdGltZXN0YW1wIHRvIGJlIHNldCBhcyB0aGUgc3RhcnQgcG9pbnQgb2YgdGltZS1saW5lXG5cdCAgICAgICAqIEBwYXJhbSAge251bWJlcn0gZGF0ZSBzdGFtcCAtIEEgVU5JWCB0aW1lc3RhbXAgdG8gYmUgc2V0IGFzIHRoZSBlbmQgcG9pbnQgb2YgdGltZS1saW5lXG5cdCAgICAgICAqL1xuXHRcblx0ICAgICAgLyoqXG5cdCAgICAgICAqIEEgZnVuY3Rpb24gdG8gc2V0IHRoZSBvYmplY3QgdG8gc2V0IHRoZSB1c2VyIHByZWZlcmVuY2VzXG5cdCAgICAgICAqL1xuXHRcblx0ICAgIH0sIHtcblx0ICAgICAga2V5OiAnY29uZmlndXJlJyxcblx0ICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNvbmZpZ3VyZShjb25maWcpIHtcblx0ICAgICAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcblx0ICAgICAgfVxuXHRcblx0ICAgICAgLyoqXG5cdCAgICAgICAqIEZ1c2lvbmNoYXJ0cyBsaWZlIGN5Y2xlIG1ldGhvZCBmb3IgZXh0ZW5zaW9uXG5cdCAgICAgICAqL1xuXHRcblx0ICAgIH0sIHtcblx0ICAgICAga2V5OiAnaW5pdCcsXG5cdCAgICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0KHJlcXVpcmUpIHtcblx0ICAgICAgICB2YXIgaW5zdGFuY2UgPSB0aGlzO1xuXHQgICAgICAgIHJlcXVpcmUoWyd4QXhpcycsICd5QXhpcycsICdncmFwaGljcycsICdjaGFydCcsICdkYXRhc2V0JywgJ1Bsb3RNYW5hZ2VyJywgJ2NhbnZhc0NvbmZpZycsICdNYXJrZXJNYW5hZ2VyJywgJ3JlYWN0aXZlTW9kZWwnLCAnZ2xvYmFsUmVhY3RpdmVNb2RlbCcsICdzcGFjZU1hbmFnZXJJbnN0YW5jZScsICdzbWFydExhYmVsJywgJ2V4dERhdGEnLCAnY2hhcnRJbnN0YW5jZScsIGZ1bmN0aW9uICh4QXhpcywgeUF4aXMsIGdyYXBoaWNzLCBjaGFydCwgZGF0YXNldCwgcGxvdE1hbmFnZXIsIGNhbnZhc0NvbmZpZywgbWFya2VyTWFuYWdlciwgcmVhY3RpdmVNb2RlbCwgZ2xvYmFsUmVhY3RpdmVNb2RlbCwgc3BhY2VNYW5hZ2VySW5zdGFuY2UsIHNtYXJ0TGFiZWwsIGV4dERhdGEsIGNoYXJ0SW5zdGFuY2UpIHtcblx0ICAgICAgICAgIGluc3RhbmNlLnhBeGlzID0geEF4aXM7XG5cdCAgICAgICAgICBpbnN0YW5jZS55QXhpcyA9IHlBeGlzO1xuXHQgICAgICAgICAgaW5zdGFuY2UuZ3JhcGhpY3MgPSBncmFwaGljcztcblx0ICAgICAgICAgIGluc3RhbmNlLmNoYXJ0ID0gY2hhcnQ7XG5cdCAgICAgICAgICBpbnN0YW5jZS5kYXRhc2V0ID0gZGF0YXNldDtcblx0ICAgICAgICAgIGluc3RhbmNlLnBsb3RNYW5hZ2VyID0gcGxvdE1hbmFnZXI7XG5cdCAgICAgICAgICBpbnN0YW5jZS5tYXJrZXJNYW5hZ2VyID0gbWFya2VyTWFuYWdlcjtcblx0ICAgICAgICAgIGluc3RhbmNlLmNhbnZhc0NvbmZpZyA9IGNhbnZhc0NvbmZpZztcblx0ICAgICAgICAgIGluc3RhbmNlLnJlYWN0aXZlTW9kZWwgPSByZWFjdGl2ZU1vZGVsO1xuXHQgICAgICAgICAgaW5zdGFuY2UuZ2xvYmFsUmVhY3RpdmVNb2RlbCA9IGdsb2JhbFJlYWN0aXZlTW9kZWw7XG5cdCAgICAgICAgICBpbnN0YW5jZS5zcGFjZU1hbmFnZXJJbnN0YW5jZSA9IHNwYWNlTWFuYWdlckluc3RhbmNlO1xuXHQgICAgICAgICAgaW5zdGFuY2Uuc21hcnRMYWJlbCA9IHNtYXJ0TGFiZWw7XG5cdCAgICAgICAgICBpbnN0YW5jZS5leHREYXRhID0gZXh0RGF0YTtcblx0ICAgICAgICAgIGluc3RhbmNlLmNoYXJ0SW5zdGFuY2UgPSBjaGFydEluc3RhbmNlO1xuXHQgICAgICAgIH1dKTtcblx0ICAgICAgICB0aGlzLnNwYWNlTWFuYWdlckluc3RhbmNlID0gaW5zdGFuY2Uuc3BhY2VNYW5hZ2VySW5zdGFuY2U7XG5cdCAgICAgICAgdGhpcy5nbG9iYWxSZWFjdGl2ZU1vZGVsID0gaW5zdGFuY2UuZ2xvYmFsUmVhY3RpdmVNb2RlbDtcblx0ICAgICAgICB0aGlzLmVuZEFjdGl2ZVdpbmRvdyA9IGluc3RhbmNlLmdsb2JhbFJlYWN0aXZlTW9kZWwubW9kZWxbJ3gtYXhpcy12aXNpYmxlLXJhbmdlLWVuZCddO1xuXHQgICAgICAgIHRoaXMuc3RhcnRBY3RpdmVXaW5kb3cgPSBpbnN0YW5jZS5nbG9iYWxSZWFjdGl2ZU1vZGVsLm1vZGVsWyd4LWF4aXMtdmlzaWJsZS1yYW5nZS1zdGFydCddO1xuXHQgICAgICAgIHRoaXMuc3RhcnREYXRhc2V0ID0gaW5zdGFuY2UuZ2xvYmFsUmVhY3RpdmVNb2RlbC5tb2RlbFsneC1heGlzLWFic29sdXRlLXJhbmdlLXN0YXJ0J107XG5cdCAgICAgICAgdGhpcy5lbmREYXRhc2V0ID0gaW5zdGFuY2UuZ2xvYmFsUmVhY3RpdmVNb2RlbC5tb2RlbFsneC1heGlzLWFic29sdXRlLXJhbmdlLWVuZCddO1xuXHQgICAgICAgIC8vIGluc3RhbmNlLmdsb2JhbFJlYWN0aXZlTW9kZWwubW9kZWxbJ194LWF4aXMtdmlzaWJsZS1yYW5nZS1zdGFydCddICs9IDEyNDQxNjAwMDAwMDtcblx0ICAgICAgICB0aGlzLnRpbWVSdWxlcyA9IHRoaXMuY2hhcnRJbnN0YW5jZS5hcGlJbnN0YW5jZS5nZXRDb21wb25lbnRTdG9yZSgpO1xuXHQgICAgICAgIHRoaXMudGltZVJ1bGVzID0gdGhpcy50aW1lUnVsZXMuZ2V0Q2FudmFzQnlJbmRleCgwKS5jb21wb3NpdGlvbi5pbXBsO1xuXHQgICAgICAgIHRoaXMudGltZVJ1bGVzID0gdGhpcy50aW1lUnVsZXMuZ2V0RGF0YUFnZ3JlZ2F0b3IoKTtcblx0ICAgICAgICB0aGlzLnRpbWVSdWxlcyA9IHRoaXMudGltZVJ1bGVzLmdldEFnZ3JlZ2F0aW9uVGltZVJ1bGVzKCk7XG5cdCAgICAgICAgdGhpcy50aW1lUGVyaW9kcyA9IHRoaXMucHJvY2Vzc011bHRpcGxpZXJzKHRoaXMudGltZVJ1bGVzKTtcblx0ICAgICAgICB0aGlzLnNldEFjdGl2ZVBlcmlvZCh0aGlzLnN0YXJ0QWN0aXZlV2luZG93LCB0aGlzLmVuZEFjdGl2ZVdpbmRvdyk7XG5cdCAgICAgICAgdGhpcy50b29sYmFycyA9IFtdO1xuXHQgICAgICAgIHRoaXMubWVhc3VyZW1lbnQgPSB7fTtcblx0ICAgICAgICB0aGlzLmZsYWcgPSB0cnVlO1xuXHRcblx0ICAgICAgICB0aGlzLnRvb2xiYXJzLnB1c2godGhpcy5jcmVhdGVUb29sYmFyKCkpO1xuXHRcblx0ICAgICAgICB0aGlzLmdsb2JhbFJlYWN0aXZlTW9kZWwub25Qcm9wc0NoYW5nZShbJ3gtYXhpcy12aXNpYmxlLXJhbmdlLXN0YXJ0JywgJ3gtYXhpcy12aXNpYmxlLXJhbmdlLWVuZCddLCBmdW5jdGlvbiAoc3RhcnQsIGVuZCkge1xuXHQgICAgICAgICAgaWYgKGluc3RhbmNlLmZsYWcpIHtcblx0ICAgICAgICAgICAgaW5zdGFuY2UuZmxhZyA9IGZhbHNlO1xuXHQgICAgICAgICAgICBpbnN0YW5jZS5zZXRBY3RpdmVQZXJpb2Qoc3RhcnRbMV0sIGVuZFsxXSk7XG5cdCAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaW5zdGFuY2Uuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kcy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgaW5zdGFuY2Uuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kc1tpXS5tdWx0aXBsaWVycy5sZW5ndGg7IGorKykge1xuXHQgICAgICAgICAgICAgICAgaWYgKGVuZFsxXSAtIHN0YXJ0WzFdID49IGluc3RhbmNlLnRpbWVQZXJpb2RzW2ldLm11bHRpcGxpZXJzW2pdICogaW5zdGFuY2UudGltZVBlcmlvZHNbaV0uaW50ZXJ2YWwpIHtcblx0ICAgICAgICAgICAgICAgICAgaW5zdGFuY2UuY2xpY2tlZElkID0gaW5zdGFuY2UudGltZVBlcmlvZHNbaV0ubXVsdGlwbGllcnNbal0gKyBpbnN0YW5jZS50aW1lUGVyaW9kc1tpXS5hYmJyZXZpYXRpb24uc2luZ2xlO1xuXHQgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhpbnN0YW5jZS5jbGlja2VkSWQpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBpbnN0YW5jZS50b29sYmFyLmRpc3Bvc2UoKTtcblx0ICAgICAgICAgICAgaW5zdGFuY2UudG9vbGJhcnMucG9wKCk7XG5cdCAgICAgICAgICAgIGluc3RhbmNlLnRvb2xiYXJzLnB1c2goaW5zdGFuY2UuY3JlYXRlVG9vbGJhcigpKTtcblx0ICAgICAgICAgICAgaW5zdGFuY2UuZ2V0TG9naWNhbFNwYWNlKCk7XG5cdCAgICAgICAgICAgIGluc3RhbmNlLmRyYXcoKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9KTtcblx0ICAgICAgICByZXR1cm4gdGhpcztcblx0ICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICBrZXk6ICdjcmVhdGVUb29sYmFyJyxcblx0ICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZVRvb2xiYXIoKSB7XG5cdCAgICAgICAgdmFyIF90aGlzID0gdGhpcztcblx0XG5cdCAgICAgICAgdmFyIHVuaWdyb3VwLFxuXHQgICAgICAgICAgICB0b29sYmFyLFxuXHQgICAgICAgICAgICBjYWxjdWxhdGVkQnV0dG9ucyxcblx0ICAgICAgICAgICAgY29udGV4dHVhbEJ1dHRvbnMsXG5cdCAgICAgICAgICAgIGFsbEJ1dHRvbixcblx0ICAgICAgICAgICAgc2VsZiA9IHRoaXMsXG5cdCAgICAgICAgICAgIGRlZHVjdG9yQXIgPSBbXSxcblx0ICAgICAgICAgICAgc3RhcnRNdWx0aXBsaWVyLFxuXHQgICAgICAgICAgICBkZWR1Y3Rvcixcblx0ICAgICAgICAgICAgaSxcblx0ICAgICAgICAgICAgaixcblx0ICAgICAgICAgICAgbWFyZ2luLFxuXHQgICAgICAgICAgICBmcm9tRGF0ZUxhYmVsLFxuXHQgICAgICAgICAgICBncm91cDtcblx0XG5cdCAgICAgICAgZ3JvdXAgPSBuZXcgdGhpcy50b29sYm94LkNvbXBvbmVudEdyb3VwKHtcblx0ICAgICAgICAgIHBhcGVyOiB0aGlzLmdyYXBoaWNzLnBhcGVyLFxuXHQgICAgICAgICAgY2hhcnQ6IHRoaXMuY2hhcnQsXG5cdCAgICAgICAgICBzbWFydExhYmVsOiB0aGlzLnNtYXJ0TGFiZWwsXG5cdCAgICAgICAgICBjaGFydENvbnRhaW5lcjogdGhpcy5ncmFwaGljcy5jb250YWluZXJcblx0ICAgICAgICB9KTtcblx0XG5cdCAgICAgICAgdW5pZ3JvdXAgPSBuZXcgdGhpcy50b29sYm94LlVuaVNlbGVjdENvbXBvbmVudEdyb3VwKHtcblx0ICAgICAgICAgIHBhcGVyOiB0aGlzLmdyYXBoaWNzLnBhcGVyLFxuXHQgICAgICAgICAgY2hhcnQ6IHRoaXMuY2hhcnQsXG5cdCAgICAgICAgICBzbWFydExhYmVsOiB0aGlzLnNtYXJ0TGFiZWwsXG5cdCAgICAgICAgICBjaGFydENvbnRhaW5lcjogdGhpcy5ncmFwaGljcy5jb250YWluZXJcblx0ICAgICAgICB9KTtcblx0ICAgICAgICB1bmlncm91cC5zZXRDb25maWcoe1xuXHQgICAgICAgICAgZmlsbDogJyNmZmYnLFxuXHQgICAgICAgICAgYm9yZGVyVGhpY2tuZXNzOiAwXG5cdCAgICAgICAgfSk7XG5cdCAgICAgICAgZ3JvdXAuc2V0Q29uZmlnKHtcblx0ICAgICAgICAgIGZpbGw6ICcjZmZmJyxcblx0ICAgICAgICAgIGJvcmRlclRoaWNrbmVzczogMFxuXHQgICAgICAgIH0pO1xuXHQgICAgICAgIHRvb2xiYXIgPSBuZXcgdGhpcy5Ib3Jpem9udGFsVG9vbGJhcih7XG5cdCAgICAgICAgICBwYXBlcjogdGhpcy5ncmFwaGljcy5wYXBlcixcblx0ICAgICAgICAgIGNoYXJ0OiB0aGlzLmNoYXJ0LFxuXHQgICAgICAgICAgc21hcnRMYWJlbDogdGhpcy5zbWFydExhYmVsLFxuXHQgICAgICAgICAgY2hhcnRDb250YWluZXI6IHRoaXMuZ3JhcGhpY3MuY29udGFpbmVyXG5cdCAgICAgICAgfSk7XG5cdCAgICAgICAgdG9vbGJhci5zZXRDb25maWcoe1xuXHQgICAgICAgICAgZmlsbDogJyNmZmYnLFxuXHQgICAgICAgICAgYm9yZGVyVGhpY2tuZXNzOiAwXG5cdCAgICAgICAgfSk7XG5cdCAgICAgICAgZnJvbURhdGVMYWJlbCA9IG5ldyB0aGlzLnRvb2xib3guTGFiZWwoJ1pvb206Jywge1xuXHQgICAgICAgICAgc21hcnRMYWJlbDogdGhpcy5zbWFydExhYmVsLFxuXHQgICAgICAgICAgcGFwZXI6IHRoaXMuZ3JhcGhpY3MucGFwZXJcblx0ICAgICAgICB9LCB7XG5cdCAgICAgICAgICB0ZXh0OiB7XG5cdCAgICAgICAgICAgIHN0eWxlOiB7XG5cdCAgICAgICAgICAgICAgJ2ZvbnQtZmFtaWx5JzogJ1wiTHVjaWRhIEdyYW5kZVwiLCBzYW5zLXNlcmlmJyxcblx0ICAgICAgICAgICAgICAnZm9udC1zaXplJzogJzEzJyxcblx0ICAgICAgICAgICAgICAnZmlsbCc6ICcjNjk2OTY5Jyxcblx0ICAgICAgICAgICAgICAnZm9udC13ZWlnaHQnOiAnYm9sZCdcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfSxcblx0ICAgICAgICAgIGNvbnRhaW5lcjoge1xuXHQgICAgICAgICAgICBoZWlnaHQ6IDIyXG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cdCAgICAgICAgZ3JvdXAuYWRkU3ltYm9sKGZyb21EYXRlTGFiZWwpO1xuXHQgICAgICAgIGFsbEJ1dHRvbiA9IG5ldyB0aGlzLnRvb2xib3guU3ltYm9sKCdBTEwnLCB0cnVlLCB7XG5cdCAgICAgICAgICBwYXBlcjogdGhpcy5ncmFwaGljcy5wYXBlcixcblx0ICAgICAgICAgIGNoYXJ0OiB0aGlzLmNoYXJ0LFxuXHQgICAgICAgICAgc21hcnRMYWJlbDogdGhpcy5zbWFydExhYmVsLFxuXHQgICAgICAgICAgY2hhcnRDb250YWluZXI6IHRoaXMuZ3JhcGhpY3MuY29udGFpbmVyXG5cdCAgICAgICAgfSwge1xuXHQgICAgICAgICAgZmlsbDogJyNmZmZmZmYnLFxuXHQgICAgICAgICAgbGFiZWxGaWxsOiAnIzY5Njk2OScsXG5cdCAgICAgICAgICBzeW1ib2xTdHJva2VXaWR0aDogJzInLFxuXHQgICAgICAgICAgc3Ryb2tlOiAnI2NlZDVkNCcsXG5cdCAgICAgICAgICBzdHJva2VXaWR0aDogJzEnLFxuXHQgICAgICAgICAgaG92ZXJGaWxsOiAnI2NlZDVkNCcsXG5cdCAgICAgICAgICBoZWlnaHQ6IDIyLFxuXHQgICAgICAgICAgcmFkaXVzOiAxLFxuXHQgICAgICAgICAgbWFyZ2luOiB7XG5cdCAgICAgICAgICAgIHJpZ2h0OiA1XG5cdCAgICAgICAgICB9LFxuXHQgICAgICAgICAgYnRuVGV4dFN0eWxlOiB7XG5cdCAgICAgICAgICAgICdmb250RmFtaWx5JzogJ1wiTHVjaWRhIEdyYW5kZVwiLCBzYW5zLXNlcmlmJyxcblx0ICAgICAgICAgICAgJ2ZvbnRTaXplJzogJzEzJyxcblx0ICAgICAgICAgICAgJ2ZpbGwnOiAnIzY5Njk2OScsXG5cdCAgICAgICAgICAgICdsaW5lLWhlaWdodCc6ICcxJyxcblx0ICAgICAgICAgICAgJ2xldHRlci1zcGFjaW5nJzogJy0wLjA0ZW0nXG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSkuYXR0YWNoRXZlbnRIYW5kbGVycyh7XG5cdCAgICAgICAgICBjbGljazogZnVuY3Rpb24gY2xpY2soKSB7XG5cdCAgICAgICAgICAgIHNlbGYuc2V0QWN0aXZlUGVyaW9kKHNlbGYuc3RhcnREYXRhc2V0LCBzZWxmLmVuZERhdGFzZXQpO1xuXHQgICAgICAgICAgICB0b29sYmFyLmRpc3Bvc2UoKTtcblx0ICAgICAgICAgICAgc2VsZi5jbGlja2VkSWQgPSAnQUxMJztcblx0ICAgICAgICAgICAgc2VsZi50b29sYmFycy5wb3AoKTtcblx0ICAgICAgICAgICAgc2VsZi50b29sYmFycy5wdXNoKHNlbGYuY3JlYXRlVG9vbGJhcigpKTtcblx0ICAgICAgICAgICAgc2VsZi5nZXRMb2dpY2FsU3BhY2UoKTtcblx0ICAgICAgICAgICAgc2VsZi5kcmF3KCk7XG5cdCAgICAgICAgICAgIC8vIHNlbGYuX3JlZi5yZUFsbG9jYXRlKHNlbGYucGFyZW50R3JvdXApO1xuXHQgICAgICAgICAgfSxcblx0ICAgICAgICAgIHRvb2x0ZXh0OiAnQUxMJ1xuXHQgICAgICAgIH0pO1xuXHRcblx0ICAgICAgICB1bmlncm91cC5hZGRTeW1ib2woYWxsQnV0dG9uKTtcblx0ICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgICBmb3IgKGogPSB0aGlzLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHNbaV0ubXVsdGlwbGllcnMubGVuZ3RoIC0gMTsgaiA+PSAwOyBqLS0pIHtcblx0ICAgICAgICAgICAgZGVkdWN0b3JBci5wdXNoKHNlbGYuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kc1tpXS5tdWx0aXBsaWVyc1tqXSAqIHNlbGYuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kc1tpXS5taWxsaXNlY29uZHMpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgY2FsY3VsYXRlZEJ1dHRvbnMgPSBbXTtcblx0XG5cdCAgICAgICAgdmFyIF9sb29wID0gZnVuY3Rpb24gX2xvb3AoX2kpIHtcblx0ICAgICAgICAgIGlmIChfaSA9PT0gc2VsZi5zdGFydFBvaW50VW5pdCkge1xuXHQgICAgICAgICAgICBzdGFydE11bHRpcGxpZXIgPSBzZWxmLnN0YXJ0UG9pbnRNdWx0aXBsaWVyO1xuXHQgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgc3RhcnRNdWx0aXBsaWVyID0gc2VsZi5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW19pXS5tdWx0aXBsaWVycy5sZW5ndGggLSAxO1xuXHQgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgIHZhciBfbG9vcDMgPSBmdW5jdGlvbiBfbG9vcDMoX2opIHtcblx0ICAgICAgICAgICAgbWFyZ2luID0gX2kgPT09IHNlbGYubm9DYWxjQnV0dG9ucyAmJiBfaiA9PT0gMCA/IDUgOiAwO1xuXHQgICAgICAgICAgICBjYWxjdWxhdGVkQnV0dG9uc1tfaV0gPSBuZXcgX3RoaXMudG9vbGJveC5TeW1ib2woc2VsZi5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW19pXS5tdWx0aXBsaWVyc1tfal0gKyBzZWxmLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHNbX2ldLmFiYnJldmlhdGlvbiwgdHJ1ZSwge1xuXHQgICAgICAgICAgICAgIHBhcGVyOiBfdGhpcy5ncmFwaGljcy5wYXBlcixcblx0ICAgICAgICAgICAgICBjaGFydDogX3RoaXMuY2hhcnQsXG5cdCAgICAgICAgICAgICAgc21hcnRMYWJlbDogX3RoaXMuc21hcnRMYWJlbCxcblx0ICAgICAgICAgICAgICBjaGFydENvbnRhaW5lcjogX3RoaXMuZ3JhcGhpY3MuY29udGFpbmVyXG5cdCAgICAgICAgICAgIH0sIHtcblx0ICAgICAgICAgICAgICBmaWxsOiAnI2ZmZmZmZicsXG5cdCAgICAgICAgICAgICAgbGFiZWxGaWxsOiAnIzY5Njk2OScsXG5cdCAgICAgICAgICAgICAgc3ltYm9sU3Ryb2tlV2lkdGg6ICcyJyxcblx0ICAgICAgICAgICAgICBzdHJva2U6ICcjY2VkNWQ0Jyxcblx0ICAgICAgICAgICAgICBzdHJva2VXaWR0aDogJzEnLFxuXHQgICAgICAgICAgICAgIGhvdmVyRmlsbDogJyNjZWQ1ZDQnLFxuXHQgICAgICAgICAgICAgIGhlaWdodDogMjIsXG5cdCAgICAgICAgICAgICAgcmFkaXVzOiAxLFxuXHQgICAgICAgICAgICAgIG1hcmdpbjoge1xuXHQgICAgICAgICAgICAgICAgcmlnaHQ6IG1hcmdpblxuXHQgICAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgICAgYnRuVGV4dFN0eWxlOiB7XG5cdCAgICAgICAgICAgICAgICAnZm9udEZhbWlseSc6ICdcIkx1Y2lkYSBHcmFuZGVcIiwgc2Fucy1zZXJpZicsXG5cdCAgICAgICAgICAgICAgICAnZm9udFNpemUnOiAnMTMnLFxuXHQgICAgICAgICAgICAgICAgJ2ZpbGwnOiAnIzY5Njk2OScsXG5cdCAgICAgICAgICAgICAgICAnbGluZS1oZWlnaHQnOiAnMScsXG5cdCAgICAgICAgICAgICAgICAnbGV0dGVyLXNwYWNpbmcnOiAnLTAuMDRlbSdcblx0ICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0pLmF0dGFjaEV2ZW50SGFuZGxlcnMoe1xuXHQgICAgICAgICAgICAgICdjbGljayc6IGZ1bmN0aW9uIGNsaWNrKCkge1xuXHQgICAgICAgICAgICAgICAgZGVkdWN0b3IgPSBzZWxmLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHNbX2ldLm11bHRpcGxpZXJzW19qXSAqIHNlbGYuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kc1tfaV0ubWlsbGlzZWNvbmRzO1xuXHQgICAgICAgICAgICAgICAgc2VsZi5jbGlja2VkSWQgPSBzZWxmLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHNbX2ldLm11bHRpcGxpZXJzW19qXSArIHNlbGYuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kc1tfaV0uYWJicmV2aWF0aW9uO1xuXHQgICAgICAgICAgICAgICAgc2VsZi5zZXRBY3RpdmVQZXJpb2QoZGVkdWN0b3IpO1xuXHQgICAgICAgICAgICAgICAgdG9vbGJhci5kaXNwb3NlKCk7XG5cdCAgICAgICAgICAgICAgICBzZWxmLnRvb2xiYXJzLnBvcCgpO1xuXHQgICAgICAgICAgICAgICAgc2VsZi50b29sYmFycy5wdXNoKHNlbGYuY3JlYXRlVG9vbGJhcigpKTtcblx0ICAgICAgICAgICAgICAgIHNlbGYuZ2V0TG9naWNhbFNwYWNlKCk7XG5cdCAgICAgICAgICAgICAgICBzZWxmLmRyYXcoKTtcblx0ICAgICAgICAgICAgICAgIC8vIHNlbGYuX3JlZi5yZUFsbG9jYXRlKHNlbGYucGFyZW50R3JvdXApO1xuXHQgICAgICAgICAgICAgICAgLy8gdGhpcy50b29sYmFyc1t0aGlzLnRvb2xiYXJzLmxlbmd0aCAtIDFdID0gdGhpcy5jcmVhdGVUb29sYmFyKCk7XG5cdCAgICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgICB0b29sdGV4dDogc2VsZi5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW19pXS5tdWx0aXBsaWVyc1tfal0gKyAnICcgKyBzZWxmLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHNbX2ldLmRlc2NyaXB0aW9uXG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICB1bmlncm91cC5hZGRTeW1ib2woY2FsY3VsYXRlZEJ1dHRvbnNbX2ldKTtcblx0ICAgICAgICAgIH07XG5cdFxuXHQgICAgICAgICAgZm9yICh2YXIgX2ogPSBzdGFydE11bHRpcGxpZXI7IF9qID49IDA7IF9qLS0pIHtcblx0ICAgICAgICAgICAgX2xvb3AzKF9qKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9O1xuXHRcblx0ICAgICAgICBmb3IgKHZhciBfaSA9IHNlbGYuc3RhcnRQb2ludFVuaXQ7IF9pID49IDA7IF9pLS0pIHtcblx0ICAgICAgICAgIF9sb29wKF9pKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIGNvbnRleHR1YWxCdXR0b25zID0gW107XG5cdFxuXHQgICAgICAgIHZhciBfbG9vcDIgPSBmdW5jdGlvbiBfbG9vcDIoX2kyKSB7XG5cdCAgICAgICAgICBjb250ZXh0dWFsQnV0dG9uc1tfaTJdID0gbmV3IF90aGlzLnRvb2xib3guU3ltYm9sKF90aGlzLnN0YW5kYXJkQ29udGV4dWFsUGVyaW9kc1tfaTJdLmFiYnJldmlhdGlvbiwgdHJ1ZSwge1xuXHQgICAgICAgICAgICBwYXBlcjogX3RoaXMuZ3JhcGhpY3MucGFwZXIsXG5cdCAgICAgICAgICAgIGNoYXJ0OiBfdGhpcy5jaGFydCxcblx0ICAgICAgICAgICAgc21hcnRMYWJlbDogX3RoaXMuc21hcnRMYWJlbCxcblx0ICAgICAgICAgICAgY2hhcnRDb250YWluZXI6IF90aGlzLmdyYXBoaWNzLmNvbnRhaW5lclxuXHQgICAgICAgICAgfSwge1xuXHQgICAgICAgICAgICBmaWxsOiAnI2ZmZmZmZicsXG5cdCAgICAgICAgICAgIGxhYmVsRmlsbDogJyM2OTY5NjknLFxuXHQgICAgICAgICAgICBzeW1ib2xTdHJva2VXaWR0aDogJzInLFxuXHQgICAgICAgICAgICBzdHJva2U6ICcjY2VkNWQ0Jyxcblx0ICAgICAgICAgICAgc3Ryb2tlV2lkdGg6ICcxJyxcblx0ICAgICAgICAgICAgaGVpZ2h0OiAyMixcblx0ICAgICAgICAgICAgaG92ZXJGaWxsOiAnI2NlZDVkNCcsXG5cdCAgICAgICAgICAgIHJhZGl1czogMSxcblx0ICAgICAgICAgICAgbWFyZ2luOiB7XG5cdCAgICAgICAgICAgICAgcmlnaHQ6IDBcblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgYnRuVGV4dFN0eWxlOiB7XG5cdCAgICAgICAgICAgICAgJ2ZvbnRGYW1pbHknOiAnXCJMdWNpZGEgR3JhbmRlXCIsIHNhbnMtc2VyaWYnLFxuXHQgICAgICAgICAgICAgICdmb250U2l6ZSc6ICcxMycsXG5cdCAgICAgICAgICAgICAgJ2ZpbGwnOiAnIzY5Njk2OScsXG5cdCAgICAgICAgICAgICAgJ2xpbmUtaGVpZ2h0JzogJzEnLFxuXHQgICAgICAgICAgICAgICdsZXR0ZXItc3BhY2luZyc6ICctMC4wNGVtJ1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9KS5hdHRhY2hFdmVudEhhbmRsZXJzKHtcblx0ICAgICAgICAgICAgJ2NsaWNrJzogZnVuY3Rpb24gY2xpY2soKSB7XG5cdCAgICAgICAgICAgICAgc2VsZi5zZXRBY3RpdmVQZXJpb2Qoc2VsZi5zdGFuZGFyZENvbnRleHVhbFBlcmlvZHNbX2kyXS5kYXRlU3RhcnQsIHNlbGYuc3RhbmRhcmRDb250ZXh1YWxQZXJpb2RzW19pMl0uZGF0ZUVuZCk7XG5cdCAgICAgICAgICAgICAgc2VsZi5jbGlja2VkSWQgPSBzZWxmLnN0YW5kYXJkQ29udGV4dWFsUGVyaW9kc1tfaTJdLmFiYnJldmlhdGlvbjtcblx0ICAgICAgICAgICAgICB0b29sYmFyLmRpc3Bvc2UoKTtcblx0ICAgICAgICAgICAgICBzZWxmLnRvb2xiYXJzLnBvcCgpO1xuXHQgICAgICAgICAgICAgIHNlbGYudG9vbGJhcnMucHVzaChzZWxmLmNyZWF0ZVRvb2xiYXIoKSk7XG5cdCAgICAgICAgICAgICAgc2VsZi5nZXRMb2dpY2FsU3BhY2UoKTtcblx0ICAgICAgICAgICAgICBzZWxmLmRyYXcoKTtcblx0ICAgICAgICAgICAgICAvLyBzZWxmLl9yZWYucmVBbGxvY2F0ZShzZWxmLnBhcmVudEdyb3VwKTtcblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgdG9vbHRleHQ6IF90aGlzLnN0YW5kYXJkQ29udGV4dWFsUGVyaW9kc1tfaTJdLmRlc2NyaXB0aW9uXG5cdCAgICAgICAgICB9KTtcblx0ICAgICAgICAgIHVuaWdyb3VwLmFkZFN5bWJvbChjb250ZXh0dWFsQnV0dG9uc1tfaTJdKTtcblx0ICAgICAgICB9O1xuXHRcblx0ICAgICAgICBmb3IgKHZhciBfaTIgPSAwOyBfaTIgPCB0aGlzLnN0YW5kYXJkQ29udGV4dWFsUGVyaW9kcy5sZW5ndGg7IF9pMisrKSB7XG5cdCAgICAgICAgICBfbG9vcDIoX2kyKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIC8vIGJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ0JVVFRPTicpO1xuXHQgICAgICAgIC8vIGJ0bi5pZCA9IHN0YW5kYXJkUGVyaW9kc1tpXS5hYmJyZXZpYXRpb247XG5cdCAgICAgICAgLy8gYnRuLmlubmVySFRNTCA9IHN0YW5kYXJkUGVyaW9kc1tpXS5hYmJyZXZpYXRpb247XG5cdCAgICAgICAgLy8gYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZXZlbnRCdG4uYmluZCh0aGlzLCBzdGFuZGFyZFBlcmlvZHNbaV0pKTtcblx0ICAgICAgICAvLyBjb250ZXh0dWFsQnV0dG9ucy5hcHBlbmRDaGlsZChidG4pO1xuXHRcblx0ICAgICAgICB0aGlzLlN5bWJvbFN0b3JlLnJlZ2lzdGVyKCd0ZXh0Qm94SWNvbicsIGZ1bmN0aW9uICh4LCB5LCByYWQsIHcsIGgsIHBhZFgsIHBhZFkpIHtcblx0ICAgICAgICAgIHZhciB4MSA9IHggLSB3IC8gMiArIHBhZFggLyAyLFxuXHQgICAgICAgICAgICAgIHgyID0geCArIHcgLyAyIC0gcGFkWCAvIDIsXG5cdCAgICAgICAgICAgICAgeTEgPSB5IC0gaCAvIDIgKyBwYWRZIC8gMixcblx0ICAgICAgICAgICAgICB5MiA9IHkgKyBoIC8gMiAtIHBhZFkgLyAyO1xuXHRcblx0ICAgICAgICAgIHJldHVybiBbJ00nLCB4MSwgeTEsICdMJywgeDIsIHkxLCAnTCcsIHgyLCB5MiwgJ0wnLCB4MSwgeTIsICdaJ107XG5cdCAgICAgICAgfSk7XG5cdFxuXHQgICAgICAgIHRvb2xiYXIuYWRkQ29tcG9uZW50KGdyb3VwKTtcblx0ICAgICAgICB0b29sYmFyLmFkZENvbXBvbmVudCh1bmlncm91cCk7XG5cdCAgICAgICAgdGhpcy50b29sYmFyID0gdG9vbGJhcjtcblx0ICAgICAgICByZXR1cm4gdG9vbGJhcjtcblx0ICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICBrZXk6ICdnZXRMb2dpY2FsU3BhY2UnLFxuXHQgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0TG9naWNhbFNwYWNlKCkge1xuXHQgICAgICAgIHZhciBhdmFpbGFibGVXaWR0aCA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogdGhpcy5fcFdpZHRoO1xuXHQgICAgICAgIHZhciBhdmFpbGFibGVIZWlnaHQgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHRoaXMuX3BIZWlnaHQ7XG5cdFxuXHQgICAgICAgIC8vIGF2YWlsYWJsZVdpZHRoIC89IDI7XG5cdCAgICAgICAgdmFyIGxvZ2ljYWxTcGFjZSxcblx0ICAgICAgICAgICAgd2lkdGggPSA0MjAsXG5cdCAgICAgICAgICAgIC8vIHdpZHRoIGhhcmRjb2RlZDsgVE9ETzogbWFrZSBpdCBkeW5hbWljXG5cdCAgICAgICAgaGVpZ2h0ID0gMCxcblx0ICAgICAgICAgICAgaSxcblx0ICAgICAgICAgICAgbG47XG5cdFxuXHQgICAgICAgIGZvciAoaSA9IDAsIGxuID0gdGhpcy50b29sYmFycy5sZW5ndGg7IGkgPCBsbjsgaSsrKSB7XG5cdCAgICAgICAgICBsb2dpY2FsU3BhY2UgPSB0aGlzLnRvb2xiYXJzW2ldLmdldExvZ2ljYWxTcGFjZShhdmFpbGFibGVXaWR0aCwgYXZhaWxhYmxlSGVpZ2h0KTtcblx0ICAgICAgICAgIC8vIHdpZHRoID0gTWF0aC5tYXgobG9naWNhbFNwYWNlLndpZHRoLCB3aWR0aCk7XG5cdCAgICAgICAgICBoZWlnaHQgKz0gbG9naWNhbFNwYWNlLmhlaWdodDtcblx0ICAgICAgICAgIHRoaXMudG9vbGJhcnNbaV0ud2lkdGggPSBsb2dpY2FsU3BhY2Uud2lkdGg7XG5cdCAgICAgICAgICB0aGlzLnRvb2xiYXJzW2ldLmhlaWdodCA9IGxvZ2ljYWxTcGFjZS5oZWlnaHQ7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGhlaWdodCArPSB0aGlzLnBhZGRpbmc7XG5cdCAgICAgICAgcmV0dXJuIHtcblx0ICAgICAgICAgIHdpZHRoOiB3aWR0aCxcblx0ICAgICAgICAgIGhlaWdodDogaGVpZ2h0XG5cdCAgICAgICAgfTtcblx0ICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICBrZXk6ICdnZXREZWZhdWx0R3JvdXAnLFxuXHQgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0RGVmYXVsdEdyb3VwKCkge1xuXHQgICAgICAgIHJldHVybiB0aGlzLnBhcmVudEdyb3VwO1xuXHQgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgIGtleTogJ3BsYWNlSW5DYW52YXMnLFxuXHQgICAgICB2YWx1ZTogZnVuY3Rpb24gcGxhY2VJbkNhbnZhcygpIHtcblx0ICAgICAgICB2YXIgX3NlbGYgPSB0aGlzO1xuXHQgICAgICAgIF9zZWxmLnBhZGRpbmcgPSA1O1xuXHQgICAgICAgIF9zZWxmLnNwYWNlTWFuYWdlckluc3RhbmNlLmFkZChbe1xuXHQgICAgICAgICAgbmFtZTogZnVuY3Rpb24gbmFtZSgpIHtcblx0ICAgICAgICAgICAgcmV0dXJuICdzdGFuZGFyZC1wZXJpb2Qtc2VsZWN0b3ItZXh0Jztcblx0ICAgICAgICAgIH0sXG5cdCAgICAgICAgICByZWY6IGZ1bmN0aW9uIHJlZihvYmopIHtcblx0ICAgICAgICAgICAgcmV0dXJuIG9ialsnMCddO1xuXHQgICAgICAgICAgfSxcblx0ICAgICAgICAgIHNlbGY6IGZ1bmN0aW9uIHNlbGYoKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBfc2VsZjtcblx0ICAgICAgICAgIH0sXG5cdCAgICAgICAgICBwcmlvcml0eTogZnVuY3Rpb24gcHJpb3JpdHkoKSB7XG5cdCAgICAgICAgICAgIHJldHVybiAyO1xuXHQgICAgICAgICAgfSxcblx0ICAgICAgICAgIGxheW91dDogZnVuY3Rpb24gbGF5b3V0KG9iaikge1xuXHQgICAgICAgICAgICByZXR1cm4gb2JqLmlubGluZTtcblx0ICAgICAgICAgIH0sXG5cdCAgICAgICAgICBvcmllbnRhdGlvbjogW3tcblx0ICAgICAgICAgICAgdHlwZTogZnVuY3Rpb24gdHlwZShvYmopIHtcblx0ICAgICAgICAgICAgICByZXR1cm4gb2JqLmhvcml6b250YWw7XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIHBvc2l0aW9uOiBbe1xuXHQgICAgICAgICAgICAgIHR5cGU6IGZ1bmN0aW9uIHR5cGUob2JqKSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gb2JqLnRvcDtcblx0ICAgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICAgIGFsaWdubWVudDogW3tcblx0ICAgICAgICAgICAgICAgIHR5cGU6IGZ1bmN0aW9uIHR5cGUob2JqKSB7XG5cdCAgICAgICAgICAgICAgICAgIHJldHVybiBvYmoubGVmdDtcblx0ICAgICAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgICAgICBkaW1lbnNpb25zOiBbZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgICAgICB2YXIgcGFyZW50ID0gdGhpcy5nZXRQYXJlbnRDb21wb25lbnRHcm91cCgpO1xuXHQgICAgICAgICAgICAgICAgICBfc2VsZi5fcmVmID0gdGhpcztcblx0ICAgICAgICAgICAgICAgICAgcmV0dXJuIF9zZWxmLmdldExvZ2ljYWxTcGFjZShfc2VsZi5fcFdpZHRoID0gcGFyZW50LmdldFdpZHRoKCksIF9zZWxmLl9wSGVpZ2h0ID0gcGFyZW50LmdldEhlaWdodCgpKTtcblx0ICAgICAgICAgICAgICAgIH1dXG5cdCAgICAgICAgICAgICAgfV1cblx0ICAgICAgICAgICAgfV1cblx0ICAgICAgICAgIH1dXG5cdCAgICAgICAgfV0pO1xuXHQgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgIGtleTogJ3NldERyYXdpbmdDb25maWd1cmF0aW9uJyxcblx0ICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNldERyYXdpbmdDb25maWd1cmF0aW9uKHgsIHksIHdpZHRoLCBoZWlnaHQsIGdyb3VwKSB7XG5cdCAgICAgICAgdmFyIG1lcyA9IHRoaXMubWVhc3VyZW1lbnQ7XG5cdCAgICAgICAgbWVzLnggPSB4O1xuXHQgICAgICAgIG1lcy55ID0geTtcblx0ICAgICAgICBtZXMud2lkdGggPSB3aWR0aDtcblx0ICAgICAgICBtZXMuaGVpZ2h0ID0gaGVpZ2h0O1xuXHRcblx0ICAgICAgICB0aGlzLnBhcmVudEdyb3VwID0gZ3JvdXA7XG5cdFxuXHQgICAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgIGtleTogJ2RyYXcnLFxuXHQgICAgICB2YWx1ZTogZnVuY3Rpb24gZHJhdyh4LCB5LCB3aWR0aCwgaGVpZ2h0LCBncm91cCkge1xuXHQgICAgICAgIHZhciBtZWFzdXJlbWVudCA9IHRoaXMubWVhc3VyZW1lbnQsXG5cdCAgICAgICAgICAgIHRvb2xiYXJzID0gdGhpcy50b29sYmFycyxcblx0ICAgICAgICAgICAgc2VsZiA9IHRoaXMsXG5cdCAgICAgICAgICAgIGxuLFxuXHQgICAgICAgICAgICBpLFxuXHQgICAgICAgICAgICB0b29sYmFyLFxuXHQgICAgICAgICAgICBib3VuZEVsZW1lbnQsXG5cdCAgICAgICAgICAgIGJCb3gsXG5cdCAgICAgICAgICAgIHgxLFxuXHQgICAgICAgICAgICB4Mixcblx0ICAgICAgICAgICAgeTIsXG5cdCAgICAgICAgICAgIHNlbGVjdExpbmUsXG5cdCAgICAgICAgICAgIG1vZGVsID0gdGhpcy5nbG9iYWxSZWFjdGl2ZU1vZGVsO1xuXHRcblx0ICAgICAgICB0aGlzLmZsYWcgPSB0cnVlO1xuXHQgICAgICAgIHNlbGVjdExpbmUgPSB0aGlzLnNhdmVTZWxlY3RMaW5lIHx8IHRoaXMuZ3JhcGhpY3MucGFwZXIucGF0aCh7XG5cdCAgICAgICAgICAnc3Ryb2tlJzogJyNjOTVhNWEnLFxuXHQgICAgICAgICAgJ3N0cm9rZS13aWR0aCc6ICcycHgnXG5cdCAgICAgICAgfSkudG9Gcm9udCgpO1xuXHQgICAgICAgIHggPSB4ID09PSB1bmRlZmluZWQgPyBtZWFzdXJlbWVudC54IDogeDtcblx0ICAgICAgICB5ID0geSA9PT0gdW5kZWZpbmVkID8gbWVhc3VyZW1lbnQueSA6IHk7XG5cdCAgICAgICAgd2lkdGggPSB3aWR0aCA9PT0gdW5kZWZpbmVkID8gbWVhc3VyZW1lbnQud2lkdGggOiB3aWR0aDtcblx0ICAgICAgICBoZWlnaHQgPSBoZWlnaHQgPT09IHVuZGVmaW5lZCA/IG1lYXN1cmVtZW50LmhlaWdodCA6IGhlaWdodDtcblx0ICAgICAgICBncm91cCA9IGdyb3VwID09PSB1bmRlZmluZWQgPyB0aGlzLnBhcmVudEdyb3VwIDogZ3JvdXA7XG5cdCAgICAgICAgaWYgKHdpZHRoICYmIGhlaWdodCkge1xuXHQgICAgICAgICAgZm9yIChpID0gMCwgbG4gPSB0b29sYmFycy5sZW5ndGg7IGkgPCBsbjsgaSsrKSB7XG5cdCAgICAgICAgICAgIHRvb2xiYXIgPSB0b29sYmFyc1tpXTtcblx0ICAgICAgICAgICAgdG9vbGJhci5kcmF3KHgsIHksIGdyb3VwKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgdGhpcy5zYXZlU2VsZWN0TGluZSA9IHNlbGVjdExpbmU7XG5cdFxuXHQgICAgICAgIGZvciAodmFyIF9pMyA9IDAsIGlpID0gdG9vbGJhcnNbMF0uY29tcG9uZW50R3JvdXBzWzFdLnN5bWJvbExpc3Q7IF9pMyA8IGlpLmxlbmd0aDsgX2kzKyspIHtcblx0ICAgICAgICAgIGlmIChpaVtfaTNdLnN5bWJvbCA9PT0gdGhpcy5jbGlja2VkSWQpIHtcblx0ICAgICAgICAgICAgYm91bmRFbGVtZW50ID0gaWlbX2kzXS5nZXRCb3VuZEVsZW1lbnQoKTtcblx0ICAgICAgICAgICAgYkJveCA9IGJvdW5kRWxlbWVudC5nZXRCQm94KCk7XG5cdCAgICAgICAgICAgIHgxID0gYkJveC54O1xuXHQgICAgICAgICAgICB4MiA9IGJCb3gueDI7XG5cdCAgICAgICAgICAgIHkyID0gYkJveC55Mjtcblx0XG5cdCAgICAgICAgICAgIHNlbGVjdExpbmUuYXR0cih7XG5cdCAgICAgICAgICAgICAgcGF0aDogWydNJywgeDEgLSAwLjUsIHkyIC0gMC41LCAnTCcsIHgyICsgMC41LCB5MiAtIDAuNV1cblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XSk7XG5cdFxuXHQgICAgcmV0dXJuIFN0YW5kYXJkUGVyaW9kU2VsZWN0b3I7XG5cdCAgfSgpO1xuXHRcblx0ICByZXR1cm4gU3RhbmRhcmRQZXJpb2RTZWxlY3Rvcjtcblx0fTtcblxuLyoqKi8gfVxuLyoqKioqKi8gXSk7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHN0YW5kYXJkLXBlcmlvZC1zZWxlY3Rvci1lczUubWluLmpzIiwiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pXG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG5cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGV4cG9ydHM6IHt9LFxuIFx0XHRcdGlkOiBtb2R1bGVJZCxcbiBcdFx0XHRsb2FkZWQ6IGZhbHNlXG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjay9ib290c3RyYXAgMDZkYjk2ODc5NjUzYzI0YzJjMjIiLCIndXNlIHN0cmljdCc7XG5jb25zdCBTdGFuZGFyZFBlcmlvZFNlbGVjdG9yID0gcmVxdWlyZSgnLi9zdGFuZGFyZC1wZXJpb2Qtc2VsZWN0b3InKTtcblxud2luZG93LnN0UFMgPSBuZXcgU3RhbmRhcmRQZXJpb2RTZWxlY3RvcigpO1xuXG47KGZ1bmN0aW9uIChlbnYsIGZhY3RvcnkpIHtcbiAgaWYgKHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnICYmIG1vZHVsZS5leHBvcnRzKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBlbnYuZG9jdW1lbnRcbiAgICAgICA/IGZhY3RvcnkoZW52KSA6IGZ1bmN0aW9uICh3aW4pIHtcbiAgICAgICAgIGlmICghd2luLmRvY3VtZW50KSB7XG4gICAgICAgICAgIHRocm93IG5ldyBFcnJvcignV2luZG93IHdpdGggZG9jdW1lbnQgbm90IHByZXNlbnQnKTtcbiAgICAgICAgIH1cbiAgICAgICAgIHJldHVybiBmYWN0b3J5KHdpbiwgdHJ1ZSk7XG4gICAgICAgfTtcbiAgfSBlbHNlIHtcbiAgICBlbnYuU3RhbmRhcmRQZXJpb2RTZWxlY3RvciA9IGZhY3RvcnkoZW52LCB0cnVlKTtcbiAgfVxufSkodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cgOiB0aGlzLCBmdW5jdGlvbiAoX3dpbmRvdywgd2luZG93RXhpc3RzKSB7XG4gIHZhciBGQyA9IF93aW5kb3cuRnVzaW9uQ2hhcnRzO1xuICBGQy5yZWdpc3RlcignZXh0ZW5zaW9uJywgWydwcml2YXRlJywgJ1N0YW5kYXJkUGVyaW9kU2VsZWN0b3InLCBmdW5jdGlvbiAoKSB7XG4gICAgRkMucmVnaXN0ZXJDb21wb25lbnQoJ2V4dGVuc2lvbnMnLCAnU3RhbmRhcmRQZXJpb2RTZWxlY3RvcicsIFN0YW5kYXJkUGVyaW9kU2VsZWN0b3Ioe0Z1c2lvbkNoYXJ0czogRkN9KSk7XG4gIH1dKTtcbn0pO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2luZGV4LmpzIiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihtb2R1bGUpIHtcblx0aWYoIW1vZHVsZS53ZWJwYWNrUG9seWZpbGwpIHtcblx0XHRtb2R1bGUuZGVwcmVjYXRlID0gZnVuY3Rpb24oKSB7fTtcblx0XHRtb2R1bGUucGF0aHMgPSBbXTtcblx0XHQvLyBtb2R1bGUucGFyZW50ID0gdW5kZWZpbmVkIGJ5IGRlZmF1bHRcblx0XHRtb2R1bGUuY2hpbGRyZW4gPSBbXTtcblx0XHRtb2R1bGUud2VicGFja1BvbHlmaWxsID0gMTtcblx0fVxuXHRyZXR1cm4gbW9kdWxlO1xufVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gKHdlYnBhY2spL2J1aWxkaW4vbW9kdWxlLmpzXG4vLyBtb2R1bGUgaWQgPSAxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBDbGFzcyBkZWZpbml0aW9uIG9mIFN0YW5kYXJkUGVyaW9kU2VsZWN0b3JcbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChkZXApIHtcbiAgY2xhc3MgU3RhbmRhcmRQZXJpb2RTZWxlY3RvciB7XG4gICAgY29uc3RydWN0b3IgKCkge1xuICAgICAgLyoqXG4gICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICovXG4gICAgICB0aGlzLnJhdGlvID0gODtcbiAgICAgIHRoaXMudG9vbGJveCA9IEZ1c2lvbkNoYXJ0cy5nZXRDb21wb25lbnQoJ2FwaScsICd0b29sYm94Jyk7XG4gICAgICB0aGlzLkhvcml6b250YWxUb29sYmFyID0gdGhpcy50b29sYm94Lkhvcml6b250YWxUb29sYmFyO1xuICAgICAgdGhpcy5Db21wb25lbnRHcm91cCA9IHRoaXMudG9vbGJveC5Db21wb25lbnRHcm91cDtcbiAgICAgIHRoaXMuU3ltYm9sU3RvcmUgPSB0aGlzLnRvb2xib3guU3ltYm9sU3RvcmU7XG4gICAgICB0aGlzLmFsbCA9IDE7XG4gICAgICB0aGlzLmNhbGN1bGF0ZWRQZXJpb2RzID0gW107XG4gICAgICB0aGlzLnN0YXJ0RGF0YXNldCA9IDA7XG4gICAgICAvLyB0aGlzLmVuZERhdGFzZXQgPSB0aGlzLmdsb2JhbFJlYWN0aXZlTW9kZWwubW9kZWxbJ3gtYXhpcy1hYnNvbHV0ZS1yYW5nZS1lbmQnXTtcbiAgICAgIHRoaXMuc3RhcnRBY3RpdmVXaW5kb3cgPSAwO1xuICAgICAgdGhpcy5lbmRBY3RpdmVXaW5kb3cgPSAxO1xuICAgICAgdGhpcy5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzID0gW107XG4gICAgICB0aGlzLnN0YW5kYXJkQ29udGV4dWFsUGVyaW9kcyA9IFtdO1xuICAgICAgdGhpcy5zdGFydFBvaW50VW5pdCA9IDA7XG4gICAgICB0aGlzLnN0YXJ0UG9pbnRNdWx0aXBsaWVyID0gMDtcbiAgICAgIHRoaXMuY2xpY2tlZElkID0gJ0FMTCc7XG4gICAgICB0aGlzLm5vQ2FsY0J1dHRvbnMgPSAwO1xuICAgICAgLy8gdGhpcy50aW1lUGVyaW9kcyA9IFtcbiAgICAgIC8vICAge1xuICAgICAgLy8gICAgICduYW1lJzogJ3NlY29uZCcsXG4gICAgICAvLyAgICAgJ21pbGxpc2Vjb25kcyc6IDEwMDAsXG4gICAgICAvLyAgICAgJ3N0YXJ0aW5nUG9pbnQnOiAwLFxuICAgICAgLy8gICAgICd0b3RhbCc6IDYwLFxuICAgICAgLy8gICAgICdhYmJyZXZpYXRpb24nOiAncycsXG4gICAgICAvLyAgICAgJ2Rlc2NyaXB0aW9uJzogJ1NFQ09ORCcsXG4gICAgICAvLyAgICAgJ3BhcmVudCc6ICdtaW51dGUnLFxuICAgICAgLy8gICAgICdtdWx0aXBsaWVycyc6IFsxLCA1LCAxNSwgMzBdXG4gICAgICAvLyAgIH0sXG4gICAgICAvLyAgIHtcbiAgICAgIC8vICAgICAnbmFtZSc6ICdtaW51dGUnLFxuICAgICAgLy8gICAgICdtaWxsaXNlY29uZHMnOiA2MDAwMCxcbiAgICAgIC8vICAgICAnc3RhcnRpbmdQb2ludCc6IDAsXG4gICAgICAvLyAgICAgJ3RvdGFsJzogNjAsXG4gICAgICAvLyAgICAgJ2FiYnJldmlhdGlvbic6ICdtJyxcbiAgICAgIC8vICAgICAnZGVzY3JpcHRpb24nOiAnTUlOVVRFJyxcbiAgICAgIC8vICAgICAncGFyZW50JzogJ2hvdXInLFxuICAgICAgLy8gICAgICdtdWx0aXBsaWVycyc6IFsxLCA1LCAxNSwgMzBdXG4gICAgICAvLyAgIH0sXG4gICAgICAvLyAgIHtcbiAgICAgIC8vICAgICAnbmFtZSc6ICdob3VyJyxcbiAgICAgIC8vICAgICAnbWlsbGlzZWNvbmRzJzogMzYwMDAwMCxcbiAgICAgIC8vICAgICAnc3RhcnRpbmdQb2ludCc6IDAsXG4gICAgICAvLyAgICAgJ3RvdGFsJzogMjQsXG4gICAgICAvLyAgICAgJ2FiYnJldmlhdGlvbic6ICdoJyxcbiAgICAgIC8vICAgICAnZGVzY3JpcHRpb24nOiAnSE9VUicsXG4gICAgICAvLyAgICAgJ3BhcmVudCc6ICdkYXknLFxuICAgICAgLy8gICAgICdtdWx0aXBsaWVycyc6IFsxLCAzLCA2LCAxMl1cbiAgICAgIC8vICAgfSxcbiAgICAgIC8vICAge1xuICAgICAgLy8gICAgICduYW1lJzogJ2RheScsXG4gICAgICAvLyAgICAgJ21pbGxpc2Vjb25kcyc6IDg2NDAwMDAwLFxuICAgICAgLy8gICAgICdzdGFydGluZ1BvaW50JzogMCxcbiAgICAgIC8vICAgICAndG90YWwnOiAzMCxcbiAgICAgIC8vICAgICAnYWJicmV2aWF0aW9uJzogJ0QnLFxuICAgICAgLy8gICAgICdkZXNjcmlwdGlvbic6ICdEQVknLFxuICAgICAgLy8gICAgICdwYXJlbnQnOiAnbW9udGgnLFxuICAgICAgLy8gICAgICdtdWx0aXBsaWVycyc6IFsxLCA3LCAxNV1cbiAgICAgIC8vICAgfSxcbiAgICAgIC8vICAge1xuICAgICAgLy8gICAgICduYW1lJzogJ21vbnRoJyxcbiAgICAgIC8vICAgICAnbWlsbGlzZWNvbmRzJzogMjU5MjAwMDAwMCxcbiAgICAgIC8vICAgICAnc3RhcnRpbmdQb2ludCc6IDAsXG4gICAgICAvLyAgICAgJ3RvdGFsJzogMTIsXG4gICAgICAvLyAgICAgJ2FiYnJldmlhdGlvbic6ICdNJyxcbiAgICAgIC8vICAgICAnZGVzY3JpcHRpb24nOiAnTU9OVEgnLFxuICAgICAgLy8gICAgICdwYXJlbnQnOiAneWVhcicsXG4gICAgICAvLyAgICAgJ211bHRpcGxpZXJzJzogWzEsIDMsIDZdXG4gICAgICAvLyAgIH0sXG4gICAgICAvLyAgIHtcbiAgICAgIC8vICAgICAnbmFtZSc6ICd5ZWFyJyxcbiAgICAgIC8vICAgICAnbWlsbGlzZWNvbmRzJzogMzExMDQwMDAwMDAsXG4gICAgICAvLyAgICAgJ3N0YXJ0aW5nUG9pbnQnOiAwLFxuICAgICAgLy8gICAgICdhYmJyZXZpYXRpb24nOiAnWScsXG4gICAgICAvLyAgICAgJ2Rlc2NyaXB0aW9uJzogJ1lFQVInLFxuICAgICAgLy8gICAgICdtdWx0aXBsaWVycyc6IFsxXVxuICAgICAgLy8gICB9XTtcbiAgICAgIHRoaXMudGRCdXR0b25zID0gW1xuICAgICAgICB7XG4gICAgICAgICAgJ25hbWUnOiAnWVREJyxcbiAgICAgICAgICAnYWJicmV2aWF0aW9uJzogJ1lURCcsXG4gICAgICAgICAgJ3BhcmVudCc6ICd5ZWFyJyxcbiAgICAgICAgICAnbWlsbGlzZWNvbmRzJzogMzExMDQwMDAwMDAsXG4gICAgICAgICAgJ2Rlc2NyaXB0aW9uJzogJ1llYXIgdG8gRGF0ZSdcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICduYW1lJzogJ1FURCcsXG4gICAgICAgICAgJ2FiYnJldmlhdGlvbic6ICdRVEQnLFxuICAgICAgICAgICdwYXJlbnQnOiAnbW9udGgnLFxuICAgICAgICAgICdtdWx0aXBsaWVyJzogMyxcbiAgICAgICAgICAnbWlsbGlzZWNvbmRzJzogNzc3NjAwMDAwMCxcbiAgICAgICAgICAnZGVzY3JpcHRpb24nOiAnUXVhcnRlciB0byBEYXRlJ1xuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgJ25hbWUnOiAnTVREJyxcbiAgICAgICAgICAnYWJicmV2aWF0aW9uJzogJ01URCcsXG4gICAgICAgICAgJ3BhcmVudCc6ICdtb250aCcsXG4gICAgICAgICAgJ21pbGxpc2Vjb25kcyc6IDI1OTIwMDAwMDAsXG4gICAgICAgICAgJ2Rlc2NyaXB0aW9uJzogJ01vbnRoIHRvIERhdGUnXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAnbmFtZSc6ICdXVEQnLFxuICAgICAgICAgICdhYmJyZXZpYXRpb24nOiAnV1REJyxcbiAgICAgICAgICAncGFyZW50JzogJ2RheScsXG4gICAgICAgICAgJ211bHRpcGxpZXInOiA3LFxuICAgICAgICAgICdtaWxsaXNlY29uZHMnOiA2MDQ4MDAwMDAsXG4gICAgICAgICAgJ2Rlc2NyaXB0aW9uJzogJ1dlZWsgdG8gRGF0ZSdcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICduYW1lJzogJ1knLFxuICAgICAgICAgICdhYmJyZXZpYXRpb24nOiAnWScsXG4gICAgICAgICAgJ3BhcmVudCc6ICdkYXknLFxuICAgICAgICAgICdtaWxsaXNlY29uZHMnOiA4NjQwMDAwMCxcbiAgICAgICAgICAnZGVzY3JpcHRpb24nOiAnWWVzdGVyZGF5J1xuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgJ25hbWUnOiAnVCcsXG4gICAgICAgICAgJ2FiYnJldmlhdGlvbic6ICdUJyxcbiAgICAgICAgICAncGFyZW50JzogJ2RheScsXG4gICAgICAgICAgJ21pbGxpc2Vjb25kcyc6IDg2NDAwMDAwLFxuICAgICAgICAgICdkZXNjcmlwdGlvbic6ICdUb2RheSdcbiAgICAgICAgfVxuICAgICAgXTtcbiAgICAgIHRoaXMuY29uZmlnID0ge1xuICAgICAgICBhbmNob3JQb3NpdGlvbnM6ICdyaWdodCcsXG4gICAgICAgIGFsbDogJzEnLFxuICAgICAgICBjb250ZXh0dWFsOiAnMScsXG4gICAgICAgIGNhbGN1bGF0ZWQ6ICcxJyxcbiAgICAgICAgdGVydGlhcnlUaW1lUGVyaW9kczoge31cbiAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQSBmdW5jdGlvbiB0byBnZW5lcmF0ZSB0aGUgY2FsY3VsYXRlZCBidXR0b25zIHVzaW5nXG4gICAgICogdGhlIGFjdGl2ZSByYW5nZSBhbmQgdGhlIGxvY2F0aW9uIG9mIHRoZSBhY3RpdmUgcmFuZ2VcbiAgICAgKi9cbiAgICBnZW5lcmF0ZUNhbGN1bGF0ZWRCdXR0b25zICgpIHtcbiAgICAgIHZhciB0YXJnZXRCbG9jayA9IHRoaXMuZW5kQWN0aXZlV2luZG93IC0gdGhpcy5zdGFydERhdGFzZXQsXG4gICAgICAgIGkgPSAwLFxuICAgICAgICBqID0gMCxcbiAgICAgICAgYWN0aXZlV2luZG93ID0gdGhpcy5lbmRBY3RpdmVXaW5kb3cgLSB0aGlzLnN0YXJ0QWN0aXZlV2luZG93LFxuICAgICAgICBjb3VudCA9IDA7XG4gICAgICB0aGlzLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHMgPSBbXTtcbiAgICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLnRpbWVQZXJpb2RzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIC8vIGNoZWNraW5nIHdoZXRoZXIgdGhlIHVuaXQgaXMgYXBwbGljYWJsZSBmb3IgdGhlIGN1cnJlbnQgdGFyZ2V0IGJsb2NrXG4gICAgICAgIGlmICh0YXJnZXRCbG9jayAvIHRoaXMudGltZVBlcmlvZHNbaV0uaW50ZXJ2YWwgPj0gMSkge1xuICAgICAgICAgIC8vIGNoZWNraW5nIHdoZXRoZXIgdGhlIHVuaXQgaXMgb2YgdGhlIGhpZ2hlciBvcmRlciBhbmQgb25seSBtdWx0aXBsaWVyIDEgaXMgYXBwbGljYWJsZVxuICAgICAgICAgIGlmIChNYXRoLmZsb29yKChhY3RpdmVXaW5kb3cpIC8gdGhpcy50aW1lUGVyaW9kc1tpXS5pbnRlcnZhbCkgPCAxKSB7XG4gICAgICAgICAgICB0aGlzLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHMucHVzaCh7XG4gICAgICAgICAgICAgICdhYmJyZXZpYXRpb24nOiB0aGlzLnRpbWVQZXJpb2RzW2ldLmFiYnJldmlhdGlvbi5zaW5nbGUsXG4gICAgICAgICAgICAgICdkZXNjcmlwdGlvbic6IHRoaXMudGltZVBlcmlvZHNbaV0uZGVzY3JpcHRpb24sXG4gICAgICAgICAgICAgICdtaWxsaXNlY29uZHMnOiB0aGlzLnRpbWVQZXJpb2RzW2ldLmludGVydmFsLFxuICAgICAgICAgICAgICAnbmFtZSc6IHRoaXMudGltZVBlcmlvZHNbaV0ubmFtZSxcbiAgICAgICAgICAgICAgJ211bHRpcGxpZXJzJzogWzFdXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2UgeyAvLyBpZiB0aGUgdW5pdCBpcyBvZiB0aGUgb3JkZXIgb2YgdGhlIHRhcmdldCBibG9jayBhbmQgY2FsY3VsYXRpbmcgdGhlIG11bHRpcGxpZXJzXG4gICAgICAgICAgICB0aGlzLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHMucHVzaCh7XG4gICAgICAgICAgICAgICdhYmJyZXZpYXRpb24nOiB0aGlzLnRpbWVQZXJpb2RzW2ldLmFiYnJldmlhdGlvbi5zaW5nbGUsXG4gICAgICAgICAgICAgICdkZXNjcmlwdGlvbic6IHRoaXMudGltZVBlcmlvZHNbaV0uZGVzY3JpcHRpb24sXG4gICAgICAgICAgICAgICdtaWxsaXNlY29uZHMnOiB0aGlzLnRpbWVQZXJpb2RzW2ldLmludGVydmFsLFxuICAgICAgICAgICAgICAnbmFtZSc6IHRoaXMudGltZVBlcmlvZHNbaV0ubmFtZSxcbiAgICAgICAgICAgICAgJ211bHRpcGxpZXJzJzogW11cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gY2FsY3VsYXRpbmcgYW5kIHBvcHVsYXRpbmcgdGhlIGFwcGxpY2FibGUgbXVsdHBsaWVycyBvZiBlYWNoIHVuaXRcbiAgICAgICAgICAgIGZvciAoaiA9IDA7IGogPCB0aGlzLnRpbWVQZXJpb2RzW2ldLm11bHRpcGxpZXJzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgIGlmIChhY3RpdmVXaW5kb3cgLyB0aGlzLnJhdGlvIDwgdGhpcy50aW1lUGVyaW9kc1tpXS5tdWx0aXBsaWVyc1tqXSAqIHRoaXMudGltZVBlcmlvZHNbaV0uaW50ZXJ2YWwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHNbdGhpcy5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzLmxlbmd0aCAtIDFdLm11bHRpcGxpZXJzLnB1c2goXG4gICAgICAgICAgICAgICAgICB0aGlzLnRpbWVQZXJpb2RzW2ldLm11bHRpcGxpZXJzW2pdXG4gICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICB0aGlzLm5vQ2FsY0J1dHRvbnMgPSBJbmZpbml0eTtcbiAgICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZm9yIChqID0gMDsgaiA8IHRoaXMuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kc1tpXS5tdWx0aXBsaWVycy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICsrY291bnQ7XG4gICAgICAgICAgaWYgKHRoaXMubm9DYWxjQnV0dG9ucyA+IGkpIHtcbiAgICAgICAgICAgIHRoaXMubm9DYWxjQnV0dG9ucyA9IGk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChjb3VudCA8PSA0KSB7XG4gICAgICAgICAgICB0aGlzLnN0YXJ0UG9pbnRNdWx0aXBsaWVyID0gajtcbiAgICAgICAgICAgIHRoaXMuc3RhcnRQb2ludFVuaXQgPSBpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyB0aGlzLmRyYXdCdXR0b25zQ2FsY3VsYXRlZCh0aGlzLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEEgZnVuY3Rpb24gdG8gZ2VuZXJhdGUgdGhlIGNvbnRleHR1YWwgYnV0dG9ucyB1c2luZ1xuICAgICAqIHRoZSBlbmQgcG9pbnQgb2YgdGhlIHRpbWUtc2NhbGVcbiAgICAgKi9cbiAgICBnZW5lcmF0ZUNvbnRleHR1YWxCdXR0b25zICgpIHtcbiAgICAgIC8vIGdlbmVyYXRpbmcgYW4gYXJyYXkgd2l0aCBhcHBsaWNhYmxlIFREIGJ1dHRvbnNcbiAgICAgIHZhciBidXR0b25zID0gW10sXG4gICAgICAgIGkgPSAwLFxuICAgICAgICBlbmRTdGFtcCA9IHRoaXMuZ2xvYmFsUmVhY3RpdmVNb2RlbC5tb2RlbFsneC1heGlzLWFic29sdXRlLXJhbmdlLWVuZCddLFxuICAgICAgICBkYXRlU3RhcnQgPSBlbmRTdGFtcCAtIDIsXG4gICAgICAgIGRhdGVFbmQgPSBlbmRTdGFtcCxcbiAgICAgICAgcmVsYXRpdmVUREJ1dHRvbiA9IHt9O1xuICAgICAgZm9yICg7IGkgPCB0aGlzLnRkQnV0dG9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICBkYXRlU3RhcnQgPSBuZXcgRGF0ZShlbmRTdGFtcCk7XG4gICAgICAgIGlmICh0aGlzLnRkQnV0dG9uc1tpXS5uYW1lID09PSAnWVREJykge1xuICAgICAgICAgIGRhdGVTdGFydC5zZXRNb250aCgwKTtcbiAgICAgICAgICBkYXRlU3RhcnQuc2V0RGF0ZSgxKTtcbiAgICAgICAgICBkYXRlU3RhcnQuc2V0SG91cnMoMCk7XG4gICAgICAgICAgZGF0ZVN0YXJ0LnNldE1pbnV0ZXMoMCk7XG4gICAgICAgICAgZGF0ZVN0YXJ0LnNldFNlY29uZHMoMCk7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy50ZEJ1dHRvbnNbaV0ubmFtZSA9PT0gJ01URCcpIHtcbiAgICAgICAgICBkYXRlU3RhcnQuc2V0RGF0ZSgxKTtcbiAgICAgICAgICBkYXRlU3RhcnQuc2V0SG91cnMoMCk7XG4gICAgICAgICAgZGF0ZVN0YXJ0LnNldE1pbnV0ZXMoMCk7XG4gICAgICAgICAgZGF0ZVN0YXJ0LnNldFNlY29uZHMoMCk7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy50ZEJ1dHRvbnNbaV0ubmFtZSA9PT0gJ1FURCcpIHtcbiAgICAgICAgICBkYXRlU3RhcnQuc2V0TW9udGgoMTEgLSAoZGF0ZVN0YXJ0LmdldE1vbnRoKCkgJSA0KSk7XG4gICAgICAgICAgZGF0ZVN0YXJ0LnNldERhdGUoMCk7XG4gICAgICAgICAgZGF0ZVN0YXJ0LnNldEhvdXJzKDApO1xuICAgICAgICAgIGRhdGVTdGFydC5zZXRNaW51dGVzKDApO1xuICAgICAgICAgIGRhdGVTdGFydC5zZXRTZWNvbmRzKDApO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMudGRCdXR0b25zW2ldLm5hbWUgPT09ICdXVEQnKSB7XG4gICAgICAgICAgZGF0ZVN0YXJ0LnNldERhdGUoZGF0ZVN0YXJ0LmdldERhdGUoKSAtIGRhdGVTdGFydC5nZXREYXkoKSk7XG4gICAgICAgICAgZGF0ZVN0YXJ0LnNldEhvdXJzKDApO1xuICAgICAgICAgIGRhdGVTdGFydC5zZXRNaW51dGVzKDApO1xuICAgICAgICAgIGRhdGVTdGFydC5zZXRTZWNvbmRzKDApO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMudGRCdXR0b25zW2ldLm5hbWUgPT09ICdZJykge1xuICAgICAgICAgIGRhdGVTdGFydC5zZXRIb3VycygwKTtcbiAgICAgICAgICBkYXRlU3RhcnQuc2V0TWludXRlcygwKTtcbiAgICAgICAgICBkYXRlU3RhcnQuc2V0U2Vjb25kcygwKTtcbiAgICAgICAgICBkYXRlU3RhcnQgLT0gODY0MDAwMDA7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy50ZEJ1dHRvbnNbaV0ubmFtZSA9PT0gJ1QnKSB7XG4gICAgICAgICAgZGF0ZVN0YXJ0LnNldEhvdXJzKDApO1xuICAgICAgICAgIGRhdGVTdGFydC5zZXRNaW51dGVzKDApO1xuICAgICAgICAgIGRhdGVTdGFydC5zZXRTZWNvbmRzKDApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGRhdGVFbmQgPCBkYXRlU3RhcnQpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnRkQnV0dG9uc1tpXS5kYXRlU3RhcnQgPSBkYXRlU3RhcnQudmFsdWVPZigpO1xuICAgICAgICAgIHRoaXMudGRCdXR0b25zW2ldLmRhdGVFbmQgPSBkYXRlRW5kLnZhbHVlT2YoKTtcbiAgICAgICAgICBidXR0b25zLnB1c2godGhpcy50ZEJ1dHRvbnNbaV0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZWxhdGl2ZVREQnV0dG9uLm1pbGxpc2Vjb25kcyA9IEluZmluaXR5O1xuICAgICAgZm9yIChpID0gMDsgaSA8IHRoaXMudGRCdXR0b25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChNYXRoLmFicyh0aGlzLnRkQnV0dG9uc1tpXS5taWxsaXNlY29uZHMgLSAodGhpcy5lbmRBY3RpdmVXaW5kb3cgLSB0aGlzLnN0YXJ0QWN0aXZlV2luZG93KSkgPCByZWxhdGl2ZVREQnV0dG9uLm1pbGxpc2Vjb25kcykge1xuICAgICAgICAgIHJlbGF0aXZlVERCdXR0b24ubWlsbGlzZWNvbmRzID0gdGhpcy50ZEJ1dHRvbnNbaV0ubWlsbGlzZWNvbmRzO1xuICAgICAgICAgIHJlbGF0aXZlVERCdXR0b24ubmFtZSA9IHRoaXMudGRCdXR0b25zW2ldLmFiYnJldmlhdGlvbjtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB0aGlzLnN0YW5kYXJkQ29udGV4dWFsUGVyaW9kcyA9IGJ1dHRvbnM7XG4gICAgICAvLyB0aGlzLmRyYXdCdXR0b25zQ29udGV4dHVhbCh0aGlzLnN0YW5kYXJkQ29udGV4dWFsUGVyaW9kcyk7XG4gICAgfVxuXG4gICAgcHJvY2Vzc011bHRpcGxpZXJzICh0aW1lQXJyKSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRpbWVBcnIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbGV0IGxlbiA9IHRpbWVBcnJbaV0ucG9zc2libGVGYWN0b3JzLmxlbmd0aDtcbiAgICAgICAgdGltZUFycltpXS5tdWx0aXBsaWVycyA9IFtdO1xuICAgICAgICBpZiAobGVuID09PSAxKSB7XG4gICAgICAgICAgdGltZUFycltpXS5tdWx0aXBsaWVycy5wdXNoKHRpbWVBcnJbaV0ucG9zc2libGVGYWN0b3JzWzBdKTtcbiAgICAgICAgfSBlbHNlIGlmIChsZW4gPT09IDIpIHtcbiAgICAgICAgICB0aW1lQXJyW2ldLm11bHRpcGxpZXJzLnB1c2godGltZUFycltpXS5wb3NzaWJsZUZhY3RvcnNbMF0pO1xuICAgICAgICAgIHRpbWVBcnJbaV0ubXVsdGlwbGllcnMucHVzaCh0aW1lQXJyW2ldLnBvc3NpYmxlRmFjdG9yc1tsZW4gLSAxXSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGltZUFycltpXS5tdWx0aXBsaWVycy5wdXNoKHRpbWVBcnJbaV0ucG9zc2libGVGYWN0b3JzWzBdKTtcbiAgICAgICAgICB0aW1lQXJyW2ldLm11bHRpcGxpZXJzLnB1c2goTWF0aC5mbG9vcih0aW1lQXJyW2ldLnBvc3NpYmxlRmFjdG9yc1tsZW4gLSAxXSAvIDIpKTtcbiAgICAgICAgICB0aW1lQXJyW2ldLm11bHRpcGxpZXJzLnB1c2godGltZUFycltpXS5wb3NzaWJsZUZhY3RvcnNbbGVuIC0gMV0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdGltZUFycjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBIGZ1bmN0aW9uIHRvIHNldCB0aGUgYWN0aXZlIHBlcmlvZCdzXG4gICAgICogc3RhcnQgYW5kIGVuZCBwb2ludFxuICAgICAqIEBwYXJhbSAge251bWJlcn0gZGF0ZSBzdGFtcCAtIEEgVU5JWCB0aW1lc3RhbXAgdG8gYmUgc2V0IGFzIHRoZSBzdGFydCBwb2ludCBvZiBhY3RpdmUgcGVyaW9kXG4gICAgICogQHBhcmFtICB7bnVtYmVyfSBkYXRlIHN0YW1wIC0gQSBVTklYIHRpbWVzdGFtcCB0byBiZSBzZXQgYXMgdGhlIGVuZCBwb2ludCBvZiBhY3RpdmUgcGVyaW9kXG4gICAgICovXG4gICAgc2V0QWN0aXZlUGVyaW9kICgpIHtcbiAgICAgIHZhciBzdGFydCxcbiAgICAgICAgZW5kLFxuICAgICAgICB0ZW1wID0gd2luZG93LnBlcmZvcm1hbmNlLm5vdygpO1xuICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgZW5kID0gdGhpcy5nbG9iYWxSZWFjdGl2ZU1vZGVsLm1vZGVsWyd4LWF4aXMtdmlzaWJsZS1yYW5nZS1lbmQnXTtcbiAgICAgICAgc3RhcnQgPSBlbmQgLSBhcmd1bWVudHNbMF07XG4gICAgICB9IGVsc2UgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgc3RhcnQgPSBhcmd1bWVudHNbMF07XG4gICAgICAgIGVuZCA9IGFyZ3VtZW50c1sxXTtcbiAgICAgIH1cbiAgICAgIHRoaXMuc3RhcnRBY3RpdmVXaW5kb3cgPSBzdGFydDtcbiAgICAgIHRoaXMuZW5kQWN0aXZlV2luZG93ID0gZW5kO1xuICAgICAgdGhpcy5nZW5lcmF0ZUNhbGN1bGF0ZWRCdXR0b25zKCk7XG4gICAgICB0aGlzLmdsb2JhbFJlYWN0aXZlTW9kZWwubW9kZWxbJ3gtYXhpcy12aXNpYmxlLXJhbmdlLXN0YXJ0J10gPSB0aGlzLnN0YXJ0QWN0aXZlV2luZG93O1xuICAgICAgdGhpcy5nbG9iYWxSZWFjdGl2ZU1vZGVsLm1vZGVsWyd4LWF4aXMtdmlzaWJsZS1yYW5nZS1lbmQnXSA9IHRoaXMuZW5kQWN0aXZlV2luZG93O1xuICAgICAgdGhpcy5nZW5lcmF0ZUNvbnRleHR1YWxCdXR0b25zKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQSBmdW5jdGlvbiB0byBzZXQgdGhlIHN0YXJ0IGFuZCBlbmQgcG9pbnQgb2YgdGhlXG4gICAgICogZW50aXJlIHRpbWUtbGluZVxuICAgICAqIEBwYXJhbSAge251bWJlcn0gZGF0ZSBzdGFtcCAtIEEgVU5JWCB0aW1lc3RhbXAgdG8gYmUgc2V0IGFzIHRoZSBzdGFydCBwb2ludCBvZiB0aW1lLWxpbmVcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IGRhdGUgc3RhbXAgLSBBIFVOSVggdGltZXN0YW1wIHRvIGJlIHNldCBhcyB0aGUgZW5kIHBvaW50IG9mIHRpbWUtbGluZVxuICAgICAqL1xuXG4gICAgLyoqXG4gICAgICogQSBmdW5jdGlvbiB0byBzZXQgdGhlIG9iamVjdCB0byBzZXQgdGhlIHVzZXIgcHJlZmVyZW5jZXNcbiAgICAgKi9cbiAgICBjb25maWd1cmUgKGNvbmZpZykge1xuICAgICAgdGhpcy5jb25maWcgPSBjb25maWc7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRnVzaW9uY2hhcnRzIGxpZmUgY3ljbGUgbWV0aG9kIGZvciBleHRlbnNpb25cbiAgICAgKi9cbiAgICBpbml0IChyZXF1aXJlKSB7XG4gICAgICB2YXIgaW5zdGFuY2UgPSB0aGlzO1xuICAgICAgcmVxdWlyZShbXG4gICAgICAgICd4QXhpcycsXG4gICAgICAgICd5QXhpcycsXG4gICAgICAgICdncmFwaGljcycsXG4gICAgICAgICdjaGFydCcsXG4gICAgICAgICdkYXRhc2V0JyxcbiAgICAgICAgJ1Bsb3RNYW5hZ2VyJyxcbiAgICAgICAgJ2NhbnZhc0NvbmZpZycsXG4gICAgICAgICdNYXJrZXJNYW5hZ2VyJyxcbiAgICAgICAgJ3JlYWN0aXZlTW9kZWwnLFxuICAgICAgICAnZ2xvYmFsUmVhY3RpdmVNb2RlbCcsXG4gICAgICAgICdzcGFjZU1hbmFnZXJJbnN0YW5jZScsXG4gICAgICAgICdzbWFydExhYmVsJyxcbiAgICAgICAgJ2V4dERhdGEnLFxuICAgICAgICAnY2hhcnRJbnN0YW5jZScsXG4gICAgICAgIGZ1bmN0aW9uIChcbiAgICAgICAgICAgICAgeEF4aXMsXG4gICAgICAgICAgICAgIHlBeGlzLFxuICAgICAgICAgICAgICBncmFwaGljcyxcbiAgICAgICAgICAgICAgY2hhcnQsXG4gICAgICAgICAgICAgIGRhdGFzZXQsXG4gICAgICAgICAgICAgIHBsb3RNYW5hZ2VyLFxuICAgICAgICAgICAgICBjYW52YXNDb25maWcsXG4gICAgICAgICAgICAgIG1hcmtlck1hbmFnZXIsXG4gICAgICAgICAgICAgIHJlYWN0aXZlTW9kZWwsXG4gICAgICAgICAgICAgIGdsb2JhbFJlYWN0aXZlTW9kZWwsXG4gICAgICAgICAgICAgIHNwYWNlTWFuYWdlckluc3RhbmNlLFxuICAgICAgICAgICAgICBzbWFydExhYmVsLFxuICAgICAgICAgICAgICBleHREYXRhLFxuICAgICAgICAgICAgICBjaGFydEluc3RhbmNlKSB7XG4gICAgICAgICAgaW5zdGFuY2UueEF4aXMgPSB4QXhpcztcbiAgICAgICAgICBpbnN0YW5jZS55QXhpcyA9IHlBeGlzO1xuICAgICAgICAgIGluc3RhbmNlLmdyYXBoaWNzID0gZ3JhcGhpY3M7XG4gICAgICAgICAgaW5zdGFuY2UuY2hhcnQgPSBjaGFydDtcbiAgICAgICAgICBpbnN0YW5jZS5kYXRhc2V0ID0gZGF0YXNldDtcbiAgICAgICAgICBpbnN0YW5jZS5wbG90TWFuYWdlciA9IHBsb3RNYW5hZ2VyO1xuICAgICAgICAgIGluc3RhbmNlLm1hcmtlck1hbmFnZXIgPSBtYXJrZXJNYW5hZ2VyO1xuICAgICAgICAgIGluc3RhbmNlLmNhbnZhc0NvbmZpZyA9IGNhbnZhc0NvbmZpZztcbiAgICAgICAgICBpbnN0YW5jZS5yZWFjdGl2ZU1vZGVsID0gcmVhY3RpdmVNb2RlbDtcbiAgICAgICAgICBpbnN0YW5jZS5nbG9iYWxSZWFjdGl2ZU1vZGVsID0gZ2xvYmFsUmVhY3RpdmVNb2RlbDtcbiAgICAgICAgICBpbnN0YW5jZS5zcGFjZU1hbmFnZXJJbnN0YW5jZSA9IHNwYWNlTWFuYWdlckluc3RhbmNlO1xuICAgICAgICAgIGluc3RhbmNlLnNtYXJ0TGFiZWwgPSBzbWFydExhYmVsO1xuICAgICAgICAgIGluc3RhbmNlLmV4dERhdGEgPSBleHREYXRhO1xuICAgICAgICAgIGluc3RhbmNlLmNoYXJ0SW5zdGFuY2UgPSBjaGFydEluc3RhbmNlO1xuICAgICAgICB9XG4gICAgICBdKTtcbiAgICAgIHRoaXMuc3BhY2VNYW5hZ2VySW5zdGFuY2UgPSBpbnN0YW5jZS5zcGFjZU1hbmFnZXJJbnN0YW5jZTtcbiAgICAgIHRoaXMuZ2xvYmFsUmVhY3RpdmVNb2RlbCA9IGluc3RhbmNlLmdsb2JhbFJlYWN0aXZlTW9kZWw7XG4gICAgICB0aGlzLmVuZEFjdGl2ZVdpbmRvdyA9IGluc3RhbmNlLmdsb2JhbFJlYWN0aXZlTW9kZWwubW9kZWxbJ3gtYXhpcy12aXNpYmxlLXJhbmdlLWVuZCddO1xuICAgICAgdGhpcy5zdGFydEFjdGl2ZVdpbmRvdyA9IGluc3RhbmNlLmdsb2JhbFJlYWN0aXZlTW9kZWwubW9kZWxbJ3gtYXhpcy12aXNpYmxlLXJhbmdlLXN0YXJ0J107XG4gICAgICB0aGlzLnN0YXJ0RGF0YXNldCA9IGluc3RhbmNlLmdsb2JhbFJlYWN0aXZlTW9kZWwubW9kZWxbJ3gtYXhpcy1hYnNvbHV0ZS1yYW5nZS1zdGFydCddO1xuICAgICAgdGhpcy5lbmREYXRhc2V0ID0gaW5zdGFuY2UuZ2xvYmFsUmVhY3RpdmVNb2RlbC5tb2RlbFsneC1heGlzLWFic29sdXRlLXJhbmdlLWVuZCddO1xuICAgICAgLy8gaW5zdGFuY2UuZ2xvYmFsUmVhY3RpdmVNb2RlbC5tb2RlbFsnX3gtYXhpcy12aXNpYmxlLXJhbmdlLXN0YXJ0J10gKz0gMTI0NDE2MDAwMDAwO1xuICAgICAgdGhpcy50aW1lUnVsZXMgPSB0aGlzLmNoYXJ0SW5zdGFuY2UuYXBpSW5zdGFuY2UuZ2V0Q29tcG9uZW50U3RvcmUoKTtcbiAgICAgIHRoaXMudGltZVJ1bGVzID0gdGhpcy50aW1lUnVsZXMuZ2V0Q2FudmFzQnlJbmRleCgwKS5jb21wb3NpdGlvbi5pbXBsO1xuICAgICAgdGhpcy50aW1lUnVsZXMgPSB0aGlzLnRpbWVSdWxlcy5nZXREYXRhQWdncmVnYXRvcigpO1xuICAgICAgdGhpcy50aW1lUnVsZXMgPSB0aGlzLnRpbWVSdWxlcy5nZXRBZ2dyZWdhdGlvblRpbWVSdWxlcygpO1xuICAgICAgdGhpcy50aW1lUGVyaW9kcyA9IHRoaXMucHJvY2Vzc011bHRpcGxpZXJzKHRoaXMudGltZVJ1bGVzKTtcbiAgICAgIHRoaXMuc2V0QWN0aXZlUGVyaW9kKHRoaXMuc3RhcnRBY3RpdmVXaW5kb3csIHRoaXMuZW5kQWN0aXZlV2luZG93KTtcbiAgICAgIHRoaXMudG9vbGJhcnMgPSBbXTtcbiAgICAgIHRoaXMubWVhc3VyZW1lbnQgPSB7fTtcbiAgICAgIHRoaXMuZmxhZyA9IHRydWU7XG5cbiAgICAgIHRoaXMudG9vbGJhcnMucHVzaCh0aGlzLmNyZWF0ZVRvb2xiYXIoKSk7XG5cbiAgICAgIHRoaXMuZ2xvYmFsUmVhY3RpdmVNb2RlbC5vblByb3BzQ2hhbmdlKFsneC1heGlzLXZpc2libGUtcmFuZ2Utc3RhcnQnLCAneC1heGlzLXZpc2libGUtcmFuZ2UtZW5kJ10sXG4gICAgICAgIGZ1bmN0aW9uIChzdGFydCwgZW5kKSB7XG4gICAgICAgICAgaWYgKGluc3RhbmNlLmZsYWcpIHtcbiAgICAgICAgICAgIGluc3RhbmNlLmZsYWcgPSBmYWxzZTtcbiAgICAgICAgICAgIGluc3RhbmNlLnNldEFjdGl2ZVBlcmlvZChzdGFydFsxXSwgZW5kWzFdKTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW5zdGFuY2Uuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGluc3RhbmNlLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHNbaV0ubXVsdGlwbGllcnMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoKGVuZFsxXSAtIHN0YXJ0WzFdKSA+PSBpbnN0YW5jZS50aW1lUGVyaW9kc1tpXS5tdWx0aXBsaWVyc1tqXSAqIGluc3RhbmNlLnRpbWVQZXJpb2RzW2ldLmludGVydmFsKSB7XG4gICAgICAgICAgICAgICAgICBpbnN0YW5jZS5jbGlja2VkSWQgPSBpbnN0YW5jZS50aW1lUGVyaW9kc1tpXS5tdWx0aXBsaWVyc1tqXSArIGluc3RhbmNlLnRpbWVQZXJpb2RzW2ldLmFiYnJldmlhdGlvbi5zaW5nbGU7XG4gICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhpbnN0YW5jZS5jbGlja2VkSWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaW5zdGFuY2UudG9vbGJhci5kaXNwb3NlKCk7XG4gICAgICAgICAgICBpbnN0YW5jZS50b29sYmFycy5wb3AoKTtcbiAgICAgICAgICAgIGluc3RhbmNlLnRvb2xiYXJzLnB1c2goaW5zdGFuY2UuY3JlYXRlVG9vbGJhcigpKTtcbiAgICAgICAgICAgIGluc3RhbmNlLmdldExvZ2ljYWxTcGFjZSgpO1xuICAgICAgICAgICAgaW5zdGFuY2UuZHJhdygpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgY3JlYXRlVG9vbGJhciAoKSB7XG4gICAgICB2YXIgdW5pZ3JvdXAsXG4gICAgICAgIHRvb2xiYXIsXG4gICAgICAgIGNhbGN1bGF0ZWRCdXR0b25zLFxuICAgICAgICBjb250ZXh0dWFsQnV0dG9ucyxcbiAgICAgICAgYWxsQnV0dG9uLFxuICAgICAgICBzZWxmID0gdGhpcyxcbiAgICAgICAgZGVkdWN0b3JBciA9IFtdLFxuICAgICAgICBzdGFydE11bHRpcGxpZXIsXG4gICAgICAgIGRlZHVjdG9yLFxuICAgICAgICBpLFxuICAgICAgICBqLFxuICAgICAgICBtYXJnaW4sXG4gICAgICAgIGZyb21EYXRlTGFiZWwsXG4gICAgICAgIGdyb3VwO1xuXG4gICAgICBncm91cCA9IG5ldyB0aGlzLnRvb2xib3guQ29tcG9uZW50R3JvdXAoe1xuICAgICAgICBwYXBlcjogdGhpcy5ncmFwaGljcy5wYXBlcixcbiAgICAgICAgY2hhcnQ6IHRoaXMuY2hhcnQsXG4gICAgICAgIHNtYXJ0TGFiZWw6IHRoaXMuc21hcnRMYWJlbCxcbiAgICAgICAgY2hhcnRDb250YWluZXI6IHRoaXMuZ3JhcGhpY3MuY29udGFpbmVyXG4gICAgICB9KTtcblxuICAgICAgdW5pZ3JvdXAgPSBuZXcgdGhpcy50b29sYm94LlVuaVNlbGVjdENvbXBvbmVudEdyb3VwKHtcbiAgICAgICAgcGFwZXI6IHRoaXMuZ3JhcGhpY3MucGFwZXIsXG4gICAgICAgIGNoYXJ0OiB0aGlzLmNoYXJ0LFxuICAgICAgICBzbWFydExhYmVsOiB0aGlzLnNtYXJ0TGFiZWwsXG4gICAgICAgIGNoYXJ0Q29udGFpbmVyOiB0aGlzLmdyYXBoaWNzLmNvbnRhaW5lclxuICAgICAgfSk7XG4gICAgICB1bmlncm91cC5zZXRDb25maWcoe1xuICAgICAgICBmaWxsOiAnI2ZmZicsXG4gICAgICAgIGJvcmRlclRoaWNrbmVzczogMFxuICAgICAgfSk7XG4gICAgICBncm91cC5zZXRDb25maWcoe1xuICAgICAgICBmaWxsOiAnI2ZmZicsXG4gICAgICAgIGJvcmRlclRoaWNrbmVzczogMFxuICAgICAgfSk7XG4gICAgICB0b29sYmFyID0gbmV3IHRoaXMuSG9yaXpvbnRhbFRvb2xiYXIoe1xuICAgICAgICBwYXBlcjogdGhpcy5ncmFwaGljcy5wYXBlcixcbiAgICAgICAgY2hhcnQ6IHRoaXMuY2hhcnQsXG4gICAgICAgIHNtYXJ0TGFiZWw6IHRoaXMuc21hcnRMYWJlbCxcbiAgICAgICAgY2hhcnRDb250YWluZXI6IHRoaXMuZ3JhcGhpY3MuY29udGFpbmVyXG4gICAgICB9KTtcbiAgICAgIHRvb2xiYXIuc2V0Q29uZmlnKHtcbiAgICAgICAgZmlsbDogJyNmZmYnLFxuICAgICAgICBib3JkZXJUaGlja25lc3M6IDBcbiAgICAgIH0pO1xuICAgICAgZnJvbURhdGVMYWJlbCA9IG5ldyB0aGlzLnRvb2xib3guTGFiZWwoJ1pvb206Jywge1xuICAgICAgICBzbWFydExhYmVsOiB0aGlzLnNtYXJ0TGFiZWwsXG4gICAgICAgIHBhcGVyOiB0aGlzLmdyYXBoaWNzLnBhcGVyXG4gICAgICB9LCB7XG4gICAgICAgIHRleHQ6IHtcbiAgICAgICAgICBzdHlsZToge1xuICAgICAgICAgICAgJ2ZvbnQtZmFtaWx5JzogJ1wiTHVjaWRhIEdyYW5kZVwiLCBzYW5zLXNlcmlmJyxcbiAgICAgICAgICAgICdmb250LXNpemUnOiAnMTMnLFxuICAgICAgICAgICAgJ2ZpbGwnOiAnIzY5Njk2OScsXG4gICAgICAgICAgICAnZm9udC13ZWlnaHQnOiAnYm9sZCdcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGNvbnRhaW5lcjoge1xuICAgICAgICAgIGhlaWdodDogMjJcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBncm91cC5hZGRTeW1ib2woZnJvbURhdGVMYWJlbCk7XG4gICAgICBhbGxCdXR0b24gPSBuZXcgdGhpcy50b29sYm94LlN5bWJvbCgnQUxMJywgdHJ1ZSwge1xuICAgICAgICBwYXBlcjogdGhpcy5ncmFwaGljcy5wYXBlcixcbiAgICAgICAgY2hhcnQ6IHRoaXMuY2hhcnQsXG4gICAgICAgIHNtYXJ0TGFiZWw6IHRoaXMuc21hcnRMYWJlbCxcbiAgICAgICAgY2hhcnRDb250YWluZXI6IHRoaXMuZ3JhcGhpY3MuY29udGFpbmVyXG4gICAgICB9LCB7XG4gICAgICAgIGZpbGw6ICcjZmZmZmZmJyxcbiAgICAgICAgbGFiZWxGaWxsOiAnIzY5Njk2OScsXG4gICAgICAgIHN5bWJvbFN0cm9rZVdpZHRoOiAnMicsXG4gICAgICAgIHN0cm9rZTogJyNjZWQ1ZDQnLFxuICAgICAgICBzdHJva2VXaWR0aDogJzEnLFxuICAgICAgICBob3ZlckZpbGw6ICcjY2VkNWQ0JyxcbiAgICAgICAgaGVpZ2h0OiAyMixcbiAgICAgICAgcmFkaXVzOiAxLFxuICAgICAgICBtYXJnaW46IHtcbiAgICAgICAgICByaWdodDogNVxuICAgICAgICB9LFxuICAgICAgICBidG5UZXh0U3R5bGU6IHtcbiAgICAgICAgICAnZm9udEZhbWlseSc6ICdcIkx1Y2lkYSBHcmFuZGVcIiwgc2Fucy1zZXJpZicsXG4gICAgICAgICAgJ2ZvbnRTaXplJzogJzEzJyxcbiAgICAgICAgICAnZmlsbCc6ICcjNjk2OTY5JyxcbiAgICAgICAgICAnbGluZS1oZWlnaHQnOiAnMScsXG4gICAgICAgICAgJ2xldHRlci1zcGFjaW5nJzogJy0wLjA0ZW0nXG4gICAgICAgIH1cbiAgICAgIH0pLmF0dGFjaEV2ZW50SGFuZGxlcnMoe1xuICAgICAgICBjbGljazogZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHNlbGYuc2V0QWN0aXZlUGVyaW9kKHNlbGYuc3RhcnREYXRhc2V0LCBzZWxmLmVuZERhdGFzZXQpO1xuICAgICAgICAgIHRvb2xiYXIuZGlzcG9zZSgpO1xuICAgICAgICAgIHNlbGYuY2xpY2tlZElkID0gJ0FMTCc7XG4gICAgICAgICAgc2VsZi50b29sYmFycy5wb3AoKTtcbiAgICAgICAgICBzZWxmLnRvb2xiYXJzLnB1c2goc2VsZi5jcmVhdGVUb29sYmFyKCkpO1xuICAgICAgICAgIHNlbGYuZ2V0TG9naWNhbFNwYWNlKCk7XG4gICAgICAgICAgc2VsZi5kcmF3KCk7XG4gICAgICAgICAgLy8gc2VsZi5fcmVmLnJlQWxsb2NhdGUoc2VsZi5wYXJlbnRHcm91cCk7XG4gICAgICAgIH0sXG4gICAgICAgIHRvb2x0ZXh0OiAnQUxMJ1xuICAgICAgfSk7XG5cbiAgICAgIHVuaWdyb3VwLmFkZFN5bWJvbChhbGxCdXR0b24pO1xuICAgICAgZm9yIChpID0gMDsgaSA8IHRoaXMuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBmb3IgKGogPSB0aGlzLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHNbaV0ubXVsdGlwbGllcnMubGVuZ3RoIC0gMTsgaiA+PSAwOyBqLS0pIHtcbiAgICAgICAgICBkZWR1Y3RvckFyLnB1c2goc2VsZi5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW2ldLm11bHRpcGxpZXJzW2pdICogc2VsZi5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW2ldLm1pbGxpc2Vjb25kcyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY2FsY3VsYXRlZEJ1dHRvbnMgPSBbXTtcbiAgICAgIGZvciAobGV0IGkgPSBzZWxmLnN0YXJ0UG9pbnRVbml0OyBpID49IDA7IGktLSkge1xuICAgICAgICBpZiAoaSA9PT0gc2VsZi5zdGFydFBvaW50VW5pdCkge1xuICAgICAgICAgIHN0YXJ0TXVsdGlwbGllciA9IHNlbGYuc3RhcnRQb2ludE11bHRpcGxpZXI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3RhcnRNdWx0aXBsaWVyID0gc2VsZi5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW2ldLm11bHRpcGxpZXJzLmxlbmd0aCAtIDE7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgaiA9IHN0YXJ0TXVsdGlwbGllcjsgaiA+PSAwOyBqLS0pIHtcbiAgICAgICAgICBtYXJnaW4gPSAoaSA9PT0gc2VsZi5ub0NhbGNCdXR0b25zICYmIGogPT09IDApID8gNSA6IDA7XG4gICAgICAgICAgY2FsY3VsYXRlZEJ1dHRvbnNbaV0gPSBuZXcgdGhpcy50b29sYm94LlN5bWJvbChzZWxmLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHNbaV0ubXVsdGlwbGllcnNbal0gKyBzZWxmLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHNbaV0uYWJicmV2aWF0aW9uLCB0cnVlLCB7XG4gICAgICAgICAgICBwYXBlcjogdGhpcy5ncmFwaGljcy5wYXBlcixcbiAgICAgICAgICAgIGNoYXJ0OiB0aGlzLmNoYXJ0LFxuICAgICAgICAgICAgc21hcnRMYWJlbDogdGhpcy5zbWFydExhYmVsLFxuICAgICAgICAgICAgY2hhcnRDb250YWluZXI6IHRoaXMuZ3JhcGhpY3MuY29udGFpbmVyXG4gICAgICAgICAgfSwge1xuICAgICAgICAgICAgZmlsbDogJyNmZmZmZmYnLFxuICAgICAgICAgICAgbGFiZWxGaWxsOiAnIzY5Njk2OScsXG4gICAgICAgICAgICBzeW1ib2xTdHJva2VXaWR0aDogJzInLFxuICAgICAgICAgICAgc3Ryb2tlOiAnI2NlZDVkNCcsXG4gICAgICAgICAgICBzdHJva2VXaWR0aDogJzEnLFxuICAgICAgICAgICAgaG92ZXJGaWxsOiAnI2NlZDVkNCcsXG4gICAgICAgICAgICBoZWlnaHQ6IDIyLFxuICAgICAgICAgICAgcmFkaXVzOiAxLFxuICAgICAgICAgICAgbWFyZ2luOiB7XG4gICAgICAgICAgICAgIHJpZ2h0OiBtYXJnaW5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBidG5UZXh0U3R5bGU6IHtcbiAgICAgICAgICAgICAgJ2ZvbnRGYW1pbHknOiAnXCJMdWNpZGEgR3JhbmRlXCIsIHNhbnMtc2VyaWYnLFxuICAgICAgICAgICAgICAnZm9udFNpemUnOiAnMTMnLFxuICAgICAgICAgICAgICAnZmlsbCc6ICcjNjk2OTY5JyxcbiAgICAgICAgICAgICAgJ2xpbmUtaGVpZ2h0JzogJzEnLFxuICAgICAgICAgICAgICAnbGV0dGVyLXNwYWNpbmcnOiAnLTAuMDRlbSdcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KS5hdHRhY2hFdmVudEhhbmRsZXJzKHtcbiAgICAgICAgICAgICdjbGljayc6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgZGVkdWN0b3IgPSAoc2VsZi5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW2ldLm11bHRpcGxpZXJzW2pdICogc2VsZi5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW2ldLm1pbGxpc2Vjb25kcyk7XG4gICAgICAgICAgICAgIHNlbGYuY2xpY2tlZElkID0gc2VsZi5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW2ldLm11bHRpcGxpZXJzW2pdICsgc2VsZi5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW2ldLmFiYnJldmlhdGlvbjtcbiAgICAgICAgICAgICAgc2VsZi5zZXRBY3RpdmVQZXJpb2QoZGVkdWN0b3IpO1xuICAgICAgICAgICAgICB0b29sYmFyLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgICAgc2VsZi50b29sYmFycy5wb3AoKTtcbiAgICAgICAgICAgICAgc2VsZi50b29sYmFycy5wdXNoKHNlbGYuY3JlYXRlVG9vbGJhcigpKTtcbiAgICAgICAgICAgICAgc2VsZi5nZXRMb2dpY2FsU3BhY2UoKTtcbiAgICAgICAgICAgICAgc2VsZi5kcmF3KCk7XG4gICAgICAgICAgICAgIC8vIHNlbGYuX3JlZi5yZUFsbG9jYXRlKHNlbGYucGFyZW50R3JvdXApO1xuICAgICAgICAgICAgICAvLyB0aGlzLnRvb2xiYXJzW3RoaXMudG9vbGJhcnMubGVuZ3RoIC0gMV0gPSB0aGlzLmNyZWF0ZVRvb2xiYXIoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0b29sdGV4dDogc2VsZi5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW2ldLm11bHRpcGxpZXJzW2pdICsgJyAnICsgc2VsZi5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW2ldLmRlc2NyaXB0aW9uXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdW5pZ3JvdXAuYWRkU3ltYm9sKGNhbGN1bGF0ZWRCdXR0b25zW2ldKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb250ZXh0dWFsQnV0dG9ucyA9IFtdO1xuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc3RhbmRhcmRDb250ZXh1YWxQZXJpb2RzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnRleHR1YWxCdXR0b25zW2ldID0gbmV3IHRoaXMudG9vbGJveC5TeW1ib2wodGhpcy5zdGFuZGFyZENvbnRleHVhbFBlcmlvZHNbaV0uYWJicmV2aWF0aW9uLCB0cnVlLCB7XG4gICAgICAgICAgcGFwZXI6IHRoaXMuZ3JhcGhpY3MucGFwZXIsXG4gICAgICAgICAgY2hhcnQ6IHRoaXMuY2hhcnQsXG4gICAgICAgICAgc21hcnRMYWJlbDogdGhpcy5zbWFydExhYmVsLFxuICAgICAgICAgIGNoYXJ0Q29udGFpbmVyOiB0aGlzLmdyYXBoaWNzLmNvbnRhaW5lclxuICAgICAgICB9LCB7XG4gICAgICAgICAgZmlsbDogJyNmZmZmZmYnLFxuICAgICAgICAgIGxhYmVsRmlsbDogJyM2OTY5NjknLFxuICAgICAgICAgIHN5bWJvbFN0cm9rZVdpZHRoOiAnMicsXG4gICAgICAgICAgc3Ryb2tlOiAnI2NlZDVkNCcsXG4gICAgICAgICAgc3Ryb2tlV2lkdGg6ICcxJyxcbiAgICAgICAgICBoZWlnaHQ6IDIyLFxuICAgICAgICAgIGhvdmVyRmlsbDogJyNjZWQ1ZDQnLFxuICAgICAgICAgIHJhZGl1czogMSxcbiAgICAgICAgICBtYXJnaW46IHtcbiAgICAgICAgICAgIHJpZ2h0OiAwXG4gICAgICAgICAgfSxcbiAgICAgICAgICBidG5UZXh0U3R5bGU6IHtcbiAgICAgICAgICAgICdmb250RmFtaWx5JzogJ1wiTHVjaWRhIEdyYW5kZVwiLCBzYW5zLXNlcmlmJyxcbiAgICAgICAgICAgICdmb250U2l6ZSc6ICcxMycsXG4gICAgICAgICAgICAnZmlsbCc6ICcjNjk2OTY5JyxcbiAgICAgICAgICAgICdsaW5lLWhlaWdodCc6ICcxJyxcbiAgICAgICAgICAgICdsZXR0ZXItc3BhY2luZyc6ICctMC4wNGVtJ1xuICAgICAgICAgIH1cbiAgICAgICAgfSkuYXR0YWNoRXZlbnRIYW5kbGVycyh7XG4gICAgICAgICAgJ2NsaWNrJzogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgc2VsZi5zZXRBY3RpdmVQZXJpb2Qoc2VsZi5zdGFuZGFyZENvbnRleHVhbFBlcmlvZHNbaV0uZGF0ZVN0YXJ0LCBzZWxmLnN0YW5kYXJkQ29udGV4dWFsUGVyaW9kc1tpXS5kYXRlRW5kKTtcbiAgICAgICAgICAgIHNlbGYuY2xpY2tlZElkID0gc2VsZi5zdGFuZGFyZENvbnRleHVhbFBlcmlvZHNbaV0uYWJicmV2aWF0aW9uO1xuICAgICAgICAgICAgdG9vbGJhci5kaXNwb3NlKCk7XG4gICAgICAgICAgICBzZWxmLnRvb2xiYXJzLnBvcCgpO1xuICAgICAgICAgICAgc2VsZi50b29sYmFycy5wdXNoKHNlbGYuY3JlYXRlVG9vbGJhcigpKTtcbiAgICAgICAgICAgIHNlbGYuZ2V0TG9naWNhbFNwYWNlKCk7XG4gICAgICAgICAgICBzZWxmLmRyYXcoKTtcbiAgICAgICAgICAgIC8vIHNlbGYuX3JlZi5yZUFsbG9jYXRlKHNlbGYucGFyZW50R3JvdXApO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgdG9vbHRleHQ6IHRoaXMuc3RhbmRhcmRDb250ZXh1YWxQZXJpb2RzW2ldLmRlc2NyaXB0aW9uXG4gICAgICAgIH0pO1xuICAgICAgICB1bmlncm91cC5hZGRTeW1ib2woY29udGV4dHVhbEJ1dHRvbnNbaV0pO1xuICAgICAgfVxuXG4gICAgICAgIC8vIGJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ0JVVFRPTicpO1xuICAgICAgICAvLyBidG4uaWQgPSBzdGFuZGFyZFBlcmlvZHNbaV0uYWJicmV2aWF0aW9uO1xuICAgICAgICAvLyBidG4uaW5uZXJIVE1MID0gc3RhbmRhcmRQZXJpb2RzW2ldLmFiYnJldmlhdGlvbjtcbiAgICAgICAgLy8gYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZXZlbnRCdG4uYmluZCh0aGlzLCBzdGFuZGFyZFBlcmlvZHNbaV0pKTtcbiAgICAgICAgLy8gY29udGV4dHVhbEJ1dHRvbnMuYXBwZW5kQ2hpbGQoYnRuKTtcblxuICAgICAgdGhpcy5TeW1ib2xTdG9yZS5yZWdpc3RlcigndGV4dEJveEljb24nLCBmdW5jdGlvbiAoeCwgeSwgcmFkLCB3LCBoLCBwYWRYLCBwYWRZKSB7XG4gICAgICAgIHZhciB4MSA9IHggLSB3IC8gMiArIHBhZFggLyAyLFxuICAgICAgICAgIHgyID0geCArIHcgLyAyIC0gcGFkWCAvIDIsXG4gICAgICAgICAgeTEgPSB5IC0gaCAvIDIgKyBwYWRZIC8gMixcbiAgICAgICAgICB5MiA9IHkgKyBoIC8gMiAtIHBhZFkgLyAyO1xuXG4gICAgICAgIHJldHVybiBbJ00nLCB4MSwgeTEsICdMJywgeDIsIHkxLCAnTCcsIHgyLCB5MiwgJ0wnLCB4MSwgeTIsICdaJ107XG4gICAgICB9KTtcblxuICAgICAgdG9vbGJhci5hZGRDb21wb25lbnQoZ3JvdXApO1xuICAgICAgdG9vbGJhci5hZGRDb21wb25lbnQodW5pZ3JvdXApO1xuICAgICAgdGhpcy50b29sYmFyID0gdG9vbGJhcjtcbiAgICAgIHJldHVybiB0b29sYmFyO1xuICAgIH07XG5cbiAgICBnZXRMb2dpY2FsU3BhY2UgKGF2YWlsYWJsZVdpZHRoID0gdGhpcy5fcFdpZHRoLCBhdmFpbGFibGVIZWlnaHQgPSB0aGlzLl9wSGVpZ2h0KSB7XG4gICAgICAvLyBhdmFpbGFibGVXaWR0aCAvPSAyO1xuICAgICAgdmFyIGxvZ2ljYWxTcGFjZSxcbiAgICAgICAgd2lkdGggPSA0MjAsIC8vIHdpZHRoIGhhcmRjb2RlZDsgVE9ETzogbWFrZSBpdCBkeW5hbWljXG4gICAgICAgIGhlaWdodCA9IDAsXG4gICAgICAgIGksXG4gICAgICAgIGxuO1xuXG4gICAgICBmb3IgKGkgPSAwLCBsbiA9IHRoaXMudG9vbGJhcnMubGVuZ3RoOyBpIDwgbG47IGkrKykge1xuICAgICAgICBsb2dpY2FsU3BhY2UgPSB0aGlzLnRvb2xiYXJzW2ldLmdldExvZ2ljYWxTcGFjZShhdmFpbGFibGVXaWR0aCwgYXZhaWxhYmxlSGVpZ2h0KTtcbiAgICAgICAgLy8gd2lkdGggPSBNYXRoLm1heChsb2dpY2FsU3BhY2Uud2lkdGgsIHdpZHRoKTtcbiAgICAgICAgaGVpZ2h0ICs9IGxvZ2ljYWxTcGFjZS5oZWlnaHQ7XG4gICAgICAgIHRoaXMudG9vbGJhcnNbaV0ud2lkdGggPSBsb2dpY2FsU3BhY2Uud2lkdGg7XG4gICAgICAgIHRoaXMudG9vbGJhcnNbaV0uaGVpZ2h0ID0gbG9naWNhbFNwYWNlLmhlaWdodDtcbiAgICAgIH1cbiAgICAgIGhlaWdodCArPSB0aGlzLnBhZGRpbmc7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB3aWR0aDogd2lkdGgsXG4gICAgICAgIGhlaWdodDogaGVpZ2h0XG4gICAgICB9O1xuICAgIH07XG5cbiAgICBnZXREZWZhdWx0R3JvdXAgKCkge1xuICAgICAgcmV0dXJuIHRoaXMucGFyZW50R3JvdXA7XG4gICAgfVxuXG4gICAgcGxhY2VJbkNhbnZhcyAoKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICBzZWxmLnBhZGRpbmcgPSA1O1xuICAgICAgc2VsZi5zcGFjZU1hbmFnZXJJbnN0YW5jZS5hZGQoW3tcbiAgICAgICAgbmFtZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJldHVybiAnc3RhbmRhcmQtcGVyaW9kLXNlbGVjdG9yLWV4dCc7XG4gICAgICAgIH0sXG4gICAgICAgIHJlZjogZnVuY3Rpb24gKG9iaikge1xuICAgICAgICAgIHJldHVybiBvYmpbJzAnXTtcbiAgICAgICAgfSxcbiAgICAgICAgc2VsZjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJldHVybiBzZWxmO1xuICAgICAgICB9LFxuICAgICAgICBwcmlvcml0eTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJldHVybiAyO1xuICAgICAgICB9LFxuICAgICAgICBsYXlvdXQ6IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgICByZXR1cm4gb2JqLmlubGluZTtcbiAgICAgICAgfSxcbiAgICAgICAgb3JpZW50YXRpb246IFt7XG4gICAgICAgICAgdHlwZTogZnVuY3Rpb24gKG9iaikge1xuICAgICAgICAgICAgcmV0dXJuIG9iai5ob3Jpem9udGFsO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgcG9zaXRpb246IFt7XG4gICAgICAgICAgICB0eXBlOiBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgICAgICAgIHJldHVybiBvYmoudG9wO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGFsaWdubWVudDogW3tcbiAgICAgICAgICAgICAgdHlwZTogZnVuY3Rpb24gKG9iaikge1xuICAgICAgICAgICAgICAgIHJldHVybiBvYmoubGVmdDtcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgZGltZW5zaW9uczogW2Z1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgcGFyZW50ID0gdGhpcy5nZXRQYXJlbnRDb21wb25lbnRHcm91cCgpO1xuICAgICAgICAgICAgICAgIHNlbGYuX3JlZiA9IHRoaXM7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYuZ2V0TG9naWNhbFNwYWNlKChzZWxmLl9wV2lkdGggPSBwYXJlbnQuZ2V0V2lkdGgoKSksIChzZWxmLl9wSGVpZ2h0ID0gcGFyZW50LmdldEhlaWdodCgpKSk7XG4gICAgICAgICAgICAgIH1dXG4gICAgICAgICAgICB9XVxuICAgICAgICAgIH1dXG4gICAgICAgIH1dXG4gICAgICB9XSk7XG4gICAgfTtcblxuICAgIHNldERyYXdpbmdDb25maWd1cmF0aW9uICh4LCB5LCB3aWR0aCwgaGVpZ2h0LCBncm91cCkge1xuICAgICAgdmFyIG1lcyA9IHRoaXMubWVhc3VyZW1lbnQ7XG4gICAgICBtZXMueCA9IHg7XG4gICAgICBtZXMueSA9IHk7XG4gICAgICBtZXMud2lkdGggPSB3aWR0aDtcbiAgICAgIG1lcy5oZWlnaHQgPSBoZWlnaHQ7XG5cbiAgICAgIHRoaXMucGFyZW50R3JvdXAgPSBncm91cDtcblxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIGRyYXcgKHgsIHksIHdpZHRoLCBoZWlnaHQsIGdyb3VwKSB7XG4gICAgICB2YXIgbWVhc3VyZW1lbnQgPSB0aGlzLm1lYXN1cmVtZW50LFxuICAgICAgICB0b29sYmFycyA9IHRoaXMudG9vbGJhcnMsXG4gICAgICAgIHNlbGYgPSB0aGlzLFxuICAgICAgICBsbixcbiAgICAgICAgaSxcbiAgICAgICAgdG9vbGJhcixcbiAgICAgICAgYm91bmRFbGVtZW50LFxuICAgICAgICBiQm94LFxuICAgICAgICB4MSxcbiAgICAgICAgeDIsXG4gICAgICAgIHkyLFxuICAgICAgICBzZWxlY3RMaW5lLFxuICAgICAgICBtb2RlbCA9IHRoaXMuZ2xvYmFsUmVhY3RpdmVNb2RlbDtcblxuICAgICAgdGhpcy5mbGFnID0gdHJ1ZTtcbiAgICAgIHNlbGVjdExpbmUgPSB0aGlzLnNhdmVTZWxlY3RMaW5lIHx8IHRoaXMuZ3JhcGhpY3MucGFwZXIucGF0aCh7XG4gICAgICAgICdzdHJva2UnOiAnI2M5NWE1YScsXG4gICAgICAgICdzdHJva2Utd2lkdGgnOiAnMnB4J1xuICAgICAgfSkudG9Gcm9udCgpO1xuICAgICAgeCA9IHggPT09IHVuZGVmaW5lZCA/IG1lYXN1cmVtZW50LnggOiB4O1xuICAgICAgeSA9IHkgPT09IHVuZGVmaW5lZCA/IG1lYXN1cmVtZW50LnkgOiB5O1xuICAgICAgd2lkdGggPSB3aWR0aCA9PT0gdW5kZWZpbmVkID8gbWVhc3VyZW1lbnQud2lkdGggOiB3aWR0aDtcbiAgICAgIGhlaWdodCA9IGhlaWdodCA9PT0gdW5kZWZpbmVkID8gbWVhc3VyZW1lbnQuaGVpZ2h0IDogaGVpZ2h0O1xuICAgICAgZ3JvdXAgPSBncm91cCA9PT0gdW5kZWZpbmVkID8gdGhpcy5wYXJlbnRHcm91cCA6IGdyb3VwO1xuICAgICAgaWYgKHdpZHRoICYmIGhlaWdodCkge1xuICAgICAgICBmb3IgKGkgPSAwLCBsbiA9IHRvb2xiYXJzLmxlbmd0aDsgaSA8IGxuOyBpKyspIHtcbiAgICAgICAgICB0b29sYmFyID0gdG9vbGJhcnNbaV07XG4gICAgICAgICAgdG9vbGJhci5kcmF3KHgsIHksIGdyb3VwKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy5zYXZlU2VsZWN0TGluZSA9IHNlbGVjdExpbmU7XG5cbiAgICAgIGZvciAobGV0IGkgPSAwLCBpaSA9IHRvb2xiYXJzWzBdLmNvbXBvbmVudEdyb3Vwc1sxXS5zeW1ib2xMaXN0OyBpIDwgaWkubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGlpW2ldLnN5bWJvbCA9PT0gdGhpcy5jbGlja2VkSWQpIHtcbiAgICAgICAgICBib3VuZEVsZW1lbnQgPSBpaVtpXS5nZXRCb3VuZEVsZW1lbnQoKTtcbiAgICAgICAgICBiQm94ID0gYm91bmRFbGVtZW50LmdldEJCb3goKTtcbiAgICAgICAgICB4MSA9IGJCb3gueDtcbiAgICAgICAgICB4MiA9IGJCb3gueDI7XG4gICAgICAgICAgeTIgPSBiQm94LnkyO1xuXG4gICAgICAgICAgc2VsZWN0TGluZS5hdHRyKHtcbiAgICAgICAgICAgIHBhdGg6IFsnTScsIHgxIC0gMC41LCB5MiAtIDAuNSwgJ0wnLCB4MiArIDAuNSwgeTIgLSAwLjVdXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICB9XG4gIHJldHVybiBTdGFuZGFyZFBlcmlvZFNlbGVjdG9yO1xufTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9zdGFuZGFyZC1wZXJpb2Qtc2VsZWN0b3IuanMiXSwic291cmNlUm9vdCI6IiJ9