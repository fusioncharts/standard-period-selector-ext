!function(t){function e(i){if(a[i])return a[i].exports;var n=a[i]={exports:{},id:i,loaded:!1};return t[i].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var a={};return e.m=t,e.c=a,e.p="",e(0)}([function(t,e,a){(function(t){"use strict";var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=a(2);!function(a,i){"object"===e(t)&&t.exports?t.exports=a.document?i(a):function(t){if(!t.document)throw new Error("Window with document not present");return i(t,!0)}:a.StandardPeriodSelector=i(a,!0)}("undefined"!=typeof window?window:void 0,function(t,e){var a=t.FusionCharts;a.register("extension",["private","standard-period-selector",function(){a.registerComponent("extensions","standard-period-selector",i({FusionCharts:a}))}])})}).call(e,a(1)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,a,i){return a&&t(e.prototype,a),i&&t(e,i),e}}();t.exports=function(t){var e=function(){function t(){a(this,t);var e=this;e.ratio=8,e.toolbox=FusionCharts.getComponent("api","toolbox"),e.HorizontalToolbar=e.toolbox.HorizontalToolbar,e.ComponentGroup=e.toolbox.ComponentGroup,e.SymbolStore=e.toolbox.SymbolStore,e.all=1,e.calculatedPeriods=[],e.startDataset=0,e.startActiveWindow=0,e.endActiveWindow=1,e.standardCalculatedPeriods=[],e.standardContexualPeriods=[],e.startPointUnit=0,e.startPointMultiplier=0,e.noCalcButtons=0,e.minimumBucket=1,e.buttonGroup={},e.toolbar={},e.categoryClicked,e.btns={contextualObj:{},calculatedObj:{}},e.tdButtons=[{name:"YTD",abbreviation:"YTD",parent:"year",milliseconds:31104e6,description:"Year to Date"},{name:"QTD",abbreviation:"QTD",parent:"month",multiplier:3,milliseconds:7776e6,description:"Quarter to Date"},{name:"MTD",abbreviation:"MTD",parent:"month",milliseconds:2592e6,description:"Month to Date"},{name:"WTD",abbreviation:"WTD",parent:"day",multiplier:7,milliseconds:6048e5,description:"Week to Date"},{name:"Y",abbreviation:"Y",parent:"day",milliseconds:864e5,description:"Yesterday"},{name:"T",abbreviation:"T",parent:"day",milliseconds:864e5,description:"Today"}],e.config={anchorPositions:"right",all:"1",contextual:"1",calculated:"1",tertiaryTimePeriods:{}},e._babTimer=0,e.propsChangeListener=function(t,a){e.startActiveWindow=t[1],e.endActiveWindow=a[1],e._babTimer?e.updatePending||(e.updatePending=!0,setTimeout(function(){e.updatePending=!1,e.onActiveRangeChange()},e._babTimer)):(e._babTimer=200,e.onActiveRangeChange())}}return i(t,[{key:"hideAllCalcBtns",value:function(){var t,e=this,a=e.btns.calculatedObj;for(t in a)a[t].btn.hide()}},{key:"showApplicableCalculatedButtons",value:function(){var t,e,a,i,n=this,o=0,r=0,l=0,s=0,c=n.endActiveWindow-n.startActiveWindow,d=n.anchorPositions,u=n.btns.calculatedObj,b=n.timePeriods,p=0,h=[],m=n.minimumBucket,f=n.maximumBucket;for("right"===d?t=n.endActiveWindow-n.startDataset:"left"===d&&(t=n.endDataset-n.startActiveWindow),n.hideAllCalcBtns(),o=0,r=b.length;o<r;o++)if(p=b[o].interval,a=b[o].name,i=b[o].abbreviation.single,t/p>=1)if(Math.floor(c/p)<1)h.push({name:a,abbreviation:i,multipliers:[1]});else for(h.push({name:a,abbreviation:i,multipliers:[]}),l=0,s=b[o].multipliers.length;l<s;l++)c/n.ratio<b[o].multipliers[l]*p&&b[o].multipliers[l]*p>m&&b[o].multipliers[l]*p<f&&h[h.length-1].multipliers.push(b[o].multipliers[l]);for(o=0,r=h.length;o<r;o++)for(l=0,s=h[o].multipliers.length;l<s;l++)e=h[o].multipliers[l]+h[o].name,u[e]&&u[e].btn&&u[e].btn.show();n.standardCalculatedPeriods=h,n.toolbar&&n.toolbar.redraw()}},{key:"highlightActiveRange",value:function(){var t,e,a,i,n,o,r=this,l=r.saveSelectLine,s=r.clickedId,c=r.btns.contextualObj,d=r.btns.calculatedObj;l||(l=r.saveSelectLine||(r.saveSelectLine=r.graphics.paper.path({stroke:"#c95a5a","stroke-width":"2px"}).toFront())),o=c[s]||d[s]||r.btns[s],o?(t=o.btn.svgElems.node,e=t.getBBox(),a=e.x,i=a+e.width,n=e.y+e.height,l.show().attr({path:["M",a+1,n-1.2,"L",i,n-1.2]})):l.hide()}},{key:"onActiveRangeChange",value:function(){var t,e,a,i=this,n=i.categoryClicked,o=i.clickedId,r=i.startDataset,l=i.endDataset,s=i.startActiveWindow,c=i.endActiveWindow,d=i.btns.contextualObj,u=i.btns.calculatedObj;if("ALL"===n)r===s&&l===c||(delete i.clickedId,delete i.categoryClicked);else if("contextual"===n)a=d[o],!a||s===a.contextStart&&c===a.contextEnd||(delete i.clickedId,delete i.categoryClicked);else if("calculated"===n)a=u[o],a&&c-s!==a.interval&&(delete i.clickedId,delete i.categoryClicked);else if(r===s&&l===c)i.clickedId="ALL",i.categoryClicked="ALL";else{for(t in d)a=d[t],s===a.contextStart&&c===a.contextEnd&&(i.clickedId=t,i.categoryClicked="contextual",e=!0);if(!e)for(t in u)a=u[t],c-s===a.interval&&(i.clickedId=t,i.categoryClicked="calculated")}i.toolbarDrawn&&(i.showApplicableCalculatedButtons(),i.highlightActiveRange())}},{key:"processMultipliers",value:function(t,e){for(var a=0,i=t.length;a<i;a++){var n=t[a].possibleFactors.length,o=t[a]&&t[a].name,r=t&&t[a];r.multipliers=[],void 0===e&&(e={}),e[o]?r.multipliers=e[o]:1===n?r.multipliers.push(r.possibleFactors[0]):2===n?(r.multipliers.push(r.possibleFactors[0]),r.multipliers.push(r.possibleFactors[n-1])):(r.multipliers.push(r.possibleFactors[0]),r.multipliers.push(Math.floor(r.possibleFactors[n-1]/2)),r.multipliers.push(r.possibleFactors[n-1]))}return t}},{key:"createCalculatedButtons",value:function(t){for(var e,a,i=this,n=i.btns.calculatedObj,o=i.anchorPositions,r=i.minimumBucket,l=i.maximumBucket,s=i.globalReactiveModel.model,c=i.timePeriods.length-1;c>=0;c--)for(var d=function(d){var u=i.timePeriods[c].multipliers[d]+i.timePeriods[c].abbreviation.single,b=i.timePeriods[c].multipliers[d]+i.timePeriods[c].name,p=i.timePeriods[c].multipliers[d]*i.timePeriods[c].interval;p>r&&p<l&&(a=n[b]={interval:p,fn:function(){i.clickedId=b,i.categoryClicked="calculated",i.highlightActiveRange(),"right"===o?s["x-axis-absolute-range-start"]>i.endActiveWindow-p?i.globalReactiveModel.lock().prop("x-axis-visible-range-end",s["x-axis-absolute-range-start"]+p).prop("x-axis-visible-range-start",i.startDataset).unlock():s["x-axis-visible-range-start"]=i.endActiveWindow-p:s["x-axis-absolute-range-end"]<i.startActiveWindow+p?i.globalReactiveModel.lock().prop("x-axis-visible-range-end",i.endDataset).prop("x-axis-visible-range-start",s["x-axis-absolute-range-end"]-p).unlock():s["x-axis-visible-range-end"]=i.startActiveWindow+p},shortKey:u},e=new i.toolbox.Symbol(u,!0,{paper:i.graphics.paper,chart:i.chart,smartLabel:i.smartLabel,chartContainer:i.graphics.container},i.extData.style["calculated-config"]).attachEventHandlers({click:a.fn,tooltext:i.timePeriods[c].multipliers[d]+" "+i.timePeriods[c].description}),a.btn=e,t.addSymbol(e))},u=i.timePeriods[c].multipliers.length-1;u>=0;u--)d(u)}},{key:"generateCtxBtnList",value:function(){var t=this,e=t.standardContexualPeriods,a=0,i=0,n=t.globalReactiveModel.model["x-axis-absolute-range-end"],o=n-2,r=n,l={},s=t.tdButtons,c=t.minimumBucket||1,d=t.startActiveWindow,u=t.endActiveWindow;for(i=s.length;a<i;a++)o=new Date(n),"YTD"===s[a].name?(o.setMonth(0),o.setDate(1),o.setHours(0),o.setMinutes(0),o.setSeconds(0)):"MTD"===s[a].name?(o.setDate(1),o.setHours(0),o.setMinutes(0),o.setSeconds(0)):"QTD"===s[a].name?(o.setMonth(11-o.getMonth()%4),o.setDate(0),o.setHours(0),o.setMinutes(0),o.setSeconds(0)):"WTD"===s[a].name?(o.setDate(o.getDate()-o.getDay()),o.setHours(0),o.setMinutes(0),o.setSeconds(0)):"Y"===s[a].name?(o.setHours(0),o.setMinutes(0),o.setSeconds(0),o-=864e5):"T"===s[a].name&&(o.setHours(0),o.setMinutes(0),o.setSeconds(0),n===+o&&(o=+o-864e5)),r<o&&r-o<c||(s[a].dateStart=o.valueOf(),s[a].dateEnd=r.valueOf(),e.push(s[a]));for(l.milliseconds=1/0,a=0,i=s.length;a<i;a++)Math.abs(s[a].milliseconds-(u-d))<l.milliseconds&&(l.milliseconds=s[a].milliseconds,l.name=s[a].abbreviation)}},{key:"createContextualButtons",value:function(t){var e,a,i,n,o=this,r=o.btns.contextualObj;n=!!o.extData["calculated-button"],o.generateCtxBtnList();for(var l=function(l,s){return o.standardContexualPeriods[l].dateEnd-o.standardContexualPeriods[l].dateStart>=o.minimumBucket&&o.standardContexualPeriods[l].dateStart>o.startDataset?(e=n?o.extData.style["contextual-config-first"]:o.extData.style["contextual-config"],n=!1,i=o.standardContexualPeriods[l].abbreviation,a=r[i]={contextStart:o.standardContexualPeriods[l].dateStart,contextEnd:o.standardContexualPeriods[l].dateEnd,fn:function(){o.categoryClicked="contextual",o.clickedId=o.standardContexualPeriods[l].abbreviation,o.highlightActiveRange(),o.globalReactiveModel.lock().prop("x-axis-visible-range-end",o.standardContexualPeriods[l].dateEnd).prop("x-axis-visible-range-start",o.standardContexualPeriods[l].dateStart).unlock()}},a.btn=new o.toolbox.Symbol(o.standardContexualPeriods[l].abbreviation,!0,{paper:o.graphics.paper,chart:o.chart,smartLabel:o.smartLabel,chartContainer:o.graphics.container},e).attachEventHandlers({click:a.fn,tooltext:o.standardContexualPeriods[l].description}),void t.addSymbol(a.btn)):"continue"},s=0,c=this.standardContexualPeriods.length;s<c;s++){l(s,c)}}},{key:"createToolbar",value:function(){var t,e,a,i,n,o,r=this;e=new r.HorizontalToolbar({paper:r.graphics.paper,chart:r.chart,smartLabel:r.smartLabel,chartContainer:r.graphics.container}),e.setConfig({fill:"#fff",borderThickness:0}),n=new r.toolbox.ComponentGroup({paper:r.graphics.paper,chart:r.chart,smartLabel:r.smartLabel,chartContainer:r.graphics.container}),t=new r.toolbox.ComponentGroup({paper:r.graphics.paper,chart:r.chart,smartLabel:r.smartLabel,chartContainer:r.graphics.container}),o=new r.toolbox.ComponentGroup({paper:r.graphics.paper,chart:r.chart,smartLabel:r.smartLabel,chartContainer:r.graphics.container}),o.setConfig({fill:"#fff",borderThickness:0}),t.setConfig({fill:"#fff",borderThickness:0}),n.setConfig({fill:"#fff",borderThickness:0}),i=new r.toolbox.Label("Zoom:",{smartLabel:r.smartLabel,paper:r.graphics.paper},r.extData.style["label-config"]),n.addSymbol(i),a=r.allButtonShow&&{fn:function(){r.clickedId="ALL",r.categoryClicked="ALL",r.highlightActiveRange(),r.globalReactiveModel.lock().prop("x-axis-visible-range-end",r.endDataset).prop("x-axis-visible-range-start",r.startDataset).unlock()}},a&&(a.btn=new r.toolbox.Symbol("ALL",!0,{paper:r.graphics.paper,chart:r.chart,smartLabel:r.smartLabel,chartContainer:r.graphics.container},r.extData.style["all-config"]).attachEventHandlers({click:a.fn,tooltext:"ALL"}),r.btns.ALL=a,t.addSymbol(a.btn));for(var l=0;l<6;l++)o.addSymbol(new r.toolbox.Symbol("ALL",!0,{paper:r.graphics.paper,chart:r.chart,smartLabel:r.smartLabel,chartContainer:r.graphics.container},r.extData.style["all-config"]).attachEventHandlers({click:a.fn,tooltext:"___"}));return r.dummyButtonGroup=o,e.addComponent(n),e.addComponent(t),e.addComponent(o),r.toolbar=e,r.buttonGroup=t,e}},{key:"init",value:function(t){var e=this;return t(["graphics","chart","canvasConfig","MarkerManager","reactiveModel","globalReactiveModel","spaceManagerInstance","smartLabel","extData","chartInstance",function(t,a,i,n,o,r,l,s,c,d){e.graphics=t,e.chart=a,e.markerManager=n,e.canvasConfig=i,e.reactiveModel=o,e.globalReactiveModel=r,e.spaceManagerInstance=l,e.smartLabel=s,e.extDataUser=c,e.chartInstance=d}]),e.extData={disabled:!1,"default-select":"ALL","all-button":!0,"contextual-button":!0,"calculated-button":!0,posWrtCanvas:"top","anchor-align":"right",layout:"inline",alignment:"left",orientation:"horizontal",customMultipliers:{millisecond:[1,500],second:[1,5,15,30],minute:[1,5,15,30],hour:[1,3,6,12],day:[1,7,15],month:[1,3,6],year:[1,3,5]},style:{"label-config":{text:{style:{"font-family":'"Lucida Grande", sans-serif',"font-size":"13",fill:"#4b4b4b"}},container:{height:22}},"all-config":{fill:"#ffffff",labelFill:"#4b4b4b",symbolStrokeWidth:"2",stroke:"#ced5d4",strokeWidth:"1",hoverFill:"#f7f7f7",height:22,radius:1,margin:{right:5},btnTextStyle:{fontFamily:'"Lucida Grande", sans-serif',fontSize:"13",fill:"#4b4b4b","line-height":"1","letter-spacing":"-0.04em"},shadow:{fill:"#000",opacity:"0.35"}},"calculated-config":{fill:"#ffffff",labelFill:"#4b4b4b",symbolStrokeWidth:"2",stroke:"#ced5d4",strokeWidth:"1",hoverFill:"#f7f7f7",height:22,radius:1,margin:{right:0},btnTextStyle:{fontFamily:'"Lucida Grande", sans-serif',fontSize:"13",fill:"#4b4b4b","line-height":"1","letter-spacing":"-0.04em"},shadow:{fill:"#000",opacity:"0.35"}},"contextual-config-first":{fill:"#ffffff",labelFill:"#4b4b4b",symbolStrokeWidth:"2",stroke:"#ced5d4",strokeWidth:"1",height:22,hoverFill:"#f7f7f7",radius:1,margin:{right:0,left:5},btnTextStyle:{fontFamily:'"Lucida Grande", sans-serif',fontSize:"13",fill:"#696969","line-height":"1","letter-spacing":"-0.04em"},shadow:{fill:"#000",opacity:"0.35"}},"contextual-config":{fill:"#ffffff",labelFill:"#4b4b4b",symbolStrokeWidth:"2",stroke:"#ced5d4",strokeWidth:"1",height:22,hoverFill:"#f7f7f7",radius:1,margin:{right:0,left:0},btnTextStyle:{fontFamily:'"Lucida Grande", sans-serif',fontSize:"13",fill:"#4b4b4b","line-height":"1","letter-spacing":"-0.04em"},shadow:{fill:"#000",opacity:"0.35"}}}},Object.assign(e.extData,e.extDataUser),e.endActiveWindow=e.globalReactiveModel.model["x-axis-visible-range-end"],e.startActiveWindow=e.globalReactiveModel.model["x-axis-visible-range-start"],e.startDataset=e.globalReactiveModel.model["x-axis-absolute-range-start"],e.endDataset=e.globalReactiveModel.model["x-axis-absolute-range-end"],e.maximumBucket=e.endDataset-e.startDataset,e.timeRules=e.chartInstance.apiInstance.getComponentStore(),e.timeRules=e.timeRules.getCanvasByIndex(0).composition.impl,e.timeRules=e.timeRules.getDataAggregator(),e.timeRules=e.timeRules.getAggregationTimeRules(),e.timePeriods=e.processMultipliers(e.timeRules,e.extData.customMultipliers),e.allButtonShow=e.extData["all-button"],e.calculatedButtonShow=e.extData["calculated-button"],e.contextualButtonShow=e.extData["contextual-button"],e.anchorPositions=e.extData["anchor-align"],e.customMultipliers=e.extData.customMultipliers,e.keySelect=e.extData["default-select"],e.measurement={},e.flag=!0,e.toolbars=[],e.toolbars.push(e.createToolbar()),e.globalReactiveModel.onPropsChange(["x-axis-visible-range-start","x-axis-visible-range-end"],e.propsChangeListener),e.globalReactiveModel.onPropChange("x-axis-absolute-range-end",function(t){"contextual"===e.categoryClicked&&(e.globalReactiveModel.model["x-axis-visible-range-end"]=e.globalReactiveModel.model["x-axis-absolute-range-end"])}),e}},{key:"getLogicalSpace",value:function(){var t,e,a,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._pWidth,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._pHeight,o=0,r=0,l=this;for(e=0,a=l.toolbars.length;e<a;e++)t=l.toolbars[e].getLogicalSpace(i,n),o=Math.max(t.width,o),r+=t.height,l.toolbars[e].width=t.width,l.toolbars[e].height=t.height;return r+=l.padding,{width:o,height:r}}},{key:"getDefaultGroup",value:function(){return this.parentGroup}},{key:"placeInCanvas",value:function(){var t=this;t.padding=5,t.spaceManagerInstance.add([{name:function(){return"standard-period-selector-ext"},ref:function(t){return t[0]},self:function(){return t},priority:function(){return 2},layout:function(e){return e[t.extData.layout]||"inline"},orientation:[{type:function(e){return e[t.extData.orientation]||"horizontal"},position:[{type:function(e){return e[t.extData.posWrtCanvas]||"top"},alignment:[{type:function(e){return e[t.extData.alignment]||"left"},dimensions:[function(){var e=this.getParentComponentGroup();return t._ref=this,t.getLogicalSpace(t._pWidth=e.getWidth(),t._pHeight=e.getHeight())}]}]}]}]}])}},{key:"setDrawingConfiguration",value:function(t,e,a,i,n){var o=this.measurement;return o.x=t,o.y=e,o.width=a,o.height=i,this.parentGroup=n,this}},{key:"draw",value:function(t,e,a,i,n){var o,r,l,s,c,d,u=this,b=u.measurement,p=u.toolbars,h=u.btns.contextualObj,m=u.btns.calculatedObj,f=u.clickedId,g=u.globalReactiveModel.model,x=u.minimumBucket,v=u.buttonGroup;if(x=g["minimum-consecutive-datestamp-diff"]*g["x-axis-maximum-allowed-ticks"],u.minimumBucket=x,u.dummyButtonGroup.dispose(),u.calculatedButtonShow&&u.createCalculatedButtons(v),u.contextualButtonShow&&u.createContextualButtons(v),u.keySelect){if("ALL"===u.keySelect)u.clickedId="ALL";else if(h[u.keySelect])u.clickedId=u.keySelect;else{c=!0;for(d in m)c&&m[d].shortKey===u.keySelect&&(u.clickedId=d,c=!1)}delete u.keySelect,f=u.clickedId}if(t=void 0===t?b.x:t,e=void 0===e?b.y:e,a=void 0===a?b.width:a,i=void 0===i?b.height:i,n=void 0===n?this.parentGroup:n,a&&i){for(r=0,o=p.length;r<o;r++)l=p[r],l.draw(t,e,n),u.toolbarDrawn=!0;f?(s=m[f]||h[f]||u.btns[f],s?s.fn&&s.fn():u.onActiveRangeChange()):u.onActiveRangeChange()}}}]),t}();return e}}]);
//# sourceMappingURL=standard-period-selector-es5.min.js.map