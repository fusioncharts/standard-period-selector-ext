!function(t){function e(a){if(i[a])return i[a].exports;var s=i[a]={exports:{},id:a,loaded:!1};return t[a].call(s.exports,s,s.exports,e),s.loaded=!0,s.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){(function(t){"use strict";var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=i(2);window.stPS=new a,function(i,a){"object"===e(t)&&t.exports?t.exports=i.document?a(i):function(t){if(!t.document)throw new Error("Window with document not present");return a(t,!0)}:i.StandardPeriodSelector=a(i,!0)}("undefined"!=typeof window?window:void 0,function(t,e){var i=t.FusionCharts;i.register("extension",["private","StandardPeriodSelector",function(){i.registerComponent("extensions","StandardPeriodSelector",a({FusionCharts:i}))}])})}).call(e,i(1)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}();t.exports=function(t){var e=function(){function t(){i(this,t),this.ratio=8,this.toolbox=FusionCharts.getComponent("api","toolbox"),this.HorizontalToolbar=this.toolbox.HorizontalToolbar,this.ComponentGroup=this.toolbox.ComponentGroup,this.SymbolStore=this.toolbox.SymbolStore,this.all=1,this.calculatedPeriods=[],this.startDataset=0,this.startActiveWindow=0,this.endActiveWindow=1,this.standardCalculatedPeriods=[],this.standardContexualPeriods=[],this.startPointUnit=0,this.startPointMultiplier=0,this.clickedId="ALL",this.noCalcButtons=0,this.timePeriods=[{name:"second",milliseconds:1e3,startingPoint:0,total:60,abbreviation:"s",description:"SECOND",parent:"minute",multipliers:[1,5,15,30]},{name:"minute",milliseconds:6e4,startingPoint:0,total:60,abbreviation:"m",description:"MINUTE",parent:"hour",multipliers:[1,5,15,30]},{name:"hour",milliseconds:36e5,startingPoint:0,total:24,abbreviation:"H",description:"HOUR",parent:"day",multipliers:[1,3,6,12]},{name:"day",milliseconds:864e5,startingPoint:0,total:30,abbreviation:"D",description:"DAY",parent:"month",multipliers:[1,7,15]},{name:"month",milliseconds:2592e6,startingPoint:0,total:12,abbreviation:"M",description:"MONTH",parent:"year",multipliers:[1,3,6]},{name:"year",milliseconds:31104e6,startingPoint:0,abbreviation:"Y",description:"YEAR",multipliers:[1]}],this.tdButtons=[{name:"YTD",abbreviation:"YTD",parent:"year",milliseconds:31104e6,description:"Year to Date"},{name:"QTD",abbreviation:"QTD",parent:"month",multiplier:3,milliseconds:7776e6,description:"Quarter to Date"},{name:"MTD",abbreviation:"MTD",parent:"month",milliseconds:2592e6,description:"Month to Date"},{name:"WTD",abbreviation:"WTD",parent:"day",multiplier:7,milliseconds:6048e5,description:"Week to Date"},{name:"Y",abbreviation:"Y",parent:"day",milliseconds:864e5,description:"Yesterday"},{name:"T",abbreviation:"T",parent:"day",milliseconds:864e5,description:"Today"}],this.config={anchorPositions:"right",all:"1",contextual:"1",calculated:"1",tertiaryTimePeriods:{}}}return a(t,[{key:"generateCalculatedButtons",value:function(){var t=this.endActiveWindow-this.startDataset,e=0,i=0,a=this.endActiveWindow-this.startActiveWindow,s=0;for(this.standardCalculatedPeriods=[],e=0;e<this.timePeriods.length;e++)if(t/this.timePeriods[e].milliseconds>=1)if(Math.floor(a/this.timePeriods[e].milliseconds)<1)this.standardCalculatedPeriods.push({abbreviation:this.timePeriods[e].abbreviation,description:this.timePeriods[e].description,milliseconds:this.timePeriods[e].milliseconds,multipliers:[1]});else for(this.standardCalculatedPeriods.push({abbreviation:this.timePeriods[e].abbreviation,description:this.timePeriods[e].description,milliseconds:this.timePeriods[e].milliseconds,multipliers:[]}),i=0;i<this.timePeriods[e].multipliers.length;i++)a/this.ratio<this.timePeriods[e].multipliers[i]*this.timePeriods[e].milliseconds&&this.standardCalculatedPeriods[this.standardCalculatedPeriods.length-1].multipliers.push(this.timePeriods[e].multipliers[i]);for(this.noCalcButtons=1/0,e=0;e<this.standardCalculatedPeriods.length;e++)for(i=0;i<this.standardCalculatedPeriods[e].multipliers.length;i++)++s,this.noCalcButtons>e&&(this.noCalcButtons=e),s<=4&&(this.startPointMultiplier=i,this.startPointUnit=e)}},{key:"generateContextualButtons",value:function(){for(var t=[],e=0,i=this.globalReactiveModel.model["x-axis-absolute-range-end"],a=i-2,s=i,o={};e<this.tdButtons.length;e++)a=new Date(i),"YTD"===this.tdButtons[e].name?(a.setMonth(0),a.setDate(1),a.setHours(0),a.setMinutes(0),a.setSeconds(0)):"MTD"===this.tdButtons[e].name?(a.setDate(1),a.setHours(0),a.setMinutes(0),a.setSeconds(0)):"QTD"===this.tdButtons[e].name?(a.setMonth(11-a.getMonth()%4),a.setDate(0),a.setHours(0),a.setMinutes(0),a.setSeconds(0)):"WTD"===this.tdButtons[e].name?(a.setDate(a.getDate()-a.getDay()),a.setHours(0),a.setMinutes(0),a.setSeconds(0)):"Y"===this.tdButtons[e].name?(a.setHours(0),a.setMinutes(0),a.setSeconds(0),a-=864e5):"T"===this.tdButtons[e].name&&(a.setHours(0),a.setMinutes(0),a.setSeconds(0)),s<a||(this.tdButtons[e].dateStart=a.valueOf(),this.tdButtons[e].dateEnd=s.valueOf(),t.push(this.tdButtons[e]));for(o.milliseconds=1/0,e=0;e<this.tdButtons.length;e++)Math.abs(this.tdButtons[e].milliseconds-(this.endActiveWindow-this.startActiveWindow))<o.milliseconds&&(o.milliseconds=this.tdButtons[e].milliseconds,o.name=this.tdButtons[e].abbreviation);this.standardContexualPeriods=t}},{key:"setActivePeriod",value:function(){var t,e;1===arguments.length?(e=this.globalReactiveModel.model["x-axis-visible-range-end"],t=e-arguments[0]):2===arguments.length&&(t=arguments[0],e=arguments[1]),this.startActiveWindow=t,this.endActiveWindow=e,this.generateCalculatedButtons(),this.globalReactiveModel.model["x-axis-visible-range-start"]=this.startActiveWindow,this.globalReactiveModel.model["x-axis-visible-range-end"]=this.endActiveWindow,this.generateContextualButtons()}},{key:"setTimeline",value:function(t,e){this.startDataset=t,this.endDataset=e,document.getElementById("startActiveRange").innerHTML=new Date(this.startDataset),document.getElementById("endActiveRange").innerHTML=new Date(this.endDataset),this.generateCalculatedButtons()}},{key:"configure",value:function(t){this.config=t}},{key:"init",value:function(t){var e=this;return t(["xAxis","yAxis","graphics","chart","dataset","PlotManager","canvasConfig","MarkerManager","reactiveModel","globalReactiveModel","spaceManagerInstance","smartLabel","chartInstance",function(t,i,a,s,o,n,r,l,d,c,h,u,p){e.xAxis=t,e.yAxis=i,e.graphics=a,e.chart=s,e.dataset=o,e.plotManager=n,e.markerManager=l,e.canvasConfig=r,e.reactiveModel=d,e.globalReactiveModel=c,e.spaceManagerInstance=h,e.smartLabel=u,e.chartInstance=p}]),this.spaceManagerInstance=e.spaceManagerInstance,this.globalReactiveModel=e.globalReactiveModel,this.endActiveWindow=e.globalReactiveModel.model["x-axis-visible-range-end"],this.startActiveWindow=e.globalReactiveModel.model["x-axis-visible-range-start"],this.startDataset=e.globalReactiveModel.model["x-axis-absolute-range-start"],this.endDataset=e.globalReactiveModel.model["x-axis-absolute-range-end"],this.setActivePeriod(this.startActiveWindow,this.endActiveWindow),this.setActivePeriod(this.startActiveWindow,this.endActiveWindow),this.timeRules=this.chartInstance.apiInstance.getComponentStore(),this.timeRules=this.timeRules.getCanvasByIndex(0).composition.impl,this.timeRules=this.timeRules.getDataAggregator(),this.timeRules=this.timeRules.getAggregationTimeRules(),console.log(this.timeRules),this.toolbars=[],this.measurement={},this.toolbars.push(this.createToolbar()),this}},{key:"createToolbar",value:function(){var t,e,i,a,s,o,n,r,l,d,c,h,u=this,p=this,m=(this.globalReactiveModel.model["x-axis-visible-range-end"],[]);for(h=new this.toolbox.ComponentGroup({paper:this.graphics.paper,chart:this.chart,smartLabel:this.smartLabel,chartContainer:this.graphics.container}),t=new this.toolbox.UniSelectComponentGroup({paper:this.graphics.paper,chart:this.chart,smartLabel:this.smartLabel,chartContainer:this.graphics.container}),t.setConfig({fill:"#fff",borderThickness:0}),h.setConfig({fill:"#fff",borderThickness:0}),e=new this.HorizontalToolbar({paper:this.graphics.paper,chart:this.chart,smartLabel:this.smartLabel,chartContainer:this.graphics.container}),e.setConfig({fill:"#fff",borderThickness:0}),c=new this.toolbox.Label("Zoom:",{smartLabel:this.smartLabel,paper:this.graphics.paper},{text:{style:{"font-size":"15","font-family":"MyriadPro",fill:"#696969","font-weight":"bold"}},container:{height:20}}),h.addSymbol(c),s=new this.toolbox.Symbol("ALL",!0,{paper:this.graphics.paper,chart:this.chart,smartLabel:this.smartLabel,chartContainer:this.graphics.container},{fill:"#ffffff",labelFill:"#696969",symbolStrokeWidth:"2",symbolStroke:"#000000",strokeWidth:"1",hoverFill:"#7f7f7f",height:20,radius:1,margin:{right:5},btnTextStyle:{fontFamily:"MyriadPro",fontSize:"12"}}).attachEventHandlers({click:function(){p.setActivePeriod(p.startDataset,p.endDataset),e.dispose(),p.clickedId="ALL",p.toolbars.pop(),p.toolbars.push(p.createToolbar()),p.getLogicalSpace(),p.draw()}}),t.addSymbol(s),r=0;r<this.standardCalculatedPeriods.length;r++)for(l=this.standardCalculatedPeriods[r].multipliers.length-1;l>=0;l--)m.push(p.standardCalculatedPeriods[r].multipliers[l]*p.standardCalculatedPeriods[r].milliseconds);i=[];for(var f=function(a){o=a===p.startPointUnit?p.startPointMultiplier:p.standardCalculatedPeriods[a].multipliers.length-1;for(var s=function(s){d=a===p.noCalcButtons&&0===s?5:0,i[a]=new u.toolbox.Symbol(p.standardCalculatedPeriods[a].multipliers[s]+p.standardCalculatedPeriods[a].abbreviation,!0,{paper:u.graphics.paper,chart:u.chart,smartLabel:u.smartLabel,chartContainer:u.graphics.container},{fill:"#ffffff",labelFill:"#696969",symbolStrokeWidth:"2",symbolStroke:"#000000",strokeWidth:"1",hoverFill:"#7f7f7f",height:20,radius:1,margin:{right:d},btnTextStyle:{fontFamily:"MyriadPro",fontSize:"12"}}).attachEventHandlers({click:function(){n=p.standardCalculatedPeriods[a].multipliers[s]*p.standardCalculatedPeriods[a].milliseconds,p.clickedId=p.standardCalculatedPeriods[a].multipliers[s]+p.standardCalculatedPeriods[a].abbreviation,p.setActivePeriod(n),e.dispose(),p.toolbars.pop(),p.toolbars.push(p.createToolbar()),p.getLogicalSpace(),p.draw()}}),t.addSymbol(i[a])},r=o;r>=0;r--)s(r)},b=p.startPointUnit;b>=0;b--)f(b);a=[];for(var g=function(i){a[i]=new u.toolbox.Symbol(u.standardContexualPeriods[i].abbreviation,!0,{paper:u.graphics.paper,chart:u.chart,smartLabel:u.smartLabel,chartContainer:u.graphics.container},{fill:"#ffffff",labelFill:"#696969",symbolStrokeWidth:"2",symbolStroke:"#000000",strokeWidth:"1",height:20,hoverFill:"#7f7f7f",radius:1,margin:{right:0},btnTextStyle:{fontFamily:"MyriadPro",fontSize:"12"}}).attachEventHandlers({click:function(){p.setActivePeriod(p.standardContexualPeriods[i].dateStart,p.standardContexualPeriods[i].dateEnd),p.clickedId=p.standardContexualPeriods[i].abbreviation,e.dispose(),p.toolbars.pop(),p.toolbars.push(p.createToolbar()),p.getLogicalSpace(),p.draw()}}),t.addSymbol(a[i])},v=0;v<this.standardContexualPeriods.length;v++)g(v);return this.SymbolStore.register("textBoxIcon",function(t,e,i,a,s,o,n){var r=t-a/2+o/2,l=t+a/2-o/2,d=e-s/2+n/2,c=e+s/2-n/2;return["M",r,d,"L",l,d,"L",l,c,"L",r,c,"Z"]}),e.addComponent(h),e.addComponent(t),e}},{key:"getLogicalSpace",value:function(){var t,e,i,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._pWidth,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._pHeight,o=420,n=0;for(e=0,i=this.toolbars.length;e<i;e++)t=this.toolbars[e].getLogicalSpace(a,s),n+=t.height,this.toolbars[e].width=t.width,this.toolbars[e].height=t.height;return n+=this.padding,{width:o,height:n}}},{key:"getDefaultGroup",value:function(){return this.parentGroup}},{key:"placeInCanvas",value:function(){var t=this;t.padding=5,t.spaceManagerInstance.add([{name:function(){return"standard-period-selector-ext"},ref:function(t){return t[0]},self:function(){return t},priority:function(){return 2},layout:function(t){return t.inline},orientation:[{type:function(t){return t.horizontal},position:[{type:function(t){return t.top},alignment:[{type:function(t){return t.left},dimensions:[function(){var e=this.getParentComponentGroup();return t._ref=this,t.getLogicalSpace(t._pWidth=e.getWidth(),t._pHeight=e.getHeight())}]}]}]}]}])}},{key:"setDrawingConfiguration",value:function(t,e,i,a,s){var o=this.measurement;return o.x=t,o.y=e,o.width=i,o.height=a,this.parentGroup=s,this}},{key:"draw",value:function(t,e,i,a,s){var o,n,r,l,d,c,h,u,p,m=this.measurement,f=this.toolbars;if(p=this.saveSelectLine||this.graphics.paper.path({stroke:"#ff0000"}).toFront(),t=void 0===t?m.x:t,e=void 0===e?m.y:e,i=void 0===i?m.width:i,a=void 0===a?m.height:a,s=void 0===s?this.parentGroup:s,i&&a)for(n=0,o=f.length;n<o;n++)r=f[n],r.draw(t,e,s);this.saveSelectLine=p;for(var b=0,g=f[0].componentGroups[1].symbolList;b<g.length;b++)g[b].symbol===this.clickedId&&(l=g[b].getBoundElement(),d=l.getBBox(),c=d.x,h=d.x2,u=d.y2,p.attr({path:["M",c,u-1,"L",h,u-1]}))}}]),t}();return e}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3RhbmRhcmQtcGVyaW9kLXNlbGVjdG9yLWVzNS5taW4uanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svYm9vdHN0cmFwIGY5NDY4YmQ1NjI0YzY0OTRlODMxIiwid2VicGFjazovLy8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL2J1aWxkaW4vbW9kdWxlLmpzIiwid2VicGFjazovLy8uL3NyYy9zdGFuZGFyZC1wZXJpb2Qtc2VsZWN0b3IuanMiXSwibmFtZXMiOlsibW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImluc3RhbGxlZE1vZHVsZXMiLCJleHBvcnRzIiwibW9kdWxlIiwiaWQiLCJsb2FkZWQiLCJjYWxsIiwibSIsImMiLCJwIiwiX3R5cGVvZiIsIlN5bWJvbCIsIml0ZXJhdG9yIiwib2JqIiwiY29uc3RydWN0b3IiLCJwcm90b3R5cGUiLCJTdGFuZGFyZFBlcmlvZFNlbGVjdG9yIiwid2luZG93Iiwic3RQUyIsImVudiIsImZhY3RvcnkiLCJkb2N1bWVudCIsIndpbiIsIkVycm9yIiwidW5kZWZpbmVkIiwiX3dpbmRvdyIsIndpbmRvd0V4aXN0cyIsIkZDIiwiRnVzaW9uQ2hhcnRzIiwicmVnaXN0ZXIiLCJyZWdpc3RlckNvbXBvbmVudCIsIndlYnBhY2tQb2x5ZmlsbCIsImRlcHJlY2F0ZSIsInBhdGhzIiwiY2hpbGRyZW4iLCJfY2xhc3NDYWxsQ2hlY2siLCJpbnN0YW5jZSIsIkNvbnN0cnVjdG9yIiwiVHlwZUVycm9yIiwiX2NyZWF0ZUNsYXNzIiwiZGVmaW5lUHJvcGVydGllcyIsInRhcmdldCIsInByb3BzIiwiaSIsImxlbmd0aCIsImRlc2NyaXB0b3IiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImtleSIsInByb3RvUHJvcHMiLCJzdGF0aWNQcm9wcyIsImRlcCIsInRoaXMiLCJyYXRpbyIsInRvb2xib3giLCJnZXRDb21wb25lbnQiLCJIb3Jpem9udGFsVG9vbGJhciIsIkNvbXBvbmVudEdyb3VwIiwiU3ltYm9sU3RvcmUiLCJhbGwiLCJjYWxjdWxhdGVkUGVyaW9kcyIsInN0YXJ0RGF0YXNldCIsInN0YXJ0QWN0aXZlV2luZG93IiwiZW5kQWN0aXZlV2luZG93Iiwic3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kcyIsInN0YW5kYXJkQ29udGV4dWFsUGVyaW9kcyIsInN0YXJ0UG9pbnRVbml0Iiwic3RhcnRQb2ludE11bHRpcGxpZXIiLCJjbGlja2VkSWQiLCJub0NhbGNCdXR0b25zIiwidGltZVBlcmlvZHMiLCJuYW1lIiwibWlsbGlzZWNvbmRzIiwic3RhcnRpbmdQb2ludCIsInRvdGFsIiwiYWJicmV2aWF0aW9uIiwiZGVzY3JpcHRpb24iLCJwYXJlbnQiLCJtdWx0aXBsaWVycyIsInRkQnV0dG9ucyIsIm11bHRpcGxpZXIiLCJjb25maWciLCJhbmNob3JQb3NpdGlvbnMiLCJjb250ZXh0dWFsIiwiY2FsY3VsYXRlZCIsInRlcnRpYXJ5VGltZVBlcmlvZHMiLCJ2YWx1ZSIsInRhcmdldEJsb2NrIiwiaiIsImFjdGl2ZVdpbmRvdyIsImNvdW50IiwiTWF0aCIsImZsb29yIiwicHVzaCIsIkluZmluaXR5IiwiYnV0dG9ucyIsImVuZFN0YW1wIiwiZ2xvYmFsUmVhY3RpdmVNb2RlbCIsIm1vZGVsIiwiZGF0ZVN0YXJ0IiwiZGF0ZUVuZCIsInJlbGF0aXZlVERCdXR0b24iLCJEYXRlIiwic2V0TW9udGgiLCJzZXREYXRlIiwic2V0SG91cnMiLCJzZXRNaW51dGVzIiwic2V0U2Vjb25kcyIsImdldE1vbnRoIiwiZ2V0RGF0ZSIsImdldERheSIsInZhbHVlT2YiLCJhYnMiLCJzdGFydCIsImVuZCIsImFyZ3VtZW50cyIsImdlbmVyYXRlQ2FsY3VsYXRlZEJ1dHRvbnMiLCJnZW5lcmF0ZUNvbnRleHR1YWxCdXR0b25zIiwiZW5kRGF0YXNldCIsImdldEVsZW1lbnRCeUlkIiwiaW5uZXJIVE1MIiwicmVxdWlyZSIsInhBeGlzIiwieUF4aXMiLCJncmFwaGljcyIsImNoYXJ0IiwiZGF0YXNldCIsInBsb3RNYW5hZ2VyIiwiY2FudmFzQ29uZmlnIiwibWFya2VyTWFuYWdlciIsInJlYWN0aXZlTW9kZWwiLCJzcGFjZU1hbmFnZXJJbnN0YW5jZSIsInNtYXJ0TGFiZWwiLCJjaGFydEluc3RhbmNlIiwic2V0QWN0aXZlUGVyaW9kIiwidGltZVJ1bGVzIiwiYXBpSW5zdGFuY2UiLCJnZXRDb21wb25lbnRTdG9yZSIsImdldENhbnZhc0J5SW5kZXgiLCJjb21wb3NpdGlvbiIsImltcGwiLCJnZXREYXRhQWdncmVnYXRvciIsImdldEFnZ3JlZ2F0aW9uVGltZVJ1bGVzIiwiY29uc29sZSIsImxvZyIsInRvb2xiYXJzIiwibWVhc3VyZW1lbnQiLCJjcmVhdGVUb29sYmFyIiwidW5pZ3JvdXAiLCJ0b29sYmFyIiwiY2FsY3VsYXRlZEJ1dHRvbnMiLCJjb250ZXh0dWFsQnV0dG9ucyIsImFsbEJ1dHRvbiIsInN0YXJ0TXVsdGlwbGllciIsImRlZHVjdG9yIiwibWFyZ2luIiwiZnJvbURhdGVMYWJlbCIsImdyb3VwIiwiX3RoaXMiLCJzZWxmIiwiZGVkdWN0b3JBciIsInBhcGVyIiwiY2hhcnRDb250YWluZXIiLCJjb250YWluZXIiLCJVbmlTZWxlY3RDb21wb25lbnRHcm91cCIsInNldENvbmZpZyIsImZpbGwiLCJib3JkZXJUaGlja25lc3MiLCJMYWJlbCIsInRleHQiLCJzdHlsZSIsImZvbnQtc2l6ZSIsImZvbnQtZmFtaWx5IiwiZm9udC13ZWlnaHQiLCJoZWlnaHQiLCJhZGRTeW1ib2wiLCJsYWJlbEZpbGwiLCJzeW1ib2xTdHJva2VXaWR0aCIsInN5bWJvbFN0cm9rZSIsInN0cm9rZVdpZHRoIiwiaG92ZXJGaWxsIiwicmFkaXVzIiwicmlnaHQiLCJidG5UZXh0U3R5bGUiLCJmb250RmFtaWx5IiwiZm9udFNpemUiLCJhdHRhY2hFdmVudEhhbmRsZXJzIiwiY2xpY2siLCJkaXNwb3NlIiwicG9wIiwiZ2V0TG9naWNhbFNwYWNlIiwiZHJhdyIsIl9sb29wIiwiX2xvb3AzIiwiX2xvb3AyIiwieCIsInkiLCJyYWQiLCJ3IiwiaCIsInBhZFgiLCJwYWRZIiwieDEiLCJ4MiIsInkxIiwieTIiLCJhZGRDb21wb25lbnQiLCJsb2dpY2FsU3BhY2UiLCJsbiIsImF2YWlsYWJsZVdpZHRoIiwiX3BXaWR0aCIsImF2YWlsYWJsZUhlaWdodCIsIl9wSGVpZ2h0Iiwid2lkdGgiLCJwYWRkaW5nIiwicGFyZW50R3JvdXAiLCJhZGQiLCJyZWYiLCJwcmlvcml0eSIsImxheW91dCIsImlubGluZSIsIm9yaWVudGF0aW9uIiwidHlwZSIsImhvcml6b250YWwiLCJwb3NpdGlvbiIsInRvcCIsImFsaWdubWVudCIsImxlZnQiLCJkaW1lbnNpb25zIiwiZ2V0UGFyZW50Q29tcG9uZW50R3JvdXAiLCJfcmVmIiwiZ2V0V2lkdGgiLCJnZXRIZWlnaHQiLCJtZXMiLCJib3VuZEVsZW1lbnQiLCJiQm94Iiwic2VsZWN0TGluZSIsInNhdmVTZWxlY3RMaW5lIiwicGF0aCIsInN0cm9rZSIsInRvRnJvbnQiLCJpaSIsImNvbXBvbmVudEdyb3VwcyIsInN5bWJvbExpc3QiLCJzeW1ib2wiLCJnZXRCb3VuZEVsZW1lbnQiLCJnZXRCQm94IiwiYXR0ciJdLCJtYXBwaW5ncyI6IkNBQVMsU0FBVUEsR0NJbkIsUUFBQUMsR0FBQUMsR0FHQSxHQUFBQyxFQUFBRCxHQUNBLE1BQUFDLEdBQUFELEdBQUFFLE9BR0EsSUFBQUMsR0FBQUYsRUFBQUQsSUFDQUUsV0FDQUUsR0FBQUosRUFDQUssUUFBQSxFQVVBLE9BTkFQLEdBQUFFLEdBQUFNLEtBQUFILEVBQUFELFFBQUFDLElBQUFELFFBQUFILEdBR0FJLEVBQUFFLFFBQUEsRUFHQUYsRUFBQUQsUUF2QkEsR0FBQUQsS0FxQ0EsT0FUQUYsR0FBQVEsRUFBQVQsRUFHQUMsRUFBQVMsRUFBQVAsRUFHQUYsRUFBQVUsRUFBQSxHQUdBVixFQUFBLEtETU0sU0FBU0ksRUFBUUQsRUFBU0gsSUU1Q2hDLFNBQUFJ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QkQsRUFBVzdGLEtBQUs2RixRQW1CbEIsSUFSQTJGLEVBQWF4TCxLQUFLeUwsZ0JBQWtCekwsS0FBS3dFLFNBQVNxQyxNQUFNNkUsTUFDdERDLE9BQVUsWUFDVEMsVUFDSDdDLEVBQVU5SyxTQUFOOEssRUFBa0JqRCxFQUFZaUQsRUFBSUEsRUFDdENDLEVBQVUvSyxTQUFOK0ssRUFBa0JsRCxFQUFZa0QsRUFBSUEsRUFDdENpQixFQUFrQmhNLFNBQVZnTSxFQUFzQm5FLEVBQVltRSxNQUFRQSxFQUNsRHZDLEVBQW9CekosU0FBWHlKLEVBQXVCNUIsRUFBWTRCLE9BQVNBLEVBQ3JEakIsRUFBa0J4SSxTQUFWd0ksRUFBc0J6RyxLQUFLbUssWUFBYzFELEVBQzdDd0QsR0FBU3ZDLEVBQ1gsSUFBS3RJLEVBQUksRUFBR3dLLEVBQUsvRCxFQUFTeEcsT0FBUUQsRUFBSXdLLEVBQUl4SyxJQUN4QzZHLEVBQVVKLEVBQVN6RyxHQUNuQjZHLEVBQVEwQyxLQUFLSSxFQUFHQyxFQUFHdkMsRUFHdkJ6RyxNQUFLeUwsZUFBaUJELENBRXRCLEtBQUssR0FBSXBNLEdBQUksRUFBR3lNLEVBQUtoRyxFQUFTLEdBQUdpRyxnQkFBZ0IsR0FBR0MsV0FBWTNNLEVBQUl5TSxFQUFHeE0sT0FBUUQsSUFDekV5TSxFQUFHek0sR0FBRzRNLFNBQVdoTSxLQUFLZ0IsWUFDeEJzSyxFQUFlTyxFQUFHek0sR0FBRzZNLGtCQUNyQlYsRUFBT0QsRUFBYVksVUFDcEI1QyxFQUFLaUMsRUFBS3hDLEVBQ1ZRLEVBQUtnQyxFQUFLaEMsR0FDVkUsRUFBSzhCLEVBQUs5QixHQUVWK0IsRUFBV1csTUFDVFQsTUFBTyxJQUFLcEMsRUFBSUcsRUFBSyxFQUFPLElBQUtGLEVBQUlFLEVBQUssVUE5ckJ0QmhNLElBb3NCOUIsT0FBT0EiLCJmaWxlIjoic3RhbmRhcmQtcGVyaW9kLXNlbGVjdG9yLWVzNS5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKioqKioqLyAoZnVuY3Rpb24obW9kdWxlcykgeyAvLyB3ZWJwYWNrQm9vdHN0cmFwXG4vKioqKioqLyBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4vKioqKioqLyBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4vKioqKioqLyBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pXG4vKioqKioqLyBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbi8qKioqKiovIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4vKioqKioqLyBcdFx0XHRleHBvcnRzOiB7fSxcbi8qKioqKiovIFx0XHRcdGlkOiBtb2R1bGVJZCxcbi8qKioqKiovIFx0XHRcdGxvYWRlZDogZmFsc2Vcbi8qKioqKiovIFx0XHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbi8qKioqKiovIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuLyoqKioqKi8gXHRcdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuLyoqKioqKi8gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbi8qKioqKiovIFx0fVxuLyoqKioqKi9cbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLyoqKioqKi8gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcbi8qKioqKiovIH0pXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKioqKi8gKFtcbi8qIDAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihtb2R1bGUpIHsndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cdFxuXHR2YXIgU3RhbmRhcmRQZXJpb2RTZWxlY3RvciA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdFxuXHR3aW5kb3cuc3RQUyA9IG5ldyBTdGFuZGFyZFBlcmlvZFNlbGVjdG9yKCk7XG5cdFxuXHQ7KGZ1bmN0aW9uIChlbnYsIGZhY3RvcnkpIHtcblx0ICBpZiAoKCBmYWxzZSA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihtb2R1bGUpKSA9PT0gJ29iamVjdCcgJiYgbW9kdWxlLmV4cG9ydHMpIHtcblx0ICAgIG1vZHVsZS5leHBvcnRzID0gZW52LmRvY3VtZW50ID8gZmFjdG9yeShlbnYpIDogZnVuY3Rpb24gKHdpbikge1xuXHQgICAgICBpZiAoIXdpbi5kb2N1bWVudCkge1xuXHQgICAgICAgIHRocm93IG5ldyBFcnJvcignV2luZG93IHdpdGggZG9jdW1lbnQgbm90IHByZXNlbnQnKTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gZmFjdG9yeSh3aW4sIHRydWUpO1xuXHQgICAgfTtcblx0ICB9IGVsc2Uge1xuXHQgICAgZW52LlN0YW5kYXJkUGVyaW9kU2VsZWN0b3IgPSBmYWN0b3J5KGVudiwgdHJ1ZSk7XG5cdCAgfVxuXHR9KSh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHVuZGVmaW5lZCwgZnVuY3Rpb24gKF93aW5kb3csIHdpbmRvd0V4aXN0cykge1xuXHQgIHZhciBGQyA9IF93aW5kb3cuRnVzaW9uQ2hhcnRzO1xuXHQgIEZDLnJlZ2lzdGVyKCdleHRlbnNpb24nLCBbJ3ByaXZhdGUnLCAnU3RhbmRhcmRQZXJpb2RTZWxlY3RvcicsIGZ1bmN0aW9uICgpIHtcblx0ICAgIEZDLnJlZ2lzdGVyQ29tcG9uZW50KCdleHRlbnNpb25zJywgJ1N0YW5kYXJkUGVyaW9kU2VsZWN0b3InLCBTdGFuZGFyZFBlcmlvZFNlbGVjdG9yKHsgRnVzaW9uQ2hhcnRzOiBGQyB9KSk7XG5cdCAgfV0pO1xuXHR9KTtcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oMSkobW9kdWxlKSkpXG5cbi8qKiovIH0sXG4vKiAxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuXHRcdGlmKCFtb2R1bGUud2VicGFja1BvbHlmaWxsKSB7XG5cdFx0XHRtb2R1bGUuZGVwcmVjYXRlID0gZnVuY3Rpb24oKSB7fTtcblx0XHRcdG1vZHVsZS5wYXRocyA9IFtdO1xuXHRcdFx0Ly8gbW9kdWxlLnBhcmVudCA9IHVuZGVmaW5lZCBieSBkZWZhdWx0XG5cdFx0XHRtb2R1bGUuY2hpbGRyZW4gPSBbXTtcblx0XHRcdG1vZHVsZS53ZWJwYWNrUG9seWZpbGwgPSAxO1xuXHRcdH1cblx0XHRyZXR1cm4gbW9kdWxlO1xuXHR9XG5cblxuLyoqKi8gfSxcbi8qIDIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdC8qKlxuXHQgKiBDbGFzcyBkZWZpbml0aW9uIG9mIFN0YW5kYXJkUGVyaW9kU2VsZWN0b3Jcblx0ICovXG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGRlcCkge1xuXHQgIHZhciBTdGFuZGFyZFBlcmlvZFNlbGVjdG9yID0gZnVuY3Rpb24gKCkge1xuXHQgICAgZnVuY3Rpb24gU3RhbmRhcmRQZXJpb2RTZWxlY3RvcigpIHtcblx0ICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFN0YW5kYXJkUGVyaW9kU2VsZWN0b3IpO1xuXHRcblx0ICAgICAgLyoqXG5cdCAgICAgICAqIEBwcml2YXRlXG5cdCAgICAgICAqL1xuXHQgICAgICB0aGlzLnJhdGlvID0gODtcblx0ICAgICAgdGhpcy50b29sYm94ID0gRnVzaW9uQ2hhcnRzLmdldENvbXBvbmVudCgnYXBpJywgJ3Rvb2xib3gnKTtcblx0ICAgICAgdGhpcy5Ib3Jpem9udGFsVG9vbGJhciA9IHRoaXMudG9vbGJveC5Ib3Jpem9udGFsVG9vbGJhcjtcblx0ICAgICAgdGhpcy5Db21wb25lbnRHcm91cCA9IHRoaXMudG9vbGJveC5Db21wb25lbnRHcm91cDtcblx0ICAgICAgdGhpcy5TeW1ib2xTdG9yZSA9IHRoaXMudG9vbGJveC5TeW1ib2xTdG9yZTtcblx0ICAgICAgdGhpcy5hbGwgPSAxO1xuXHQgICAgICB0aGlzLmNhbGN1bGF0ZWRQZXJpb2RzID0gW107XG5cdCAgICAgIHRoaXMuc3RhcnREYXRhc2V0ID0gMDtcblx0ICAgICAgLy8gdGhpcy5lbmREYXRhc2V0ID0gdGhpcy5nbG9iYWxSZWFjdGl2ZU1vZGVsLm1vZGVsWyd4LWF4aXMtYWJzb2x1dGUtcmFuZ2UtZW5kJ107XG5cdCAgICAgIHRoaXMuc3RhcnRBY3RpdmVXaW5kb3cgPSAwO1xuXHQgICAgICB0aGlzLmVuZEFjdGl2ZVdpbmRvdyA9IDE7XG5cdCAgICAgIHRoaXMuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kcyA9IFtdO1xuXHQgICAgICB0aGlzLnN0YW5kYXJkQ29udGV4dWFsUGVyaW9kcyA9IFtdO1xuXHQgICAgICB0aGlzLnN0YXJ0UG9pbnRVbml0ID0gMDtcblx0ICAgICAgdGhpcy5zdGFydFBvaW50TXVsdGlwbGllciA9IDA7XG5cdCAgICAgIHRoaXMuY2xpY2tlZElkID0gJ0FMTCc7XG5cdCAgICAgIHRoaXMubm9DYWxjQnV0dG9ucyA9IDA7XG5cdCAgICAgIHRoaXMudGltZVBlcmlvZHMgPSBbe1xuXHQgICAgICAgICduYW1lJzogJ3NlY29uZCcsXG5cdCAgICAgICAgJ21pbGxpc2Vjb25kcyc6IDEwMDAsXG5cdCAgICAgICAgJ3N0YXJ0aW5nUG9pbnQnOiAwLFxuXHQgICAgICAgICd0b3RhbCc6IDYwLFxuXHQgICAgICAgICdhYmJyZXZpYXRpb24nOiAncycsXG5cdCAgICAgICAgJ2Rlc2NyaXB0aW9uJzogJ1NFQ09ORCcsXG5cdCAgICAgICAgJ3BhcmVudCc6ICdtaW51dGUnLFxuXHQgICAgICAgICdtdWx0aXBsaWVycyc6IFsxLCA1LCAxNSwgMzBdXG5cdCAgICAgIH0sIHtcblx0ICAgICAgICAnbmFtZSc6ICdtaW51dGUnLFxuXHQgICAgICAgICdtaWxsaXNlY29uZHMnOiA2MDAwMCxcblx0ICAgICAgICAnc3RhcnRpbmdQb2ludCc6IDAsXG5cdCAgICAgICAgJ3RvdGFsJzogNjAsXG5cdCAgICAgICAgJ2FiYnJldmlhdGlvbic6ICdtJyxcblx0ICAgICAgICAnZGVzY3JpcHRpb24nOiAnTUlOVVRFJyxcblx0ICAgICAgICAncGFyZW50JzogJ2hvdXInLFxuXHQgICAgICAgICdtdWx0aXBsaWVycyc6IFsxLCA1LCAxNSwgMzBdXG5cdCAgICAgIH0sIHtcblx0ICAgICAgICAnbmFtZSc6ICdob3VyJyxcblx0ICAgICAgICAnbWlsbGlzZWNvbmRzJzogMzYwMDAwMCxcblx0ICAgICAgICAnc3RhcnRpbmdQb2ludCc6IDAsXG5cdCAgICAgICAgJ3RvdGFsJzogMjQsXG5cdCAgICAgICAgJ2FiYnJldmlhdGlvbic6ICdIJyxcblx0ICAgICAgICAnZGVzY3JpcHRpb24nOiAnSE9VUicsXG5cdCAgICAgICAgJ3BhcmVudCc6ICdkYXknLFxuXHQgICAgICAgICdtdWx0aXBsaWVycyc6IFsxLCAzLCA2LCAxMl1cblx0ICAgICAgfSwge1xuXHQgICAgICAgICduYW1lJzogJ2RheScsXG5cdCAgICAgICAgJ21pbGxpc2Vjb25kcyc6IDg2NDAwMDAwLFxuXHQgICAgICAgICdzdGFydGluZ1BvaW50JzogMCxcblx0ICAgICAgICAndG90YWwnOiAzMCxcblx0ICAgICAgICAnYWJicmV2aWF0aW9uJzogJ0QnLFxuXHQgICAgICAgICdkZXNjcmlwdGlvbic6ICdEQVknLFxuXHQgICAgICAgICdwYXJlbnQnOiAnbW9udGgnLFxuXHQgICAgICAgICdtdWx0aXBsaWVycyc6IFsxLCA3LCAxNV1cblx0ICAgICAgfSwge1xuXHQgICAgICAgICduYW1lJzogJ21vbnRoJyxcblx0ICAgICAgICAnbWlsbGlzZWNvbmRzJzogMjU5MjAwMDAwMCxcblx0ICAgICAgICAnc3RhcnRpbmdQb2ludCc6IDAsXG5cdCAgICAgICAgJ3RvdGFsJzogMTIsXG5cdCAgICAgICAgJ2FiYnJldmlhdGlvbic6ICdNJyxcblx0ICAgICAgICAnZGVzY3JpcHRpb24nOiAnTU9OVEgnLFxuXHQgICAgICAgICdwYXJlbnQnOiAneWVhcicsXG5cdCAgICAgICAgJ211bHRpcGxpZXJzJzogWzEsIDMsIDZdXG5cdCAgICAgIH0sIHtcblx0ICAgICAgICAnbmFtZSc6ICd5ZWFyJyxcblx0ICAgICAgICAnbWlsbGlzZWNvbmRzJzogMzExMDQwMDAwMDAsXG5cdCAgICAgICAgJ3N0YXJ0aW5nUG9pbnQnOiAwLFxuXHQgICAgICAgICdhYmJyZXZpYXRpb24nOiAnWScsXG5cdCAgICAgICAgJ2Rlc2NyaXB0aW9uJzogJ1lFQVInLFxuXHQgICAgICAgICdtdWx0aXBsaWVycyc6IFsxXVxuXHQgICAgICB9XTtcblx0ICAgICAgdGhpcy50ZEJ1dHRvbnMgPSBbe1xuXHQgICAgICAgICduYW1lJzogJ1lURCcsXG5cdCAgICAgICAgJ2FiYnJldmlhdGlvbic6ICdZVEQnLFxuXHQgICAgICAgICdwYXJlbnQnOiAneWVhcicsXG5cdCAgICAgICAgJ21pbGxpc2Vjb25kcyc6IDMxMTA0MDAwMDAwLFxuXHQgICAgICAgICdkZXNjcmlwdGlvbic6ICdZZWFyIHRvIERhdGUnXG5cdCAgICAgIH0sIHtcblx0ICAgICAgICAnbmFtZSc6ICdRVEQnLFxuXHQgICAgICAgICdhYmJyZXZpYXRpb24nOiAnUVREJyxcblx0ICAgICAgICAncGFyZW50JzogJ21vbnRoJyxcblx0ICAgICAgICAnbXVsdGlwbGllcic6IDMsXG5cdCAgICAgICAgJ21pbGxpc2Vjb25kcyc6IDc3NzYwMDAwMDAsXG5cdCAgICAgICAgJ2Rlc2NyaXB0aW9uJzogJ1F1YXJ0ZXIgdG8gRGF0ZSdcblx0ICAgICAgfSwge1xuXHQgICAgICAgICduYW1lJzogJ01URCcsXG5cdCAgICAgICAgJ2FiYnJldmlhdGlvbic6ICdNVEQnLFxuXHQgICAgICAgICdwYXJlbnQnOiAnbW9udGgnLFxuXHQgICAgICAgICdtaWxsaXNlY29uZHMnOiAyNTkyMDAwMDAwLFxuXHQgICAgICAgICdkZXNjcmlwdGlvbic6ICdNb250aCB0byBEYXRlJ1xuXHQgICAgICB9LCB7XG5cdCAgICAgICAgJ25hbWUnOiAnV1REJyxcblx0ICAgICAgICAnYWJicmV2aWF0aW9uJzogJ1dURCcsXG5cdCAgICAgICAgJ3BhcmVudCc6ICdkYXknLFxuXHQgICAgICAgICdtdWx0aXBsaWVyJzogNyxcblx0ICAgICAgICAnbWlsbGlzZWNvbmRzJzogNjA0ODAwMDAwLFxuXHQgICAgICAgICdkZXNjcmlwdGlvbic6ICdXZWVrIHRvIERhdGUnXG5cdCAgICAgIH0sIHtcblx0ICAgICAgICAnbmFtZSc6ICdZJyxcblx0ICAgICAgICAnYWJicmV2aWF0aW9uJzogJ1knLFxuXHQgICAgICAgICdwYXJlbnQnOiAnZGF5Jyxcblx0ICAgICAgICAnbWlsbGlzZWNvbmRzJzogODY0MDAwMDAsXG5cdCAgICAgICAgJ2Rlc2NyaXB0aW9uJzogJ1llc3RlcmRheSdcblx0ICAgICAgfSwge1xuXHQgICAgICAgICduYW1lJzogJ1QnLFxuXHQgICAgICAgICdhYmJyZXZpYXRpb24nOiAnVCcsXG5cdCAgICAgICAgJ3BhcmVudCc6ICdkYXknLFxuXHQgICAgICAgICdtaWxsaXNlY29uZHMnOiA4NjQwMDAwMCxcblx0ICAgICAgICAnZGVzY3JpcHRpb24nOiAnVG9kYXknXG5cdCAgICAgIH1dO1xuXHQgICAgICB0aGlzLmNvbmZpZyA9IHtcblx0ICAgICAgICBhbmNob3JQb3NpdGlvbnM6ICdyaWdodCcsXG5cdCAgICAgICAgYWxsOiAnMScsXG5cdCAgICAgICAgY29udGV4dHVhbDogJzEnLFxuXHQgICAgICAgIGNhbGN1bGF0ZWQ6ICcxJyxcblx0ICAgICAgICB0ZXJ0aWFyeVRpbWVQZXJpb2RzOiB7fVxuXHQgICAgICB9O1xuXHQgICAgfVxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogQSBmdW5jdGlvbiB0byBnZW5lcmF0ZSB0aGUgY2FsY3VsYXRlZCBidXR0b25zIHVzaW5nXG5cdCAgICAgKiB0aGUgYWN0aXZlIHJhbmdlIGFuZCB0aGUgbG9jYXRpb24gb2YgdGhlIGFjdGl2ZSByYW5nZVxuXHQgICAgICovXG5cdFxuXHRcblx0ICAgIF9jcmVhdGVDbGFzcyhTdGFuZGFyZFBlcmlvZFNlbGVjdG9yLCBbe1xuXHQgICAgICBrZXk6ICdnZW5lcmF0ZUNhbGN1bGF0ZWRCdXR0b25zJyxcblx0ICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdlbmVyYXRlQ2FsY3VsYXRlZEJ1dHRvbnMoKSB7XG5cdCAgICAgICAgdmFyIHRhcmdldEJsb2NrID0gdGhpcy5lbmRBY3RpdmVXaW5kb3cgLSB0aGlzLnN0YXJ0RGF0YXNldCxcblx0ICAgICAgICAgICAgaSA9IDAsXG5cdCAgICAgICAgICAgIGogPSAwLFxuXHQgICAgICAgICAgICBhY3RpdmVXaW5kb3cgPSB0aGlzLmVuZEFjdGl2ZVdpbmRvdyAtIHRoaXMuc3RhcnRBY3RpdmVXaW5kb3csXG5cdCAgICAgICAgICAgIGNvdW50ID0gMDtcblx0ICAgICAgICB0aGlzLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHMgPSBbXTtcblx0ICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy50aW1lUGVyaW9kcy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgLy8gY2hlY2tpbmcgd2hldGhlciB0aGUgdW5pdCBpcyBhcHBsaWNhYmxlIGZvciB0aGUgY3VycmVudCB0YXJnZXQgYmxvY2tcblx0ICAgICAgICAgIGlmICh0YXJnZXRCbG9jayAvIHRoaXMudGltZVBlcmlvZHNbaV0ubWlsbGlzZWNvbmRzID49IDEpIHtcblx0ICAgICAgICAgICAgLy8gY2hlY2tpbmcgd2hldGhlciB0aGUgdW5pdCBpcyBvZiB0aGUgaGlnaGVyIG9yZGVyIGFuZCBvbmx5IG11bHRpcGxpZXIgMSBpcyBhcHBsaWNhYmxlXG5cdCAgICAgICAgICAgIGlmIChNYXRoLmZsb29yKGFjdGl2ZVdpbmRvdyAvIHRoaXMudGltZVBlcmlvZHNbaV0ubWlsbGlzZWNvbmRzKSA8IDEpIHtcblx0ICAgICAgICAgICAgICB0aGlzLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHMucHVzaCh7XG5cdCAgICAgICAgICAgICAgICAnYWJicmV2aWF0aW9uJzogdGhpcy50aW1lUGVyaW9kc1tpXS5hYmJyZXZpYXRpb24sXG5cdCAgICAgICAgICAgICAgICAnZGVzY3JpcHRpb24nOiB0aGlzLnRpbWVQZXJpb2RzW2ldLmRlc2NyaXB0aW9uLFxuXHQgICAgICAgICAgICAgICAgJ21pbGxpc2Vjb25kcyc6IHRoaXMudGltZVBlcmlvZHNbaV0ubWlsbGlzZWNvbmRzLFxuXHQgICAgICAgICAgICAgICAgJ211bHRpcGxpZXJzJzogWzFdXG5cdCAgICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgLy8gaWYgdGhlIHVuaXQgaXMgb2YgdGhlIG9yZGVyIG9mIHRoZSB0YXJnZXQgYmxvY2sgYW5kIGNhbGN1bGF0aW5nIHRoZSBtdWx0aXBsaWVyc1xuXHQgICAgICAgICAgICAgIHRoaXMuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kcy5wdXNoKHtcblx0ICAgICAgICAgICAgICAgICdhYmJyZXZpYXRpb24nOiB0aGlzLnRpbWVQZXJpb2RzW2ldLmFiYnJldmlhdGlvbixcblx0ICAgICAgICAgICAgICAgICdkZXNjcmlwdGlvbic6IHRoaXMudGltZVBlcmlvZHNbaV0uZGVzY3JpcHRpb24sXG5cdCAgICAgICAgICAgICAgICAnbWlsbGlzZWNvbmRzJzogdGhpcy50aW1lUGVyaW9kc1tpXS5taWxsaXNlY29uZHMsXG5cdCAgICAgICAgICAgICAgICAnbXVsdGlwbGllcnMnOiBbXVxuXHQgICAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICAgIC8vIGNhbGN1bGF0aW5nIGFuZCBwb3B1bGF0aW5nIHRoZSBhcHBsaWNhYmxlIG11bHRwbGllcnMgb2YgZWFjaCB1bml0XG5cdCAgICAgICAgICAgICAgZm9yIChqID0gMDsgaiA8IHRoaXMudGltZVBlcmlvZHNbaV0ubXVsdGlwbGllcnMubGVuZ3RoOyBqKyspIHtcblx0ICAgICAgICAgICAgICAgIGlmIChhY3RpdmVXaW5kb3cgLyB0aGlzLnJhdGlvIDwgdGhpcy50aW1lUGVyaW9kc1tpXS5tdWx0aXBsaWVyc1tqXSAqIHRoaXMudGltZVBlcmlvZHNbaV0ubWlsbGlzZWNvbmRzKSB7XG5cdCAgICAgICAgICAgICAgICAgIHRoaXMuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kc1t0aGlzLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHMubGVuZ3RoIC0gMV0ubXVsdGlwbGllcnMucHVzaCh0aGlzLnRpbWVQZXJpb2RzW2ldLm11bHRpcGxpZXJzW2pdKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgdGhpcy5ub0NhbGNCdXR0b25zID0gSW5maW5pdHk7XG5cdCAgICAgICAgZm9yIChpID0gMDsgaSA8IHRoaXMuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kcy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgZm9yIChqID0gMDsgaiA8IHRoaXMuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kc1tpXS5tdWx0aXBsaWVycy5sZW5ndGg7IGorKykge1xuXHQgICAgICAgICAgICArK2NvdW50O1xuXHQgICAgICAgICAgICBpZiAodGhpcy5ub0NhbGNCdXR0b25zID4gaSkge1xuXHQgICAgICAgICAgICAgIHRoaXMubm9DYWxjQnV0dG9ucyA9IGk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgaWYgKGNvdW50IDw9IDQpIHtcblx0ICAgICAgICAgICAgICB0aGlzLnN0YXJ0UG9pbnRNdWx0aXBsaWVyID0gajtcblx0ICAgICAgICAgICAgICB0aGlzLnN0YXJ0UG9pbnRVbml0ID0gaTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgLy8gdGhpcy5kcmF3QnV0dG9uc0NhbGN1bGF0ZWQodGhpcy5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgLyoqXG5cdCAgICAgICAqIEEgZnVuY3Rpb24gdG8gZ2VuZXJhdGUgdGhlIGNvbnRleHR1YWwgYnV0dG9ucyB1c2luZ1xuXHQgICAgICAgKiB0aGUgZW5kIHBvaW50IG9mIHRoZSB0aW1lLXNjYWxlXG5cdCAgICAgICAqL1xuXHRcblx0ICAgIH0sIHtcblx0ICAgICAga2V5OiAnZ2VuZXJhdGVDb250ZXh0dWFsQnV0dG9ucycsXG5cdCAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZW5lcmF0ZUNvbnRleHR1YWxCdXR0b25zKCkge1xuXHQgICAgICAgIC8vIGdlbmVyYXRpbmcgYW4gYXJyYXkgd2l0aCBhcHBsaWNhYmxlIFREIGJ1dHRvbnNcblx0ICAgICAgICB2YXIgYnV0dG9ucyA9IFtdLFxuXHQgICAgICAgICAgICBpID0gMCxcblx0ICAgICAgICAgICAgZW5kU3RhbXAgPSB0aGlzLmdsb2JhbFJlYWN0aXZlTW9kZWwubW9kZWxbJ3gtYXhpcy1hYnNvbHV0ZS1yYW5nZS1lbmQnXSxcblx0ICAgICAgICAgICAgZGF0ZVN0YXJ0ID0gZW5kU3RhbXAgLSAyLFxuXHQgICAgICAgICAgICBkYXRlRW5kID0gZW5kU3RhbXAsXG5cdCAgICAgICAgICAgIHJlbGF0aXZlVERCdXR0b24gPSB7fTtcblx0ICAgICAgICBmb3IgKDsgaSA8IHRoaXMudGRCdXR0b25zLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgICBkYXRlU3RhcnQgPSBuZXcgRGF0ZShlbmRTdGFtcCk7XG5cdCAgICAgICAgICBpZiAodGhpcy50ZEJ1dHRvbnNbaV0ubmFtZSA9PT0gJ1lURCcpIHtcblx0ICAgICAgICAgICAgZGF0ZVN0YXJ0LnNldE1vbnRoKDApO1xuXHQgICAgICAgICAgICBkYXRlU3RhcnQuc2V0RGF0ZSgxKTtcblx0ICAgICAgICAgICAgZGF0ZVN0YXJ0LnNldEhvdXJzKDApO1xuXHQgICAgICAgICAgICBkYXRlU3RhcnQuc2V0TWludXRlcygwKTtcblx0ICAgICAgICAgICAgZGF0ZVN0YXJ0LnNldFNlY29uZHMoMCk7XG5cdCAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMudGRCdXR0b25zW2ldLm5hbWUgPT09ICdNVEQnKSB7XG5cdCAgICAgICAgICAgIGRhdGVTdGFydC5zZXREYXRlKDEpO1xuXHQgICAgICAgICAgICBkYXRlU3RhcnQuc2V0SG91cnMoMCk7XG5cdCAgICAgICAgICAgIGRhdGVTdGFydC5zZXRNaW51dGVzKDApO1xuXHQgICAgICAgICAgICBkYXRlU3RhcnQuc2V0U2Vjb25kcygwKTtcblx0ICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy50ZEJ1dHRvbnNbaV0ubmFtZSA9PT0gJ1FURCcpIHtcblx0ICAgICAgICAgICAgZGF0ZVN0YXJ0LnNldE1vbnRoKDExIC0gZGF0ZVN0YXJ0LmdldE1vbnRoKCkgJSA0KTtcblx0ICAgICAgICAgICAgZGF0ZVN0YXJ0LnNldERhdGUoMCk7XG5cdCAgICAgICAgICAgIGRhdGVTdGFydC5zZXRIb3VycygwKTtcblx0ICAgICAgICAgICAgZGF0ZVN0YXJ0LnNldE1pbnV0ZXMoMCk7XG5cdCAgICAgICAgICAgIGRhdGVTdGFydC5zZXRTZWNvbmRzKDApO1xuXHQgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnRkQnV0dG9uc1tpXS5uYW1lID09PSAnV1REJykge1xuXHQgICAgICAgICAgICBkYXRlU3RhcnQuc2V0RGF0ZShkYXRlU3RhcnQuZ2V0RGF0ZSgpIC0gZGF0ZVN0YXJ0LmdldERheSgpKTtcblx0ICAgICAgICAgICAgZGF0ZVN0YXJ0LnNldEhvdXJzKDApO1xuXHQgICAgICAgICAgICBkYXRlU3RhcnQuc2V0TWludXRlcygwKTtcblx0ICAgICAgICAgICAgZGF0ZVN0YXJ0LnNldFNlY29uZHMoMCk7XG5cdCAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMudGRCdXR0b25zW2ldLm5hbWUgPT09ICdZJykge1xuXHQgICAgICAgICAgICBkYXRlU3RhcnQuc2V0SG91cnMoMCk7XG5cdCAgICAgICAgICAgIGRhdGVTdGFydC5zZXRNaW51dGVzKDApO1xuXHQgICAgICAgICAgICBkYXRlU3RhcnQuc2V0U2Vjb25kcygwKTtcblx0ICAgICAgICAgICAgZGF0ZVN0YXJ0IC09IDg2NDAwMDAwO1xuXHQgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnRkQnV0dG9uc1tpXS5uYW1lID09PSAnVCcpIHtcblx0ICAgICAgICAgICAgZGF0ZVN0YXJ0LnNldEhvdXJzKDApO1xuXHQgICAgICAgICAgICBkYXRlU3RhcnQuc2V0TWludXRlcygwKTtcblx0ICAgICAgICAgICAgZGF0ZVN0YXJ0LnNldFNlY29uZHMoMCk7XG5cdCAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgaWYgKGRhdGVFbmQgPCBkYXRlU3RhcnQpIHtcblx0ICAgICAgICAgICAgY29udGludWU7XG5cdCAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICB0aGlzLnRkQnV0dG9uc1tpXS5kYXRlU3RhcnQgPSBkYXRlU3RhcnQudmFsdWVPZigpO1xuXHQgICAgICAgICAgICB0aGlzLnRkQnV0dG9uc1tpXS5kYXRlRW5kID0gZGF0ZUVuZC52YWx1ZU9mKCk7XG5cdCAgICAgICAgICAgIGJ1dHRvbnMucHVzaCh0aGlzLnRkQnV0dG9uc1tpXSk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJlbGF0aXZlVERCdXR0b24ubWlsbGlzZWNvbmRzID0gSW5maW5pdHk7XG5cdCAgICAgICAgZm9yIChpID0gMDsgaSA8IHRoaXMudGRCdXR0b25zLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgICBpZiAoTWF0aC5hYnModGhpcy50ZEJ1dHRvbnNbaV0ubWlsbGlzZWNvbmRzIC0gKHRoaXMuZW5kQWN0aXZlV2luZG93IC0gdGhpcy5zdGFydEFjdGl2ZVdpbmRvdykpIDwgcmVsYXRpdmVUREJ1dHRvbi5taWxsaXNlY29uZHMpIHtcblx0ICAgICAgICAgICAgcmVsYXRpdmVUREJ1dHRvbi5taWxsaXNlY29uZHMgPSB0aGlzLnRkQnV0dG9uc1tpXS5taWxsaXNlY29uZHM7XG5cdCAgICAgICAgICAgIHJlbGF0aXZlVERCdXR0b24ubmFtZSA9IHRoaXMudGRCdXR0b25zW2ldLmFiYnJldmlhdGlvbjtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHRoaXMuc3RhbmRhcmRDb250ZXh1YWxQZXJpb2RzID0gYnV0dG9ucztcblx0ICAgICAgICAvLyB0aGlzLmRyYXdCdXR0b25zQ29udGV4dHVhbCh0aGlzLnN0YW5kYXJkQ29udGV4dWFsUGVyaW9kcyk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8qKlxuXHQgICAgICAgKiBBIGZ1bmN0aW9uIHRvIHNldCB0aGUgYWN0aXZlIHBlcmlvZCdzXG5cdCAgICAgICAqIHN0YXJ0IGFuZCBlbmQgcG9pbnRcblx0ICAgICAgICogQHBhcmFtICB7bnVtYmVyfSBkYXRlIHN0YW1wIC0gQSBVTklYIHRpbWVzdGFtcCB0byBiZSBzZXQgYXMgdGhlIHN0YXJ0IHBvaW50IG9mIGFjdGl2ZSBwZXJpb2Rcblx0ICAgICAgICogQHBhcmFtICB7bnVtYmVyfSBkYXRlIHN0YW1wIC0gQSBVTklYIHRpbWVzdGFtcCB0byBiZSBzZXQgYXMgdGhlIGVuZCBwb2ludCBvZiBhY3RpdmUgcGVyaW9kXG5cdCAgICAgICAqL1xuXHRcblx0ICAgIH0sIHtcblx0ICAgICAga2V5OiAnc2V0QWN0aXZlUGVyaW9kJyxcblx0ICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNldEFjdGl2ZVBlcmlvZCgpIHtcblx0ICAgICAgICB2YXIgc3RhcnQsIGVuZDtcblx0ICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkge1xuXHQgICAgICAgICAgZW5kID0gdGhpcy5nbG9iYWxSZWFjdGl2ZU1vZGVsLm1vZGVsWyd4LWF4aXMtdmlzaWJsZS1yYW5nZS1lbmQnXTtcblx0ICAgICAgICAgIHN0YXJ0ID0gZW5kIC0gYXJndW1lbnRzWzBdO1xuXHQgICAgICAgIH0gZWxzZSBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMikge1xuXHQgICAgICAgICAgc3RhcnQgPSBhcmd1bWVudHNbMF07XG5cdCAgICAgICAgICBlbmQgPSBhcmd1bWVudHNbMV07XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICB0aGlzLnN0YXJ0QWN0aXZlV2luZG93ID0gc3RhcnQ7XG5cdCAgICAgICAgdGhpcy5lbmRBY3RpdmVXaW5kb3cgPSBlbmQ7XG5cdCAgICAgICAgdGhpcy5nZW5lcmF0ZUNhbGN1bGF0ZWRCdXR0b25zKCk7XG5cdCAgICAgICAgdGhpcy5nbG9iYWxSZWFjdGl2ZU1vZGVsLm1vZGVsWyd4LWF4aXMtdmlzaWJsZS1yYW5nZS1zdGFydCddID0gdGhpcy5zdGFydEFjdGl2ZVdpbmRvdztcblx0ICAgICAgICB0aGlzLmdsb2JhbFJlYWN0aXZlTW9kZWwubW9kZWxbJ3gtYXhpcy12aXNpYmxlLXJhbmdlLWVuZCddID0gdGhpcy5lbmRBY3RpdmVXaW5kb3c7XG5cdCAgICAgICAgdGhpcy5nZW5lcmF0ZUNvbnRleHR1YWxCdXR0b25zKCk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8qKlxuXHQgICAgICAgKiBBIGZ1bmN0aW9uIHRvIHNldCB0aGUgc3RhcnQgYW5kIGVuZCBwb2ludCBvZiB0aGVcblx0ICAgICAgICogZW50aXJlIHRpbWUtbGluZVxuXHQgICAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IGRhdGUgc3RhbXAgLSBBIFVOSVggdGltZXN0YW1wIHRvIGJlIHNldCBhcyB0aGUgc3RhcnQgcG9pbnQgb2YgdGltZS1saW5lXG5cdCAgICAgICAqIEBwYXJhbSAge251bWJlcn0gZGF0ZSBzdGFtcCAtIEEgVU5JWCB0aW1lc3RhbXAgdG8gYmUgc2V0IGFzIHRoZSBlbmQgcG9pbnQgb2YgdGltZS1saW5lXG5cdCAgICAgICAqL1xuXHRcblx0ICAgIH0sIHtcblx0ICAgICAga2V5OiAnc2V0VGltZWxpbmUnLFxuXHQgICAgICB2YWx1ZTogZnVuY3Rpb24gc2V0VGltZWxpbmUoc3RhcnQsIGVuZCkge1xuXHQgICAgICAgIHRoaXMuc3RhcnREYXRhc2V0ID0gc3RhcnQ7XG5cdCAgICAgICAgdGhpcy5lbmREYXRhc2V0ID0gZW5kO1xuXHQgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdGFydEFjdGl2ZVJhbmdlJykuaW5uZXJIVE1MID0gbmV3IERhdGUodGhpcy5zdGFydERhdGFzZXQpO1xuXHQgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbmRBY3RpdmVSYW5nZScpLmlubmVySFRNTCA9IG5ldyBEYXRlKHRoaXMuZW5kRGF0YXNldCk7XG5cdCAgICAgICAgdGhpcy5nZW5lcmF0ZUNhbGN1bGF0ZWRCdXR0b25zKCk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8qKlxuXHQgICAgICAgKiBBIGZ1bmN0aW9uIHRvIHNldCB0aGUgb2JqZWN0IHRvIHNldCB0aGUgdXNlciBwcmVmZXJlbmNlc1xuXHQgICAgICAgKi9cblx0XG5cdCAgICB9LCB7XG5cdCAgICAgIGtleTogJ2NvbmZpZ3VyZScsXG5cdCAgICAgIHZhbHVlOiBmdW5jdGlvbiBjb25maWd1cmUoY29uZmlnKSB7XG5cdCAgICAgICAgdGhpcy5jb25maWcgPSBjb25maWc7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8qKlxuXHQgICAgICAgKiBGdXNpb25jaGFydHMgbGlmZSBjeWNsZSBtZXRob2QgZm9yIGV4dGVuc2lvblxuXHQgICAgICAgKi9cblx0XG5cdCAgICB9LCB7XG5cdCAgICAgIGtleTogJ2luaXQnLFxuXHQgICAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdChyZXF1aXJlKSB7XG5cdCAgICAgICAgdmFyIGluc3RhbmNlID0gdGhpcztcblx0ICAgICAgICByZXF1aXJlKFsneEF4aXMnLCAneUF4aXMnLCAnZ3JhcGhpY3MnLCAnY2hhcnQnLCAnZGF0YXNldCcsICdQbG90TWFuYWdlcicsICdjYW52YXNDb25maWcnLCAnTWFya2VyTWFuYWdlcicsICdyZWFjdGl2ZU1vZGVsJywgJ2dsb2JhbFJlYWN0aXZlTW9kZWwnLCAnc3BhY2VNYW5hZ2VySW5zdGFuY2UnLCAnc21hcnRMYWJlbCcsICdjaGFydEluc3RhbmNlJywgZnVuY3Rpb24gKHhBeGlzLCB5QXhpcywgZ3JhcGhpY3MsIGNoYXJ0LCBkYXRhc2V0LCBwbG90TWFuYWdlciwgY2FudmFzQ29uZmlnLCBtYXJrZXJNYW5hZ2VyLCByZWFjdGl2ZU1vZGVsLCBnbG9iYWxSZWFjdGl2ZU1vZGVsLCBzcGFjZU1hbmFnZXJJbnN0YW5jZSwgc21hcnRMYWJlbCwgY2hhcnRJbnN0YW5jZSkge1xuXHQgICAgICAgICAgaW5zdGFuY2UueEF4aXMgPSB4QXhpcztcblx0ICAgICAgICAgIGluc3RhbmNlLnlBeGlzID0geUF4aXM7XG5cdCAgICAgICAgICBpbnN0YW5jZS5ncmFwaGljcyA9IGdyYXBoaWNzO1xuXHQgICAgICAgICAgaW5zdGFuY2UuY2hhcnQgPSBjaGFydDtcblx0ICAgICAgICAgIGluc3RhbmNlLmRhdGFzZXQgPSBkYXRhc2V0O1xuXHQgICAgICAgICAgaW5zdGFuY2UucGxvdE1hbmFnZXIgPSBwbG90TWFuYWdlcjtcblx0ICAgICAgICAgIGluc3RhbmNlLm1hcmtlck1hbmFnZXIgPSBtYXJrZXJNYW5hZ2VyO1xuXHQgICAgICAgICAgaW5zdGFuY2UuY2FudmFzQ29uZmlnID0gY2FudmFzQ29uZmlnO1xuXHQgICAgICAgICAgaW5zdGFuY2UucmVhY3RpdmVNb2RlbCA9IHJlYWN0aXZlTW9kZWw7XG5cdCAgICAgICAgICBpbnN0YW5jZS5nbG9iYWxSZWFjdGl2ZU1vZGVsID0gZ2xvYmFsUmVhY3RpdmVNb2RlbDtcblx0ICAgICAgICAgIGluc3RhbmNlLnNwYWNlTWFuYWdlckluc3RhbmNlID0gc3BhY2VNYW5hZ2VySW5zdGFuY2U7XG5cdCAgICAgICAgICBpbnN0YW5jZS5zbWFydExhYmVsID0gc21hcnRMYWJlbDtcblx0ICAgICAgICAgIGluc3RhbmNlLmNoYXJ0SW5zdGFuY2UgPSBjaGFydEluc3RhbmNlO1xuXHQgICAgICAgIH1dKTtcblx0ICAgICAgICB0aGlzLnNwYWNlTWFuYWdlckluc3RhbmNlID0gaW5zdGFuY2Uuc3BhY2VNYW5hZ2VySW5zdGFuY2U7XG5cdCAgICAgICAgdGhpcy5nbG9iYWxSZWFjdGl2ZU1vZGVsID0gaW5zdGFuY2UuZ2xvYmFsUmVhY3RpdmVNb2RlbDtcblx0ICAgICAgICB0aGlzLmVuZEFjdGl2ZVdpbmRvdyA9IGluc3RhbmNlLmdsb2JhbFJlYWN0aXZlTW9kZWwubW9kZWxbJ3gtYXhpcy12aXNpYmxlLXJhbmdlLWVuZCddO1xuXHQgICAgICAgIHRoaXMuc3RhcnRBY3RpdmVXaW5kb3cgPSBpbnN0YW5jZS5nbG9iYWxSZWFjdGl2ZU1vZGVsLm1vZGVsWyd4LWF4aXMtdmlzaWJsZS1yYW5nZS1zdGFydCddO1xuXHQgICAgICAgIHRoaXMuc3RhcnREYXRhc2V0ID0gaW5zdGFuY2UuZ2xvYmFsUmVhY3RpdmVNb2RlbC5tb2RlbFsneC1heGlzLWFic29sdXRlLXJhbmdlLXN0YXJ0J107XG5cdCAgICAgICAgdGhpcy5lbmREYXRhc2V0ID0gaW5zdGFuY2UuZ2xvYmFsUmVhY3RpdmVNb2RlbC5tb2RlbFsneC1heGlzLWFic29sdXRlLXJhbmdlLWVuZCddO1xuXHQgICAgICAgIHRoaXMuc2V0QWN0aXZlUGVyaW9kKHRoaXMuc3RhcnRBY3RpdmVXaW5kb3csIHRoaXMuZW5kQWN0aXZlV2luZG93KTtcblx0ICAgICAgICAvLyBpbnN0YW5jZS5nbG9iYWxSZWFjdGl2ZU1vZGVsLm1vZGVsWydfeC1heGlzLXZpc2libGUtcmFuZ2Utc3RhcnQnXSArPSAxMjQ0MTYwMDAwMDA7XG5cdCAgICAgICAgdGhpcy5zZXRBY3RpdmVQZXJpb2QodGhpcy5zdGFydEFjdGl2ZVdpbmRvdywgdGhpcy5lbmRBY3RpdmVXaW5kb3cpO1xuXHQgICAgICAgIHRoaXMudGltZVJ1bGVzID0gdGhpcy5jaGFydEluc3RhbmNlLmFwaUluc3RhbmNlLmdldENvbXBvbmVudFN0b3JlKCk7XG5cdCAgICAgICAgdGhpcy50aW1lUnVsZXMgPSB0aGlzLnRpbWVSdWxlcy5nZXRDYW52YXNCeUluZGV4KDApLmNvbXBvc2l0aW9uLmltcGw7XG5cdCAgICAgICAgdGhpcy50aW1lUnVsZXMgPSB0aGlzLnRpbWVSdWxlcy5nZXREYXRhQWdncmVnYXRvcigpO1xuXHQgICAgICAgIHRoaXMudGltZVJ1bGVzID0gdGhpcy50aW1lUnVsZXMuZ2V0QWdncmVnYXRpb25UaW1lUnVsZXMoKTtcblx0ICAgICAgICBjb25zb2xlLmxvZyh0aGlzLnRpbWVSdWxlcyk7XG5cdCAgICAgICAgdGhpcy50b29sYmFycyA9IFtdO1xuXHRcblx0ICAgICAgICB0aGlzLm1lYXN1cmVtZW50ID0ge307XG5cdFxuXHQgICAgICAgIHRoaXMudG9vbGJhcnMucHVzaCh0aGlzLmNyZWF0ZVRvb2xiYXIoKSk7XG5cdCAgICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAga2V5OiAnY3JlYXRlVG9vbGJhcicsXG5cdCAgICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVUb29sYmFyKCkge1xuXHQgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cdFxuXHQgICAgICAgIHZhciB1bmlncm91cCxcblx0ICAgICAgICAgICAgdG9vbGJhcixcblx0ICAgICAgICAgICAgY2FsY3VsYXRlZEJ1dHRvbnMsXG5cdCAgICAgICAgICAgIGNvbnRleHR1YWxCdXR0b25zLFxuXHQgICAgICAgICAgICBhbGxCdXR0b24sXG5cdCAgICAgICAgICAgIHNlbGYgPSB0aGlzLFxuXHQgICAgICAgICAgICBlbmRBY3RpdmUgPSB0aGlzLmdsb2JhbFJlYWN0aXZlTW9kZWwubW9kZWxbJ3gtYXhpcy12aXNpYmxlLXJhbmdlLWVuZCddLFxuXHQgICAgICAgICAgICBkZWR1Y3RvckFyID0gW10sXG5cdCAgICAgICAgICAgIHN0YXJ0TXVsdGlwbGllcixcblx0ICAgICAgICAgICAgZGVkdWN0b3IsXG5cdCAgICAgICAgICAgIGksXG5cdCAgICAgICAgICAgIGosXG5cdCAgICAgICAgICAgIG1hcmdpbixcblx0ICAgICAgICAgICAgZnJvbURhdGVMYWJlbCxcblx0ICAgICAgICAgICAgZ3JvdXA7XG5cdFxuXHQgICAgICAgIGdyb3VwID0gbmV3IHRoaXMudG9vbGJveC5Db21wb25lbnRHcm91cCh7XG5cdCAgICAgICAgICBwYXBlcjogdGhpcy5ncmFwaGljcy5wYXBlcixcblx0ICAgICAgICAgIGNoYXJ0OiB0aGlzLmNoYXJ0LFxuXHQgICAgICAgICAgc21hcnRMYWJlbDogdGhpcy5zbWFydExhYmVsLFxuXHQgICAgICAgICAgY2hhcnRDb250YWluZXI6IHRoaXMuZ3JhcGhpY3MuY29udGFpbmVyXG5cdCAgICAgICAgfSk7XG5cdFxuXHQgICAgICAgIHVuaWdyb3VwID0gbmV3IHRoaXMudG9vbGJveC5VbmlTZWxlY3RDb21wb25lbnRHcm91cCh7XG5cdCAgICAgICAgICBwYXBlcjogdGhpcy5ncmFwaGljcy5wYXBlcixcblx0ICAgICAgICAgIGNoYXJ0OiB0aGlzLmNoYXJ0LFxuXHQgICAgICAgICAgc21hcnRMYWJlbDogdGhpcy5zbWFydExhYmVsLFxuXHQgICAgICAgICAgY2hhcnRDb250YWluZXI6IHRoaXMuZ3JhcGhpY3MuY29udGFpbmVyXG5cdCAgICAgICAgfSk7XG5cdCAgICAgICAgdW5pZ3JvdXAuc2V0Q29uZmlnKHtcblx0ICAgICAgICAgIGZpbGw6ICcjZmZmJyxcblx0ICAgICAgICAgIGJvcmRlclRoaWNrbmVzczogMFxuXHQgICAgICAgIH0pO1xuXHQgICAgICAgIGdyb3VwLnNldENvbmZpZyh7XG5cdCAgICAgICAgICBmaWxsOiAnI2ZmZicsXG5cdCAgICAgICAgICBib3JkZXJUaGlja25lc3M6IDBcblx0ICAgICAgICB9KTtcblx0ICAgICAgICB0b29sYmFyID0gbmV3IHRoaXMuSG9yaXpvbnRhbFRvb2xiYXIoe1xuXHQgICAgICAgICAgcGFwZXI6IHRoaXMuZ3JhcGhpY3MucGFwZXIsXG5cdCAgICAgICAgICBjaGFydDogdGhpcy5jaGFydCxcblx0ICAgICAgICAgIHNtYXJ0TGFiZWw6IHRoaXMuc21hcnRMYWJlbCxcblx0ICAgICAgICAgIGNoYXJ0Q29udGFpbmVyOiB0aGlzLmdyYXBoaWNzLmNvbnRhaW5lclxuXHQgICAgICAgIH0pO1xuXHQgICAgICAgIHRvb2xiYXIuc2V0Q29uZmlnKHtcblx0ICAgICAgICAgIGZpbGw6ICcjZmZmJyxcblx0ICAgICAgICAgIGJvcmRlclRoaWNrbmVzczogMFxuXHQgICAgICAgIH0pO1xuXHQgICAgICAgIGZyb21EYXRlTGFiZWwgPSBuZXcgdGhpcy50b29sYm94LkxhYmVsKCdab29tOicsIHtcblx0ICAgICAgICAgIHNtYXJ0TGFiZWw6IHRoaXMuc21hcnRMYWJlbCxcblx0ICAgICAgICAgIHBhcGVyOiB0aGlzLmdyYXBoaWNzLnBhcGVyXG5cdCAgICAgICAgfSwge1xuXHQgICAgICAgICAgdGV4dDoge1xuXHQgICAgICAgICAgICBzdHlsZToge1xuXHQgICAgICAgICAgICAgICdmb250LXNpemUnOiAnMTUnLFxuXHQgICAgICAgICAgICAgICdmb250LWZhbWlseSc6ICdNeXJpYWRQcm8nLFxuXHQgICAgICAgICAgICAgICdmaWxsJzogJyM2OTY5NjknLFxuXHQgICAgICAgICAgICAgICdmb250LXdlaWdodCc6ICdib2xkJ1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9LFxuXHQgICAgICAgICAgY29udGFpbmVyOiB7XG5cdCAgICAgICAgICAgIGhlaWdodDogMjBcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9KTtcblx0ICAgICAgICBncm91cC5hZGRTeW1ib2woZnJvbURhdGVMYWJlbCk7XG5cdCAgICAgICAgYWxsQnV0dG9uID0gbmV3IHRoaXMudG9vbGJveC5TeW1ib2woJ0FMTCcsIHRydWUsIHtcblx0ICAgICAgICAgIHBhcGVyOiB0aGlzLmdyYXBoaWNzLnBhcGVyLFxuXHQgICAgICAgICAgY2hhcnQ6IHRoaXMuY2hhcnQsXG5cdCAgICAgICAgICBzbWFydExhYmVsOiB0aGlzLnNtYXJ0TGFiZWwsXG5cdCAgICAgICAgICBjaGFydENvbnRhaW5lcjogdGhpcy5ncmFwaGljcy5jb250YWluZXJcblx0ICAgICAgICB9LCB7XG5cdCAgICAgICAgICBmaWxsOiAnI2ZmZmZmZicsXG5cdCAgICAgICAgICBsYWJlbEZpbGw6ICcjNjk2OTY5Jyxcblx0ICAgICAgICAgIHN5bWJvbFN0cm9rZVdpZHRoOiAnMicsXG5cdCAgICAgICAgICBzeW1ib2xTdHJva2U6ICcjMDAwMDAwJyxcblx0ICAgICAgICAgIHN0cm9rZVdpZHRoOiAnMScsXG5cdCAgICAgICAgICBob3ZlckZpbGw6ICcjN2Y3ZjdmJyxcblx0ICAgICAgICAgIGhlaWdodDogMjAsXG5cdCAgICAgICAgICByYWRpdXM6IDEsXG5cdCAgICAgICAgICBtYXJnaW46IHtcblx0ICAgICAgICAgICAgcmlnaHQ6IDVcblx0ICAgICAgICAgIH0sXG5cdCAgICAgICAgICBidG5UZXh0U3R5bGU6IHtcblx0ICAgICAgICAgICAgJ2ZvbnRGYW1pbHknOiAnTXlyaWFkUHJvJyxcblx0ICAgICAgICAgICAgJ2ZvbnRTaXplJzogJzEyJ1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0pLmF0dGFjaEV2ZW50SGFuZGxlcnMoe1xuXHQgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uIGNsaWNrKCkge1xuXHQgICAgICAgICAgICBzZWxmLnNldEFjdGl2ZVBlcmlvZChzZWxmLnN0YXJ0RGF0YXNldCwgc2VsZi5lbmREYXRhc2V0KTtcblx0ICAgICAgICAgICAgdG9vbGJhci5kaXNwb3NlKCk7XG5cdCAgICAgICAgICAgIHNlbGYuY2xpY2tlZElkID0gJ0FMTCc7XG5cdCAgICAgICAgICAgIHNlbGYudG9vbGJhcnMucG9wKCk7XG5cdCAgICAgICAgICAgIHNlbGYudG9vbGJhcnMucHVzaChzZWxmLmNyZWF0ZVRvb2xiYXIoKSk7XG5cdCAgICAgICAgICAgIHNlbGYuZ2V0TG9naWNhbFNwYWNlKCk7XG5cdCAgICAgICAgICAgIHNlbGYuZHJhdygpO1xuXHQgICAgICAgICAgICAvLyBzZWxmLl9yZWYucmVBbGxvY2F0ZShzZWxmLnBhcmVudEdyb3VwKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9KTtcblx0XG5cdCAgICAgICAgdW5pZ3JvdXAuYWRkU3ltYm9sKGFsbEJ1dHRvbik7XG5cdCAgICAgICAgZm9yIChpID0gMDsgaSA8IHRoaXMuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kcy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgZm9yIChqID0gdGhpcy5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW2ldLm11bHRpcGxpZXJzLmxlbmd0aCAtIDE7IGogPj0gMDsgai0tKSB7XG5cdCAgICAgICAgICAgIGRlZHVjdG9yQXIucHVzaChzZWxmLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHNbaV0ubXVsdGlwbGllcnNbal0gKiBzZWxmLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHNbaV0ubWlsbGlzZWNvbmRzKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIGNhbGN1bGF0ZWRCdXR0b25zID0gW107XG5cdFxuXHQgICAgICAgIHZhciBfbG9vcCA9IGZ1bmN0aW9uIF9sb29wKF9pKSB7XG5cdCAgICAgICAgICBpZiAoX2kgPT09IHNlbGYuc3RhcnRQb2ludFVuaXQpIHtcblx0ICAgICAgICAgICAgc3RhcnRNdWx0aXBsaWVyID0gc2VsZi5zdGFydFBvaW50TXVsdGlwbGllcjtcblx0ICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIHN0YXJ0TXVsdGlwbGllciA9IHNlbGYuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kc1tfaV0ubXVsdGlwbGllcnMubGVuZ3RoIC0gMTtcblx0ICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICB2YXIgX2xvb3AzID0gZnVuY3Rpb24gX2xvb3AzKF9qKSB7XG5cdCAgICAgICAgICAgIG1hcmdpbiA9IF9pID09PSBzZWxmLm5vQ2FsY0J1dHRvbnMgJiYgX2ogPT09IDAgPyA1IDogMDtcblx0ICAgICAgICAgICAgY2FsY3VsYXRlZEJ1dHRvbnNbX2ldID0gbmV3IF90aGlzLnRvb2xib3guU3ltYm9sKHNlbGYuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kc1tfaV0ubXVsdGlwbGllcnNbX2pdICsgc2VsZi5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW19pXS5hYmJyZXZpYXRpb24sIHRydWUsIHtcblx0ICAgICAgICAgICAgICBwYXBlcjogX3RoaXMuZ3JhcGhpY3MucGFwZXIsXG5cdCAgICAgICAgICAgICAgY2hhcnQ6IF90aGlzLmNoYXJ0LFxuXHQgICAgICAgICAgICAgIHNtYXJ0TGFiZWw6IF90aGlzLnNtYXJ0TGFiZWwsXG5cdCAgICAgICAgICAgICAgY2hhcnRDb250YWluZXI6IF90aGlzLmdyYXBoaWNzLmNvbnRhaW5lclxuXHQgICAgICAgICAgICB9LCB7XG5cdCAgICAgICAgICAgICAgZmlsbDogJyNmZmZmZmYnLFxuXHQgICAgICAgICAgICAgIGxhYmVsRmlsbDogJyM2OTY5NjknLFxuXHQgICAgICAgICAgICAgIHN5bWJvbFN0cm9rZVdpZHRoOiAnMicsXG5cdCAgICAgICAgICAgICAgc3ltYm9sU3Ryb2tlOiAnIzAwMDAwMCcsXG5cdCAgICAgICAgICAgICAgc3Ryb2tlV2lkdGg6ICcxJyxcblx0ICAgICAgICAgICAgICBob3ZlckZpbGw6ICcjN2Y3ZjdmJyxcblx0ICAgICAgICAgICAgICBoZWlnaHQ6IDIwLFxuXHQgICAgICAgICAgICAgIHJhZGl1czogMSxcblx0ICAgICAgICAgICAgICBtYXJnaW46IHtcblx0ICAgICAgICAgICAgICAgIHJpZ2h0OiBtYXJnaW5cblx0ICAgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICAgIGJ0blRleHRTdHlsZToge1xuXHQgICAgICAgICAgICAgICAgJ2ZvbnRGYW1pbHknOiAnTXlyaWFkUHJvJyxcblx0ICAgICAgICAgICAgICAgICdmb250U2l6ZSc6ICcxMidcblx0ICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0pLmF0dGFjaEV2ZW50SGFuZGxlcnMoe1xuXHQgICAgICAgICAgICAgICdjbGljayc6IGZ1bmN0aW9uIGNsaWNrKCkge1xuXHQgICAgICAgICAgICAgICAgZGVkdWN0b3IgPSBzZWxmLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHNbX2ldLm11bHRpcGxpZXJzW19qXSAqIHNlbGYuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kc1tfaV0ubWlsbGlzZWNvbmRzO1xuXHQgICAgICAgICAgICAgICAgc2VsZi5jbGlja2VkSWQgPSBzZWxmLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHNbX2ldLm11bHRpcGxpZXJzW19qXSArIHNlbGYuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kc1tfaV0uYWJicmV2aWF0aW9uO1xuXHQgICAgICAgICAgICAgICAgc2VsZi5zZXRBY3RpdmVQZXJpb2QoZGVkdWN0b3IpO1xuXHQgICAgICAgICAgICAgICAgdG9vbGJhci5kaXNwb3NlKCk7XG5cdCAgICAgICAgICAgICAgICBzZWxmLnRvb2xiYXJzLnBvcCgpO1xuXHQgICAgICAgICAgICAgICAgc2VsZi50b29sYmFycy5wdXNoKHNlbGYuY3JlYXRlVG9vbGJhcigpKTtcblx0ICAgICAgICAgICAgICAgIHNlbGYuZ2V0TG9naWNhbFNwYWNlKCk7XG5cdCAgICAgICAgICAgICAgICBzZWxmLmRyYXcoKTtcblx0ICAgICAgICAgICAgICAgIC8vIHNlbGYuX3JlZi5yZUFsbG9jYXRlKHNlbGYucGFyZW50R3JvdXApO1xuXHQgICAgICAgICAgICAgICAgLy8gdGhpcy50b29sYmFyc1t0aGlzLnRvb2xiYXJzLmxlbmd0aCAtIDFdID0gdGhpcy5jcmVhdGVUb29sYmFyKCk7XG5cdCAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgdW5pZ3JvdXAuYWRkU3ltYm9sKGNhbGN1bGF0ZWRCdXR0b25zW19pXSk7XG5cdCAgICAgICAgICB9O1xuXHRcblx0ICAgICAgICAgIGZvciAodmFyIF9qID0gc3RhcnRNdWx0aXBsaWVyOyBfaiA+PSAwOyBfai0tKSB7XG5cdCAgICAgICAgICAgIF9sb29wMyhfaik7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfTtcblx0XG5cdCAgICAgICAgZm9yICh2YXIgX2kgPSBzZWxmLnN0YXJ0UG9pbnRVbml0OyBfaSA+PSAwOyBfaS0tKSB7XG5cdCAgICAgICAgICBfbG9vcChfaSk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBjb250ZXh0dWFsQnV0dG9ucyA9IFtdO1xuXHRcblx0ICAgICAgICB2YXIgX2xvb3AyID0gZnVuY3Rpb24gX2xvb3AyKF9pMikge1xuXHQgICAgICAgICAgY29udGV4dHVhbEJ1dHRvbnNbX2kyXSA9IG5ldyBfdGhpcy50b29sYm94LlN5bWJvbChfdGhpcy5zdGFuZGFyZENvbnRleHVhbFBlcmlvZHNbX2kyXS5hYmJyZXZpYXRpb24sIHRydWUsIHtcblx0ICAgICAgICAgICAgcGFwZXI6IF90aGlzLmdyYXBoaWNzLnBhcGVyLFxuXHQgICAgICAgICAgICBjaGFydDogX3RoaXMuY2hhcnQsXG5cdCAgICAgICAgICAgIHNtYXJ0TGFiZWw6IF90aGlzLnNtYXJ0TGFiZWwsXG5cdCAgICAgICAgICAgIGNoYXJ0Q29udGFpbmVyOiBfdGhpcy5ncmFwaGljcy5jb250YWluZXJcblx0ICAgICAgICAgIH0sIHtcblx0ICAgICAgICAgICAgZmlsbDogJyNmZmZmZmYnLFxuXHQgICAgICAgICAgICBsYWJlbEZpbGw6ICcjNjk2OTY5Jyxcblx0ICAgICAgICAgICAgc3ltYm9sU3Ryb2tlV2lkdGg6ICcyJyxcblx0ICAgICAgICAgICAgc3ltYm9sU3Ryb2tlOiAnIzAwMDAwMCcsXG5cdCAgICAgICAgICAgIHN0cm9rZVdpZHRoOiAnMScsXG5cdCAgICAgICAgICAgIGhlaWdodDogMjAsXG5cdCAgICAgICAgICAgIGhvdmVyRmlsbDogJyM3ZjdmN2YnLFxuXHQgICAgICAgICAgICByYWRpdXM6IDEsXG5cdCAgICAgICAgICAgIG1hcmdpbjoge1xuXHQgICAgICAgICAgICAgIHJpZ2h0OiAwXG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIGJ0blRleHRTdHlsZToge1xuXHQgICAgICAgICAgICAgICdmb250RmFtaWx5JzogJ015cmlhZFBybycsXG5cdCAgICAgICAgICAgICAgJ2ZvbnRTaXplJzogJzEyJ1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9KS5hdHRhY2hFdmVudEhhbmRsZXJzKHtcblx0ICAgICAgICAgICAgJ2NsaWNrJzogZnVuY3Rpb24gY2xpY2soKSB7XG5cdCAgICAgICAgICAgICAgc2VsZi5zZXRBY3RpdmVQZXJpb2Qoc2VsZi5zdGFuZGFyZENvbnRleHVhbFBlcmlvZHNbX2kyXS5kYXRlU3RhcnQsIHNlbGYuc3RhbmRhcmRDb250ZXh1YWxQZXJpb2RzW19pMl0uZGF0ZUVuZCk7XG5cdCAgICAgICAgICAgICAgc2VsZi5jbGlja2VkSWQgPSBzZWxmLnN0YW5kYXJkQ29udGV4dWFsUGVyaW9kc1tfaTJdLmFiYnJldmlhdGlvbjtcblx0ICAgICAgICAgICAgICB0b29sYmFyLmRpc3Bvc2UoKTtcblx0ICAgICAgICAgICAgICBzZWxmLnRvb2xiYXJzLnBvcCgpO1xuXHQgICAgICAgICAgICAgIHNlbGYudG9vbGJhcnMucHVzaChzZWxmLmNyZWF0ZVRvb2xiYXIoKSk7XG5cdCAgICAgICAgICAgICAgc2VsZi5nZXRMb2dpY2FsU3BhY2UoKTtcblx0ICAgICAgICAgICAgICBzZWxmLmRyYXcoKTtcblx0ICAgICAgICAgICAgICAvLyBzZWxmLl9yZWYucmVBbGxvY2F0ZShzZWxmLnBhcmVudEdyb3VwKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfSk7XG5cdCAgICAgICAgICB1bmlncm91cC5hZGRTeW1ib2woY29udGV4dHVhbEJ1dHRvbnNbX2kyXSk7XG5cdCAgICAgICAgfTtcblx0XG5cdCAgICAgICAgZm9yICh2YXIgX2kyID0gMDsgX2kyIDwgdGhpcy5zdGFuZGFyZENvbnRleHVhbFBlcmlvZHMubGVuZ3RoOyBfaTIrKykge1xuXHQgICAgICAgICAgX2xvb3AyKF9pMik7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICAvLyBidG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdCVVRUT04nKTtcblx0ICAgICAgICAvLyBidG4uaWQgPSBzdGFuZGFyZFBlcmlvZHNbaV0uYWJicmV2aWF0aW9uO1xuXHQgICAgICAgIC8vIGJ0bi5pbm5lckhUTUwgPSBzdGFuZGFyZFBlcmlvZHNbaV0uYWJicmV2aWF0aW9uO1xuXHQgICAgICAgIC8vIGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGV2ZW50QnRuLmJpbmQodGhpcywgc3RhbmRhcmRQZXJpb2RzW2ldKSk7XG5cdCAgICAgICAgLy8gY29udGV4dHVhbEJ1dHRvbnMuYXBwZW5kQ2hpbGQoYnRuKTtcblx0XG5cdCAgICAgICAgdGhpcy5TeW1ib2xTdG9yZS5yZWdpc3RlcigndGV4dEJveEljb24nLCBmdW5jdGlvbiAoeCwgeSwgcmFkLCB3LCBoLCBwYWRYLCBwYWRZKSB7XG5cdCAgICAgICAgICB2YXIgeDEgPSB4IC0gdyAvIDIgKyBwYWRYIC8gMixcblx0ICAgICAgICAgICAgICB4MiA9IHggKyB3IC8gMiAtIHBhZFggLyAyLFxuXHQgICAgICAgICAgICAgIHkxID0geSAtIGggLyAyICsgcGFkWSAvIDIsXG5cdCAgICAgICAgICAgICAgeTIgPSB5ICsgaCAvIDIgLSBwYWRZIC8gMjtcblx0XG5cdCAgICAgICAgICByZXR1cm4gWydNJywgeDEsIHkxLCAnTCcsIHgyLCB5MSwgJ0wnLCB4MiwgeTIsICdMJywgeDEsIHkyLCAnWiddO1xuXHQgICAgICAgIH0pO1xuXHRcblx0ICAgICAgICB0b29sYmFyLmFkZENvbXBvbmVudChncm91cCk7XG5cdCAgICAgICAgdG9vbGJhci5hZGRDb21wb25lbnQodW5pZ3JvdXApO1xuXHQgICAgICAgIHJldHVybiB0b29sYmFyO1xuXHQgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgIGtleTogJ2dldExvZ2ljYWxTcGFjZScsXG5cdCAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRMb2dpY2FsU3BhY2UoKSB7XG5cdCAgICAgICAgdmFyIGF2YWlsYWJsZVdpZHRoID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB0aGlzLl9wV2lkdGg7XG5cdCAgICAgICAgdmFyIGF2YWlsYWJsZUhlaWdodCA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogdGhpcy5fcEhlaWdodDtcblx0XG5cdCAgICAgICAgLy8gYXZhaWxhYmxlV2lkdGggLz0gMjtcblx0ICAgICAgICB2YXIgbG9naWNhbFNwYWNlLFxuXHQgICAgICAgICAgICB3aWR0aCA9IDQyMCxcblx0ICAgICAgICAgICAgLy8gd2lkdGggaGFyZGNvZGVkOyBUT0RPOiBtYWtlIGl0IGR5bmFtaWNcblx0ICAgICAgICBoZWlnaHQgPSAwLFxuXHQgICAgICAgICAgICBpLFxuXHQgICAgICAgICAgICBsbjtcblx0XG5cdCAgICAgICAgZm9yIChpID0gMCwgbG4gPSB0aGlzLnRvb2xiYXJzLmxlbmd0aDsgaSA8IGxuOyBpKyspIHtcblx0ICAgICAgICAgIGxvZ2ljYWxTcGFjZSA9IHRoaXMudG9vbGJhcnNbaV0uZ2V0TG9naWNhbFNwYWNlKGF2YWlsYWJsZVdpZHRoLCBhdmFpbGFibGVIZWlnaHQpO1xuXHQgICAgICAgICAgLy8gd2lkdGggPSBNYXRoLm1heChsb2dpY2FsU3BhY2Uud2lkdGgsIHdpZHRoKTtcblx0ICAgICAgICAgIGhlaWdodCArPSBsb2dpY2FsU3BhY2UuaGVpZ2h0O1xuXHQgICAgICAgICAgdGhpcy50b29sYmFyc1tpXS53aWR0aCA9IGxvZ2ljYWxTcGFjZS53aWR0aDtcblx0ICAgICAgICAgIHRoaXMudG9vbGJhcnNbaV0uaGVpZ2h0ID0gbG9naWNhbFNwYWNlLmhlaWdodDtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaGVpZ2h0ICs9IHRoaXMucGFkZGluZztcblx0ICAgICAgICByZXR1cm4ge1xuXHQgICAgICAgICAgd2lkdGg6IHdpZHRoLFxuXHQgICAgICAgICAgaGVpZ2h0OiBoZWlnaHRcblx0ICAgICAgICB9O1xuXHQgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgIGtleTogJ2dldERlZmF1bHRHcm91cCcsXG5cdCAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXREZWZhdWx0R3JvdXAoKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMucGFyZW50R3JvdXA7XG5cdCAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAga2V5OiAncGxhY2VJbkNhbnZhcycsXG5cdCAgICAgIHZhbHVlOiBmdW5jdGlvbiBwbGFjZUluQ2FudmFzKCkge1xuXHQgICAgICAgIHZhciBfc2VsZiA9IHRoaXM7XG5cdCAgICAgICAgX3NlbGYucGFkZGluZyA9IDU7XG5cdCAgICAgICAgX3NlbGYuc3BhY2VNYW5hZ2VySW5zdGFuY2UuYWRkKFt7XG5cdCAgICAgICAgICBuYW1lOiBmdW5jdGlvbiBuYW1lKCkge1xuXHQgICAgICAgICAgICByZXR1cm4gJ3N0YW5kYXJkLXBlcmlvZC1zZWxlY3Rvci1leHQnO1xuXHQgICAgICAgICAgfSxcblx0ICAgICAgICAgIHJlZjogZnVuY3Rpb24gcmVmKG9iaikge1xuXHQgICAgICAgICAgICByZXR1cm4gb2JqWycwJ107XG5cdCAgICAgICAgICB9LFxuXHQgICAgICAgICAgc2VsZjogZnVuY3Rpb24gc2VsZigpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIF9zZWxmO1xuXHQgICAgICAgICAgfSxcblx0ICAgICAgICAgIHByaW9yaXR5OiBmdW5jdGlvbiBwcmlvcml0eSgpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIDI7XG5cdCAgICAgICAgICB9LFxuXHQgICAgICAgICAgbGF5b3V0OiBmdW5jdGlvbiBsYXlvdXQob2JqKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBvYmouaW5saW5lO1xuXHQgICAgICAgICAgfSxcblx0ICAgICAgICAgIG9yaWVudGF0aW9uOiBbe1xuXHQgICAgICAgICAgICB0eXBlOiBmdW5jdGlvbiB0eXBlKG9iaikge1xuXHQgICAgICAgICAgICAgIHJldHVybiBvYmouaG9yaXpvbnRhbDtcblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgcG9zaXRpb246IFt7XG5cdCAgICAgICAgICAgICAgdHlwZTogZnVuY3Rpb24gdHlwZShvYmopIHtcblx0ICAgICAgICAgICAgICAgIHJldHVybiBvYmoudG9wO1xuXHQgICAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgICAgYWxpZ25tZW50OiBbe1xuXHQgICAgICAgICAgICAgICAgdHlwZTogZnVuY3Rpb24gdHlwZShvYmopIHtcblx0ICAgICAgICAgICAgICAgICAgcmV0dXJuIG9iai5sZWZ0O1xuXHQgICAgICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgICAgIGRpbWVuc2lvbnM6IFtmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgICAgIHZhciBwYXJlbnQgPSB0aGlzLmdldFBhcmVudENvbXBvbmVudEdyb3VwKCk7XG5cdCAgICAgICAgICAgICAgICAgIF9zZWxmLl9yZWYgPSB0aGlzO1xuXHQgICAgICAgICAgICAgICAgICByZXR1cm4gX3NlbGYuZ2V0TG9naWNhbFNwYWNlKF9zZWxmLl9wV2lkdGggPSBwYXJlbnQuZ2V0V2lkdGgoKSwgX3NlbGYuX3BIZWlnaHQgPSBwYXJlbnQuZ2V0SGVpZ2h0KCkpO1xuXHQgICAgICAgICAgICAgICAgfV1cblx0ICAgICAgICAgICAgICB9XVxuXHQgICAgICAgICAgICB9XVxuXHQgICAgICAgICAgfV1cblx0ICAgICAgICB9XSk7XG5cdCAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAga2V5OiAnc2V0RHJhd2luZ0NvbmZpZ3VyYXRpb24nLFxuXHQgICAgICB2YWx1ZTogZnVuY3Rpb24gc2V0RHJhd2luZ0NvbmZpZ3VyYXRpb24oeCwgeSwgd2lkdGgsIGhlaWdodCwgZ3JvdXApIHtcblx0ICAgICAgICB2YXIgbWVzID0gdGhpcy5tZWFzdXJlbWVudDtcblx0ICAgICAgICBtZXMueCA9IHg7XG5cdCAgICAgICAgbWVzLnkgPSB5O1xuXHQgICAgICAgIG1lcy53aWR0aCA9IHdpZHRoO1xuXHQgICAgICAgIG1lcy5oZWlnaHQgPSBoZWlnaHQ7XG5cdFxuXHQgICAgICAgIHRoaXMucGFyZW50R3JvdXAgPSBncm91cDtcblx0XG5cdCAgICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAga2V5OiAnZHJhdycsXG5cdCAgICAgIHZhbHVlOiBmdW5jdGlvbiBkcmF3KHgsIHksIHdpZHRoLCBoZWlnaHQsIGdyb3VwKSB7XG5cdCAgICAgICAgdmFyIG1lYXN1cmVtZW50ID0gdGhpcy5tZWFzdXJlbWVudCxcblx0ICAgICAgICAgICAgdG9vbGJhcnMgPSB0aGlzLnRvb2xiYXJzLFxuXHQgICAgICAgICAgICBsbixcblx0ICAgICAgICAgICAgaSxcblx0ICAgICAgICAgICAgdG9vbGJhcixcblx0ICAgICAgICAgICAgYm91bmRFbGVtZW50LFxuXHQgICAgICAgICAgICBiQm94LFxuXHQgICAgICAgICAgICB4MSxcblx0ICAgICAgICAgICAgeDIsXG5cdCAgICAgICAgICAgIHkyLFxuXHQgICAgICAgICAgICBzZWxlY3RMaW5lO1xuXHRcblx0ICAgICAgICBzZWxlY3RMaW5lID0gdGhpcy5zYXZlU2VsZWN0TGluZSB8fCB0aGlzLmdyYXBoaWNzLnBhcGVyLnBhdGgoe1xuXHQgICAgICAgICAgJ3N0cm9rZSc6ICcjZmYwMDAwJ1xuXHQgICAgICAgIH0pLnRvRnJvbnQoKTtcblx0ICAgICAgICB4ID0geCA9PT0gdW5kZWZpbmVkID8gbWVhc3VyZW1lbnQueCA6IHg7XG5cdCAgICAgICAgeSA9IHkgPT09IHVuZGVmaW5lZCA/IG1lYXN1cmVtZW50LnkgOiB5O1xuXHQgICAgICAgIHdpZHRoID0gd2lkdGggPT09IHVuZGVmaW5lZCA/IG1lYXN1cmVtZW50LndpZHRoIDogd2lkdGg7XG5cdCAgICAgICAgaGVpZ2h0ID0gaGVpZ2h0ID09PSB1bmRlZmluZWQgPyBtZWFzdXJlbWVudC5oZWlnaHQgOiBoZWlnaHQ7XG5cdCAgICAgICAgZ3JvdXAgPSBncm91cCA9PT0gdW5kZWZpbmVkID8gdGhpcy5wYXJlbnRHcm91cCA6IGdyb3VwO1xuXHQgICAgICAgIGlmICh3aWR0aCAmJiBoZWlnaHQpIHtcblx0ICAgICAgICAgIGZvciAoaSA9IDAsIGxuID0gdG9vbGJhcnMubGVuZ3RoOyBpIDwgbG47IGkrKykge1xuXHQgICAgICAgICAgICB0b29sYmFyID0gdG9vbGJhcnNbaV07XG5cdCAgICAgICAgICAgIHRvb2xiYXIuZHJhdyh4LCB5LCBncm91cCk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHRoaXMuc2F2ZVNlbGVjdExpbmUgPSBzZWxlY3RMaW5lO1xuXHRcblx0ICAgICAgICBmb3IgKHZhciBfaTMgPSAwLCBpaSA9IHRvb2xiYXJzWzBdLmNvbXBvbmVudEdyb3Vwc1sxXS5zeW1ib2xMaXN0OyBfaTMgPCBpaS5sZW5ndGg7IF9pMysrKSB7XG5cdCAgICAgICAgICBpZiAoaWlbX2kzXS5zeW1ib2wgPT09IHRoaXMuY2xpY2tlZElkKSB7XG5cdCAgICAgICAgICAgIGJvdW5kRWxlbWVudCA9IGlpW19pM10uZ2V0Qm91bmRFbGVtZW50KCk7XG5cdCAgICAgICAgICAgIGJCb3ggPSBib3VuZEVsZW1lbnQuZ2V0QkJveCgpO1xuXHQgICAgICAgICAgICB4MSA9IGJCb3gueDtcblx0ICAgICAgICAgICAgeDIgPSBiQm94LngyO1xuXHQgICAgICAgICAgICB5MiA9IGJCb3gueTI7XG5cdFxuXHQgICAgICAgICAgICBzZWxlY3RMaW5lLmF0dHIoe1xuXHQgICAgICAgICAgICAgIHBhdGg6IFsnTScsIHgxLCB5MiAtIDIgLyAyLCAnTCcsIHgyLCB5MiAtIDIgLyAyXVxuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1dKTtcblx0XG5cdCAgICByZXR1cm4gU3RhbmRhcmRQZXJpb2RTZWxlY3Rvcjtcblx0ICB9KCk7XG5cdFxuXHQgIHJldHVybiBTdGFuZGFyZFBlcmlvZFNlbGVjdG9yO1xuXHR9O1xuXG4vKioqLyB9XG4vKioqKioqLyBdKTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gc3RhbmRhcmQtcGVyaW9kLXNlbGVjdG9yLWVzNS5taW4uanMiLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcblxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0ZXhwb3J0czoge30sXG4gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuIFx0XHRcdGxvYWRlZDogZmFsc2VcbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrL2Jvb3RzdHJhcCBmOTQ2OGJkNTYyNGM2NDk0ZTgzMSIsIid1c2Ugc3RyaWN0JztcbmNvbnN0IFN0YW5kYXJkUGVyaW9kU2VsZWN0b3IgPSByZXF1aXJlKCcuL3N0YW5kYXJkLXBlcmlvZC1zZWxlY3RvcicpO1xuXG53aW5kb3cuc3RQUyA9IG5ldyBTdGFuZGFyZFBlcmlvZFNlbGVjdG9yKCk7XG5cbjsoZnVuY3Rpb24gKGVudiwgZmFjdG9yeSkge1xuICBpZiAodHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcgJiYgbW9kdWxlLmV4cG9ydHMpIHtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IGVudi5kb2N1bWVudFxuICAgICAgID8gZmFjdG9yeShlbnYpIDogZnVuY3Rpb24gKHdpbikge1xuICAgICAgICAgaWYgKCF3aW4uZG9jdW1lbnQpIHtcbiAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdXaW5kb3cgd2l0aCBkb2N1bWVudCBub3QgcHJlc2VudCcpO1xuICAgICAgICAgfVxuICAgICAgICAgcmV0dXJuIGZhY3Rvcnkod2luLCB0cnVlKTtcbiAgICAgICB9O1xuICB9IGVsc2Uge1xuICAgIGVudi5TdGFuZGFyZFBlcmlvZFNlbGVjdG9yID0gZmFjdG9yeShlbnYsIHRydWUpO1xuICB9XG59KSh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHRoaXMsIGZ1bmN0aW9uIChfd2luZG93LCB3aW5kb3dFeGlzdHMpIHtcbiAgdmFyIEZDID0gX3dpbmRvdy5GdXNpb25DaGFydHM7XG4gIEZDLnJlZ2lzdGVyKCdleHRlbnNpb24nLCBbJ3ByaXZhdGUnLCAnU3RhbmRhcmRQZXJpb2RTZWxlY3RvcicsIGZ1bmN0aW9uICgpIHtcbiAgICBGQy5yZWdpc3RlckNvbXBvbmVudCgnZXh0ZW5zaW9ucycsICdTdGFuZGFyZFBlcmlvZFNlbGVjdG9yJywgU3RhbmRhcmRQZXJpb2RTZWxlY3Rvcih7RnVzaW9uQ2hhcnRzOiBGQ30pKTtcbiAgfV0pO1xufSk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvaW5kZXguanMiLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuXHRpZighbW9kdWxlLndlYnBhY2tQb2x5ZmlsbCkge1xuXHRcdG1vZHVsZS5kZXByZWNhdGUgPSBmdW5jdGlvbigpIHt9O1xuXHRcdG1vZHVsZS5wYXRocyA9IFtdO1xuXHRcdC8vIG1vZHVsZS5wYXJlbnQgPSB1bmRlZmluZWQgYnkgZGVmYXVsdFxuXHRcdG1vZHVsZS5jaGlsZHJlbiA9IFtdO1xuXHRcdG1vZHVsZS53ZWJwYWNrUG9seWZpbGwgPSAxO1xuXHR9XG5cdHJldHVybiBtb2R1bGU7XG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAod2VicGFjaykvYnVpbGRpbi9tb2R1bGUuanNcbi8vIG1vZHVsZSBpZCA9IDFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIENsYXNzIGRlZmluaXRpb24gb2YgU3RhbmRhcmRQZXJpb2RTZWxlY3RvclxuICovXG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGRlcCkge1xuICBjbGFzcyBTdGFuZGFyZFBlcmlvZFNlbGVjdG9yIHtcbiAgICBjb25zdHJ1Y3RvciAoKSB7XG4gICAgICAvKipcbiAgICAgICAqIEBwcml2YXRlXG4gICAgICAgKi9cbiAgICAgIHRoaXMucmF0aW8gPSA4O1xuICAgICAgdGhpcy50b29sYm94ID0gRnVzaW9uQ2hhcnRzLmdldENvbXBvbmVudCgnYXBpJywgJ3Rvb2xib3gnKTtcbiAgICAgIHRoaXMuSG9yaXpvbnRhbFRvb2xiYXIgPSB0aGlzLnRvb2xib3guSG9yaXpvbnRhbFRvb2xiYXI7XG4gICAgICB0aGlzLkNvbXBvbmVudEdyb3VwID0gdGhpcy50b29sYm94LkNvbXBvbmVudEdyb3VwO1xuICAgICAgdGhpcy5TeW1ib2xTdG9yZSA9IHRoaXMudG9vbGJveC5TeW1ib2xTdG9yZTtcbiAgICAgIHRoaXMuYWxsID0gMTtcbiAgICAgIHRoaXMuY2FsY3VsYXRlZFBlcmlvZHMgPSBbXTtcbiAgICAgIHRoaXMuc3RhcnREYXRhc2V0ID0gMDtcbiAgICAgIC8vIHRoaXMuZW5kRGF0YXNldCA9IHRoaXMuZ2xvYmFsUmVhY3RpdmVNb2RlbC5tb2RlbFsneC1heGlzLWFic29sdXRlLXJhbmdlLWVuZCddO1xuICAgICAgdGhpcy5zdGFydEFjdGl2ZVdpbmRvdyA9IDA7XG4gICAgICB0aGlzLmVuZEFjdGl2ZVdpbmRvdyA9IDE7XG4gICAgICB0aGlzLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHMgPSBbXTtcbiAgICAgIHRoaXMuc3RhbmRhcmRDb250ZXh1YWxQZXJpb2RzID0gW107XG4gICAgICB0aGlzLnN0YXJ0UG9pbnRVbml0ID0gMDtcbiAgICAgIHRoaXMuc3RhcnRQb2ludE11bHRpcGxpZXIgPSAwO1xuICAgICAgdGhpcy5jbGlja2VkSWQgPSAnQUxMJztcbiAgICAgIHRoaXMubm9DYWxjQnV0dG9ucyA9IDA7XG4gICAgICB0aGlzLnRpbWVQZXJpb2RzID0gW3tcbiAgICAgICAgJ25hbWUnOiAnc2Vjb25kJyxcbiAgICAgICAgJ21pbGxpc2Vjb25kcyc6IDEwMDAsXG4gICAgICAgICdzdGFydGluZ1BvaW50JzogMCxcbiAgICAgICAgJ3RvdGFsJzogNjAsXG4gICAgICAgICdhYmJyZXZpYXRpb24nOiAncycsXG4gICAgICAgICdkZXNjcmlwdGlvbic6ICdTRUNPTkQnLFxuICAgICAgICAncGFyZW50JzogJ21pbnV0ZScsXG4gICAgICAgICdtdWx0aXBsaWVycyc6IFsxLCA1LCAxNSwgMzBdXG4gICAgICB9LCB7XG4gICAgICAgICduYW1lJzogJ21pbnV0ZScsXG4gICAgICAgICdtaWxsaXNlY29uZHMnOiA2MDAwMCxcbiAgICAgICAgJ3N0YXJ0aW5nUG9pbnQnOiAwLFxuICAgICAgICAndG90YWwnOiA2MCxcbiAgICAgICAgJ2FiYnJldmlhdGlvbic6ICdtJyxcbiAgICAgICAgJ2Rlc2NyaXB0aW9uJzogJ01JTlVURScsXG4gICAgICAgICdwYXJlbnQnOiAnaG91cicsXG4gICAgICAgICdtdWx0aXBsaWVycyc6IFsxLCA1LCAxNSwgMzBdXG4gICAgICB9LCB7XG4gICAgICAgICduYW1lJzogJ2hvdXInLFxuICAgICAgICAnbWlsbGlzZWNvbmRzJzogMzYwMDAwMCxcbiAgICAgICAgJ3N0YXJ0aW5nUG9pbnQnOiAwLFxuICAgICAgICAndG90YWwnOiAyNCxcbiAgICAgICAgJ2FiYnJldmlhdGlvbic6ICdIJyxcbiAgICAgICAgJ2Rlc2NyaXB0aW9uJzogJ0hPVVInLFxuICAgICAgICAncGFyZW50JzogJ2RheScsXG4gICAgICAgICdtdWx0aXBsaWVycyc6IFsxLCAzLCA2LCAxMl1cbiAgICAgIH0sIHtcbiAgICAgICAgJ25hbWUnOiAnZGF5JyxcbiAgICAgICAgJ21pbGxpc2Vjb25kcyc6IDg2NDAwMDAwLFxuICAgICAgICAnc3RhcnRpbmdQb2ludCc6IDAsXG4gICAgICAgICd0b3RhbCc6IDMwLFxuICAgICAgICAnYWJicmV2aWF0aW9uJzogJ0QnLFxuICAgICAgICAnZGVzY3JpcHRpb24nOiAnREFZJyxcbiAgICAgICAgJ3BhcmVudCc6ICdtb250aCcsXG4gICAgICAgICdtdWx0aXBsaWVycyc6IFsxLCA3LCAxNV1cbiAgICAgIH0sIHtcbiAgICAgICAgJ25hbWUnOiAnbW9udGgnLFxuICAgICAgICAnbWlsbGlzZWNvbmRzJzogMjU5MjAwMDAwMCxcbiAgICAgICAgJ3N0YXJ0aW5nUG9pbnQnOiAwLFxuICAgICAgICAndG90YWwnOiAxMixcbiAgICAgICAgJ2FiYnJldmlhdGlvbic6ICdNJyxcbiAgICAgICAgJ2Rlc2NyaXB0aW9uJzogJ01PTlRIJyxcbiAgICAgICAgJ3BhcmVudCc6ICd5ZWFyJyxcbiAgICAgICAgJ211bHRpcGxpZXJzJzogWzEsIDMsIDZdXG4gICAgICB9LCB7XG4gICAgICAgICduYW1lJzogJ3llYXInLFxuICAgICAgICAnbWlsbGlzZWNvbmRzJzogMzExMDQwMDAwMDAsXG4gICAgICAgICdzdGFydGluZ1BvaW50JzogMCxcbiAgICAgICAgJ2FiYnJldmlhdGlvbic6ICdZJyxcbiAgICAgICAgJ2Rlc2NyaXB0aW9uJzogJ1lFQVInLFxuICAgICAgICAnbXVsdGlwbGllcnMnOiBbMV1cbiAgICAgIH1dO1xuICAgICAgdGhpcy50ZEJ1dHRvbnMgPSBbXG4gICAgICAgIHtcbiAgICAgICAgICAnbmFtZSc6ICdZVEQnLFxuICAgICAgICAgICdhYmJyZXZpYXRpb24nOiAnWVREJyxcbiAgICAgICAgICAncGFyZW50JzogJ3llYXInLFxuICAgICAgICAgICdtaWxsaXNlY29uZHMnOiAzMTEwNDAwMDAwMCxcbiAgICAgICAgICAnZGVzY3JpcHRpb24nOiAnWWVhciB0byBEYXRlJ1xuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgJ25hbWUnOiAnUVREJyxcbiAgICAgICAgICAnYWJicmV2aWF0aW9uJzogJ1FURCcsXG4gICAgICAgICAgJ3BhcmVudCc6ICdtb250aCcsXG4gICAgICAgICAgJ211bHRpcGxpZXInOiAzLFxuICAgICAgICAgICdtaWxsaXNlY29uZHMnOiA3Nzc2MDAwMDAwLFxuICAgICAgICAgICdkZXNjcmlwdGlvbic6ICdRdWFydGVyIHRvIERhdGUnXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAnbmFtZSc6ICdNVEQnLFxuICAgICAgICAgICdhYmJyZXZpYXRpb24nOiAnTVREJyxcbiAgICAgICAgICAncGFyZW50JzogJ21vbnRoJyxcbiAgICAgICAgICAnbWlsbGlzZWNvbmRzJzogMjU5MjAwMDAwMCxcbiAgICAgICAgICAnZGVzY3JpcHRpb24nOiAnTW9udGggdG8gRGF0ZSdcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICduYW1lJzogJ1dURCcsXG4gICAgICAgICAgJ2FiYnJldmlhdGlvbic6ICdXVEQnLFxuICAgICAgICAgICdwYXJlbnQnOiAnZGF5JyxcbiAgICAgICAgICAnbXVsdGlwbGllcic6IDcsXG4gICAgICAgICAgJ21pbGxpc2Vjb25kcyc6IDYwNDgwMDAwMCxcbiAgICAgICAgICAnZGVzY3JpcHRpb24nOiAnV2VlayB0byBEYXRlJ1xuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgJ25hbWUnOiAnWScsXG4gICAgICAgICAgJ2FiYnJldmlhdGlvbic6ICdZJyxcbiAgICAgICAgICAncGFyZW50JzogJ2RheScsXG4gICAgICAgICAgJ21pbGxpc2Vjb25kcyc6IDg2NDAwMDAwLFxuICAgICAgICAgICdkZXNjcmlwdGlvbic6ICdZZXN0ZXJkYXknXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAnbmFtZSc6ICdUJyxcbiAgICAgICAgICAnYWJicmV2aWF0aW9uJzogJ1QnLFxuICAgICAgICAgICdwYXJlbnQnOiAnZGF5JyxcbiAgICAgICAgICAnbWlsbGlzZWNvbmRzJzogODY0MDAwMDAsXG4gICAgICAgICAgJ2Rlc2NyaXB0aW9uJzogJ1RvZGF5J1xuICAgICAgICB9XG4gICAgICBdO1xuICAgICAgdGhpcy5jb25maWcgPSB7XG4gICAgICAgIGFuY2hvclBvc2l0aW9uczogJ3JpZ2h0JyxcbiAgICAgICAgYWxsOiAnMScsXG4gICAgICAgIGNvbnRleHR1YWw6ICcxJyxcbiAgICAgICAgY2FsY3VsYXRlZDogJzEnLFxuICAgICAgICB0ZXJ0aWFyeVRpbWVQZXJpb2RzOiB7fVxuICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBIGZ1bmN0aW9uIHRvIGdlbmVyYXRlIHRoZSBjYWxjdWxhdGVkIGJ1dHRvbnMgdXNpbmdcbiAgICAgKiB0aGUgYWN0aXZlIHJhbmdlIGFuZCB0aGUgbG9jYXRpb24gb2YgdGhlIGFjdGl2ZSByYW5nZVxuICAgICAqL1xuICAgIGdlbmVyYXRlQ2FsY3VsYXRlZEJ1dHRvbnMgKCkge1xuICAgICAgdmFyIHRhcmdldEJsb2NrID0gdGhpcy5lbmRBY3RpdmVXaW5kb3cgLSB0aGlzLnN0YXJ0RGF0YXNldCxcbiAgICAgICAgaSA9IDAsXG4gICAgICAgIGogPSAwLFxuICAgICAgICBhY3RpdmVXaW5kb3cgPSB0aGlzLmVuZEFjdGl2ZVdpbmRvdyAtIHRoaXMuc3RhcnRBY3RpdmVXaW5kb3csXG4gICAgICAgIGNvdW50ID0gMDtcbiAgICAgIHRoaXMuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kcyA9IFtdO1xuICAgICAgZm9yIChpID0gMDsgaSA8IHRoaXMudGltZVBlcmlvZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgLy8gY2hlY2tpbmcgd2hldGhlciB0aGUgdW5pdCBpcyBhcHBsaWNhYmxlIGZvciB0aGUgY3VycmVudCB0YXJnZXQgYmxvY2tcbiAgICAgICAgaWYgKHRhcmdldEJsb2NrIC8gdGhpcy50aW1lUGVyaW9kc1tpXS5taWxsaXNlY29uZHMgPj0gMSkge1xuICAgICAgICAgIC8vIGNoZWNraW5nIHdoZXRoZXIgdGhlIHVuaXQgaXMgb2YgdGhlIGhpZ2hlciBvcmRlciBhbmQgb25seSBtdWx0aXBsaWVyIDEgaXMgYXBwbGljYWJsZVxuICAgICAgICAgIGlmIChNYXRoLmZsb29yKChhY3RpdmVXaW5kb3cpIC8gdGhpcy50aW1lUGVyaW9kc1tpXS5taWxsaXNlY29uZHMpIDwgMSkge1xuICAgICAgICAgICAgdGhpcy5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzLnB1c2goe1xuICAgICAgICAgICAgICAnYWJicmV2aWF0aW9uJzogdGhpcy50aW1lUGVyaW9kc1tpXS5hYmJyZXZpYXRpb24sXG4gICAgICAgICAgICAgICdkZXNjcmlwdGlvbic6IHRoaXMudGltZVBlcmlvZHNbaV0uZGVzY3JpcHRpb24sXG4gICAgICAgICAgICAgICdtaWxsaXNlY29uZHMnOiB0aGlzLnRpbWVQZXJpb2RzW2ldLm1pbGxpc2Vjb25kcyxcbiAgICAgICAgICAgICAgJ211bHRpcGxpZXJzJzogWzFdXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2UgeyAvLyBpZiB0aGUgdW5pdCBpcyBvZiB0aGUgb3JkZXIgb2YgdGhlIHRhcmdldCBibG9jayBhbmQgY2FsY3VsYXRpbmcgdGhlIG11bHRpcGxpZXJzXG4gICAgICAgICAgICB0aGlzLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHMucHVzaCh7XG4gICAgICAgICAgICAgICdhYmJyZXZpYXRpb24nOiB0aGlzLnRpbWVQZXJpb2RzW2ldLmFiYnJldmlhdGlvbixcbiAgICAgICAgICAgICAgJ2Rlc2NyaXB0aW9uJzogdGhpcy50aW1lUGVyaW9kc1tpXS5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgICAgJ21pbGxpc2Vjb25kcyc6IHRoaXMudGltZVBlcmlvZHNbaV0ubWlsbGlzZWNvbmRzLFxuICAgICAgICAgICAgICAnbXVsdGlwbGllcnMnOiBbXVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyBjYWxjdWxhdGluZyBhbmQgcG9wdWxhdGluZyB0aGUgYXBwbGljYWJsZSBtdWx0cGxpZXJzIG9mIGVhY2ggdW5pdFxuICAgICAgICAgICAgZm9yIChqID0gMDsgaiA8IHRoaXMudGltZVBlcmlvZHNbaV0ubXVsdGlwbGllcnMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgaWYgKGFjdGl2ZVdpbmRvdyAvIHRoaXMucmF0aW8gPCB0aGlzLnRpbWVQZXJpb2RzW2ldLm11bHRpcGxpZXJzW2pdICogdGhpcy50aW1lUGVyaW9kc1tpXS5taWxsaXNlY29uZHMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHNbdGhpcy5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzLmxlbmd0aCAtIDFdLm11bHRpcGxpZXJzLnB1c2goXG4gICAgICAgICAgICAgICAgICB0aGlzLnRpbWVQZXJpb2RzW2ldLm11bHRpcGxpZXJzW2pdXG4gICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICB0aGlzLm5vQ2FsY0J1dHRvbnMgPSBJbmZpbml0eTtcbiAgICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZm9yIChqID0gMDsgaiA8IHRoaXMuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kc1tpXS5tdWx0aXBsaWVycy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICsrY291bnQ7XG4gICAgICAgICAgaWYgKHRoaXMubm9DYWxjQnV0dG9ucyA+IGkpIHtcbiAgICAgICAgICAgIHRoaXMubm9DYWxjQnV0dG9ucyA9IGk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChjb3VudCA8PSA0KSB7XG4gICAgICAgICAgICB0aGlzLnN0YXJ0UG9pbnRNdWx0aXBsaWVyID0gajtcbiAgICAgICAgICAgIHRoaXMuc3RhcnRQb2ludFVuaXQgPSBpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyB0aGlzLmRyYXdCdXR0b25zQ2FsY3VsYXRlZCh0aGlzLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEEgZnVuY3Rpb24gdG8gZ2VuZXJhdGUgdGhlIGNvbnRleHR1YWwgYnV0dG9ucyB1c2luZ1xuICAgICAqIHRoZSBlbmQgcG9pbnQgb2YgdGhlIHRpbWUtc2NhbGVcbiAgICAgKi9cbiAgICBnZW5lcmF0ZUNvbnRleHR1YWxCdXR0b25zICgpIHtcbiAgICAgIC8vIGdlbmVyYXRpbmcgYW4gYXJyYXkgd2l0aCBhcHBsaWNhYmxlIFREIGJ1dHRvbnNcbiAgICAgIHZhciBidXR0b25zID0gW10sXG4gICAgICAgIGkgPSAwLFxuICAgICAgICBlbmRTdGFtcCA9IHRoaXMuZ2xvYmFsUmVhY3RpdmVNb2RlbC5tb2RlbFsneC1heGlzLWFic29sdXRlLXJhbmdlLWVuZCddLFxuICAgICAgICBkYXRlU3RhcnQgPSBlbmRTdGFtcCAtIDIsXG4gICAgICAgIGRhdGVFbmQgPSBlbmRTdGFtcCxcbiAgICAgICAgcmVsYXRpdmVUREJ1dHRvbiA9IHt9O1xuICAgICAgZm9yICg7IGkgPCB0aGlzLnRkQnV0dG9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICBkYXRlU3RhcnQgPSBuZXcgRGF0ZShlbmRTdGFtcCk7XG4gICAgICAgIGlmICh0aGlzLnRkQnV0dG9uc1tpXS5uYW1lID09PSAnWVREJykge1xuICAgICAgICAgIGRhdGVTdGFydC5zZXRNb250aCgwKTtcbiAgICAgICAgICBkYXRlU3RhcnQuc2V0RGF0ZSgxKTtcbiAgICAgICAgICBkYXRlU3RhcnQuc2V0SG91cnMoMCk7XG4gICAgICAgICAgZGF0ZVN0YXJ0LnNldE1pbnV0ZXMoMCk7XG4gICAgICAgICAgZGF0ZVN0YXJ0LnNldFNlY29uZHMoMCk7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy50ZEJ1dHRvbnNbaV0ubmFtZSA9PT0gJ01URCcpIHtcbiAgICAgICAgICBkYXRlU3RhcnQuc2V0RGF0ZSgxKTtcbiAgICAgICAgICBkYXRlU3RhcnQuc2V0SG91cnMoMCk7XG4gICAgICAgICAgZGF0ZVN0YXJ0LnNldE1pbnV0ZXMoMCk7XG4gICAgICAgICAgZGF0ZVN0YXJ0LnNldFNlY29uZHMoMCk7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy50ZEJ1dHRvbnNbaV0ubmFtZSA9PT0gJ1FURCcpIHtcbiAgICAgICAgICBkYXRlU3RhcnQuc2V0TW9udGgoMTEgLSAoZGF0ZVN0YXJ0LmdldE1vbnRoKCkgJSA0KSk7XG4gICAgICAgICAgZGF0ZVN0YXJ0LnNldERhdGUoMCk7XG4gICAgICAgICAgZGF0ZVN0YXJ0LnNldEhvdXJzKDApO1xuICAgICAgICAgIGRhdGVTdGFydC5zZXRNaW51dGVzKDApO1xuICAgICAgICAgIGRhdGVTdGFydC5zZXRTZWNvbmRzKDApO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMudGRCdXR0b25zW2ldLm5hbWUgPT09ICdXVEQnKSB7XG4gICAgICAgICAgZGF0ZVN0YXJ0LnNldERhdGUoZGF0ZVN0YXJ0LmdldERhdGUoKSAtIGRhdGVTdGFydC5nZXREYXkoKSk7XG4gICAgICAgICAgZGF0ZVN0YXJ0LnNldEhvdXJzKDApO1xuICAgICAgICAgIGRhdGVTdGFydC5zZXRNaW51dGVzKDApO1xuICAgICAgICAgIGRhdGVTdGFydC5zZXRTZWNvbmRzKDApO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMudGRCdXR0b25zW2ldLm5hbWUgPT09ICdZJykge1xuICAgICAgICAgIGRhdGVTdGFydC5zZXRIb3VycygwKTtcbiAgICAgICAgICBkYXRlU3RhcnQuc2V0TWludXRlcygwKTtcbiAgICAgICAgICBkYXRlU3RhcnQuc2V0U2Vjb25kcygwKTtcbiAgICAgICAgICBkYXRlU3RhcnQgLT0gODY0MDAwMDA7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy50ZEJ1dHRvbnNbaV0ubmFtZSA9PT0gJ1QnKSB7XG4gICAgICAgICAgZGF0ZVN0YXJ0LnNldEhvdXJzKDApO1xuICAgICAgICAgIGRhdGVTdGFydC5zZXRNaW51dGVzKDApO1xuICAgICAgICAgIGRhdGVTdGFydC5zZXRTZWNvbmRzKDApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGRhdGVFbmQgPCBkYXRlU3RhcnQpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnRkQnV0dG9uc1tpXS5kYXRlU3RhcnQgPSBkYXRlU3RhcnQudmFsdWVPZigpO1xuICAgICAgICAgIHRoaXMudGRCdXR0b25zW2ldLmRhdGVFbmQgPSBkYXRlRW5kLnZhbHVlT2YoKTtcbiAgICAgICAgICBidXR0b25zLnB1c2godGhpcy50ZEJ1dHRvbnNbaV0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZWxhdGl2ZVREQnV0dG9uLm1pbGxpc2Vjb25kcyA9IEluZmluaXR5O1xuICAgICAgZm9yIChpID0gMDsgaSA8IHRoaXMudGRCdXR0b25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChNYXRoLmFicyh0aGlzLnRkQnV0dG9uc1tpXS5taWxsaXNlY29uZHMgLSAodGhpcy5lbmRBY3RpdmVXaW5kb3cgLSB0aGlzLnN0YXJ0QWN0aXZlV2luZG93KSkgPCByZWxhdGl2ZVREQnV0dG9uLm1pbGxpc2Vjb25kcykge1xuICAgICAgICAgIHJlbGF0aXZlVERCdXR0b24ubWlsbGlzZWNvbmRzID0gdGhpcy50ZEJ1dHRvbnNbaV0ubWlsbGlzZWNvbmRzO1xuICAgICAgICAgIHJlbGF0aXZlVERCdXR0b24ubmFtZSA9IHRoaXMudGRCdXR0b25zW2ldLmFiYnJldmlhdGlvbjtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB0aGlzLnN0YW5kYXJkQ29udGV4dWFsUGVyaW9kcyA9IGJ1dHRvbnM7XG4gICAgICAvLyB0aGlzLmRyYXdCdXR0b25zQ29udGV4dHVhbCh0aGlzLnN0YW5kYXJkQ29udGV4dWFsUGVyaW9kcyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQSBmdW5jdGlvbiB0byBzZXQgdGhlIGFjdGl2ZSBwZXJpb2Qnc1xuICAgICAqIHN0YXJ0IGFuZCBlbmQgcG9pbnRcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IGRhdGUgc3RhbXAgLSBBIFVOSVggdGltZXN0YW1wIHRvIGJlIHNldCBhcyB0aGUgc3RhcnQgcG9pbnQgb2YgYWN0aXZlIHBlcmlvZFxuICAgICAqIEBwYXJhbSAge251bWJlcn0gZGF0ZSBzdGFtcCAtIEEgVU5JWCB0aW1lc3RhbXAgdG8gYmUgc2V0IGFzIHRoZSBlbmQgcG9pbnQgb2YgYWN0aXZlIHBlcmlvZFxuICAgICAqL1xuICAgIHNldEFjdGl2ZVBlcmlvZCAoKSB7XG4gICAgICB2YXIgc3RhcnQsXG4gICAgICAgIGVuZDtcbiAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIGVuZCA9IHRoaXMuZ2xvYmFsUmVhY3RpdmVNb2RlbC5tb2RlbFsneC1heGlzLXZpc2libGUtcmFuZ2UtZW5kJ107XG4gICAgICAgIHN0YXJ0ID0gZW5kIC0gYXJndW1lbnRzWzBdO1xuICAgICAgfSBlbHNlIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAyKSB7XG4gICAgICAgIHN0YXJ0ID0gYXJndW1lbnRzWzBdO1xuICAgICAgICBlbmQgPSBhcmd1bWVudHNbMV07XG4gICAgICB9XG5cbiAgICAgIHRoaXMuc3RhcnRBY3RpdmVXaW5kb3cgPSBzdGFydDtcbiAgICAgIHRoaXMuZW5kQWN0aXZlV2luZG93ID0gZW5kO1xuICAgICAgdGhpcy5nZW5lcmF0ZUNhbGN1bGF0ZWRCdXR0b25zKCk7XG4gICAgICB0aGlzLmdsb2JhbFJlYWN0aXZlTW9kZWwubW9kZWxbJ3gtYXhpcy12aXNpYmxlLXJhbmdlLXN0YXJ0J10gPSB0aGlzLnN0YXJ0QWN0aXZlV2luZG93O1xuICAgICAgdGhpcy5nbG9iYWxSZWFjdGl2ZU1vZGVsLm1vZGVsWyd4LWF4aXMtdmlzaWJsZS1yYW5nZS1lbmQnXSA9IHRoaXMuZW5kQWN0aXZlV2luZG93O1xuICAgICAgdGhpcy5nZW5lcmF0ZUNvbnRleHR1YWxCdXR0b25zKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQSBmdW5jdGlvbiB0byBzZXQgdGhlIHN0YXJ0IGFuZCBlbmQgcG9pbnQgb2YgdGhlXG4gICAgICogZW50aXJlIHRpbWUtbGluZVxuICAgICAqIEBwYXJhbSAge251bWJlcn0gZGF0ZSBzdGFtcCAtIEEgVU5JWCB0aW1lc3RhbXAgdG8gYmUgc2V0IGFzIHRoZSBzdGFydCBwb2ludCBvZiB0aW1lLWxpbmVcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IGRhdGUgc3RhbXAgLSBBIFVOSVggdGltZXN0YW1wIHRvIGJlIHNldCBhcyB0aGUgZW5kIHBvaW50IG9mIHRpbWUtbGluZVxuICAgICAqL1xuICAgIHNldFRpbWVsaW5lIChzdGFydCwgZW5kKSB7XG4gICAgICB0aGlzLnN0YXJ0RGF0YXNldCA9IHN0YXJ0O1xuICAgICAgdGhpcy5lbmREYXRhc2V0ID0gZW5kO1xuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0YXJ0QWN0aXZlUmFuZ2UnKS5pbm5lckhUTUwgPSBuZXcgRGF0ZSh0aGlzLnN0YXJ0RGF0YXNldCk7XG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZW5kQWN0aXZlUmFuZ2UnKS5pbm5lckhUTUwgPSBuZXcgRGF0ZSh0aGlzLmVuZERhdGFzZXQpO1xuICAgICAgdGhpcy5nZW5lcmF0ZUNhbGN1bGF0ZWRCdXR0b25zKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQSBmdW5jdGlvbiB0byBzZXQgdGhlIG9iamVjdCB0byBzZXQgdGhlIHVzZXIgcHJlZmVyZW5jZXNcbiAgICAgKi9cbiAgICBjb25maWd1cmUgKGNvbmZpZykge1xuICAgICAgdGhpcy5jb25maWcgPSBjb25maWc7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRnVzaW9uY2hhcnRzIGxpZmUgY3ljbGUgbWV0aG9kIGZvciBleHRlbnNpb25cbiAgICAgKi9cbiAgICBpbml0IChyZXF1aXJlKSB7XG4gICAgICB2YXIgaW5zdGFuY2UgPSB0aGlzO1xuICAgICAgcmVxdWlyZShbXG4gICAgICAgICd4QXhpcycsXG4gICAgICAgICd5QXhpcycsXG4gICAgICAgICdncmFwaGljcycsXG4gICAgICAgICdjaGFydCcsXG4gICAgICAgICdkYXRhc2V0JyxcbiAgICAgICAgJ1Bsb3RNYW5hZ2VyJyxcbiAgICAgICAgJ2NhbnZhc0NvbmZpZycsXG4gICAgICAgICdNYXJrZXJNYW5hZ2VyJyxcbiAgICAgICAgJ3JlYWN0aXZlTW9kZWwnLFxuICAgICAgICAnZ2xvYmFsUmVhY3RpdmVNb2RlbCcsXG4gICAgICAgICdzcGFjZU1hbmFnZXJJbnN0YW5jZScsXG4gICAgICAgICdzbWFydExhYmVsJyxcbiAgICAgICAgJ2NoYXJ0SW5zdGFuY2UnLFxuICAgICAgICBmdW5jdGlvbiAoXG4gICAgICAgICAgICAgIHhBeGlzLFxuICAgICAgICAgICAgICB5QXhpcyxcbiAgICAgICAgICAgICAgZ3JhcGhpY3MsXG4gICAgICAgICAgICAgIGNoYXJ0LFxuICAgICAgICAgICAgICBkYXRhc2V0LFxuICAgICAgICAgICAgICBwbG90TWFuYWdlcixcbiAgICAgICAgICAgICAgY2FudmFzQ29uZmlnLFxuICAgICAgICAgICAgICBtYXJrZXJNYW5hZ2VyLFxuICAgICAgICAgICAgICByZWFjdGl2ZU1vZGVsLFxuICAgICAgICAgICAgICBnbG9iYWxSZWFjdGl2ZU1vZGVsLFxuICAgICAgICAgICAgICBzcGFjZU1hbmFnZXJJbnN0YW5jZSxcbiAgICAgICAgICAgICAgc21hcnRMYWJlbCxcbiAgICAgICAgICAgICAgY2hhcnRJbnN0YW5jZSkge1xuICAgICAgICAgIGluc3RhbmNlLnhBeGlzID0geEF4aXM7XG4gICAgICAgICAgaW5zdGFuY2UueUF4aXMgPSB5QXhpcztcbiAgICAgICAgICBpbnN0YW5jZS5ncmFwaGljcyA9IGdyYXBoaWNzO1xuICAgICAgICAgIGluc3RhbmNlLmNoYXJ0ID0gY2hhcnQ7XG4gICAgICAgICAgaW5zdGFuY2UuZGF0YXNldCA9IGRhdGFzZXQ7XG4gICAgICAgICAgaW5zdGFuY2UucGxvdE1hbmFnZXIgPSBwbG90TWFuYWdlcjtcbiAgICAgICAgICBpbnN0YW5jZS5tYXJrZXJNYW5hZ2VyID0gbWFya2VyTWFuYWdlcjtcbiAgICAgICAgICBpbnN0YW5jZS5jYW52YXNDb25maWcgPSBjYW52YXNDb25maWc7XG4gICAgICAgICAgaW5zdGFuY2UucmVhY3RpdmVNb2RlbCA9IHJlYWN0aXZlTW9kZWw7XG4gICAgICAgICAgaW5zdGFuY2UuZ2xvYmFsUmVhY3RpdmVNb2RlbCA9IGdsb2JhbFJlYWN0aXZlTW9kZWw7XG4gICAgICAgICAgaW5zdGFuY2Uuc3BhY2VNYW5hZ2VySW5zdGFuY2UgPSBzcGFjZU1hbmFnZXJJbnN0YW5jZTtcbiAgICAgICAgICBpbnN0YW5jZS5zbWFydExhYmVsID0gc21hcnRMYWJlbDtcbiAgICAgICAgICBpbnN0YW5jZS5jaGFydEluc3RhbmNlID0gY2hhcnRJbnN0YW5jZTtcbiAgICAgICAgfVxuICAgICAgXSk7XG4gICAgICB0aGlzLnNwYWNlTWFuYWdlckluc3RhbmNlID0gaW5zdGFuY2Uuc3BhY2VNYW5hZ2VySW5zdGFuY2U7XG4gICAgICB0aGlzLmdsb2JhbFJlYWN0aXZlTW9kZWwgPSBpbnN0YW5jZS5nbG9iYWxSZWFjdGl2ZU1vZGVsO1xuICAgICAgdGhpcy5lbmRBY3RpdmVXaW5kb3cgPSBpbnN0YW5jZS5nbG9iYWxSZWFjdGl2ZU1vZGVsLm1vZGVsWyd4LWF4aXMtdmlzaWJsZS1yYW5nZS1lbmQnXTtcbiAgICAgIHRoaXMuc3RhcnRBY3RpdmVXaW5kb3cgPSBpbnN0YW5jZS5nbG9iYWxSZWFjdGl2ZU1vZGVsLm1vZGVsWyd4LWF4aXMtdmlzaWJsZS1yYW5nZS1zdGFydCddO1xuICAgICAgdGhpcy5zdGFydERhdGFzZXQgPSBpbnN0YW5jZS5nbG9iYWxSZWFjdGl2ZU1vZGVsLm1vZGVsWyd4LWF4aXMtYWJzb2x1dGUtcmFuZ2Utc3RhcnQnXTtcbiAgICAgIHRoaXMuZW5kRGF0YXNldCA9IGluc3RhbmNlLmdsb2JhbFJlYWN0aXZlTW9kZWwubW9kZWxbJ3gtYXhpcy1hYnNvbHV0ZS1yYW5nZS1lbmQnXTtcbiAgICAgIHRoaXMuc2V0QWN0aXZlUGVyaW9kKHRoaXMuc3RhcnRBY3RpdmVXaW5kb3csIHRoaXMuZW5kQWN0aXZlV2luZG93KTtcbiAgICAgIC8vIGluc3RhbmNlLmdsb2JhbFJlYWN0aXZlTW9kZWwubW9kZWxbJ194LWF4aXMtdmlzaWJsZS1yYW5nZS1zdGFydCddICs9IDEyNDQxNjAwMDAwMDtcbiAgICAgIHRoaXMuc2V0QWN0aXZlUGVyaW9kKHRoaXMuc3RhcnRBY3RpdmVXaW5kb3csIHRoaXMuZW5kQWN0aXZlV2luZG93KTtcbiAgICAgIHRoaXMudGltZVJ1bGVzID0gdGhpcy5jaGFydEluc3RhbmNlLmFwaUluc3RhbmNlLmdldENvbXBvbmVudFN0b3JlKCk7XG4gICAgICB0aGlzLnRpbWVSdWxlcyA9IHRoaXMudGltZVJ1bGVzLmdldENhbnZhc0J5SW5kZXgoMCkuY29tcG9zaXRpb24uaW1wbDtcbiAgICAgIHRoaXMudGltZVJ1bGVzID0gdGhpcy50aW1lUnVsZXMuZ2V0RGF0YUFnZ3JlZ2F0b3IoKTtcbiAgICAgIHRoaXMudGltZVJ1bGVzID0gdGhpcy50aW1lUnVsZXMuZ2V0QWdncmVnYXRpb25UaW1lUnVsZXMoKTtcbiAgICAgIGNvbnNvbGUubG9nKHRoaXMudGltZVJ1bGVzKTtcbiAgICAgIHRoaXMudG9vbGJhcnMgPSBbXTtcblxuICAgICAgdGhpcy5tZWFzdXJlbWVudCA9IHt9O1xuXG4gICAgICB0aGlzLnRvb2xiYXJzLnB1c2godGhpcy5jcmVhdGVUb29sYmFyKCkpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIGNyZWF0ZVRvb2xiYXIgKCkge1xuICAgICAgdmFyIHVuaWdyb3VwLFxuICAgICAgICB0b29sYmFyLFxuICAgICAgICBjYWxjdWxhdGVkQnV0dG9ucyxcbiAgICAgICAgY29udGV4dHVhbEJ1dHRvbnMsXG4gICAgICAgIGFsbEJ1dHRvbixcbiAgICAgICAgc2VsZiA9IHRoaXMsXG4gICAgICAgIGVuZEFjdGl2ZSA9IHRoaXMuZ2xvYmFsUmVhY3RpdmVNb2RlbC5tb2RlbFsneC1heGlzLXZpc2libGUtcmFuZ2UtZW5kJ10sXG4gICAgICAgIGRlZHVjdG9yQXIgPSBbXSxcbiAgICAgICAgc3RhcnRNdWx0aXBsaWVyLFxuICAgICAgICBkZWR1Y3RvcixcbiAgICAgICAgaSxcbiAgICAgICAgaixcbiAgICAgICAgbWFyZ2luLFxuICAgICAgICBmcm9tRGF0ZUxhYmVsLFxuICAgICAgICBncm91cDtcblxuICAgICAgZ3JvdXAgPSBuZXcgdGhpcy50b29sYm94LkNvbXBvbmVudEdyb3VwKHtcbiAgICAgICAgcGFwZXI6IHRoaXMuZ3JhcGhpY3MucGFwZXIsXG4gICAgICAgIGNoYXJ0OiB0aGlzLmNoYXJ0LFxuICAgICAgICBzbWFydExhYmVsOiB0aGlzLnNtYXJ0TGFiZWwsXG4gICAgICAgIGNoYXJ0Q29udGFpbmVyOiB0aGlzLmdyYXBoaWNzLmNvbnRhaW5lclxuICAgICAgfSk7XG5cbiAgICAgIHVuaWdyb3VwID0gbmV3IHRoaXMudG9vbGJveC5VbmlTZWxlY3RDb21wb25lbnRHcm91cCh7XG4gICAgICAgIHBhcGVyOiB0aGlzLmdyYXBoaWNzLnBhcGVyLFxuICAgICAgICBjaGFydDogdGhpcy5jaGFydCxcbiAgICAgICAgc21hcnRMYWJlbDogdGhpcy5zbWFydExhYmVsLFxuICAgICAgICBjaGFydENvbnRhaW5lcjogdGhpcy5ncmFwaGljcy5jb250YWluZXJcbiAgICAgIH0pO1xuICAgICAgdW5pZ3JvdXAuc2V0Q29uZmlnKHtcbiAgICAgICAgZmlsbDogJyNmZmYnLFxuICAgICAgICBib3JkZXJUaGlja25lc3M6IDBcbiAgICAgIH0pO1xuICAgICAgZ3JvdXAuc2V0Q29uZmlnKHtcbiAgICAgICAgZmlsbDogJyNmZmYnLFxuICAgICAgICBib3JkZXJUaGlja25lc3M6IDBcbiAgICAgIH0pO1xuICAgICAgdG9vbGJhciA9IG5ldyB0aGlzLkhvcml6b250YWxUb29sYmFyKHtcbiAgICAgICAgcGFwZXI6IHRoaXMuZ3JhcGhpY3MucGFwZXIsXG4gICAgICAgIGNoYXJ0OiB0aGlzLmNoYXJ0LFxuICAgICAgICBzbWFydExhYmVsOiB0aGlzLnNtYXJ0TGFiZWwsXG4gICAgICAgIGNoYXJ0Q29udGFpbmVyOiB0aGlzLmdyYXBoaWNzLmNvbnRhaW5lclxuICAgICAgfSk7XG4gICAgICB0b29sYmFyLnNldENvbmZpZyh7XG4gICAgICAgIGZpbGw6ICcjZmZmJyxcbiAgICAgICAgYm9yZGVyVGhpY2tuZXNzOiAwXG4gICAgICB9KTtcbiAgICAgIGZyb21EYXRlTGFiZWwgPSBuZXcgdGhpcy50b29sYm94LkxhYmVsKCdab29tOicsIHtcbiAgICAgICAgc21hcnRMYWJlbDogdGhpcy5zbWFydExhYmVsLFxuICAgICAgICBwYXBlcjogdGhpcy5ncmFwaGljcy5wYXBlclxuICAgICAgfSwge1xuICAgICAgICB0ZXh0OiB7XG4gICAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICAgICdmb250LXNpemUnOiAnMTUnLFxuICAgICAgICAgICAgJ2ZvbnQtZmFtaWx5JzogJ015cmlhZFBybycsXG4gICAgICAgICAgICAnZmlsbCc6ICcjNjk2OTY5JyxcbiAgICAgICAgICAgICdmb250LXdlaWdodCc6ICdib2xkJ1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgY29udGFpbmVyOiB7XG4gICAgICAgICAgaGVpZ2h0OiAyMFxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGdyb3VwLmFkZFN5bWJvbChmcm9tRGF0ZUxhYmVsKTtcbiAgICAgIGFsbEJ1dHRvbiA9IG5ldyB0aGlzLnRvb2xib3guU3ltYm9sKCdBTEwnLCB0cnVlLCB7XG4gICAgICAgIHBhcGVyOiB0aGlzLmdyYXBoaWNzLnBhcGVyLFxuICAgICAgICBjaGFydDogdGhpcy5jaGFydCxcbiAgICAgICAgc21hcnRMYWJlbDogdGhpcy5zbWFydExhYmVsLFxuICAgICAgICBjaGFydENvbnRhaW5lcjogdGhpcy5ncmFwaGljcy5jb250YWluZXJcbiAgICAgIH0sIHtcbiAgICAgICAgZmlsbDogJyNmZmZmZmYnLFxuICAgICAgICBsYWJlbEZpbGw6ICcjNjk2OTY5JyxcbiAgICAgICAgc3ltYm9sU3Ryb2tlV2lkdGg6ICcyJyxcbiAgICAgICAgc3ltYm9sU3Ryb2tlOiAnIzAwMDAwMCcsXG4gICAgICAgIHN0cm9rZVdpZHRoOiAnMScsXG4gICAgICAgIGhvdmVyRmlsbDogJyM3ZjdmN2YnLFxuICAgICAgICBoZWlnaHQ6IDIwLFxuICAgICAgICByYWRpdXM6IDEsXG4gICAgICAgIG1hcmdpbjoge1xuICAgICAgICAgIHJpZ2h0OiA1XG4gICAgICAgIH0sXG4gICAgICAgIGJ0blRleHRTdHlsZToge1xuICAgICAgICAgICdmb250RmFtaWx5JzogJ015cmlhZFBybycsXG4gICAgICAgICAgJ2ZvbnRTaXplJzogJzEyJ1xuICAgICAgICB9XG4gICAgICB9KS5hdHRhY2hFdmVudEhhbmRsZXJzKHtcbiAgICAgICAgY2xpY2s6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBzZWxmLnNldEFjdGl2ZVBlcmlvZChzZWxmLnN0YXJ0RGF0YXNldCwgc2VsZi5lbmREYXRhc2V0KTtcbiAgICAgICAgICB0b29sYmFyLmRpc3Bvc2UoKTtcbiAgICAgICAgICBzZWxmLmNsaWNrZWRJZCA9ICdBTEwnO1xuICAgICAgICAgIHNlbGYudG9vbGJhcnMucG9wKCk7XG4gICAgICAgICAgc2VsZi50b29sYmFycy5wdXNoKHNlbGYuY3JlYXRlVG9vbGJhcigpKTtcbiAgICAgICAgICBzZWxmLmdldExvZ2ljYWxTcGFjZSgpO1xuICAgICAgICAgIHNlbGYuZHJhdygpO1xuICAgICAgICAgIC8vIHNlbGYuX3JlZi5yZUFsbG9jYXRlKHNlbGYucGFyZW50R3JvdXApO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgdW5pZ3JvdXAuYWRkU3ltYm9sKGFsbEJ1dHRvbik7XG4gICAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGZvciAoaiA9IHRoaXMuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kc1tpXS5tdWx0aXBsaWVycy5sZW5ndGggLSAxOyBqID49IDA7IGotLSkge1xuICAgICAgICAgIGRlZHVjdG9yQXIucHVzaChzZWxmLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHNbaV0ubXVsdGlwbGllcnNbal0gKiBzZWxmLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHNbaV0ubWlsbGlzZWNvbmRzKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjYWxjdWxhdGVkQnV0dG9ucyA9IFtdO1xuICAgICAgZm9yIChsZXQgaSA9IHNlbGYuc3RhcnRQb2ludFVuaXQ7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgIGlmIChpID09PSBzZWxmLnN0YXJ0UG9pbnRVbml0KSB7XG4gICAgICAgICAgc3RhcnRNdWx0aXBsaWVyID0gc2VsZi5zdGFydFBvaW50TXVsdGlwbGllcjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzdGFydE11bHRpcGxpZXIgPSBzZWxmLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHNbaV0ubXVsdGlwbGllcnMubGVuZ3RoIC0gMTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBqID0gc3RhcnRNdWx0aXBsaWVyOyBqID49IDA7IGotLSkge1xuICAgICAgICAgIG1hcmdpbiA9IChpID09PSBzZWxmLm5vQ2FsY0J1dHRvbnMgJiYgaiA9PT0gMCkgPyA1IDogMDtcbiAgICAgICAgICBjYWxjdWxhdGVkQnV0dG9uc1tpXSA9IG5ldyB0aGlzLnRvb2xib3guU3ltYm9sKHNlbGYuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kc1tpXS5tdWx0aXBsaWVyc1tqXSArIHNlbGYuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kc1tpXS5hYmJyZXZpYXRpb24sIHRydWUsIHtcbiAgICAgICAgICAgIHBhcGVyOiB0aGlzLmdyYXBoaWNzLnBhcGVyLFxuICAgICAgICAgICAgY2hhcnQ6IHRoaXMuY2hhcnQsXG4gICAgICAgICAgICBzbWFydExhYmVsOiB0aGlzLnNtYXJ0TGFiZWwsXG4gICAgICAgICAgICBjaGFydENvbnRhaW5lcjogdGhpcy5ncmFwaGljcy5jb250YWluZXJcbiAgICAgICAgICB9LCB7XG4gICAgICAgICAgICBmaWxsOiAnI2ZmZmZmZicsXG4gICAgICAgICAgICBsYWJlbEZpbGw6ICcjNjk2OTY5JyxcbiAgICAgICAgICAgIHN5bWJvbFN0cm9rZVdpZHRoOiAnMicsXG4gICAgICAgICAgICBzeW1ib2xTdHJva2U6ICcjMDAwMDAwJyxcbiAgICAgICAgICAgIHN0cm9rZVdpZHRoOiAnMScsXG4gICAgICAgICAgICBob3ZlckZpbGw6ICcjN2Y3ZjdmJyxcbiAgICAgICAgICAgIGhlaWdodDogMjAsXG4gICAgICAgICAgICByYWRpdXM6IDEsXG4gICAgICAgICAgICBtYXJnaW46IHtcbiAgICAgICAgICAgICAgcmlnaHQ6IG1hcmdpblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJ0blRleHRTdHlsZToge1xuICAgICAgICAgICAgICAnZm9udEZhbWlseSc6ICdNeXJpYWRQcm8nLFxuICAgICAgICAgICAgICAnZm9udFNpemUnOiAnMTInXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSkuYXR0YWNoRXZlbnRIYW5kbGVycyh7XG4gICAgICAgICAgICAnY2xpY2snOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIGRlZHVjdG9yID0gKHNlbGYuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kc1tpXS5tdWx0aXBsaWVyc1tqXSAqIHNlbGYuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kc1tpXS5taWxsaXNlY29uZHMpO1xuICAgICAgICAgICAgICBzZWxmLmNsaWNrZWRJZCA9IHNlbGYuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kc1tpXS5tdWx0aXBsaWVyc1tqXSArIHNlbGYuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kc1tpXS5hYmJyZXZpYXRpb247XG4gICAgICAgICAgICAgIHNlbGYuc2V0QWN0aXZlUGVyaW9kKGRlZHVjdG9yKTtcbiAgICAgICAgICAgICAgdG9vbGJhci5kaXNwb3NlKCk7XG4gICAgICAgICAgICAgIHNlbGYudG9vbGJhcnMucG9wKCk7XG4gICAgICAgICAgICAgIHNlbGYudG9vbGJhcnMucHVzaChzZWxmLmNyZWF0ZVRvb2xiYXIoKSk7XG4gICAgICAgICAgICAgIHNlbGYuZ2V0TG9naWNhbFNwYWNlKCk7XG4gICAgICAgICAgICAgIHNlbGYuZHJhdygpO1xuICAgICAgICAgICAgICAvLyBzZWxmLl9yZWYucmVBbGxvY2F0ZShzZWxmLnBhcmVudEdyb3VwKTtcbiAgICAgICAgICAgICAgLy8gdGhpcy50b29sYmFyc1t0aGlzLnRvb2xiYXJzLmxlbmd0aCAtIDFdID0gdGhpcy5jcmVhdGVUb29sYmFyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdW5pZ3JvdXAuYWRkU3ltYm9sKGNhbGN1bGF0ZWRCdXR0b25zW2ldKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb250ZXh0dWFsQnV0dG9ucyA9IFtdO1xuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc3RhbmRhcmRDb250ZXh1YWxQZXJpb2RzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnRleHR1YWxCdXR0b25zW2ldID0gbmV3IHRoaXMudG9vbGJveC5TeW1ib2wodGhpcy5zdGFuZGFyZENvbnRleHVhbFBlcmlvZHNbaV0uYWJicmV2aWF0aW9uLCB0cnVlLCB7XG4gICAgICAgICAgcGFwZXI6IHRoaXMuZ3JhcGhpY3MucGFwZXIsXG4gICAgICAgICAgY2hhcnQ6IHRoaXMuY2hhcnQsXG4gICAgICAgICAgc21hcnRMYWJlbDogdGhpcy5zbWFydExhYmVsLFxuICAgICAgICAgIGNoYXJ0Q29udGFpbmVyOiB0aGlzLmdyYXBoaWNzLmNvbnRhaW5lclxuICAgICAgICB9LCB7XG4gICAgICAgICAgZmlsbDogJyNmZmZmZmYnLFxuICAgICAgICAgIGxhYmVsRmlsbDogJyM2OTY5NjknLFxuICAgICAgICAgIHN5bWJvbFN0cm9rZVdpZHRoOiAnMicsXG4gICAgICAgICAgc3ltYm9sU3Ryb2tlOiAnIzAwMDAwMCcsXG4gICAgICAgICAgc3Ryb2tlV2lkdGg6ICcxJyxcbiAgICAgICAgICBoZWlnaHQ6IDIwLFxuICAgICAgICAgIGhvdmVyRmlsbDogJyM3ZjdmN2YnLFxuICAgICAgICAgIHJhZGl1czogMSxcbiAgICAgICAgICBtYXJnaW46IHtcbiAgICAgICAgICAgIHJpZ2h0OiAwXG4gICAgICAgICAgfSxcbiAgICAgICAgICBidG5UZXh0U3R5bGU6IHtcbiAgICAgICAgICAgICdmb250RmFtaWx5JzogJ015cmlhZFBybycsXG4gICAgICAgICAgICAnZm9udFNpemUnOiAnMTInXG4gICAgICAgICAgfVxuICAgICAgICB9KS5hdHRhY2hFdmVudEhhbmRsZXJzKHtcbiAgICAgICAgICAnY2xpY2snOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzZWxmLnNldEFjdGl2ZVBlcmlvZChzZWxmLnN0YW5kYXJkQ29udGV4dWFsUGVyaW9kc1tpXS5kYXRlU3RhcnQsIHNlbGYuc3RhbmRhcmRDb250ZXh1YWxQZXJpb2RzW2ldLmRhdGVFbmQpO1xuICAgICAgICAgICAgc2VsZi5jbGlja2VkSWQgPSBzZWxmLnN0YW5kYXJkQ29udGV4dWFsUGVyaW9kc1tpXS5hYmJyZXZpYXRpb247XG4gICAgICAgICAgICB0b29sYmFyLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgIHNlbGYudG9vbGJhcnMucG9wKCk7XG4gICAgICAgICAgICBzZWxmLnRvb2xiYXJzLnB1c2goc2VsZi5jcmVhdGVUb29sYmFyKCkpO1xuICAgICAgICAgICAgc2VsZi5nZXRMb2dpY2FsU3BhY2UoKTtcbiAgICAgICAgICAgIHNlbGYuZHJhdygpO1xuICAgICAgICAgICAgLy8gc2VsZi5fcmVmLnJlQWxsb2NhdGUoc2VsZi5wYXJlbnRHcm91cCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdW5pZ3JvdXAuYWRkU3ltYm9sKGNvbnRleHR1YWxCdXR0b25zW2ldKTtcbiAgICAgIH1cblxuICAgICAgICAvLyBidG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdCVVRUT04nKTtcbiAgICAgICAgLy8gYnRuLmlkID0gc3RhbmRhcmRQZXJpb2RzW2ldLmFiYnJldmlhdGlvbjtcbiAgICAgICAgLy8gYnRuLmlubmVySFRNTCA9IHN0YW5kYXJkUGVyaW9kc1tpXS5hYmJyZXZpYXRpb247XG4gICAgICAgIC8vIGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGV2ZW50QnRuLmJpbmQodGhpcywgc3RhbmRhcmRQZXJpb2RzW2ldKSk7XG4gICAgICAgIC8vIGNvbnRleHR1YWxCdXR0b25zLmFwcGVuZENoaWxkKGJ0bik7XG5cbiAgICAgIHRoaXMuU3ltYm9sU3RvcmUucmVnaXN0ZXIoJ3RleHRCb3hJY29uJywgZnVuY3Rpb24gKHgsIHksIHJhZCwgdywgaCwgcGFkWCwgcGFkWSkge1xuICAgICAgICB2YXIgeDEgPSB4IC0gdyAvIDIgKyBwYWRYIC8gMixcbiAgICAgICAgICB4MiA9IHggKyB3IC8gMiAtIHBhZFggLyAyLFxuICAgICAgICAgIHkxID0geSAtIGggLyAyICsgcGFkWSAvIDIsXG4gICAgICAgICAgeTIgPSB5ICsgaCAvIDIgLSBwYWRZIC8gMjtcblxuICAgICAgICByZXR1cm4gWydNJywgeDEsIHkxLCAnTCcsIHgyLCB5MSwgJ0wnLCB4MiwgeTIsICdMJywgeDEsIHkyLCAnWiddO1xuICAgICAgfSk7XG5cbiAgICAgIHRvb2xiYXIuYWRkQ29tcG9uZW50KGdyb3VwKTtcbiAgICAgIHRvb2xiYXIuYWRkQ29tcG9uZW50KHVuaWdyb3VwKTtcbiAgICAgIHJldHVybiB0b29sYmFyO1xuICAgIH07XG5cbiAgICBnZXRMb2dpY2FsU3BhY2UgKGF2YWlsYWJsZVdpZHRoID0gdGhpcy5fcFdpZHRoLCBhdmFpbGFibGVIZWlnaHQgPSB0aGlzLl9wSGVpZ2h0KSB7XG4gICAgICAvLyBhdmFpbGFibGVXaWR0aCAvPSAyO1xuICAgICAgdmFyIGxvZ2ljYWxTcGFjZSxcbiAgICAgICAgd2lkdGggPSA0MjAsIC8vIHdpZHRoIGhhcmRjb2RlZDsgVE9ETzogbWFrZSBpdCBkeW5hbWljXG4gICAgICAgIGhlaWdodCA9IDAsXG4gICAgICAgIGksXG4gICAgICAgIGxuO1xuXG4gICAgICBmb3IgKGkgPSAwLCBsbiA9IHRoaXMudG9vbGJhcnMubGVuZ3RoOyBpIDwgbG47IGkrKykge1xuICAgICAgICBsb2dpY2FsU3BhY2UgPSB0aGlzLnRvb2xiYXJzW2ldLmdldExvZ2ljYWxTcGFjZShhdmFpbGFibGVXaWR0aCwgYXZhaWxhYmxlSGVpZ2h0KTtcbiAgICAgICAgLy8gd2lkdGggPSBNYXRoLm1heChsb2dpY2FsU3BhY2Uud2lkdGgsIHdpZHRoKTtcbiAgICAgICAgaGVpZ2h0ICs9IGxvZ2ljYWxTcGFjZS5oZWlnaHQ7XG4gICAgICAgIHRoaXMudG9vbGJhcnNbaV0ud2lkdGggPSBsb2dpY2FsU3BhY2Uud2lkdGg7XG4gICAgICAgIHRoaXMudG9vbGJhcnNbaV0uaGVpZ2h0ID0gbG9naWNhbFNwYWNlLmhlaWdodDtcbiAgICAgIH1cbiAgICAgIGhlaWdodCArPSB0aGlzLnBhZGRpbmc7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB3aWR0aDogd2lkdGgsXG4gICAgICAgIGhlaWdodDogaGVpZ2h0XG4gICAgICB9O1xuICAgIH07XG5cbiAgICBnZXREZWZhdWx0R3JvdXAgKCkge1xuICAgICAgcmV0dXJuIHRoaXMucGFyZW50R3JvdXA7XG4gICAgfVxuXG4gICAgcGxhY2VJbkNhbnZhcyAoKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICBzZWxmLnBhZGRpbmcgPSA1O1xuICAgICAgc2VsZi5zcGFjZU1hbmFnZXJJbnN0YW5jZS5hZGQoW3tcbiAgICAgICAgbmFtZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJldHVybiAnc3RhbmRhcmQtcGVyaW9kLXNlbGVjdG9yLWV4dCc7XG4gICAgICAgIH0sXG4gICAgICAgIHJlZjogZnVuY3Rpb24gKG9iaikge1xuICAgICAgICAgIHJldHVybiBvYmpbJzAnXTtcbiAgICAgICAgfSxcbiAgICAgICAgc2VsZjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJldHVybiBzZWxmO1xuICAgICAgICB9LFxuICAgICAgICBwcmlvcml0eTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJldHVybiAyO1xuICAgICAgICB9LFxuICAgICAgICBsYXlvdXQ6IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgICByZXR1cm4gb2JqLmlubGluZTtcbiAgICAgICAgfSxcbiAgICAgICAgb3JpZW50YXRpb246IFt7XG4gICAgICAgICAgdHlwZTogZnVuY3Rpb24gKG9iaikge1xuICAgICAgICAgICAgcmV0dXJuIG9iai5ob3Jpem9udGFsO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgcG9zaXRpb246IFt7XG4gICAgICAgICAgICB0eXBlOiBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgICAgICAgIHJldHVybiBvYmoudG9wO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGFsaWdubWVudDogW3tcbiAgICAgICAgICAgICAgdHlwZTogZnVuY3Rpb24gKG9iaikge1xuICAgICAgICAgICAgICAgIHJldHVybiBvYmoubGVmdDtcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgZGltZW5zaW9uczogW2Z1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgcGFyZW50ID0gdGhpcy5nZXRQYXJlbnRDb21wb25lbnRHcm91cCgpO1xuICAgICAgICAgICAgICAgIHNlbGYuX3JlZiA9IHRoaXM7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYuZ2V0TG9naWNhbFNwYWNlKChzZWxmLl9wV2lkdGggPSBwYXJlbnQuZ2V0V2lkdGgoKSksIChzZWxmLl9wSGVpZ2h0ID0gcGFyZW50LmdldEhlaWdodCgpKSk7XG4gICAgICAgICAgICAgIH1dXG4gICAgICAgICAgICB9XVxuICAgICAgICAgIH1dXG4gICAgICAgIH1dXG4gICAgICB9XSk7XG4gICAgfTtcblxuICAgIHNldERyYXdpbmdDb25maWd1cmF0aW9uICh4LCB5LCB3aWR0aCwgaGVpZ2h0LCBncm91cCkge1xuICAgICAgdmFyIG1lcyA9IHRoaXMubWVhc3VyZW1lbnQ7XG4gICAgICBtZXMueCA9IHg7XG4gICAgICBtZXMueSA9IHk7XG4gICAgICBtZXMud2lkdGggPSB3aWR0aDtcbiAgICAgIG1lcy5oZWlnaHQgPSBoZWlnaHQ7XG5cbiAgICAgIHRoaXMucGFyZW50R3JvdXAgPSBncm91cDtcblxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIGRyYXcgKHgsIHksIHdpZHRoLCBoZWlnaHQsIGdyb3VwKSB7XG4gICAgICB2YXIgbWVhc3VyZW1lbnQgPSB0aGlzLm1lYXN1cmVtZW50LFxuICAgICAgICB0b29sYmFycyA9IHRoaXMudG9vbGJhcnMsXG4gICAgICAgIGxuLFxuICAgICAgICBpLFxuICAgICAgICB0b29sYmFyLFxuICAgICAgICBib3VuZEVsZW1lbnQsXG4gICAgICAgIGJCb3gsXG4gICAgICAgIHgxLFxuICAgICAgICB4MixcbiAgICAgICAgeTIsXG4gICAgICAgIHNlbGVjdExpbmU7XG5cbiAgICAgIHNlbGVjdExpbmUgPSB0aGlzLnNhdmVTZWxlY3RMaW5lIHx8IHRoaXMuZ3JhcGhpY3MucGFwZXIucGF0aCh7XG4gICAgICAgICdzdHJva2UnOiAnI2ZmMDAwMCdcbiAgICAgIH0pLnRvRnJvbnQoKTtcbiAgICAgIHggPSB4ID09PSB1bmRlZmluZWQgPyBtZWFzdXJlbWVudC54IDogeDtcbiAgICAgIHkgPSB5ID09PSB1bmRlZmluZWQgPyBtZWFzdXJlbWVudC55IDogeTtcbiAgICAgIHdpZHRoID0gd2lkdGggPT09IHVuZGVmaW5lZCA/IG1lYXN1cmVtZW50LndpZHRoIDogd2lkdGg7XG4gICAgICBoZWlnaHQgPSBoZWlnaHQgPT09IHVuZGVmaW5lZCA/IG1lYXN1cmVtZW50LmhlaWdodCA6IGhlaWdodDtcbiAgICAgIGdyb3VwID0gZ3JvdXAgPT09IHVuZGVmaW5lZCA/IHRoaXMucGFyZW50R3JvdXAgOiBncm91cDtcbiAgICAgIGlmICh3aWR0aCAmJiBoZWlnaHQpIHtcbiAgICAgICAgZm9yIChpID0gMCwgbG4gPSB0b29sYmFycy5sZW5ndGg7IGkgPCBsbjsgaSsrKSB7XG4gICAgICAgICAgdG9vbGJhciA9IHRvb2xiYXJzW2ldO1xuICAgICAgICAgIHRvb2xiYXIuZHJhdyh4LCB5LCBncm91cCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRoaXMuc2F2ZVNlbGVjdExpbmUgPSBzZWxlY3RMaW5lO1xuXG4gICAgICBmb3IgKGxldCBpID0gMCwgaWkgPSB0b29sYmFyc1swXS5jb21wb25lbnRHcm91cHNbMV0uc3ltYm9sTGlzdDsgaSA8IGlpLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChpaVtpXS5zeW1ib2wgPT09IHRoaXMuY2xpY2tlZElkKSB7XG4gICAgICAgICAgYm91bmRFbGVtZW50ID0gaWlbaV0uZ2V0Qm91bmRFbGVtZW50KCk7XG4gICAgICAgICAgYkJveCA9IGJvdW5kRWxlbWVudC5nZXRCQm94KCk7XG4gICAgICAgICAgeDEgPSBiQm94Lng7XG4gICAgICAgICAgeDIgPSBiQm94LngyO1xuICAgICAgICAgIHkyID0gYkJveC55MjtcblxuICAgICAgICAgIHNlbGVjdExpbmUuYXR0cih7XG4gICAgICAgICAgICBwYXRoOiBbJ00nLCB4MSwgeTIgLSAyIC8gMiwgJ0wnLCB4MiwgeTIgLSAyIC8gMl1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gIH1cbiAgcmV0dXJuIFN0YW5kYXJkUGVyaW9kU2VsZWN0b3I7XG59O1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3N0YW5kYXJkLXBlcmlvZC1zZWxlY3Rvci5qcyJdLCJzb3VyY2VSb290IjoiIn0=