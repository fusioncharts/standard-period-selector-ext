!function(t){function e(a){if(i[a])return i[a].exports;var s=i[a]={exports:{},id:a,loaded:!1};return t[a].call(s.exports,s,s.exports,e),s.loaded=!0,s.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){(function(t){"use strict";var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=i(2);window.stPS=new a,function(i,a){"object"===e(t)&&t.exports?t.exports=i.document?a(i):function(t){if(!t.document)throw new Error("Window with document not present");return a(t,!0)}:i.StandardPeriodSelector=a(i,!0)}("undefined"!=typeof window?window:void 0,function(t,e){var i=t.FusionCharts;i.register("extension",["private","StandardPeriodSelector",function(){i.registerComponent("extensions","StandardPeriodSelector",a({FusionCharts:i}))}])})}).call(e,i(1)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}();t.exports=function(t){var e=function(){function t(){i(this,t),this.ratio=8,this.toolbox=FusionCharts.getComponent("api","toolbox"),this.HorizontalToolbar=this.toolbox.HorizontalToolbar,this.ComponentGroup=this.toolbox.ComponentGroup,this.SymbolStore=this.toolbox.SymbolStore,this.all=1,this.calculatedPeriods=[],this.startDataset=0,this.startActiveWindow=0,this.endActiveWindow=1,this.standardCalculatedPeriods=[],this.standardContexualPeriods=[],this.startPointUnit=0,this.startPointMultiplier=0,this.clickedId="ALL",this.noCalcButtons=0,this.calculatedButtonObj={},this.tdButtons=[{name:"YTD",abbreviation:"YTD",parent:"year",milliseconds:31104e6,description:"Year to Date"},{name:"QTD",abbreviation:"QTD",parent:"month",multiplier:3,milliseconds:7776e6,description:"Quarter to Date"},{name:"MTD",abbreviation:"MTD",parent:"month",milliseconds:2592e6,description:"Month to Date"},{name:"WTD",abbreviation:"WTD",parent:"day",multiplier:7,milliseconds:6048e5,description:"Week to Date"},{name:"Y",abbreviation:"Y",parent:"day",milliseconds:864e5,description:"Yesterday"},{name:"T",abbreviation:"T",parent:"day",milliseconds:864e5,description:"Today"}],this.config={anchorPositions:"right",all:"1",contextual:"1",calculated:"1",tertiaryTimePeriods:{}}}return a(t,[{key:"generateCalculatedButtons",value:function(){var t=this.endActiveWindow-this.startDataset,e=0,i=0,a=this.endActiveWindow-this.startActiveWindow,s=0;for(this.standardCalculatedPeriods=[],e=0;e<this.timePeriods.length;e++)if(t/this.timePeriods[e].interval>=1)if(Math.floor(a/this.timePeriods[e].interval)<1)this.standardCalculatedPeriods.push({abbreviation:this.timePeriods[e].abbreviation.single,description:this.timePeriods[e].description,milliseconds:this.timePeriods[e].interval,name:this.timePeriods[e].name,multipliers:[1]});else for(this.standardCalculatedPeriods.push({abbreviation:this.timePeriods[e].abbreviation.single,description:this.timePeriods[e].description,milliseconds:this.timePeriods[e].interval,name:this.timePeriods[e].name,multipliers:[]}),i=0;i<this.timePeriods[e].multipliers.length;i++)a/this.ratio<this.timePeriods[e].multipliers[i]*this.timePeriods[e].interval&&this.standardCalculatedPeriods[this.standardCalculatedPeriods.length-1].multipliers.push(this.timePeriods[e].multipliers[i]);for(this.noCalcButtons=1/0,e=0;e<this.standardCalculatedPeriods.length;e++)for(i=0;i<this.standardCalculatedPeriods[e].multipliers.length;i++)++s,this.noCalcButtons>e&&(this.noCalcButtons=e),s<=4&&(this.startPointMultiplier=i,this.startPointUnit=e)}},{key:"generateContextualButtons",value:function(){for(var t=[],e=0,i=this.globalReactiveModel.model["x-axis-absolute-range-end"],a=i-2,s=i,o={};e<this.tdButtons.length;e++)a=new Date(i),"YTD"===this.tdButtons[e].name?(a.setMonth(0),a.setDate(1),a.setHours(0),a.setMinutes(0),a.setSeconds(0)):"MTD"===this.tdButtons[e].name?(a.setDate(1),a.setHours(0),a.setMinutes(0),a.setSeconds(0)):"QTD"===this.tdButtons[e].name?(a.setMonth(11-a.getMonth()%4),a.setDate(0),a.setHours(0),a.setMinutes(0),a.setSeconds(0)):"WTD"===this.tdButtons[e].name?(a.setDate(a.getDate()-a.getDay()),a.setHours(0),a.setMinutes(0),a.setSeconds(0)):"Y"===this.tdButtons[e].name?(a.setHours(0),a.setMinutes(0),a.setSeconds(0),a-=864e5):"T"===this.tdButtons[e].name&&(a.setHours(0),a.setMinutes(0),a.setSeconds(0),+this.endDataset===+a&&(a=+a-864e5)),s<a||(this.tdButtons[e].dateStart=a.valueOf(),this.tdButtons[e].dateEnd=s.valueOf(),t.push(this.tdButtons[e]));for(o.milliseconds=1/0,e=0;e<this.tdButtons.length;e++)Math.abs(this.tdButtons[e].milliseconds-(this.endActiveWindow-this.startActiveWindow))<o.milliseconds&&(o.milliseconds=this.tdButtons[e].milliseconds,o.name=this.tdButtons[e].abbreviation);this.standardContexualPeriods=t}},{key:"processMultipliers",value:function(t){for(var e=0;e<t.length;e++){var i=t[e].possibleFactors.length;t[e].multipliers=[],1===i?t[e].multipliers.push(t[e].possibleFactors[0]):2===i?(t[e].multipliers.push(t[e].possibleFactors[0]),t[e].multipliers.push(t[e].possibleFactors[i-1])):(t[e].multipliers.push(t[e].possibleFactors[0]),t[e].multipliers.push(Math.floor(t[e].possibleFactors[i-1]/2)),t[e].multipliers.push(t[e].possibleFactors[i-1]))}return t}},{key:"setActivePeriod",value:function(){var t,e;window.performance.now();1===arguments.length?(e=this.globalReactiveModel.model["x-axis-visible-range-end"],t=e-arguments[0]):2===arguments.length&&(t=arguments[0],e=arguments[1]),this.startActiveWindow=t,this.endActiveWindow=e,this.generateCalculatedButtons(),this.globalReactiveModel.model["x-axis-visible-range-start"]=this.startActiveWindow,this.globalReactiveModel.model["x-axis-visible-range-end"]=this.endActiveWindow,this.generateContextualButtons()}},{key:"configure",value:function(t){this.config=t}},{key:"init",value:function(t){var e=this;return t(["xAxis","yAxis","graphics","chart","dataset","PlotManager","canvasConfig","MarkerManager","reactiveModel","globalReactiveModel","spaceManagerInstance","smartLabel","extData","chartInstance",function(t,i,a,s,o,n,r,l,d,c,h,u,p,m){e.xAxis=t,e.yAxis=i,e.graphics=a,e.chart=s,e.dataset=o,e.plotManager=n,e.markerManager=l,e.canvasConfig=r,e.reactiveModel=d,e.globalReactiveModel=c,e.spaceManagerInstance=h,e.smartLabel=u,e.extData=p,e.chartInstance=m}]),this.spaceManagerInstance=e.spaceManagerInstance,this.globalReactiveModel=e.globalReactiveModel,this.endActiveWindow=e.globalReactiveModel.model["x-axis-visible-range-end"],this.startActiveWindow=e.globalReactiveModel.model["x-axis-visible-range-start"],this.startDataset=e.globalReactiveModel.model["x-axis-absolute-range-start"],this.endDataset=e.globalReactiveModel.model["x-axis-absolute-range-end"],this.timeRules=this.chartInstance.apiInstance.getComponentStore(),this.timeRules=this.timeRules.getCanvasByIndex(0).composition.impl,this.timeRules=this.timeRules.getDataAggregator(),this.timeRules=this.timeRules.getAggregationTimeRules(),this.timePeriods=this.processMultipliers(this.timeRules),this.setActivePeriod(this.startActiveWindow,this.endActiveWindow),this.toolbars=[],this.measurement={},this.flag=!0,this.toolbars.push(this.createToolbar()),this.globalReactiveModel.onPropsChange(["x-axis-visible-range-start","x-axis-visible-range-end"],function(t,i){if(e.flag){e.flag=!1,e.setActivePeriod(t[1],i[1]);for(var a=0;a<e.standardCalculatedPeriods.length;a++)for(var s=0;s<e.standardCalculatedPeriods[a].multipliers.length;s++)i[1]-t[1]>=e.timePeriods[a].multipliers[s]*e.timePeriods[a].interval;e.toolbar.dispose(),e.toolbars.pop(),e.toolbars.push(e.createToolbar()),e.getLogicalSpace(),e.draw()}}),this}},{key:"createToolbar",value:function(){var t,e,i,a,s,o,n,r,l,d,c,h,u=this,p=this,m=[];for(h=new this.toolbox.ComponentGroup({paper:this.graphics.paper,chart:this.chart,smartLabel:this.smartLabel,chartContainer:this.graphics.container}),t=new this.toolbox.UniSelectComponentGroup({paper:this.graphics.paper,chart:this.chart,smartLabel:this.smartLabel,chartContainer:this.graphics.container}),t.setConfig({fill:"#fff",borderThickness:0}),h.setConfig({fill:"#fff",borderThickness:0}),e=new this.HorizontalToolbar({paper:this.graphics.paper,chart:this.chart,smartLabel:this.smartLabel,chartContainer:this.graphics.container}),e.setConfig({fill:"#fff",borderThickness:0}),c=new this.toolbox.Label("Zoom:",{smartLabel:this.smartLabel,paper:this.graphics.paper},{text:{style:{"font-family":'"Lucida Grande", sans-serif',"font-size":"13",fill:"#696969","font-weight":"bold"}},container:{height:22}}),h.addSymbol(c),s=new this.toolbox.Symbol("ALL",!0,{paper:this.graphics.paper,chart:this.chart,smartLabel:this.smartLabel,chartContainer:this.graphics.container},{fill:"#ffffff",labelFill:"#696969",symbolStrokeWidth:"2",stroke:"#ced5d4",strokeWidth:"1",hoverFill:"#ced5d4",height:22,radius:1,margin:{right:5},btnTextStyle:{fontFamily:'"Lucida Grande", sans-serif',fontSize:"13",fill:"#696969","line-height":"1","letter-spacing":"-0.04em"}}).attachEventHandlers({click:function(){p.setActivePeriod(p.startDataset,p.endDataset),e.dispose(),p.clickedId="ALL"},tooltext:"ALL"}),t.addSymbol(s),r=0;r<this.standardCalculatedPeriods.length;r++)for(l=this.standardCalculatedPeriods[r].multipliers.length-1;l>=0;l--)m.push(p.standardCalculatedPeriods[r].multipliers[l]*p.standardCalculatedPeriods[r].milliseconds);i={};for(var f in this.calculatedButtonObj)this.calculatedButtonObj[f].hide();for(var g=function(e){o=e===p.startPointUnit?p.startPointMultiplier:p.standardCalculatedPeriods[e].multipliers.length-1;for(var a=function(a){d=e===p.noCalcButtons&&0===a?5:0;var s=p.standardCalculatedPeriods[e].multipliers[a]+p.standardCalculatedPeriods[e].abbreviation;void 0===u.calculatedButtonObj[s]&&(i=new u.toolbox.Symbol(s,!0,{paper:u.graphics.paper,chart:u.chart,smartLabel:u.smartLabel,chartContainer:u.graphics.container},{fill:"#ffffff",labelFill:"#696969",symbolStrokeWidth:"2",stroke:"#ced5d4",strokeWidth:"1",hoverFill:"#ced5d4",height:22,radius:1,margin:{right:0},btnTextStyle:{fontFamily:'"Lucida Grande", sans-serif',fontSize:"13",fill:"#696969","line-height":"1","letter-spacing":"-0.04em"}}).attachEventHandlers({click:function(){n=p.standardCalculatedPeriods[e].multipliers[a]*p.standardCalculatedPeriods[e].milliseconds,p.clickedId=p.standardCalculatedPeriods[e].multipliers[a]+p.standardCalculatedPeriods[e].abbreviation,p.setActivePeriod(n)},tooltext:p.standardCalculatedPeriods[e].multipliers[a]+" "+p.standardCalculatedPeriods[e].description}),u.calculatedButtonObj[s]=i),u.calculatedButtonObj[s].show(),t.addSymbol(u.calculatedButtonObj[s])},s=o;s>=0;s--)a(s)},b=p.startPointUnit;b>=0;b--)g(b);a=[];for(var v=function(e){d=0===e?5:0,a[e]=new u.toolbox.Symbol(u.standardContexualPeriods[e].abbreviation,!0,{paper:u.graphics.paper,chart:u.chart,smartLabel:u.smartLabel,chartContainer:u.graphics.container},{fill:"#ffffff",labelFill:"#696969",symbolStrokeWidth:"2",stroke:"#ced5d4",strokeWidth:"1",height:22,hoverFill:"#ced5d4",radius:1,margin:{right:0,left:d},btnTextStyle:{fontFamily:'"Lucida Grande", sans-serif',fontSize:"13",fill:"#696969","line-height":"1","letter-spacing":"-0.04em"}}).attachEventHandlers({click:function(){p.setActivePeriod(p.standardContexualPeriods[e].dateStart,p.standardContexualPeriods[e].dateEnd),p.clickedId=p.standardContexualPeriods[e].abbreviation},tooltext:u.standardContexualPeriods[e].description}),t.addSymbol(a[e])},x=0;x<this.standardContexualPeriods.length;x++)v(x);return this.SymbolStore.register("textBoxIcon",function(t,e,i,a,s,o,n){var r=t-a/2+o/2,l=t+a/2-o/2,d=e-s/2+n/2,c=e+s/2-n/2;return["M",r,d,"L",l,d,"L",l,c,"L",r,c,"Z"]}),e.addComponent(h),e.addComponent(t),this.toolbar=e,e}},{key:"getLogicalSpace",value:function(){var t,e,i,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._pWidth,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._pHeight,o=420,n=0;for(e=0,i=this.toolbars.length;e<i;e++)t=this.toolbars[e].getLogicalSpace(a,s),n+=t.height,this.toolbars[e].width=t.width,this.toolbars[e].height=t.height;return n+=this.padding,{width:o,height:n}}},{key:"getDefaultGroup",value:function(){return this.parentGroup}},{key:"placeInCanvas",value:function(){var t=this;t.padding=5,t.spaceManagerInstance.add([{name:function(){return"standard-period-selector-ext"},ref:function(t){return t[0]},self:function(){return t},priority:function(){return 2},layout:function(t){return t.inline},orientation:[{type:function(t){return t.horizontal},position:[{type:function(t){return t.top},alignment:[{type:function(t){return t.left},dimensions:[function(){var e=this.getParentComponentGroup();return t._ref=this,t.getLogicalSpace(t._pWidth=e.getWidth(),t._pHeight=e.getHeight())}]}]}]}]}])}},{key:"setDrawingConfiguration",value:function(t,e,i,a,s){var o=this.measurement;return o.x=t,o.y=e,o.width=i,o.height=a,this.parentGroup=s,this}},{key:"draw",value:function(t,e,i,a,s){var o,n,r,l,d,c,h,u,p,m=this.measurement,f=this.toolbars;this.globalReactiveModel;if(this.flag=!0,p=this.saveSelectLine||this.graphics.paper.path({stroke:"#c95a5a","stroke-width":"2px"}).toFront(),t=void 0===t?m.x:t,e=void 0===e?m.y:e,i=void 0===i?m.width:i,a=void 0===a?m.height:a,s=void 0===s?this.parentGroup:s,i&&a)for(n=0,o=f.length;n<o;n++)r=f[n],r.draw(t,e,s);this.saveSelectLine=p;for(var g=0,b=f[0].componentGroups[1].symbolList;g<b.length;g++)b[g].symbol===this.clickedId&&(l=b[g].getBoundElement(),d=l.getBBox(),c=d.x,h=d.x2,u=d.y2,p.attr({path:["M",c-.5,u-.5,"L",h+.5,u-.5]}))}}]),t}();return e}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3RhbmRhcmQtcGVyaW9kLXNlbGVjdG9yLWVzNS5taW4uanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svYm9vdHN0cmFwIDk4M2EzMmFjNWI1MGJkNzczNzljIiwid2VicGFjazovLy8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL2J1aWxkaW4vbW9kdWxlLmpzIiwid2VicGFjazovLy8uL3NyYy9zdGFuZGFyZC1wZXJpb2Qtc2VsZWN0b3IuanMiXSwibmFtZXMiOlsibW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImluc3RhbGxlZE1vZHVsZXMiLCJleHBvcnRzIiwibW9kdWxlIiwiaWQiLCJsb2FkZWQiLCJjYWxsIiwibSIsImMiLCJwIiwiX3R5cGVvZiIsIlN5bWJvbCIsIml0ZXJhdG9yIiwib2JqIiwiY29uc3RydWN0b3IiLCJwcm90b3R5cGUiLCJTdGFuZGFyZFBlcmlvZFNlbGVjdG9yIiwid2luZG93Iiwic3RQUyIsImVudiIsImZhY3RvcnkiLCJkb2N1bWVudCIsIndpbiIsIkVycm9yIiwidW5kZWZpbmVkIiwiX3dpbmRvdyIsIndpbmRvd0V4aXN0cyIsIkZDIiwiRnVzaW9uQ2hhcnRzIiwicmVnaXN0ZXIiLCJyZWdpc3RlckNvbXBvbmVudCIsIndlYnBhY2tQb2x5ZmlsbCIsImRlcHJlY2F0ZSIsInBhdGhzIiwiY2hpbGRyZW4iLCJfY2xhc3NDYWxsQ2hlY2siLCJpbnN0YW5jZSIsIkNvbnN0cnVjdG9yIiwiVHlwZUVycm9yIiwiX2NyZWF0ZUNsYXNzIiwiZGVmaW5lUHJvcGVydGllcyIsInRhcmdldCIsInByb3BzIiwiaSIsImxlbmd0aCIsImRlc2NyaXB0b3IiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImtleSIsInByb3RvUHJvcHMiLCJzdGF0aWNQcm9wcyIsImRlcCIsInRoaXMiLCJyYXRpbyIsInRvb2xib3giLCJnZXRDb21wb25lbnQiLCJIb3Jpem9udGFsVG9vbGJhciIsIkNvbXBvbmVudEdyb3VwIiwiU3ltYm9sU3RvcmUiLCJhbGwiLCJjYWxjdWxhdGVkUGVyaW9kcyIsInN0YXJ0RGF0YXNldCIsInN0YXJ0QWN0aXZlV2luZG93IiwiZW5kQWN0aXZlV2luZG93Iiwic3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kcyIsInN0YW5kYXJkQ29udGV4dWFsUGVyaW9kcyIsInN0YXJ0UG9pbnRVbml0Iiwic3RhcnRQb2ludE11bHRpcGxpZXIiLCJjbGlja2VkSWQiLCJub0NhbGNCdXR0b25zIiwiY2FsY3VsYXRlZEJ1dHRvbk9iaiIsInRkQnV0dG9ucyIsIm5hbWUiLCJhYmJyZXZpYXRpb24iLCJwYXJlbnQiLCJtaWxsaXNlY29uZHMiLCJkZXNjcmlwdGlvbiIsIm11bHRpcGxpZXIiLCJjb25maWciLCJhbmNob3JQb3NpdGlvbnMiLCJjb250ZXh0dWFsIiwiY2FsY3VsYXRlZCIsInRlcnRpYXJ5VGltZVBlcmlvZHMiLCJ2YWx1ZSIsInRhcmdldEJsb2NrIiwiaiIsImFjdGl2ZVdpbmRvdyIsImNvdW50IiwidGltZVBlcmlvZHMiLCJpbnRlcnZhbCIsIk1hdGgiLCJmbG9vciIsInB1c2giLCJzaW5nbGUiLCJtdWx0aXBsaWVycyIsIkluZmluaXR5IiwiYnV0dG9ucyIsImVuZFN0YW1wIiwiZ2xvYmFsUmVhY3RpdmVNb2RlbCIsIm1vZGVsIiwiZGF0ZVN0YXJ0IiwiZGF0ZUVuZCIsInJlbGF0aXZlVERCdXR0b24iLCJEYXRlIiwic2V0TW9udGgiLCJzZXREYXRlIiwic2V0SG91cnMiLCJzZXRNaW51dGVzIiwic2V0U2Vjb25kcyIsImdldE1vbnRoIiwiZ2V0RGF0ZSIsImdldERheSIsImVuZERhdGFzZXQiLCJ2YWx1ZU9mIiwiYWJzIiwidGltZUFyciIsImxlbiIsInBvc3NpYmxlRmFjdG9ycyIsInN0YXJ0IiwiZW5kIiwicGVyZm9ybWFuY2UiLCJub3ciLCJhcmd1bWVudHMiLCJnZW5lcmF0ZUNhbGN1bGF0ZWRCdXR0b25zIiwiZ2VuZXJhdGVDb250ZXh0dWFsQnV0dG9ucyIsInJlcXVpcmUiLCJ4QXhpcyIsInlBeGlzIiwiZ3JhcGhpY3MiLCJjaGFydCIsImRhdGFzZXQiLCJwbG90TWFuYWdlciIsImNhbnZhc0NvbmZpZyIsIm1hcmtlck1hbmFnZXIiLCJyZWFjdGl2ZU1vZGVsIiwic3BhY2VNYW5hZ2VySW5zdGFuY2UiLCJzbWFydExhYmVsIiwiZXh0RGF0YSIsImNoYXJ0SW5zdGFuY2UiLCJ0aW1lUnVsZXMiLCJhcGlJbnN0YW5jZSIsImdldENvbXBvbmVudFN0b3JlIiwiZ2V0Q2FudmFzQnlJbmRleCIsImNvbXBvc2l0aW9uIiwiaW1wbCIsImdldERhdGFBZ2dyZWdhdG9yIiwiZ2V0QWdncmVnYXRpb25UaW1lUnVsZXMiLCJwcm9jZXNzTXVsdGlwbGllcnMiLCJzZXRBY3RpdmVQZXJpb2QiLCJ0b29sYmFycyIsIm1lYXN1cmVtZW50IiwiZmxhZyIsImNyZWF0ZVRvb2xiYXIiLCJvblByb3BzQ2hhbmdlIiwidG9vbGJhciIsImRpc3Bvc2UiLCJwb3AiLCJnZXRMb2dpY2FsU3BhY2UiLCJkcmF3IiwidW5pZ3JvdXAiLCJjYWxjdWxhdGVkQnV0dG9ucyIsImNvbnRleHR1YWxCdXR0b25zIiwiYWxsQnV0dG9uIiwic3RhcnRNdWx0aXBsaWVyIiwiZGVkdWN0b3IiLCJtYXJnaW4iLCJmcm9tRGF0ZUxhYmVsIiwiZ3JvdXAiLCJfdGhpcyIsInNlbGYiLCJkZWR1Y3RvckFyIiwicGFwZXIiLCJjaGFydENvbnRhaW5lciIsImNvbnRhaW5lciIsIlVuaVNlbGVjdENvbXBvbmVudEdyb3VwIiwic2V0Q29uZmlnIiwiZmlsbCIsImJvcmRlclRoaWNrbmVzcyIsIkxhYmVsIiwidGV4dCIsInN0eWxlIiwiZm9udC1mYW1pbHkiLCJmb250LXNpemUiLCJmb250LXdlaWdodCIsImhlaWdodCIsImFkZFN5bWJvbCIsImxhYmVsRmlsbCIsInN5bWJvbFN0cm9rZVdpZHRoIiwic3Ryb2tlIiwic3Ryb2tlV2lkdGgiLCJob3ZlckZpbGwiLCJyYWRpdXMiLCJyaWdodCIsImJ0blRleHRTdHlsZSIsImZvbnRGYW1pbHkiLCJmb250U2l6ZSIsImxpbmUtaGVpZ2h0IiwibGV0dGVyLXNwYWNpbmciLCJhdHRhY2hFdmVudEhhbmRsZXJzIiwiY2xpY2siLCJ0b29sdGV4dCIsImhpZGUiLCJfbG9vcCIsIl9sb29wMyIsImtleUFiYiIsInNob3ciLCJfbG9vcDIiLCJsZWZ0IiwieCIsInkiLCJyYWQiLCJ3IiwiaCIsInBhZFgiLCJwYWRZIiwieDEiLCJ4MiIsInkxIiwieTIiLCJhZGRDb21wb25lbnQiLCJsb2dpY2FsU3BhY2UiLCJsbiIsImF2YWlsYWJsZVdpZHRoIiwiX3BXaWR0aCIsImF2YWlsYWJsZUhlaWdodCIsIl9wSGVpZ2h0Iiwid2lkdGgiLCJwYWRkaW5nIiwicGFyZW50R3JvdXAiLCJhZGQiLCJyZWYiLCJwcmlvcml0eSIsImxheW91dCIsImlubGluZSIsIm9yaWVudGF0aW9uIiwidHlwZSIsImhvcml6b250YWwiLCJwb3NpdGlvbiIsInRvcCIsImFsaWdubWVudCIsImRpbWVuc2lvbnMiLCJnZXRQYXJlbnRDb21wb25lbnRHcm91cCIsIl9yZWYiLCJnZXRXaWR0aCIsImdldEhlaWdodCIsIm1lcyIsImJvdW5kRWxlbWVudCIsImJCb3giLCJzZWxlY3RMaW5lIiwic2F2ZVNlbGVjdExpbmUiLCJwYXRoIiwic3Ryb2tlLXdpZHRoIiwidG9Gcm9udCIsImlpIiwiY29tcG9uZW50R3JvdXBzIiwic3ltYm9sTGlzdCIsInN5bWJvbCIsImdldEJvdW5kRWxlbWVudCIsImdldEJCb3giLCJhdHRyIl0sIm1hcHBpbmdzIjoiQ0FBUyxTQUFVQSxHQ0luQixRQUFBQyxHQUFBQyxHQUdBLEdBQUFDLEVBQUFELEdBQ0EsTUFBQUMsR0FBQUQsR0FBQUUsT0FHQSxJQUFBQyxHQUFBRixFQUFBRCxJQUNBRSxXQUNBRSxHQUFBSixFQUNBSyxRQUFBLEVBVUEsT0FOQVAsR0FBQUUsR0FBQU0sS0FBQUgsRUFBQUQsUUFBQUMsSUFBQUQsUUFBQUgsR0FHQUksRUFBQUUsUUFBQSxFQUdBRixFQUFBRCxRQXZCQSxHQUFBRCxLQXFDQSxPQVRBRixHQUFBUSxFQUFBVCxFQUdBQyxFQUFBUyxFQUFBUCxFQUdBRixFQUFBVSxFQUFBLEdBR0FWLEVBQUEsS0RNTSxTQUFTSSxFQUFRRCxFQUFTSCxJRTVDaEMsU0FBQUksR0FBQSxZRmdEQyxJQUFJTyxHQUE0QixrQkFBWEMsU0FBb0QsZ0JBQXBCQSxRQUFPQyxTQUF3QixTQUFVQyxHQUFPLGFBQWNBLElBQVMsU0FBVUEsR0FBTyxNQUFPQSxJQUF5QixrQkFBWEYsU0FBeUJFLEVBQUlDLGNBQWdCSCxRQUFVRSxJQUFRRixPQUFPSSxVQUFZLGVBQWtCRixJRS9DalFHLEVBQXlCakIsRUFBUSxFQUV2Q2tCLFFBQU9DLEtBQU8sR0FBSUYsR0FFakIsU0FBV0csRUFBS0MsR0FDTyxXQUFsQlYsRUFBT1AsSUFBdUJBLEVBQU9ELFFBQ3ZDQyxFQUFPRCxRQUFVaUIsRUFBSUUsU0FDaEJELEVBQVFELEdBQU8sU0FBVUcsR0FDekIsSUFBS0EsRUFBSUQsU0FDUCxLQUFNLElBQUlFLE9BQU0sbUNBRWxCLE9BQU9ILEdBQVFFLEdBQUssSUFHekJILEVBQUlILHVCQUF5QkksRUFBUUQsR0FBSyxJQUV6QixtQkFBWEYsUUFBeUJBLE9BQWhDTyxPQUErQyxTQUFVQyxFQUFTQyxHQUNuRSxHQUFJQyxHQUFLRixFQUFRRyxZQUNqQkQsR0FBR0UsU0FBUyxhQUFjLFVBQVcseUJBQTBCLFdBQzdERixFQUFHRyxrQkFBa0IsYUFBYyx5QkFBMEJkLEdBQXdCWSxhQUFjRCxZRm1EekVyQixLQUFLSixFQUFTSCxFQUFvQixHQUFHSSxLQUk3RCxTQUFTQSxFQUFRRCxHRzNFdkJDLEVBQUFELFFBQUEsU0FBQUMsR0FRQSxNQVBBQSxHQUFBNEIsa0JBQ0E1QixFQUFBNkIsVUFBQSxhQUNBN0IsRUFBQThCLFNBRUE5QixFQUFBK0IsWUFDQS9CLEVBQUE0QixnQkFBQSxHQUVBNUIsSUhtRk0sU0FBU0EsRUFBUUQsR0kzRnZCLFlKcUdDLFNBQVNpQyxHQUFnQkMsRUFBVUMsR0FBZSxLQUFNRCxZQUFvQkMsSUFBZ0IsS0FBTSxJQUFJQyxXQUFVLHFDQUZoSCxHQUFJQyxHQUFlLFdBQWMsUUFBU0MsR0FBaUJDLEVBQVFDLEdBQVMsSUFBSyxHQUFJQyxHQUFJLEVBQUdBLEVBQUlELEVBQU1FLE9BQVFELElBQUssQ0FBRSxHQUFJRSxHQUFhSCxFQUFNQyxFQUFJRSxHQUFXQyxXQUFhRCxFQUFXQyxhQUFjLEVBQU9ELEVBQVdFLGNBQWUsRUFBVSxTQUFXRixLQUFZQSxFQUFXRyxVQUFXLEdBQU1DLE9BQU9DLGVBQWVULEVBQVFJLEVBQVdNLElBQUtOLElBQWlCLE1BQU8sVUFBVVIsRUFBYWUsRUFBWUMsR0FBaUosTUFBOUhELElBQVlaLEVBQWlCSCxFQUFZdEIsVUFBV3FDLEdBQWlCQyxHQUFhYixFQUFpQkgsRUFBYWdCLEdBQXFCaEIsS0k3RmppQmxDLEdBQU9ELFFBQVUsU0FBVW9ELEdBQUssR0FDeEJ0QyxHQUR3QixXQUU1QixRQUFBQSxLQUFlbUIsRUFBQW9CLEtBQUF2QyxHQUlidUMsS0FBS0MsTUFBUSxFQUNiRCxLQUFLRSxRQUFVN0IsYUFBYThCLGFBQWEsTUFBTyxXQUNoREgsS0FBS0ksa0JBQW9CSixLQUFLRSxRQUFRRSxrQkFDdENKLEtBQUtLLGVBQWlCTCxLQUFLRSxRQUFRRyxlQUNuQ0wsS0FBS00sWUFBY04sS0FBS0UsUUFBUUksWUFDaENOLEtBQUtPLElBQU0sRUFDWFAsS0FBS1EscUJBQ0xSLEtBQUtTLGFBQWUsRUFFcEJULEtBQUtVLGtCQUFvQixFQUN6QlYsS0FBS1csZ0JBQWtCLEVBQ3ZCWCxLQUFLWSw2QkFDTFosS0FBS2EsNEJBQ0xiLEtBQUtjLGVBQWlCLEVBQ3RCZCxLQUFLZSxxQkFBdUIsRUFDNUJmLEtBQUtnQixVQUFZLE1BQ2pCaEIsS0FBS2lCLGNBQWdCLEVBQ3JCakIsS0FBS2tCLHVCQUNMbEIsS0FBS21CLFlBRURDLEtBQVEsTUFDUkMsYUFBZ0IsTUFDaEJDLE9BQVUsT0FDVkMsYUFBZ0IsUUFDaEJDLFlBQWUsaUJBR2ZKLEtBQVEsTUFDUkMsYUFBZ0IsTUFDaEJDLE9BQVUsUUFDVkcsV0FBYyxFQUNkRixhQUFnQixPQUNoQkMsWUFBZSxvQkFHZkosS0FBUSxNQUNSQyxhQUFnQixNQUNoQkMsT0FBVSxRQUNWQyxhQUFnQixPQUNoQkMsWUFBZSxrQkFHZkosS0FBUSxNQUNSQyxhQUFnQixNQUNoQkMsT0FBVSxNQUNWRyxXQUFjLEVBQ2RGLGFBQWdCLE9BQ2hCQyxZQUFlLGlCQUdmSixLQUFRLElBQ1JDLGFBQWdCLElBQ2hCQyxPQUFVLE1BQ1ZDLGFBQWdCLE1BQ2hCQyxZQUFlLGNBR2ZKLEtBQVEsSUFDUkMsYUFBZ0IsSUFDaEJDLE9BQVUsTUFDVkMsYUFBZ0IsTUFDaEJDLFlBQWUsVUFHbkJ4QixLQUFLMEIsUUFDSEMsZ0JBQWlCLFFBQ2pCcEIsSUFBSyxJQUNMcUIsV0FBWSxJQUNaQyxXQUFZLElBQ1pDLHdCQTNFd0IsTUFBQTlDLEdBQUF2QixJQUFBbUMsSUFBQSw0QkFBQW1DLE1BQUEsV0FvRjFCLEdBQUlDLEdBQWNoQyxLQUFLVyxnQkFBa0JYLEtBQUtTLGFBQzVDckIsRUFBSSxFQUNKNkMsRUFBSSxFQUNKQyxFQUFlbEMsS0FBS1csZ0JBQWtCWCxLQUFLVSxrQkFDM0N5QixFQUFRLENBRVYsS0FEQW5DLEtBQUtZLDZCQUNBeEIsRUFBSSxFQUFHQSxFQUFJWSxLQUFLb0MsWUFBWS9DLE9BQVFELElBRXZDLEdBQUk0QyxFQUFjaEMsS0FBS29DLFlBQVloRCxHQUFHaUQsVUFBWSxFQUVoRCxHQUFJQyxLQUFLQyxNQUFPTCxFQUFnQmxDLEtBQUtvQyxZQUFZaEQsR0FBR2lELFVBQVksRUFDOURyQyxLQUFLWSwwQkFBMEI0QixNQUM3Qm5CLGFBQWdCckIsS0FBS29DLFlBQVloRCxHQUFHaUMsYUFBYW9CLE9BQ2pEakIsWUFBZXhCLEtBQUtvQyxZQUFZaEQsR0FBR29DLFlBQ25DRCxhQUFnQnZCLEtBQUtvQyxZQUFZaEQsR0FBR2lELFNBQ3BDakIsS0FBUXBCLEtBQUtvQyxZQUFZaEQsR0FBR2dDLEtBQzVCc0IsYUFBZ0IsU0FXbEIsS0FSQTFDLEtBQUtZLDBCQUEwQjRCLE1BQzdCbkIsYUFBZ0JyQixLQUFLb0MsWUFBWWhELEdBQUdpQyxhQUFhb0IsT0FDakRqQixZQUFleEIsS0FBS29DLFlBQVloRCxHQUFHb0MsWUFDbkNELGFBQWdCdkIsS0FBS29DLFlBQVloRCxHQUFHaUQsU0FDcENqQixLQUFRcEIsS0FBS29DLFlBQVloRCxHQUFHZ0MsS0FDNUJzQixpQkFHR1QsRUFBSSxFQUFHQSxFQUFJakMsS0FBS29DLFlBQVloRCxHQUFHc0QsWUFBWXJELE9BQVE0QyxJQUNsREMsRUFBZWxDLEtBQUtDLE1BQVFELEtBQUtvQyxZQUFZaEQsR0FBR3NELFlBQVlULEdBQUtqQyxLQUFLb0MsWUFBWWhELEdBQUdpRCxVQUN2RnJDLEtBQUtZLDBCQUEwQlosS0FBS1ksMEJBQTBCdkIsT0FBUyxHQUFHcUQsWUFBWUYsS0FDcEZ4QyxLQUFLb0MsWUFBWWhELEdBQUdzRCxZQUFZVCxHQVE1QyxLQURBakMsS0FBS2lCLGNBQWdCMEIsSUFDaEJ2RCxFQUFJLEVBQUdBLEVBQUlZLEtBQUtZLDBCQUEwQnZCLE9BQVFELElBQ3JELElBQUs2QyxFQUFJLEVBQUdBLEVBQUlqQyxLQUFLWSwwQkFBMEJ4QixHQUFHc0QsWUFBWXJELE9BQVE0QyxNQUNsRUUsRUFDRW5DLEtBQUtpQixjQUFnQjdCLElBQ3ZCWSxLQUFLaUIsY0FBZ0I3QixHQUVuQitDLEdBQVMsSUFDWG5DLEtBQUtlLHFCQUF1QmtCLEVBQzVCakMsS0FBS2MsZUFBaUIxQixNQWxJRlEsSUFBQSw0QkFBQW1DLE1BQUEsV0FzSjFCLElBTkEsR0FBSWEsTUFDRnhELEVBQUksRUFDSnlELEVBQVc3QyxLQUFLOEMsb0JBQW9CQyxNQUFNLDZCQUMxQ0MsRUFBWUgsRUFBVyxFQUN2QkksRUFBVUosRUFDVkssS0FDSzlELEVBQUlZLEtBQUttQixVQUFVOUIsT0FBUUQsSUFDaEM0RCxFQUFZLEdBQUlHLE1BQUtOLEdBQ1UsUUFBM0I3QyxLQUFLbUIsVUFBVS9CLEdBQUdnQyxNQUNwQjRCLEVBQVVJLFNBQVMsR0FDbkJKLEVBQVVLLFFBQVEsR0FDbEJMLEVBQVVNLFNBQVMsR0FDbkJOLEVBQVVPLFdBQVcsR0FDckJQLEVBQVVRLFdBQVcsSUFDZSxRQUEzQnhELEtBQUttQixVQUFVL0IsR0FBR2dDLE1BQzNCNEIsRUFBVUssUUFBUSxHQUNsQkwsRUFBVU0sU0FBUyxHQUNuQk4sRUFBVU8sV0FBVyxHQUNyQlAsRUFBVVEsV0FBVyxJQUNlLFFBQTNCeEQsS0FBS21CLFVBQVUvQixHQUFHZ0MsTUFDM0I0QixFQUFVSSxTQUFTLEdBQU1KLEVBQVVTLFdBQWEsR0FDaERULEVBQVVLLFFBQVEsR0FDbEJMLEVBQVVNLFNBQVMsR0FDbkJOLEVBQVVPLFdBQVcsR0FDckJQLEVBQVVRLFdBQVcsSUFDZSxRQUEzQnhELEtBQUttQixVQUFVL0IsR0FBR2dDLE1BQzNCNEIsRUFBVUssUUFBUUwsRUFBVVUsVUFBWVYsRUFBVVcsVUFDbERYLEVBQVVNLFNBQVMsR0FDbkJOLEVBQVVPLFdBQVcsR0FDckJQLEVBQVVRLFdBQVcsSUFDZSxNQUEzQnhELEtBQUttQixVQUFVL0IsR0FBR2dDLE1BQzNCNEIsRUFBVU0sU0FBUyxHQUNuQk4sRUFBVU8sV0FBVyxHQUNyQlAsRUFBVVEsV0FBVyxHQUNyQlIsR0FBYSxPQUN1QixNQUEzQmhELEtBQUttQixVQUFVL0IsR0FBR2dDLE9BQzNCNEIsRUFBVU0sU0FBUyxHQUNuQk4sRUFBVU8sV0FBVyxHQUNyQlAsRUFBVVEsV0FBVyxJQUNoQnhELEtBQUs0RCxjQUFnQlosSUFDeEJBLEdBQWFBLEVBQVksUUFJekJDLEVBQVVELElBR1poRCxLQUFLbUIsVUFBVS9CLEdBQUc0RCxVQUFZQSxFQUFVYSxVQUN4QzdELEtBQUttQixVQUFVL0IsR0FBRzZELFFBQVVBLEVBQVFZLFVBQ3BDakIsRUFBUUosS0FBS3hDLEtBQUttQixVQUFVL0IsSUFJaEMsS0FEQThELEVBQWlCM0IsYUFBZW9CLElBQzNCdkQsRUFBSSxFQUFHQSxFQUFJWSxLQUFLbUIsVUFBVTlCLE9BQVFELElBQ2pDa0QsS0FBS3dCLElBQUk5RCxLQUFLbUIsVUFBVS9CLEdBQUdtQyxjQUFnQnZCLEtBQUtXLGdCQUFrQlgsS0FBS1Usb0JBQXNCd0MsRUFBaUIzQixlQUNoSDJCLEVBQWlCM0IsYUFBZXZCLEtBQUttQixVQUFVL0IsR0FBR21DLGFBQ2xEMkIsRUFBaUI5QixLQUFPcEIsS0FBS21CLFVBQVUvQixHQUFHaUMsYUFJOUNyQixNQUFLYSx5QkFBMkIrQixLQTVNTmhELElBQUEscUJBQUFtQyxNQUFBLFNBZ05SZ0MsR0FDbEIsSUFBSyxHQUFJM0UsR0FBSSxFQUFHQSxFQUFJMkUsRUFBUTFFLE9BQVFELElBQUssQ0FDdkMsR0FBSTRFLEdBQU1ELEVBQVEzRSxHQUFHNkUsZ0JBQWdCNUUsTUFDckMwRSxHQUFRM0UsR0FBR3NELGVBQ0MsSUFBUnNCLEVBQ0ZELEVBQVEzRSxHQUFHc0QsWUFBWUYsS0FBS3VCLEVBQVEzRSxHQUFHNkUsZ0JBQWdCLElBQ3RDLElBQVJELEdBQ1RELEVBQVEzRSxHQUFHc0QsWUFBWUYsS0FBS3VCLEVBQVEzRSxHQUFHNkUsZ0JBQWdCLElBQ3ZERixFQUFRM0UsR0FBR3NELFlBQVlGLEtBQUt1QixFQUFRM0UsR0FBRzZFLGdCQUFnQkQsRUFBTSxNQUU3REQsRUFBUTNFLEdBQUdzRCxZQUFZRixLQUFLdUIsRUFBUTNFLEdBQUc2RSxnQkFBZ0IsSUFDdkRGLEVBQVEzRSxHQUFHc0QsWUFBWUYsS0FBS0YsS0FBS0MsTUFBTXdCLEVBQVEzRSxHQUFHNkUsZ0JBQWdCRCxFQUFNLEdBQUssSUFDN0VELEVBQVEzRSxHQUFHc0QsWUFBWUYsS0FBS3VCLEVBQVEzRSxHQUFHNkUsZ0JBQWdCRCxFQUFNLEtBR2pFLE1BQU9ELE1BL05tQm5FLElBQUEsa0JBQUFtQyxNQUFBLFdBeU8xQixHQUFJbUMsR0FDRkMsQ0FDT3pHLFFBQU8wRyxZQUFZQyxLQUNILEtBQXJCQyxVQUFVakYsUUFDWjhFLEVBQU1uRSxLQUFLOEMsb0JBQW9CQyxNQUFNLDRCQUNyQ21CLEVBQVFDLEVBQU1HLFVBQVUsSUFDTSxJQUFyQkEsVUFBVWpGLFNBQ25CNkUsRUFBUUksVUFBVSxHQUNsQkgsRUFBTUcsVUFBVSxJQUVsQnRFLEtBQUtVLGtCQUFvQndELEVBQ3pCbEUsS0FBS1csZ0JBQWtCd0QsRUFDdkJuRSxLQUFLdUUsNEJBQ0x2RSxLQUFLOEMsb0JBQW9CQyxNQUFNLDhCQUFnQy9DLEtBQUtVLGtCQUNwRVYsS0FBSzhDLG9CQUFvQkMsTUFBTSw0QkFBOEIvQyxLQUFLVyxnQkFDbEVYLEtBQUt3RSwrQkF4UHFCNUUsSUFBQSxZQUFBbUMsTUFBQSxTQXFRakJMLEdBQ1QxQixLQUFLMEIsT0FBU0EsS0F0UVk5QixJQUFBLE9BQUFtQyxNQUFBLFNBNFF0QjBDLEdBQ0osR0FBSTVGLEdBQVdtQixJQXFGZixPQXBGQXlFLElBQ0UsUUFDQSxRQUNBLFdBQ0EsUUFDQSxVQUNBLGNBQ0EsZUFDQSxnQkFDQSxnQkFDQSxzQkFDQSx1QkFDQSxhQUNBLFVBQ0EsZ0JBQ0EsU0FDTUMsRUFDQUMsRUFDQUMsRUFDQUMsRUFDQUMsRUFDQUMsRUFDQUMsRUFDQUMsRUFDQUMsRUFDQXBDLEVBQ0FxQyxFQUNBQyxFQUNBQyxFQUNBQyxHQUNKekcsRUFBUzZGLE1BQVFBLEVBQ2pCN0YsRUFBUzhGLE1BQVFBLEVBQ2pCOUYsRUFBUytGLFNBQVdBLEVBQ3BCL0YsRUFBU2dHLE1BQVFBLEVBQ2pCaEcsRUFBU2lHLFFBQVVBLEVBQ25CakcsRUFBU2tHLFlBQWNBLEVBQ3ZCbEcsRUFBU29HLGNBQWdCQSxFQUN6QnBHLEVBQVNtRyxhQUFlQSxFQUN4Qm5HLEVBQVNxRyxjQUFnQkEsRUFDekJyRyxFQUFTaUUsb0JBQXNCQSxFQUMvQmpFLEVBQVNzRyxxQkFBdUJBLEVBQ2hDdEcsRUFBU3VHLFdBQWFBLEVBQ3RCdkcsRUFBU3dHLFFBQVVBLEVBQ25CeEcsRUFBU3lHLGNBQWdCQSxLQUc3QnRGLEtBQUttRixxQkFBdUJ0RyxFQUFTc0cscUJBQ3JDbkYsS0FBSzhDLG9CQUFzQmpFLEVBQVNpRSxvQkFDcEM5QyxLQUFLVyxnQkFBa0I5QixFQUFTaUUsb0JBQW9CQyxNQUFNLDRCQUMxRC9DLEtBQUtVLGtCQUFvQjdCLEVBQVNpRSxvQkFBb0JDLE1BQU0sOEJBQzVEL0MsS0FBS1MsYUFBZTVCLEVBQVNpRSxvQkFBb0JDLE1BQU0sK0JBQ3ZEL0MsS0FBSzRELFdBQWEvRSxFQUFTaUUsb0JBQW9CQyxNQUFNLDZCQUVyRC9DLEtBQUt1RixVQUFZdkYsS0FBS3NGLGNBQWNFLFlBQVlDLG9CQUNoRHpGLEtBQUt1RixVQUFZdkYsS0FBS3VGLFVBQVVHLGlCQUFpQixHQUFHQyxZQUFZQyxLQUNoRTVGLEtBQUt1RixVQUFZdkYsS0FBS3VGLFVBQVVNLG9CQUNoQzdGLEtBQUt1RixVQUFZdkYsS0FBS3VGLFVBQVVPLDBCQUNoQzlGLEtBQUtvQyxZQUFjcEMsS0FBSytGLG1CQUFtQi9GLEtBQUt1RixXQUNoRHZGLEtBQUtnRyxnQkFBZ0JoRyxLQUFLVSxrQkFBbUJWLEtBQUtXLGlCQUNsRFgsS0FBS2lHLFlBQ0xqRyxLQUFLa0csZUFDTGxHLEtBQUttRyxNQUFPLEVBRVpuRyxLQUFLaUcsU0FBU3pELEtBQUt4QyxLQUFLb0csaUJBRXhCcEcsS0FBSzhDLG9CQUFvQnVELGVBQWUsNkJBQThCLDRCQUNwRSxTQUFVbkMsRUFBT0MsR0FDZixHQUFJdEYsRUFBU3NILEtBQU0sQ0FDakJ0SCxFQUFTc0gsTUFBTyxFQUNoQnRILEVBQVNtSCxnQkFBZ0I5QixFQUFNLEdBQUlDLEVBQUksR0FDdkMsS0FBSyxHQUFJL0UsR0FBSSxFQUFHQSxFQUFJUCxFQUFTK0IsMEJBQTBCdkIsT0FBUUQsSUFDN0QsSUFBSyxHQUFJNkMsR0FBSSxFQUFHQSxFQUFJcEQsRUFBUytCLDBCQUEwQnhCLEdBQUdzRCxZQUFZckQsT0FBUTRDLElBQ3ZFa0MsRUFBSSxHQUFLRCxFQUFNLElBQU9yRixFQUFTdUQsWUFBWWhELEdBQUdzRCxZQUFZVCxHQUFLcEQsRUFBU3VELFlBQVloRCxHQUFHaUQsUUFLaEd4RCxHQUFTeUgsUUFBUUMsVUFDakIxSCxFQUFTb0gsU0FBU08sTUFDbEIzSCxFQUFTb0gsU0FBU3pELEtBQUszRCxFQUFTdUgsaUJBQ2hDdkgsRUFBUzRILGtCQUNUNUgsRUFBUzZILFVBR1IxRyxRQWxXbUJKLElBQUEsZ0JBQUFtQyxNQUFBLFdBcVdYLEdBQ1g0RSxHQUNGTCxFQUNBTSxFQUNBQyxFQUNBQyxFQUdBQyxFQUNBQyxFQUNBNUgsRUFDQTZDLEVBQ0FnRixFQUNBQyxFQUNBQyxFQWRhQyxFQUFBcEgsS0FNYnFILEVBQU9ySCxLQUNQc0gsSUFnR0YsS0F2RkFILEVBQVEsR0FBSW5ILE1BQUtFLFFBQVFHLGdCQUN2QmtILE1BQU92SCxLQUFLNEUsU0FBUzJDLE1BQ3JCMUMsTUFBTzdFLEtBQUs2RSxNQUNaTyxXQUFZcEYsS0FBS29GLFdBQ2pCb0MsZUFBZ0J4SCxLQUFLNEUsU0FBUzZDLFlBR2hDZCxFQUFXLEdBQUkzRyxNQUFLRSxRQUFRd0gseUJBQzFCSCxNQUFPdkgsS0FBSzRFLFNBQVMyQyxNQUNyQjFDLE1BQU83RSxLQUFLNkUsTUFDWk8sV0FBWXBGLEtBQUtvRixXQUNqQm9DLGVBQWdCeEgsS0FBSzRFLFNBQVM2QyxZQUVoQ2QsRUFBU2dCLFdBQ1BDLEtBQU0sT0FDTkMsZ0JBQWlCLElBRW5CVixFQUFNUSxXQUNKQyxLQUFNLE9BQ05DLGdCQUFpQixJQUVuQnZCLEVBQVUsR0FBSXRHLE1BQUtJLG1CQUNqQm1ILE1BQU92SCxLQUFLNEUsU0FBUzJDLE1BQ3JCMUMsTUFBTzdFLEtBQUs2RSxNQUNaTyxXQUFZcEYsS0FBS29GLFdBQ2pCb0MsZUFBZ0J4SCxLQUFLNEUsU0FBUzZDLFlBRWhDbkIsRUFBUXFCLFdBQ05DLEtBQU0sT0FDTkMsZ0JBQWlCLElBRW5CWCxFQUFnQixHQUFJbEgsTUFBS0UsUUFBUTRILE1BQU0sU0FDckMxQyxXQUFZcEYsS0FBS29GLFdBQ2pCbUMsTUFBT3ZILEtBQUs0RSxTQUFTMkMsUUFFckJRLE1BQ0VDLE9BQ0VDLGNBQWUsOEJBQ2ZDLFlBQWEsS0FDYk4sS0FBUSxVQUNSTyxjQUFlLFNBR25CVixXQUNFVyxPQUFRLE1BR1pqQixFQUFNa0IsVUFBVW5CLEdBQ2hCSixFQUFZLEdBQUk5RyxNQUFLRSxRQUFROUMsT0FBTyxPQUFPLEdBQ3pDbUssTUFBT3ZILEtBQUs0RSxTQUFTMkMsTUFDckIxQyxNQUFPN0UsS0FBSzZFLE1BQ1pPLFdBQVlwRixLQUFLb0YsV0FDakJvQyxlQUFnQnhILEtBQUs0RSxTQUFTNkMsWUFFOUJHLEtBQU0sVUFDTlUsVUFBVyxVQUNYQyxrQkFBbUIsSUFDbkJDLE9BQVEsVUFDUkMsWUFBYSxJQUNiQyxVQUFXLFVBQ1hOLE9BQVEsR0FDUk8sT0FBUSxFQUNSMUIsUUFDRTJCLE1BQU8sR0FFVEMsY0FDRUMsV0FBYyw4QkFDZEMsU0FBWSxLQUNabkIsS0FBUSxVQUNSb0IsY0FBZSxJQUNmQyxpQkFBa0IsYUFFbkJDLHFCQUNEQyxNQUFPLFdBQ0w5QixFQUFLckIsZ0JBQWdCcUIsRUFBSzVHLGFBQWM0RyxFQUFLekQsWUFDN0MwQyxFQUFRQyxVQUNSYyxFQUFLckcsVUFBWSxPQU9uQm9JLFNBQVUsUUFHWnpDLEVBQVMwQixVQUFVdkIsR0FDZDFILEVBQUksRUFBR0EsRUFBSVksS0FBS1ksMEJBQTBCdkIsT0FBUUQsSUFDckQsSUFBSzZDLEVBQUlqQyxLQUFLWSwwQkFBMEJ4QixHQUFHc0QsWUFBWXJELE9BQVMsRUFBRzRDLEdBQUssRUFBR0EsSUFDekVxRixFQUFXOUUsS0FBSzZFLEVBQUt6RywwQkFBMEJ4QixHQUFHc0QsWUFBWVQsR0FBS29GLEVBQUt6RywwQkFBMEJ4QixHQUFHbUMsYUFJekdxRixLQUNBLEtBQUssR0FBSWhILEtBQU9JLE1BQUtrQixvQkFDbkJsQixLQUFLa0Isb0JBQW9CdEIsR0FBS3lKLE1BRWhDLEtBQUssR0FqSFVDLEdBQUEsU0FpSE5sSyxHQUVMMkgsRUFERTNILElBQU1pSSxFQUFLdkcsZUFDS3VHLEVBQUt0RyxxQkFFTHNHLEVBQUt6RywwQkFBMEJ4QixHQUFHc0QsWUFBWXJELE9BQVMsQ0FFM0UsS0FBSyxHQXZIUWtLLEdBQUEsU0F1SEp0SCxHQUNQZ0YsRUFBVTdILElBQU1pSSxFQUFLcEcsZUFBdUIsSUFBTmdCLEVBQVcsRUFBSSxDQUNyRCxJQUFJdUgsR0FBU25DLEVBQUt6RywwQkFBMEJ4QixHQUFHc0QsWUFBWVQsR0FBS29GLEVBQUt6RywwQkFBMEJ4QixHQUFHaUMsWUFDekRwRCxVQUFyQ21KLEVBQUtsRyxvQkFBb0JzSSxLQUMzQjVDLEVBQW9CLEdBQUlRLEdBQUtsSCxRQUFROUMsT0FBT29NLEdBQVEsR0FDbERqQyxNQUFPSCxFQUFLeEMsU0FBUzJDLE1BQ3JCMUMsTUFBT3VDLEVBQUt2QyxNQUNaTyxXQUFZZ0MsRUFBS2hDLFdBQ2pCb0MsZUFBZ0JKLEVBQUt4QyxTQUFTNkMsWUFFOUJHLEtBQU0sVUFDTlUsVUFBVyxVQUNYQyxrQkFBbUIsSUFDbkJDLE9BQVEsVUFDUkMsWUFBYSxJQUNiQyxVQUFXLFVBQ1hOLE9BQVEsR0FDUk8sT0FBUSxFQUNSMUIsUUFDRTJCLE1BQU8sR0FFVEMsY0FDRUMsV0FBYyw4QkFDZEMsU0FBWSxLQUNabkIsS0FBUSxVQUNSb0IsY0FBZSxJQUNmQyxpQkFBa0IsYUFFbkJDLHFCQUNEQyxNQUFTLFdBQ1BuQyxFQUFZSyxFQUFLekcsMEJBQTBCeEIsR0FBR3NELFlBQVlULEdBQUtvRixFQUFLekcsMEJBQTBCeEIsR0FBR21DLGFBQ2pHOEYsRUFBS3JHLFVBQVlxRyxFQUFLekcsMEJBQTBCeEIsR0FBR3NELFlBQVlULEdBQUtvRixFQUFLekcsMEJBQTBCeEIsR0FBR2lDLGFBQ3RHZ0csRUFBS3JCLGdCQUFnQmdCLElBU3ZCb0MsU0FBVS9CLEVBQUt6RywwQkFBMEJ4QixHQUFHc0QsWUFBWVQsR0FBSyxJQUFNb0YsRUFBS3pHLDBCQUEwQnhCLEdBQUdvQyxjQUV2RzRGLEVBQUtsRyxvQkFBb0JzSSxHQUFVNUMsR0FHckNRLEVBQUtsRyxvQkFBb0JzSSxHQUFRQyxPQUNqQzlDLEVBQVMwQixVQUFVakIsRUFBS2xHLG9CQUFvQnNJLEtBL0NyQ3ZILEVBQUk4RSxFQUFpQjlFLEdBQUssRUFBR0EsSUFBS3NILEVBQWxDdEgsSUFORjdDLEVBQUlpSSxFQUFLdkcsZUFBZ0IxQixHQUFLLEVBQUdBLElBQUtrSyxFQUF0Q2xLLEVBZ0VUeUgsS0FFQSxLQUFLLEdBbkxVNkMsR0FBQSxTQW1MTnRLLEdBQ1A2SCxFQUFnQixJQUFON0gsRUFBVyxFQUFJLEVBQ3pCeUgsRUFBa0J6SCxHQUFLLEdBQUlnSSxHQUFLbEgsUUFBUTlDLE9BQU9nSyxFQUFLdkcseUJBQXlCekIsR0FBR2lDLGNBQWMsR0FDNUZrRyxNQUFPSCxFQUFLeEMsU0FBUzJDLE1BQ3JCMUMsTUFBT3VDLEVBQUt2QyxNQUNaTyxXQUFZZ0MsRUFBS2hDLFdBQ2pCb0MsZUFBZ0JKLEVBQUt4QyxTQUFTNkMsWUFFOUJHLEtBQU0sVUFDTlUsVUFBVyxVQUNYQyxrQkFBbUIsSUFDbkJDLE9BQVEsVUFDUkMsWUFBYSxJQUNiTCxPQUFRLEdBQ1JNLFVBQVcsVUFDWEMsT0FBUSxFQUNSMUIsUUFDRTJCLE1BQU8sRUFDUGUsS0FBTTFDLEdBRVI0QixjQUNFQyxXQUFjLDhCQUNkQyxTQUFZLEtBQ1puQixLQUFRLFVBQ1JvQixjQUFlLElBQ2ZDLGlCQUFrQixhQUVuQkMscUJBQ0RDLE1BQVMsV0FDUDlCLEVBQUtyQixnQkFBZ0JxQixFQUFLeEcseUJBQXlCekIsR0FBRzRELFVBQVdxRSxFQUFLeEcseUJBQXlCekIsR0FBRzZELFNBQ2xHb0UsRUFBS3JHLFVBQVlxRyxFQUFLeEcseUJBQXlCekIsR0FBR2lDLGNBUXBEK0gsU0FBVWhDLEVBQUt2Ryx5QkFBeUJ6QixHQUFHb0MsY0FFN0NtRixFQUFTMEIsVUFBVXhCLEVBQWtCekgsS0F4QzlCQSxFQUFJLEVBQUdBLEVBQUlZLEtBQUthLHlCQUF5QnhCLE9BQVFELElBQUtzSyxFQUF0RHRLLEVBdURULE9BWkFZLE1BQUtNLFlBQVloQyxTQUFTLGNBQWUsU0FBVXNMLEVBQUdDLEVBQUdDLEVBQUtDLEVBQUdDLEVBQUdDLEVBQU1DLEdBQ3hFLEdBQUlDLEdBQUtQLEVBQUlHLEVBQUksRUFBSUUsRUFBTyxFQUMxQkcsRUFBS1IsRUFBSUcsRUFBSSxFQUFJRSxFQUFPLEVBQ3hCSSxFQUFLUixFQUFJRyxFQUFJLEVBQUlFLEVBQU8sRUFDeEJJLEVBQUtULEVBQUlHLEVBQUksRUFBSUUsRUFBTyxDQUUxQixRQUFRLElBQUtDLEVBQUlFLEVBQUksSUFBS0QsRUFBSUMsRUFBSSxJQUFLRCxFQUFJRSxFQUFJLElBQUtILEVBQUlHLEVBQUksT0FHOURoRSxFQUFRaUUsYUFBYXBELEdBQ3JCYixFQUFRaUUsYUFBYTVELEdBQ3JCM0csS0FBS3NHLFFBQVVBLEVBQ1JBLEtBL2tCbUIxRyxJQUFBLGtCQUFBbUMsTUFBQSxXQWtsQnFELEdBRTNFeUksR0FHRnBMLEVBQ0FxTCxFQU5hQyxFQUFnRXBHLFVBQUFqRixPQUFBLEdBQUFwQixTQUFBcUcsVUFBQSxHQUFBQSxVQUFBLEdBQS9DdEUsS0FBSzJLLFFBQVNDLEVBQWlDdEcsVUFBQWpGLE9BQUEsR0FBQXBCLFNBQUFxRyxVQUFBLEdBQUFBLFVBQUEsR0FBZnRFLEtBQUs2SyxTQUduRUMsRUFBUSxJQUNSMUMsRUFBUyxDQUlYLEtBQUtoSixFQUFJLEVBQUdxTCxFQUFLekssS0FBS2lHLFNBQVM1RyxPQUFRRCxFQUFJcUwsRUFBSXJMLElBQzdDb0wsRUFBZXhLLEtBQUtpRyxTQUFTN0csR0FBR3FILGdCQUFnQmlFLEVBQWdCRSxHQUVoRXhDLEdBQVVvQyxFQUFhcEMsT0FDdkJwSSxLQUFLaUcsU0FBUzdHLEdBQUcwTCxNQUFRTixFQUFhTSxNQUN0QzlLLEtBQUtpRyxTQUFTN0csR0FBR2dKLE9BQVNvQyxFQUFhcEMsTUFHekMsT0FEQUEsSUFBVXBJLEtBQUsrSyxTQUViRCxNQUFPQSxFQUNQMUMsT0FBUUEsTUFwbUJnQnhJLElBQUEsa0JBQUFtQyxNQUFBLFdBeW1CMUIsTUFBTy9CLE1BQUtnTCxlQXptQmNwTCxJQUFBLGdCQUFBbUMsTUFBQSxXQTZtQjFCLEdBQUlzRixHQUFPckgsSUFDWHFILEdBQUswRCxRQUFVLEVBQ2YxRCxFQUFLbEMscUJBQXFCOEYsTUFDeEI3SixLQUFNLFdBQ0osTUFBTyxnQ0FFVDhKLElBQUssU0FBVTVOLEdBQ2IsTUFBT0EsR0FBSSxJQUViK0osS0FBTSxXQUNKLE1BQU9BLElBRVQ4RCxTQUFVLFdBQ1IsTUFBTyxJQUVUQyxPQUFRLFNBQVU5TixHQUNoQixNQUFPQSxHQUFJK04sUUFFYkMsY0FDRUMsS0FBTSxTQUFVak8sR0FDZCxNQUFPQSxHQUFJa08sWUFFYkMsV0FDRUYsS0FBTSxTQUFVak8sR0FDZCxNQUFPQSxHQUFJb08sS0FFYkMsWUFDRUosS0FBTSxTQUFVak8sR0FDZCxNQUFPQSxHQUFJcU0sTUFFYmlDLFlBQWEsV0FDWCxHQUFJdEssR0FBU3RCLEtBQUs2TCx5QkFFbEIsT0FEQXhFLEdBQUt5RSxLQUFPOUwsS0FDTHFILEVBQUtaLGdCQUFpQlksRUFBS3NELFFBQVVySixFQUFPeUssV0FBYzFFLEVBQUt3RCxTQUFXdkosRUFBTzBLLDJCQTlvQnhFcE0sSUFBQSwwQkFBQW1DLE1BQUEsU0FzcEJINkgsRUFBR0MsRUFBR2lCLEVBQU8xQyxFQUFRakIsR0FDNUMsR0FBSThFLEdBQU1qTSxLQUFLa0csV0FRZixPQVBBK0YsR0FBSXJDLEVBQUlBLEVBQ1JxQyxFQUFJcEMsRUFBSUEsRUFDUm9DLEVBQUluQixNQUFRQSxFQUNabUIsRUFBSTdELE9BQVNBLEVBRWJwSSxLQUFLZ0wsWUFBYzdELEVBRVpuSCxRQS9wQm1CSixJQUFBLE9BQUFtQyxNQUFBLFNBa3FCdEI2SCxFQUFHQyxFQUFHaUIsRUFBTzFDLEVBQVFqQixHQUN6QixHQUdFc0QsR0FDQXJMLEVBQ0FrSCxFQUNBNEYsRUFDQUMsRUFDQWhDLEVBQ0FDLEVBQ0FFLEVBQ0E4QixFQVhFbEcsRUFBY2xHLEtBQUtrRyxZQUNyQkQsRUFBV2pHLEtBQUtpRyxRQVdSakcsTUFBSzhDLG1CQVlmLElBVkE5QyxLQUFLbUcsTUFBTyxFQUNaaUcsRUFBYXBNLEtBQUtxTSxnQkFBa0JyTSxLQUFLNEUsU0FBUzJDLE1BQU0rRSxNQUN0RDlELE9BQVUsVUFDVitELGVBQWdCLFFBQ2ZDLFVBQ0g1QyxFQUFVM0wsU0FBTjJMLEVBQWtCMUQsRUFBWTBELEVBQUlBLEVBQ3RDQyxFQUFVNUwsU0FBTjRMLEVBQWtCM0QsRUFBWTJELEVBQUlBLEVBQ3RDaUIsRUFBa0I3TSxTQUFWNk0sRUFBc0I1RSxFQUFZNEUsTUFBUUEsRUFDbEQxQyxFQUFvQm5LLFNBQVhtSyxFQUF1QmxDLEVBQVlrQyxPQUFTQSxFQUNyRGpCLEVBQWtCbEosU0FBVmtKLEVBQXNCbkgsS0FBS2dMLFlBQWM3RCxFQUM3QzJELEdBQVMxQyxFQUNYLElBQUtoSixFQUFJLEVBQUdxTCxFQUFLeEUsRUFBUzVHLE9BQVFELEVBQUlxTCxFQUFJckwsSUFDeENrSCxFQUFVTCxFQUFTN0csR0FDbkJrSCxFQUFRSSxLQUFLa0QsRUFBR0MsRUFBRzFDLEVBR3ZCbkgsTUFBS3FNLGVBQWlCRCxDQUN0QixLQUFLLEdBQUloTixHQUFJLEVBQUdxTixFQUFLeEcsRUFBUyxHQUFHeUcsZ0JBQWdCLEdBQUdDLFdBQVl2TixFQUFJcU4sRUFBR3BOLE9BQVFELElBQ3pFcU4sRUFBR3JOLEdBQUd3TixTQUFXNU0sS0FBS2dCLFlBQ3hCa0wsRUFBZU8sRUFBR3JOLEdBQUd5TixrQkFDckJWLEVBQU9ELEVBQWFZLFVBQ3BCM0MsRUFBS2dDLEVBQUt2QyxFQUNWUSxFQUFLK0IsRUFBSy9CLEdBQ1ZFLEVBQUs2QixFQUFLN0IsR0FFVjhCLEVBQVdXLE1BQ1RULE1BQU8sSUFBS25DLEVBQUssR0FBS0csRUFBSyxHQUFLLElBQUtGLEVBQUssR0FBS0UsRUFBSyxXQTNzQmhDN00sSUFpdEI5QixPQUFPQSIsImZpbGUiOiJzdGFuZGFyZC1wZXJpb2Qtc2VsZWN0b3ItZXM1Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKioqKiovIChmdW5jdGlvbihtb2R1bGVzKSB7IC8vIHdlYnBhY2tCb290c3RyYXBcbi8qKioqKiovIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbi8qKioqKiovIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbi8qKioqKiovIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbi8qKioqKiovIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuLyoqKioqKi8gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbi8qKioqKiovIFx0XHRcdGV4cG9ydHM6IHt9LFxuLyoqKioqKi8gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuLyoqKioqKi8gXHRcdFx0bG9hZGVkOiBmYWxzZVxuLyoqKioqKi8gXHRcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuLyoqKioqKi8gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4vKioqKioqLyBcdFx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4vKioqKioqLyBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuLyoqKioqKi8gXHR9XG4vKioqKioqL1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vKioqKioqLyBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuLyoqKioqKi8gfSlcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqKioqLyAoW1xuLyogMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKG1vZHVsZSkgeyd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblx0XG5cdHZhciBTdGFuZGFyZFBlcmlvZFNlbGVjdG9yID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0XG5cdHdpbmRvdy5zdFBTID0gbmV3IFN0YW5kYXJkUGVyaW9kU2VsZWN0b3IoKTtcblx0XG5cdDsoZnVuY3Rpb24gKGVudiwgZmFjdG9yeSkge1xuXHQgIGlmICgoIGZhbHNlID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKG1vZHVsZSkpID09PSAnb2JqZWN0JyAmJiBtb2R1bGUuZXhwb3J0cykge1xuXHQgICAgbW9kdWxlLmV4cG9ydHMgPSBlbnYuZG9jdW1lbnQgPyBmYWN0b3J5KGVudikgOiBmdW5jdGlvbiAod2luKSB7XG5cdCAgICAgIGlmICghd2luLmRvY3VtZW50KSB7XG5cdCAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdXaW5kb3cgd2l0aCBkb2N1bWVudCBub3QgcHJlc2VudCcpO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiBmYWN0b3J5KHdpbiwgdHJ1ZSk7XG5cdCAgICB9O1xuXHQgIH0gZWxzZSB7XG5cdCAgICBlbnYuU3RhbmRhcmRQZXJpb2RTZWxlY3RvciA9IGZhY3RvcnkoZW52LCB0cnVlKTtcblx0ICB9XG5cdH0pKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2luZG93IDogdW5kZWZpbmVkLCBmdW5jdGlvbiAoX3dpbmRvdywgd2luZG93RXhpc3RzKSB7XG5cdCAgdmFyIEZDID0gX3dpbmRvdy5GdXNpb25DaGFydHM7XG5cdCAgRkMucmVnaXN0ZXIoJ2V4dGVuc2lvbicsIFsncHJpdmF0ZScsICdTdGFuZGFyZFBlcmlvZFNlbGVjdG9yJywgZnVuY3Rpb24gKCkge1xuXHQgICAgRkMucmVnaXN0ZXJDb21wb25lbnQoJ2V4dGVuc2lvbnMnLCAnU3RhbmRhcmRQZXJpb2RTZWxlY3RvcicsIFN0YW5kYXJkUGVyaW9kU2VsZWN0b3IoeyBGdXNpb25DaGFydHM6IEZDIH0pKTtcblx0ICB9XSk7XG5cdH0pO1xuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXygxKShtb2R1bGUpKSlcblxuLyoqKi8gfSxcbi8qIDEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24obW9kdWxlKSB7XG5cdFx0aWYoIW1vZHVsZS53ZWJwYWNrUG9seWZpbGwpIHtcblx0XHRcdG1vZHVsZS5kZXByZWNhdGUgPSBmdW5jdGlvbigpIHt9O1xuXHRcdFx0bW9kdWxlLnBhdGhzID0gW107XG5cdFx0XHQvLyBtb2R1bGUucGFyZW50ID0gdW5kZWZpbmVkIGJ5IGRlZmF1bHRcblx0XHRcdG1vZHVsZS5jaGlsZHJlbiA9IFtdO1xuXHRcdFx0bW9kdWxlLndlYnBhY2tQb2x5ZmlsbCA9IDE7XG5cdFx0fVxuXHRcdHJldHVybiBtb2R1bGU7XG5cdH1cblxuXG4vKioqLyB9LFxuLyogMiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0LyoqXG5cdCAqIENsYXNzIGRlZmluaXRpb24gb2YgU3RhbmRhcmRQZXJpb2RTZWxlY3RvclxuXHQgKi9cblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoZGVwKSB7XG5cdCAgdmFyIFN0YW5kYXJkUGVyaW9kU2VsZWN0b3IgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBTdGFuZGFyZFBlcmlvZFNlbGVjdG9yKCkge1xuXHQgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgU3RhbmRhcmRQZXJpb2RTZWxlY3Rvcik7XG5cdFxuXHQgICAgICAvKipcblx0ICAgICAgICogQHByaXZhdGVcblx0ICAgICAgICovXG5cdCAgICAgIHRoaXMucmF0aW8gPSA4O1xuXHQgICAgICB0aGlzLnRvb2xib3ggPSBGdXNpb25DaGFydHMuZ2V0Q29tcG9uZW50KCdhcGknLCAndG9vbGJveCcpO1xuXHQgICAgICB0aGlzLkhvcml6b250YWxUb29sYmFyID0gdGhpcy50b29sYm94Lkhvcml6b250YWxUb29sYmFyO1xuXHQgICAgICB0aGlzLkNvbXBvbmVudEdyb3VwID0gdGhpcy50b29sYm94LkNvbXBvbmVudEdyb3VwO1xuXHQgICAgICB0aGlzLlN5bWJvbFN0b3JlID0gdGhpcy50b29sYm94LlN5bWJvbFN0b3JlO1xuXHQgICAgICB0aGlzLmFsbCA9IDE7XG5cdCAgICAgIHRoaXMuY2FsY3VsYXRlZFBlcmlvZHMgPSBbXTtcblx0ICAgICAgdGhpcy5zdGFydERhdGFzZXQgPSAwO1xuXHQgICAgICAvLyB0aGlzLmVuZERhdGFzZXQgPSB0aGlzLmdsb2JhbFJlYWN0aXZlTW9kZWwubW9kZWxbJ3gtYXhpcy1hYnNvbHV0ZS1yYW5nZS1lbmQnXTtcblx0ICAgICAgdGhpcy5zdGFydEFjdGl2ZVdpbmRvdyA9IDA7XG5cdCAgICAgIHRoaXMuZW5kQWN0aXZlV2luZG93ID0gMTtcblx0ICAgICAgdGhpcy5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzID0gW107XG5cdCAgICAgIHRoaXMuc3RhbmRhcmRDb250ZXh1YWxQZXJpb2RzID0gW107XG5cdCAgICAgIHRoaXMuc3RhcnRQb2ludFVuaXQgPSAwO1xuXHQgICAgICB0aGlzLnN0YXJ0UG9pbnRNdWx0aXBsaWVyID0gMDtcblx0ICAgICAgdGhpcy5jbGlja2VkSWQgPSAnQUxMJztcblx0ICAgICAgdGhpcy5ub0NhbGNCdXR0b25zID0gMDtcblx0ICAgICAgdGhpcy5jYWxjdWxhdGVkQnV0dG9uT2JqID0ge307XG5cdCAgICAgIHRoaXMudGRCdXR0b25zID0gW3tcblx0ICAgICAgICAnbmFtZSc6ICdZVEQnLFxuXHQgICAgICAgICdhYmJyZXZpYXRpb24nOiAnWVREJyxcblx0ICAgICAgICAncGFyZW50JzogJ3llYXInLFxuXHQgICAgICAgICdtaWxsaXNlY29uZHMnOiAzMTEwNDAwMDAwMCxcblx0ICAgICAgICAnZGVzY3JpcHRpb24nOiAnWWVhciB0byBEYXRlJ1xuXHQgICAgICB9LCB7XG5cdCAgICAgICAgJ25hbWUnOiAnUVREJyxcblx0ICAgICAgICAnYWJicmV2aWF0aW9uJzogJ1FURCcsXG5cdCAgICAgICAgJ3BhcmVudCc6ICdtb250aCcsXG5cdCAgICAgICAgJ211bHRpcGxpZXInOiAzLFxuXHQgICAgICAgICdtaWxsaXNlY29uZHMnOiA3Nzc2MDAwMDAwLFxuXHQgICAgICAgICdkZXNjcmlwdGlvbic6ICdRdWFydGVyIHRvIERhdGUnXG5cdCAgICAgIH0sIHtcblx0ICAgICAgICAnbmFtZSc6ICdNVEQnLFxuXHQgICAgICAgICdhYmJyZXZpYXRpb24nOiAnTVREJyxcblx0ICAgICAgICAncGFyZW50JzogJ21vbnRoJyxcblx0ICAgICAgICAnbWlsbGlzZWNvbmRzJzogMjU5MjAwMDAwMCxcblx0ICAgICAgICAnZGVzY3JpcHRpb24nOiAnTW9udGggdG8gRGF0ZSdcblx0ICAgICAgfSwge1xuXHQgICAgICAgICduYW1lJzogJ1dURCcsXG5cdCAgICAgICAgJ2FiYnJldmlhdGlvbic6ICdXVEQnLFxuXHQgICAgICAgICdwYXJlbnQnOiAnZGF5Jyxcblx0ICAgICAgICAnbXVsdGlwbGllcic6IDcsXG5cdCAgICAgICAgJ21pbGxpc2Vjb25kcyc6IDYwNDgwMDAwMCxcblx0ICAgICAgICAnZGVzY3JpcHRpb24nOiAnV2VlayB0byBEYXRlJ1xuXHQgICAgICB9LCB7XG5cdCAgICAgICAgJ25hbWUnOiAnWScsXG5cdCAgICAgICAgJ2FiYnJldmlhdGlvbic6ICdZJyxcblx0ICAgICAgICAncGFyZW50JzogJ2RheScsXG5cdCAgICAgICAgJ21pbGxpc2Vjb25kcyc6IDg2NDAwMDAwLFxuXHQgICAgICAgICdkZXNjcmlwdGlvbic6ICdZZXN0ZXJkYXknXG5cdCAgICAgIH0sIHtcblx0ICAgICAgICAnbmFtZSc6ICdUJyxcblx0ICAgICAgICAnYWJicmV2aWF0aW9uJzogJ1QnLFxuXHQgICAgICAgICdwYXJlbnQnOiAnZGF5Jyxcblx0ICAgICAgICAnbWlsbGlzZWNvbmRzJzogODY0MDAwMDAsXG5cdCAgICAgICAgJ2Rlc2NyaXB0aW9uJzogJ1RvZGF5J1xuXHQgICAgICB9XTtcblx0ICAgICAgdGhpcy5jb25maWcgPSB7XG5cdCAgICAgICAgYW5jaG9yUG9zaXRpb25zOiAncmlnaHQnLFxuXHQgICAgICAgIGFsbDogJzEnLFxuXHQgICAgICAgIGNvbnRleHR1YWw6ICcxJyxcblx0ICAgICAgICBjYWxjdWxhdGVkOiAnMScsXG5cdCAgICAgICAgdGVydGlhcnlUaW1lUGVyaW9kczoge31cblx0ICAgICAgfTtcblx0ICAgIH1cblx0XG5cdCAgICAvKipcblx0ICAgICAqIEEgZnVuY3Rpb24gdG8gZ2VuZXJhdGUgdGhlIGNhbGN1bGF0ZWQgYnV0dG9ucyB1c2luZ1xuXHQgICAgICogdGhlIGFjdGl2ZSByYW5nZSBhbmQgdGhlIGxvY2F0aW9uIG9mIHRoZSBhY3RpdmUgcmFuZ2Vcblx0ICAgICAqL1xuXHRcblx0XG5cdCAgICBfY3JlYXRlQ2xhc3MoU3RhbmRhcmRQZXJpb2RTZWxlY3RvciwgW3tcblx0ICAgICAga2V5OiAnZ2VuZXJhdGVDYWxjdWxhdGVkQnV0dG9ucycsXG5cdCAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZW5lcmF0ZUNhbGN1bGF0ZWRCdXR0b25zKCkge1xuXHQgICAgICAgIHZhciB0YXJnZXRCbG9jayA9IHRoaXMuZW5kQWN0aXZlV2luZG93IC0gdGhpcy5zdGFydERhdGFzZXQsXG5cdCAgICAgICAgICAgIGkgPSAwLFxuXHQgICAgICAgICAgICBqID0gMCxcblx0ICAgICAgICAgICAgYWN0aXZlV2luZG93ID0gdGhpcy5lbmRBY3RpdmVXaW5kb3cgLSB0aGlzLnN0YXJ0QWN0aXZlV2luZG93LFxuXHQgICAgICAgICAgICBjb3VudCA9IDA7XG5cdCAgICAgICAgdGhpcy5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzID0gW107XG5cdCAgICAgICAgZm9yIChpID0gMDsgaSA8IHRoaXMudGltZVBlcmlvZHMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICAgIC8vIGNoZWNraW5nIHdoZXRoZXIgdGhlIHVuaXQgaXMgYXBwbGljYWJsZSBmb3IgdGhlIGN1cnJlbnQgdGFyZ2V0IGJsb2NrXG5cdCAgICAgICAgICBpZiAodGFyZ2V0QmxvY2sgLyB0aGlzLnRpbWVQZXJpb2RzW2ldLmludGVydmFsID49IDEpIHtcblx0ICAgICAgICAgICAgLy8gY2hlY2tpbmcgd2hldGhlciB0aGUgdW5pdCBpcyBvZiB0aGUgaGlnaGVyIG9yZGVyIGFuZCBvbmx5IG11bHRpcGxpZXIgMSBpcyBhcHBsaWNhYmxlXG5cdCAgICAgICAgICAgIGlmIChNYXRoLmZsb29yKGFjdGl2ZVdpbmRvdyAvIHRoaXMudGltZVBlcmlvZHNbaV0uaW50ZXJ2YWwpIDwgMSkge1xuXHQgICAgICAgICAgICAgIHRoaXMuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kcy5wdXNoKHtcblx0ICAgICAgICAgICAgICAgICdhYmJyZXZpYXRpb24nOiB0aGlzLnRpbWVQZXJpb2RzW2ldLmFiYnJldmlhdGlvbi5zaW5nbGUsXG5cdCAgICAgICAgICAgICAgICAnZGVzY3JpcHRpb24nOiB0aGlzLnRpbWVQZXJpb2RzW2ldLmRlc2NyaXB0aW9uLFxuXHQgICAgICAgICAgICAgICAgJ21pbGxpc2Vjb25kcyc6IHRoaXMudGltZVBlcmlvZHNbaV0uaW50ZXJ2YWwsXG5cdCAgICAgICAgICAgICAgICAnbmFtZSc6IHRoaXMudGltZVBlcmlvZHNbaV0ubmFtZSxcblx0ICAgICAgICAgICAgICAgICdtdWx0aXBsaWVycyc6IFsxXVxuXHQgICAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgIC8vIGlmIHRoZSB1bml0IGlzIG9mIHRoZSBvcmRlciBvZiB0aGUgdGFyZ2V0IGJsb2NrIGFuZCBjYWxjdWxhdGluZyB0aGUgbXVsdGlwbGllcnNcblx0ICAgICAgICAgICAgICB0aGlzLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHMucHVzaCh7XG5cdCAgICAgICAgICAgICAgICAnYWJicmV2aWF0aW9uJzogdGhpcy50aW1lUGVyaW9kc1tpXS5hYmJyZXZpYXRpb24uc2luZ2xlLFxuXHQgICAgICAgICAgICAgICAgJ2Rlc2NyaXB0aW9uJzogdGhpcy50aW1lUGVyaW9kc1tpXS5kZXNjcmlwdGlvbixcblx0ICAgICAgICAgICAgICAgICdtaWxsaXNlY29uZHMnOiB0aGlzLnRpbWVQZXJpb2RzW2ldLmludGVydmFsLFxuXHQgICAgICAgICAgICAgICAgJ25hbWUnOiB0aGlzLnRpbWVQZXJpb2RzW2ldLm5hbWUsXG5cdCAgICAgICAgICAgICAgICAnbXVsdGlwbGllcnMnOiBbXVxuXHQgICAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICAgIC8vIGNhbGN1bGF0aW5nIGFuZCBwb3B1bGF0aW5nIHRoZSBhcHBsaWNhYmxlIG11bHRwbGllcnMgb2YgZWFjaCB1bml0XG5cdCAgICAgICAgICAgICAgZm9yIChqID0gMDsgaiA8IHRoaXMudGltZVBlcmlvZHNbaV0ubXVsdGlwbGllcnMubGVuZ3RoOyBqKyspIHtcblx0ICAgICAgICAgICAgICAgIGlmIChhY3RpdmVXaW5kb3cgLyB0aGlzLnJhdGlvIDwgdGhpcy50aW1lUGVyaW9kc1tpXS5tdWx0aXBsaWVyc1tqXSAqIHRoaXMudGltZVBlcmlvZHNbaV0uaW50ZXJ2YWwpIHtcblx0ICAgICAgICAgICAgICAgICAgdGhpcy5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW3RoaXMuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kcy5sZW5ndGggLSAxXS5tdWx0aXBsaWVycy5wdXNoKHRoaXMudGltZVBlcmlvZHNbaV0ubXVsdGlwbGllcnNbal0pO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLm5vQ2FsY0J1dHRvbnMgPSBJbmZpbml0eTtcblx0ICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgICBmb3IgKGogPSAwOyBqIDwgdGhpcy5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW2ldLm11bHRpcGxpZXJzLmxlbmd0aDsgaisrKSB7XG5cdCAgICAgICAgICAgICsrY291bnQ7XG5cdCAgICAgICAgICAgIGlmICh0aGlzLm5vQ2FsY0J1dHRvbnMgPiBpKSB7XG5cdCAgICAgICAgICAgICAgdGhpcy5ub0NhbGNCdXR0b25zID0gaTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBpZiAoY291bnQgPD0gNCkge1xuXHQgICAgICAgICAgICAgIHRoaXMuc3RhcnRQb2ludE11bHRpcGxpZXIgPSBqO1xuXHQgICAgICAgICAgICAgIHRoaXMuc3RhcnRQb2ludFVuaXQgPSBpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICAvLyB0aGlzLmRyYXdCdXR0b25zQ2FsY3VsYXRlZCh0aGlzLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHMpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICAvKipcblx0ICAgICAgICogQSBmdW5jdGlvbiB0byBnZW5lcmF0ZSB0aGUgY29udGV4dHVhbCBidXR0b25zIHVzaW5nXG5cdCAgICAgICAqIHRoZSBlbmQgcG9pbnQgb2YgdGhlIHRpbWUtc2NhbGVcblx0ICAgICAgICovXG5cdFxuXHQgICAgfSwge1xuXHQgICAgICBrZXk6ICdnZW5lcmF0ZUNvbnRleHR1YWxCdXR0b25zJyxcblx0ICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdlbmVyYXRlQ29udGV4dHVhbEJ1dHRvbnMoKSB7XG5cdCAgICAgICAgLy8gZ2VuZXJhdGluZyBhbiBhcnJheSB3aXRoIGFwcGxpY2FibGUgVEQgYnV0dG9uc1xuXHQgICAgICAgIHZhciBidXR0b25zID0gW10sXG5cdCAgICAgICAgICAgIGkgPSAwLFxuXHQgICAgICAgICAgICBlbmRTdGFtcCA9IHRoaXMuZ2xvYmFsUmVhY3RpdmVNb2RlbC5tb2RlbFsneC1heGlzLWFic29sdXRlLXJhbmdlLWVuZCddLFxuXHQgICAgICAgICAgICBkYXRlU3RhcnQgPSBlbmRTdGFtcCAtIDIsXG5cdCAgICAgICAgICAgIGRhdGVFbmQgPSBlbmRTdGFtcCxcblx0ICAgICAgICAgICAgcmVsYXRpdmVUREJ1dHRvbiA9IHt9O1xuXHQgICAgICAgIGZvciAoOyBpIDwgdGhpcy50ZEJ1dHRvbnMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICAgIGRhdGVTdGFydCA9IG5ldyBEYXRlKGVuZFN0YW1wKTtcblx0ICAgICAgICAgIGlmICh0aGlzLnRkQnV0dG9uc1tpXS5uYW1lID09PSAnWVREJykge1xuXHQgICAgICAgICAgICBkYXRlU3RhcnQuc2V0TW9udGgoMCk7XG5cdCAgICAgICAgICAgIGRhdGVTdGFydC5zZXREYXRlKDEpO1xuXHQgICAgICAgICAgICBkYXRlU3RhcnQuc2V0SG91cnMoMCk7XG5cdCAgICAgICAgICAgIGRhdGVTdGFydC5zZXRNaW51dGVzKDApO1xuXHQgICAgICAgICAgICBkYXRlU3RhcnQuc2V0U2Vjb25kcygwKTtcblx0ICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy50ZEJ1dHRvbnNbaV0ubmFtZSA9PT0gJ01URCcpIHtcblx0ICAgICAgICAgICAgZGF0ZVN0YXJ0LnNldERhdGUoMSk7XG5cdCAgICAgICAgICAgIGRhdGVTdGFydC5zZXRIb3VycygwKTtcblx0ICAgICAgICAgICAgZGF0ZVN0YXJ0LnNldE1pbnV0ZXMoMCk7XG5cdCAgICAgICAgICAgIGRhdGVTdGFydC5zZXRTZWNvbmRzKDApO1xuXHQgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnRkQnV0dG9uc1tpXS5uYW1lID09PSAnUVREJykge1xuXHQgICAgICAgICAgICBkYXRlU3RhcnQuc2V0TW9udGgoMTEgLSBkYXRlU3RhcnQuZ2V0TW9udGgoKSAlIDQpO1xuXHQgICAgICAgICAgICBkYXRlU3RhcnQuc2V0RGF0ZSgwKTtcblx0ICAgICAgICAgICAgZGF0ZVN0YXJ0LnNldEhvdXJzKDApO1xuXHQgICAgICAgICAgICBkYXRlU3RhcnQuc2V0TWludXRlcygwKTtcblx0ICAgICAgICAgICAgZGF0ZVN0YXJ0LnNldFNlY29uZHMoMCk7XG5cdCAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMudGRCdXR0b25zW2ldLm5hbWUgPT09ICdXVEQnKSB7XG5cdCAgICAgICAgICAgIGRhdGVTdGFydC5zZXREYXRlKGRhdGVTdGFydC5nZXREYXRlKCkgLSBkYXRlU3RhcnQuZ2V0RGF5KCkpO1xuXHQgICAgICAgICAgICBkYXRlU3RhcnQuc2V0SG91cnMoMCk7XG5cdCAgICAgICAgICAgIGRhdGVTdGFydC5zZXRNaW51dGVzKDApO1xuXHQgICAgICAgICAgICBkYXRlU3RhcnQuc2V0U2Vjb25kcygwKTtcblx0ICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy50ZEJ1dHRvbnNbaV0ubmFtZSA9PT0gJ1knKSB7XG5cdCAgICAgICAgICAgIGRhdGVTdGFydC5zZXRIb3VycygwKTtcblx0ICAgICAgICAgICAgZGF0ZVN0YXJ0LnNldE1pbnV0ZXMoMCk7XG5cdCAgICAgICAgICAgIGRhdGVTdGFydC5zZXRTZWNvbmRzKDApO1xuXHQgICAgICAgICAgICBkYXRlU3RhcnQgLT0gODY0MDAwMDA7XG5cdCAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMudGRCdXR0b25zW2ldLm5hbWUgPT09ICdUJykge1xuXHQgICAgICAgICAgICBkYXRlU3RhcnQuc2V0SG91cnMoMCk7XG5cdCAgICAgICAgICAgIGRhdGVTdGFydC5zZXRNaW51dGVzKDApO1xuXHQgICAgICAgICAgICBkYXRlU3RhcnQuc2V0U2Vjb25kcygwKTtcblx0ICAgICAgICAgICAgaWYgKCt0aGlzLmVuZERhdGFzZXQgPT09ICtkYXRlU3RhcnQpIHtcblx0ICAgICAgICAgICAgICBkYXRlU3RhcnQgPSArZGF0ZVN0YXJ0IC0gODY0MDAwMDA7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICBpZiAoZGF0ZUVuZCA8IGRhdGVTdGFydCkge1xuXHQgICAgICAgICAgICBjb250aW51ZTtcblx0ICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIHRoaXMudGRCdXR0b25zW2ldLmRhdGVTdGFydCA9IGRhdGVTdGFydC52YWx1ZU9mKCk7XG5cdCAgICAgICAgICAgIHRoaXMudGRCdXR0b25zW2ldLmRhdGVFbmQgPSBkYXRlRW5kLnZhbHVlT2YoKTtcblx0ICAgICAgICAgICAgYnV0dG9ucy5wdXNoKHRoaXMudGRCdXR0b25zW2ldKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgcmVsYXRpdmVUREJ1dHRvbi5taWxsaXNlY29uZHMgPSBJbmZpbml0eTtcblx0ICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy50ZEJ1dHRvbnMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICAgIGlmIChNYXRoLmFicyh0aGlzLnRkQnV0dG9uc1tpXS5taWxsaXNlY29uZHMgLSAodGhpcy5lbmRBY3RpdmVXaW5kb3cgLSB0aGlzLnN0YXJ0QWN0aXZlV2luZG93KSkgPCByZWxhdGl2ZVREQnV0dG9uLm1pbGxpc2Vjb25kcykge1xuXHQgICAgICAgICAgICByZWxhdGl2ZVREQnV0dG9uLm1pbGxpc2Vjb25kcyA9IHRoaXMudGRCdXR0b25zW2ldLm1pbGxpc2Vjb25kcztcblx0ICAgICAgICAgICAgcmVsYXRpdmVUREJ1dHRvbi5uYW1lID0gdGhpcy50ZEJ1dHRvbnNbaV0uYWJicmV2aWF0aW9uO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgdGhpcy5zdGFuZGFyZENvbnRleHVhbFBlcmlvZHMgPSBidXR0b25zO1xuXHQgICAgICAgIC8vIHRoaXMuZHJhd0J1dHRvbnNDb250ZXh0dWFsKHRoaXMuc3RhbmRhcmRDb250ZXh1YWxQZXJpb2RzKTtcblx0ICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICBrZXk6ICdwcm9jZXNzTXVsdGlwbGllcnMnLFxuXHQgICAgICB2YWx1ZTogZnVuY3Rpb24gcHJvY2Vzc011bHRpcGxpZXJzKHRpbWVBcnIpIHtcblx0ICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRpbWVBcnIubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICAgIHZhciBsZW4gPSB0aW1lQXJyW2ldLnBvc3NpYmxlRmFjdG9ycy5sZW5ndGg7XG5cdCAgICAgICAgICB0aW1lQXJyW2ldLm11bHRpcGxpZXJzID0gW107XG5cdCAgICAgICAgICBpZiAobGVuID09PSAxKSB7XG5cdCAgICAgICAgICAgIHRpbWVBcnJbaV0ubXVsdGlwbGllcnMucHVzaCh0aW1lQXJyW2ldLnBvc3NpYmxlRmFjdG9yc1swXSk7XG5cdCAgICAgICAgICB9IGVsc2UgaWYgKGxlbiA9PT0gMikge1xuXHQgICAgICAgICAgICB0aW1lQXJyW2ldLm11bHRpcGxpZXJzLnB1c2godGltZUFycltpXS5wb3NzaWJsZUZhY3RvcnNbMF0pO1xuXHQgICAgICAgICAgICB0aW1lQXJyW2ldLm11bHRpcGxpZXJzLnB1c2godGltZUFycltpXS5wb3NzaWJsZUZhY3RvcnNbbGVuIC0gMV0pO1xuXHQgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgdGltZUFycltpXS5tdWx0aXBsaWVycy5wdXNoKHRpbWVBcnJbaV0ucG9zc2libGVGYWN0b3JzWzBdKTtcblx0ICAgICAgICAgICAgdGltZUFycltpXS5tdWx0aXBsaWVycy5wdXNoKE1hdGguZmxvb3IodGltZUFycltpXS5wb3NzaWJsZUZhY3RvcnNbbGVuIC0gMV0gLyAyKSk7XG5cdCAgICAgICAgICAgIHRpbWVBcnJbaV0ubXVsdGlwbGllcnMucHVzaCh0aW1lQXJyW2ldLnBvc3NpYmxlRmFjdG9yc1tsZW4gLSAxXSk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVybiB0aW1lQXJyO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICAvKipcblx0ICAgICAgICogQSBmdW5jdGlvbiB0byBzZXQgdGhlIGFjdGl2ZSBwZXJpb2Qnc1xuXHQgICAgICAgKiBzdGFydCBhbmQgZW5kIHBvaW50XG5cdCAgICAgICAqIEBwYXJhbSAge251bWJlcn0gZGF0ZSBzdGFtcCAtIEEgVU5JWCB0aW1lc3RhbXAgdG8gYmUgc2V0IGFzIHRoZSBzdGFydCBwb2ludCBvZiBhY3RpdmUgcGVyaW9kXG5cdCAgICAgICAqIEBwYXJhbSAge251bWJlcn0gZGF0ZSBzdGFtcCAtIEEgVU5JWCB0aW1lc3RhbXAgdG8gYmUgc2V0IGFzIHRoZSBlbmQgcG9pbnQgb2YgYWN0aXZlIHBlcmlvZFxuXHQgICAgICAgKi9cblx0XG5cdCAgICB9LCB7XG5cdCAgICAgIGtleTogJ3NldEFjdGl2ZVBlcmlvZCcsXG5cdCAgICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRBY3RpdmVQZXJpb2QoKSB7XG5cdCAgICAgICAgdmFyIHN0YXJ0LFxuXHQgICAgICAgICAgICBlbmQsXG5cdCAgICAgICAgICAgIHRlbXAgPSB3aW5kb3cucGVyZm9ybWFuY2Uubm93KCk7XG5cdCAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEpIHtcblx0ICAgICAgICAgIGVuZCA9IHRoaXMuZ2xvYmFsUmVhY3RpdmVNb2RlbC5tb2RlbFsneC1heGlzLXZpc2libGUtcmFuZ2UtZW5kJ107XG5cdCAgICAgICAgICBzdGFydCA9IGVuZCAtIGFyZ3VtZW50c1swXTtcblx0ICAgICAgICB9IGVsc2UgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDIpIHtcblx0ICAgICAgICAgIHN0YXJ0ID0gYXJndW1lbnRzWzBdO1xuXHQgICAgICAgICAgZW5kID0gYXJndW1lbnRzWzFdO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLnN0YXJ0QWN0aXZlV2luZG93ID0gc3RhcnQ7XG5cdCAgICAgICAgdGhpcy5lbmRBY3RpdmVXaW5kb3cgPSBlbmQ7XG5cdCAgICAgICAgdGhpcy5nZW5lcmF0ZUNhbGN1bGF0ZWRCdXR0b25zKCk7XG5cdCAgICAgICAgdGhpcy5nbG9iYWxSZWFjdGl2ZU1vZGVsLm1vZGVsWyd4LWF4aXMtdmlzaWJsZS1yYW5nZS1zdGFydCddID0gdGhpcy5zdGFydEFjdGl2ZVdpbmRvdztcblx0ICAgICAgICB0aGlzLmdsb2JhbFJlYWN0aXZlTW9kZWwubW9kZWxbJ3gtYXhpcy12aXNpYmxlLXJhbmdlLWVuZCddID0gdGhpcy5lbmRBY3RpdmVXaW5kb3c7XG5cdCAgICAgICAgdGhpcy5nZW5lcmF0ZUNvbnRleHR1YWxCdXR0b25zKCk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8qKlxuXHQgICAgICAgKiBBIGZ1bmN0aW9uIHRvIHNldCB0aGUgc3RhcnQgYW5kIGVuZCBwb2ludCBvZiB0aGVcblx0ICAgICAgICogZW50aXJlIHRpbWUtbGluZVxuXHQgICAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IGRhdGUgc3RhbXAgLSBBIFVOSVggdGltZXN0YW1wIHRvIGJlIHNldCBhcyB0aGUgc3RhcnQgcG9pbnQgb2YgdGltZS1saW5lXG5cdCAgICAgICAqIEBwYXJhbSAge251bWJlcn0gZGF0ZSBzdGFtcCAtIEEgVU5JWCB0aW1lc3RhbXAgdG8gYmUgc2V0IGFzIHRoZSBlbmQgcG9pbnQgb2YgdGltZS1saW5lXG5cdCAgICAgICAqL1xuXHRcblx0ICAgICAgLyoqXG5cdCAgICAgICAqIEEgZnVuY3Rpb24gdG8gc2V0IHRoZSBvYmplY3QgdG8gc2V0IHRoZSB1c2VyIHByZWZlcmVuY2VzXG5cdCAgICAgICAqL1xuXHRcblx0ICAgIH0sIHtcblx0ICAgICAga2V5OiAnY29uZmlndXJlJyxcblx0ICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNvbmZpZ3VyZShjb25maWcpIHtcblx0ICAgICAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcblx0ICAgICAgfVxuXHRcblx0ICAgICAgLyoqXG5cdCAgICAgICAqIEZ1c2lvbmNoYXJ0cyBsaWZlIGN5Y2xlIG1ldGhvZCBmb3IgZXh0ZW5zaW9uXG5cdCAgICAgICAqL1xuXHRcblx0ICAgIH0sIHtcblx0ICAgICAga2V5OiAnaW5pdCcsXG5cdCAgICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0KHJlcXVpcmUpIHtcblx0ICAgICAgICB2YXIgaW5zdGFuY2UgPSB0aGlzO1xuXHQgICAgICAgIHJlcXVpcmUoWyd4QXhpcycsICd5QXhpcycsICdncmFwaGljcycsICdjaGFydCcsICdkYXRhc2V0JywgJ1Bsb3RNYW5hZ2VyJywgJ2NhbnZhc0NvbmZpZycsICdNYXJrZXJNYW5hZ2VyJywgJ3JlYWN0aXZlTW9kZWwnLCAnZ2xvYmFsUmVhY3RpdmVNb2RlbCcsICdzcGFjZU1hbmFnZXJJbnN0YW5jZScsICdzbWFydExhYmVsJywgJ2V4dERhdGEnLCAnY2hhcnRJbnN0YW5jZScsIGZ1bmN0aW9uICh4QXhpcywgeUF4aXMsIGdyYXBoaWNzLCBjaGFydCwgZGF0YXNldCwgcGxvdE1hbmFnZXIsIGNhbnZhc0NvbmZpZywgbWFya2VyTWFuYWdlciwgcmVhY3RpdmVNb2RlbCwgZ2xvYmFsUmVhY3RpdmVNb2RlbCwgc3BhY2VNYW5hZ2VySW5zdGFuY2UsIHNtYXJ0TGFiZWwsIGV4dERhdGEsIGNoYXJ0SW5zdGFuY2UpIHtcblx0ICAgICAgICAgIGluc3RhbmNlLnhBeGlzID0geEF4aXM7XG5cdCAgICAgICAgICBpbnN0YW5jZS55QXhpcyA9IHlBeGlzO1xuXHQgICAgICAgICAgaW5zdGFuY2UuZ3JhcGhpY3MgPSBncmFwaGljcztcblx0ICAgICAgICAgIGluc3RhbmNlLmNoYXJ0ID0gY2hhcnQ7XG5cdCAgICAgICAgICBpbnN0YW5jZS5kYXRhc2V0ID0gZGF0YXNldDtcblx0ICAgICAgICAgIGluc3RhbmNlLnBsb3RNYW5hZ2VyID0gcGxvdE1hbmFnZXI7XG5cdCAgICAgICAgICBpbnN0YW5jZS5tYXJrZXJNYW5hZ2VyID0gbWFya2VyTWFuYWdlcjtcblx0ICAgICAgICAgIGluc3RhbmNlLmNhbnZhc0NvbmZpZyA9IGNhbnZhc0NvbmZpZztcblx0ICAgICAgICAgIGluc3RhbmNlLnJlYWN0aXZlTW9kZWwgPSByZWFjdGl2ZU1vZGVsO1xuXHQgICAgICAgICAgaW5zdGFuY2UuZ2xvYmFsUmVhY3RpdmVNb2RlbCA9IGdsb2JhbFJlYWN0aXZlTW9kZWw7XG5cdCAgICAgICAgICBpbnN0YW5jZS5zcGFjZU1hbmFnZXJJbnN0YW5jZSA9IHNwYWNlTWFuYWdlckluc3RhbmNlO1xuXHQgICAgICAgICAgaW5zdGFuY2Uuc21hcnRMYWJlbCA9IHNtYXJ0TGFiZWw7XG5cdCAgICAgICAgICBpbnN0YW5jZS5leHREYXRhID0gZXh0RGF0YTtcblx0ICAgICAgICAgIGluc3RhbmNlLmNoYXJ0SW5zdGFuY2UgPSBjaGFydEluc3RhbmNlO1xuXHQgICAgICAgIH1dKTtcblx0ICAgICAgICB0aGlzLnNwYWNlTWFuYWdlckluc3RhbmNlID0gaW5zdGFuY2Uuc3BhY2VNYW5hZ2VySW5zdGFuY2U7XG5cdCAgICAgICAgdGhpcy5nbG9iYWxSZWFjdGl2ZU1vZGVsID0gaW5zdGFuY2UuZ2xvYmFsUmVhY3RpdmVNb2RlbDtcblx0ICAgICAgICB0aGlzLmVuZEFjdGl2ZVdpbmRvdyA9IGluc3RhbmNlLmdsb2JhbFJlYWN0aXZlTW9kZWwubW9kZWxbJ3gtYXhpcy12aXNpYmxlLXJhbmdlLWVuZCddO1xuXHQgICAgICAgIHRoaXMuc3RhcnRBY3RpdmVXaW5kb3cgPSBpbnN0YW5jZS5nbG9iYWxSZWFjdGl2ZU1vZGVsLm1vZGVsWyd4LWF4aXMtdmlzaWJsZS1yYW5nZS1zdGFydCddO1xuXHQgICAgICAgIHRoaXMuc3RhcnREYXRhc2V0ID0gaW5zdGFuY2UuZ2xvYmFsUmVhY3RpdmVNb2RlbC5tb2RlbFsneC1heGlzLWFic29sdXRlLXJhbmdlLXN0YXJ0J107XG5cdCAgICAgICAgdGhpcy5lbmREYXRhc2V0ID0gaW5zdGFuY2UuZ2xvYmFsUmVhY3RpdmVNb2RlbC5tb2RlbFsneC1heGlzLWFic29sdXRlLXJhbmdlLWVuZCddO1xuXHQgICAgICAgIC8vIGluc3RhbmNlLmdsb2JhbFJlYWN0aXZlTW9kZWwubW9kZWxbJ194LWF4aXMtdmlzaWJsZS1yYW5nZS1zdGFydCddICs9IDEyNDQxNjAwMDAwMDtcblx0ICAgICAgICB0aGlzLnRpbWVSdWxlcyA9IHRoaXMuY2hhcnRJbnN0YW5jZS5hcGlJbnN0YW5jZS5nZXRDb21wb25lbnRTdG9yZSgpO1xuXHQgICAgICAgIHRoaXMudGltZVJ1bGVzID0gdGhpcy50aW1lUnVsZXMuZ2V0Q2FudmFzQnlJbmRleCgwKS5jb21wb3NpdGlvbi5pbXBsO1xuXHQgICAgICAgIHRoaXMudGltZVJ1bGVzID0gdGhpcy50aW1lUnVsZXMuZ2V0RGF0YUFnZ3JlZ2F0b3IoKTtcblx0ICAgICAgICB0aGlzLnRpbWVSdWxlcyA9IHRoaXMudGltZVJ1bGVzLmdldEFnZ3JlZ2F0aW9uVGltZVJ1bGVzKCk7XG5cdCAgICAgICAgdGhpcy50aW1lUGVyaW9kcyA9IHRoaXMucHJvY2Vzc011bHRpcGxpZXJzKHRoaXMudGltZVJ1bGVzKTtcblx0ICAgICAgICB0aGlzLnNldEFjdGl2ZVBlcmlvZCh0aGlzLnN0YXJ0QWN0aXZlV2luZG93LCB0aGlzLmVuZEFjdGl2ZVdpbmRvdyk7XG5cdCAgICAgICAgdGhpcy50b29sYmFycyA9IFtdO1xuXHQgICAgICAgIHRoaXMubWVhc3VyZW1lbnQgPSB7fTtcblx0ICAgICAgICB0aGlzLmZsYWcgPSB0cnVlO1xuXHRcblx0ICAgICAgICB0aGlzLnRvb2xiYXJzLnB1c2godGhpcy5jcmVhdGVUb29sYmFyKCkpO1xuXHRcblx0ICAgICAgICB0aGlzLmdsb2JhbFJlYWN0aXZlTW9kZWwub25Qcm9wc0NoYW5nZShbJ3gtYXhpcy12aXNpYmxlLXJhbmdlLXN0YXJ0JywgJ3gtYXhpcy12aXNpYmxlLXJhbmdlLWVuZCddLCBmdW5jdGlvbiAoc3RhcnQsIGVuZCkge1xuXHQgICAgICAgICAgaWYgKGluc3RhbmNlLmZsYWcpIHtcblx0ICAgICAgICAgICAgaW5zdGFuY2UuZmxhZyA9IGZhbHNlO1xuXHQgICAgICAgICAgICBpbnN0YW5jZS5zZXRBY3RpdmVQZXJpb2Qoc3RhcnRbMV0sIGVuZFsxXSk7XG5cdCAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaW5zdGFuY2Uuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kcy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgaW5zdGFuY2Uuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kc1tpXS5tdWx0aXBsaWVycy5sZW5ndGg7IGorKykge1xuXHQgICAgICAgICAgICAgICAgaWYgKGVuZFsxXSAtIHN0YXJ0WzFdID49IGluc3RhbmNlLnRpbWVQZXJpb2RzW2ldLm11bHRpcGxpZXJzW2pdICogaW5zdGFuY2UudGltZVBlcmlvZHNbaV0uaW50ZXJ2YWwpIHtcblx0ICAgICAgICAgICAgICAgICAgLy8gaW5zdGFuY2UuY2xpY2tlZElkID0gaW5zdGFuY2UudGltZVBlcmlvZHNbaV0ubXVsdGlwbGllcnNbal0gKyBpbnN0YW5jZS50aW1lUGVyaW9kc1tpXS5hYmJyZXZpYXRpb24uc2luZ2xlO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBpbnN0YW5jZS50b29sYmFyLmRpc3Bvc2UoKTtcblx0ICAgICAgICAgICAgaW5zdGFuY2UudG9vbGJhcnMucG9wKCk7XG5cdCAgICAgICAgICAgIGluc3RhbmNlLnRvb2xiYXJzLnB1c2goaW5zdGFuY2UuY3JlYXRlVG9vbGJhcigpKTtcblx0ICAgICAgICAgICAgaW5zdGFuY2UuZ2V0TG9naWNhbFNwYWNlKCk7XG5cdCAgICAgICAgICAgIGluc3RhbmNlLmRyYXcoKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9KTtcblx0ICAgICAgICByZXR1cm4gdGhpcztcblx0ICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICBrZXk6ICdjcmVhdGVUb29sYmFyJyxcblx0ICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZVRvb2xiYXIoKSB7XG5cdCAgICAgICAgdmFyIF90aGlzID0gdGhpcztcblx0XG5cdCAgICAgICAgdmFyIHVuaWdyb3VwLFxuXHQgICAgICAgICAgICB0b29sYmFyLFxuXHQgICAgICAgICAgICBjYWxjdWxhdGVkQnV0dG9ucyxcblx0ICAgICAgICAgICAgY29udGV4dHVhbEJ1dHRvbnMsXG5cdCAgICAgICAgICAgIGFsbEJ1dHRvbixcblx0ICAgICAgICAgICAgc2VsZiA9IHRoaXMsXG5cdCAgICAgICAgICAgIGRlZHVjdG9yQXIgPSBbXSxcblx0ICAgICAgICAgICAgc3RhcnRNdWx0aXBsaWVyLFxuXHQgICAgICAgICAgICBkZWR1Y3Rvcixcblx0ICAgICAgICAgICAgaSxcblx0ICAgICAgICAgICAgaixcblx0ICAgICAgICAgICAgbWFyZ2luLFxuXHQgICAgICAgICAgICBmcm9tRGF0ZUxhYmVsLFxuXHQgICAgICAgICAgICBncm91cDtcblx0XG5cdCAgICAgICAgZ3JvdXAgPSBuZXcgdGhpcy50b29sYm94LkNvbXBvbmVudEdyb3VwKHtcblx0ICAgICAgICAgIHBhcGVyOiB0aGlzLmdyYXBoaWNzLnBhcGVyLFxuXHQgICAgICAgICAgY2hhcnQ6IHRoaXMuY2hhcnQsXG5cdCAgICAgICAgICBzbWFydExhYmVsOiB0aGlzLnNtYXJ0TGFiZWwsXG5cdCAgICAgICAgICBjaGFydENvbnRhaW5lcjogdGhpcy5ncmFwaGljcy5jb250YWluZXJcblx0ICAgICAgICB9KTtcblx0XG5cdCAgICAgICAgdW5pZ3JvdXAgPSBuZXcgdGhpcy50b29sYm94LlVuaVNlbGVjdENvbXBvbmVudEdyb3VwKHtcblx0ICAgICAgICAgIHBhcGVyOiB0aGlzLmdyYXBoaWNzLnBhcGVyLFxuXHQgICAgICAgICAgY2hhcnQ6IHRoaXMuY2hhcnQsXG5cdCAgICAgICAgICBzbWFydExhYmVsOiB0aGlzLnNtYXJ0TGFiZWwsXG5cdCAgICAgICAgICBjaGFydENvbnRhaW5lcjogdGhpcy5ncmFwaGljcy5jb250YWluZXJcblx0ICAgICAgICB9KTtcblx0ICAgICAgICB1bmlncm91cC5zZXRDb25maWcoe1xuXHQgICAgICAgICAgZmlsbDogJyNmZmYnLFxuXHQgICAgICAgICAgYm9yZGVyVGhpY2tuZXNzOiAwXG5cdCAgICAgICAgfSk7XG5cdCAgICAgICAgZ3JvdXAuc2V0Q29uZmlnKHtcblx0ICAgICAgICAgIGZpbGw6ICcjZmZmJyxcblx0ICAgICAgICAgIGJvcmRlclRoaWNrbmVzczogMFxuXHQgICAgICAgIH0pO1xuXHQgICAgICAgIHRvb2xiYXIgPSBuZXcgdGhpcy5Ib3Jpem9udGFsVG9vbGJhcih7XG5cdCAgICAgICAgICBwYXBlcjogdGhpcy5ncmFwaGljcy5wYXBlcixcblx0ICAgICAgICAgIGNoYXJ0OiB0aGlzLmNoYXJ0LFxuXHQgICAgICAgICAgc21hcnRMYWJlbDogdGhpcy5zbWFydExhYmVsLFxuXHQgICAgICAgICAgY2hhcnRDb250YWluZXI6IHRoaXMuZ3JhcGhpY3MuY29udGFpbmVyXG5cdCAgICAgICAgfSk7XG5cdCAgICAgICAgdG9vbGJhci5zZXRDb25maWcoe1xuXHQgICAgICAgICAgZmlsbDogJyNmZmYnLFxuXHQgICAgICAgICAgYm9yZGVyVGhpY2tuZXNzOiAwXG5cdCAgICAgICAgfSk7XG5cdCAgICAgICAgZnJvbURhdGVMYWJlbCA9IG5ldyB0aGlzLnRvb2xib3guTGFiZWwoJ1pvb206Jywge1xuXHQgICAgICAgICAgc21hcnRMYWJlbDogdGhpcy5zbWFydExhYmVsLFxuXHQgICAgICAgICAgcGFwZXI6IHRoaXMuZ3JhcGhpY3MucGFwZXJcblx0ICAgICAgICB9LCB7XG5cdCAgICAgICAgICB0ZXh0OiB7XG5cdCAgICAgICAgICAgIHN0eWxlOiB7XG5cdCAgICAgICAgICAgICAgJ2ZvbnQtZmFtaWx5JzogJ1wiTHVjaWRhIEdyYW5kZVwiLCBzYW5zLXNlcmlmJyxcblx0ICAgICAgICAgICAgICAnZm9udC1zaXplJzogJzEzJyxcblx0ICAgICAgICAgICAgICAnZmlsbCc6ICcjNjk2OTY5Jyxcblx0ICAgICAgICAgICAgICAnZm9udC13ZWlnaHQnOiAnYm9sZCdcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfSxcblx0ICAgICAgICAgIGNvbnRhaW5lcjoge1xuXHQgICAgICAgICAgICBoZWlnaHQ6IDIyXG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cdCAgICAgICAgZ3JvdXAuYWRkU3ltYm9sKGZyb21EYXRlTGFiZWwpO1xuXHQgICAgICAgIGFsbEJ1dHRvbiA9IG5ldyB0aGlzLnRvb2xib3guU3ltYm9sKCdBTEwnLCB0cnVlLCB7XG5cdCAgICAgICAgICBwYXBlcjogdGhpcy5ncmFwaGljcy5wYXBlcixcblx0ICAgICAgICAgIGNoYXJ0OiB0aGlzLmNoYXJ0LFxuXHQgICAgICAgICAgc21hcnRMYWJlbDogdGhpcy5zbWFydExhYmVsLFxuXHQgICAgICAgICAgY2hhcnRDb250YWluZXI6IHRoaXMuZ3JhcGhpY3MuY29udGFpbmVyXG5cdCAgICAgICAgfSwge1xuXHQgICAgICAgICAgZmlsbDogJyNmZmZmZmYnLFxuXHQgICAgICAgICAgbGFiZWxGaWxsOiAnIzY5Njk2OScsXG5cdCAgICAgICAgICBzeW1ib2xTdHJva2VXaWR0aDogJzInLFxuXHQgICAgICAgICAgc3Ryb2tlOiAnI2NlZDVkNCcsXG5cdCAgICAgICAgICBzdHJva2VXaWR0aDogJzEnLFxuXHQgICAgICAgICAgaG92ZXJGaWxsOiAnI2NlZDVkNCcsXG5cdCAgICAgICAgICBoZWlnaHQ6IDIyLFxuXHQgICAgICAgICAgcmFkaXVzOiAxLFxuXHQgICAgICAgICAgbWFyZ2luOiB7XG5cdCAgICAgICAgICAgIHJpZ2h0OiA1XG5cdCAgICAgICAgICB9LFxuXHQgICAgICAgICAgYnRuVGV4dFN0eWxlOiB7XG5cdCAgICAgICAgICAgICdmb250RmFtaWx5JzogJ1wiTHVjaWRhIEdyYW5kZVwiLCBzYW5zLXNlcmlmJyxcblx0ICAgICAgICAgICAgJ2ZvbnRTaXplJzogJzEzJyxcblx0ICAgICAgICAgICAgJ2ZpbGwnOiAnIzY5Njk2OScsXG5cdCAgICAgICAgICAgICdsaW5lLWhlaWdodCc6ICcxJyxcblx0ICAgICAgICAgICAgJ2xldHRlci1zcGFjaW5nJzogJy0wLjA0ZW0nXG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSkuYXR0YWNoRXZlbnRIYW5kbGVycyh7XG5cdCAgICAgICAgICBjbGljazogZnVuY3Rpb24gY2xpY2soKSB7XG5cdCAgICAgICAgICAgIHNlbGYuc2V0QWN0aXZlUGVyaW9kKHNlbGYuc3RhcnREYXRhc2V0LCBzZWxmLmVuZERhdGFzZXQpO1xuXHQgICAgICAgICAgICB0b29sYmFyLmRpc3Bvc2UoKTtcblx0ICAgICAgICAgICAgc2VsZi5jbGlja2VkSWQgPSAnQUxMJztcblx0ICAgICAgICAgICAgLy8gc2VsZi50b29sYmFycy5wb3AoKTtcblx0ICAgICAgICAgICAgLy8gc2VsZi50b29sYmFycy5wdXNoKHNlbGYuY3JlYXRlVG9vbGJhcigpKTtcblx0ICAgICAgICAgICAgLy8gc2VsZi5nZXRMb2dpY2FsU3BhY2UoKTtcblx0ICAgICAgICAgICAgLy8gc2VsZi5kcmF3KCk7XG5cdCAgICAgICAgICAgIC8vIHNlbGYuX3JlZi5yZUFsbG9jYXRlKHNlbGYucGFyZW50R3JvdXApO1xuXHQgICAgICAgICAgfSxcblx0ICAgICAgICAgIHRvb2x0ZXh0OiAnQUxMJ1xuXHQgICAgICAgIH0pO1xuXHRcblx0ICAgICAgICB1bmlncm91cC5hZGRTeW1ib2woYWxsQnV0dG9uKTtcblx0ICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgICBmb3IgKGogPSB0aGlzLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHNbaV0ubXVsdGlwbGllcnMubGVuZ3RoIC0gMTsgaiA+PSAwOyBqLS0pIHtcblx0ICAgICAgICAgICAgZGVkdWN0b3JBci5wdXNoKHNlbGYuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kc1tpXS5tdWx0aXBsaWVyc1tqXSAqIHNlbGYuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kc1tpXS5taWxsaXNlY29uZHMpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgY2FsY3VsYXRlZEJ1dHRvbnMgPSB7fTtcblx0ICAgICAgICBmb3IgKHZhciBrZXkgaW4gdGhpcy5jYWxjdWxhdGVkQnV0dG9uT2JqKSB7XG5cdCAgICAgICAgICB0aGlzLmNhbGN1bGF0ZWRCdXR0b25PYmpba2V5XS5oaWRlKCk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICB2YXIgX2xvb3AgPSBmdW5jdGlvbiBfbG9vcChfaSkge1xuXHQgICAgICAgICAgaWYgKF9pID09PSBzZWxmLnN0YXJ0UG9pbnRVbml0KSB7XG5cdCAgICAgICAgICAgIHN0YXJ0TXVsdGlwbGllciA9IHNlbGYuc3RhcnRQb2ludE11bHRpcGxpZXI7XG5cdCAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBzdGFydE11bHRpcGxpZXIgPSBzZWxmLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHNbX2ldLm11bHRpcGxpZXJzLmxlbmd0aCAtIDE7XG5cdCAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgdmFyIF9sb29wMyA9IGZ1bmN0aW9uIF9sb29wMyhfaikge1xuXHQgICAgICAgICAgICBtYXJnaW4gPSBfaSA9PT0gc2VsZi5ub0NhbGNCdXR0b25zICYmIF9qID09PSAwID8gNSA6IDA7XG5cdCAgICAgICAgICAgIHZhciBrZXlBYmIgPSBzZWxmLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHNbX2ldLm11bHRpcGxpZXJzW19qXSArIHNlbGYuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kc1tfaV0uYWJicmV2aWF0aW9uO1xuXHQgICAgICAgICAgICBpZiAoX3RoaXMuY2FsY3VsYXRlZEJ1dHRvbk9ialtrZXlBYmJdID09PSB1bmRlZmluZWQpIHtcblx0ICAgICAgICAgICAgICBjYWxjdWxhdGVkQnV0dG9ucyA9IG5ldyBfdGhpcy50b29sYm94LlN5bWJvbChrZXlBYmIsIHRydWUsIHtcblx0ICAgICAgICAgICAgICAgIHBhcGVyOiBfdGhpcy5ncmFwaGljcy5wYXBlcixcblx0ICAgICAgICAgICAgICAgIGNoYXJ0OiBfdGhpcy5jaGFydCxcblx0ICAgICAgICAgICAgICAgIHNtYXJ0TGFiZWw6IF90aGlzLnNtYXJ0TGFiZWwsXG5cdCAgICAgICAgICAgICAgICBjaGFydENvbnRhaW5lcjogX3RoaXMuZ3JhcGhpY3MuY29udGFpbmVyXG5cdCAgICAgICAgICAgICAgfSwge1xuXHQgICAgICAgICAgICAgICAgZmlsbDogJyNmZmZmZmYnLFxuXHQgICAgICAgICAgICAgICAgbGFiZWxGaWxsOiAnIzY5Njk2OScsXG5cdCAgICAgICAgICAgICAgICBzeW1ib2xTdHJva2VXaWR0aDogJzInLFxuXHQgICAgICAgICAgICAgICAgc3Ryb2tlOiAnI2NlZDVkNCcsXG5cdCAgICAgICAgICAgICAgICBzdHJva2VXaWR0aDogJzEnLFxuXHQgICAgICAgICAgICAgICAgaG92ZXJGaWxsOiAnI2NlZDVkNCcsXG5cdCAgICAgICAgICAgICAgICBoZWlnaHQ6IDIyLFxuXHQgICAgICAgICAgICAgICAgcmFkaXVzOiAxLFxuXHQgICAgICAgICAgICAgICAgbWFyZ2luOiB7XG5cdCAgICAgICAgICAgICAgICAgIHJpZ2h0OiAwXG5cdCAgICAgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICAgICAgYnRuVGV4dFN0eWxlOiB7XG5cdCAgICAgICAgICAgICAgICAgICdmb250RmFtaWx5JzogJ1wiTHVjaWRhIEdyYW5kZVwiLCBzYW5zLXNlcmlmJyxcblx0ICAgICAgICAgICAgICAgICAgJ2ZvbnRTaXplJzogJzEzJyxcblx0ICAgICAgICAgICAgICAgICAgJ2ZpbGwnOiAnIzY5Njk2OScsXG5cdCAgICAgICAgICAgICAgICAgICdsaW5lLWhlaWdodCc6ICcxJyxcblx0ICAgICAgICAgICAgICAgICAgJ2xldHRlci1zcGFjaW5nJzogJy0wLjA0ZW0nXG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgfSkuYXR0YWNoRXZlbnRIYW5kbGVycyh7XG5cdCAgICAgICAgICAgICAgICAnY2xpY2snOiBmdW5jdGlvbiBjbGljaygpIHtcblx0ICAgICAgICAgICAgICAgICAgZGVkdWN0b3IgPSBzZWxmLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHNbX2ldLm11bHRpcGxpZXJzW19qXSAqIHNlbGYuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kc1tfaV0ubWlsbGlzZWNvbmRzO1xuXHQgICAgICAgICAgICAgICAgICBzZWxmLmNsaWNrZWRJZCA9IHNlbGYuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kc1tfaV0ubXVsdGlwbGllcnNbX2pdICsgc2VsZi5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW19pXS5hYmJyZXZpYXRpb247XG5cdCAgICAgICAgICAgICAgICAgIHNlbGYuc2V0QWN0aXZlUGVyaW9kKGRlZHVjdG9yKTtcblx0ICAgICAgICAgICAgICAgICAgLy8gdG9vbGJhci5kaXNwb3NlKCk7XG5cdCAgICAgICAgICAgICAgICAgIC8vIHNlbGYudG9vbGJhcnMucG9wKCk7XG5cdCAgICAgICAgICAgICAgICAgIC8vIHNlbGYudG9vbGJhcnMucHVzaChzZWxmLmNyZWF0ZVRvb2xiYXIoKSk7XG5cdCAgICAgICAgICAgICAgICAgIC8vIHNlbGYuZ2V0TG9naWNhbFNwYWNlKCk7XG5cdCAgICAgICAgICAgICAgICAgIC8vIHNlbGYuZHJhdygpO1xuXHQgICAgICAgICAgICAgICAgICAvLyBzZWxmLl9yZWYucmVBbGxvY2F0ZShzZWxmLnBhcmVudEdyb3VwKTtcblx0ICAgICAgICAgICAgICAgICAgLy8gdGhpcy50b29sYmFyc1t0aGlzLnRvb2xiYXJzLmxlbmd0aCAtIDFdID0gdGhpcy5jcmVhdGVUb29sYmFyKCk7XG5cdCAgICAgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICAgICAgdG9vbHRleHQ6IHNlbGYuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kc1tfaV0ubXVsdGlwbGllcnNbX2pdICsgJyAnICsgc2VsZi5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW19pXS5kZXNjcmlwdGlvblxuXHQgICAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICAgIF90aGlzLmNhbGN1bGF0ZWRCdXR0b25PYmpba2V5QWJiXSA9IGNhbGN1bGF0ZWRCdXR0b25zO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIC8vIHVuaWdyb3VwLmFkZFN5bWJvbChjYWxjdWxhdGVkQnV0dG9uc1tpXSk7XG5cdCAgICAgICAgICAgIF90aGlzLmNhbGN1bGF0ZWRCdXR0b25PYmpba2V5QWJiXS5zaG93KCk7XG5cdCAgICAgICAgICAgIHVuaWdyb3VwLmFkZFN5bWJvbChfdGhpcy5jYWxjdWxhdGVkQnV0dG9uT2JqW2tleUFiYl0pO1xuXHQgICAgICAgICAgfTtcblx0XG5cdCAgICAgICAgICBmb3IgKHZhciBfaiA9IHN0YXJ0TXVsdGlwbGllcjsgX2ogPj0gMDsgX2otLSkge1xuXHQgICAgICAgICAgICBfbG9vcDMoX2opO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH07XG5cdFxuXHQgICAgICAgIGZvciAodmFyIF9pID0gc2VsZi5zdGFydFBvaW50VW5pdDsgX2kgPj0gMDsgX2ktLSkge1xuXHQgICAgICAgICAgX2xvb3AoX2kpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgLy8gZm9yIChsZXQgaSA9IHNlbGYuc3RhcnRQb2ludFVuaXQ7IGkgPj0gMDsgaS0tKSB7XG5cdCAgICAgICAgLy8gICBmb3IgKGxldCBqID0gc3RhcnRNdWx0aXBsaWVyOyBqID49IDA7IGotLSkge1xuXHQgICAgICAgIC8vICAgICBsZXQga2V5QWJiID0gc2VsZi5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW2ldLm11bHRpcGxpZXJzW2pdICsgc2VsZi5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW2ldLmFiYnJldmlhdGlvbjtcblx0ICAgICAgICAvLyAgICAgdW5pZ3JvdXAuYWRkU3ltYm9sKHRoaXMuY2FsY3VsYXRlZEJ1dHRvbk9ialtrZXlBYmJdKTtcblx0ICAgICAgICAvLyAgIH1cblx0ICAgICAgICAvLyB9XG5cdFxuXHQgICAgICAgIGNvbnRleHR1YWxCdXR0b25zID0gW107XG5cdFxuXHQgICAgICAgIHZhciBfbG9vcDIgPSBmdW5jdGlvbiBfbG9vcDIoX2kyKSB7XG5cdCAgICAgICAgICBtYXJnaW4gPSBfaTIgPT09IDAgPyA1IDogMDtcblx0ICAgICAgICAgIGNvbnRleHR1YWxCdXR0b25zW19pMl0gPSBuZXcgX3RoaXMudG9vbGJveC5TeW1ib2woX3RoaXMuc3RhbmRhcmRDb250ZXh1YWxQZXJpb2RzW19pMl0uYWJicmV2aWF0aW9uLCB0cnVlLCB7XG5cdCAgICAgICAgICAgIHBhcGVyOiBfdGhpcy5ncmFwaGljcy5wYXBlcixcblx0ICAgICAgICAgICAgY2hhcnQ6IF90aGlzLmNoYXJ0LFxuXHQgICAgICAgICAgICBzbWFydExhYmVsOiBfdGhpcy5zbWFydExhYmVsLFxuXHQgICAgICAgICAgICBjaGFydENvbnRhaW5lcjogX3RoaXMuZ3JhcGhpY3MuY29udGFpbmVyXG5cdCAgICAgICAgICB9LCB7XG5cdCAgICAgICAgICAgIGZpbGw6ICcjZmZmZmZmJyxcblx0ICAgICAgICAgICAgbGFiZWxGaWxsOiAnIzY5Njk2OScsXG5cdCAgICAgICAgICAgIHN5bWJvbFN0cm9rZVdpZHRoOiAnMicsXG5cdCAgICAgICAgICAgIHN0cm9rZTogJyNjZWQ1ZDQnLFxuXHQgICAgICAgICAgICBzdHJva2VXaWR0aDogJzEnLFxuXHQgICAgICAgICAgICBoZWlnaHQ6IDIyLFxuXHQgICAgICAgICAgICBob3ZlckZpbGw6ICcjY2VkNWQ0Jyxcblx0ICAgICAgICAgICAgcmFkaXVzOiAxLFxuXHQgICAgICAgICAgICBtYXJnaW46IHtcblx0ICAgICAgICAgICAgICByaWdodDogMCxcblx0ICAgICAgICAgICAgICBsZWZ0OiBtYXJnaW5cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgYnRuVGV4dFN0eWxlOiB7XG5cdCAgICAgICAgICAgICAgJ2ZvbnRGYW1pbHknOiAnXCJMdWNpZGEgR3JhbmRlXCIsIHNhbnMtc2VyaWYnLFxuXHQgICAgICAgICAgICAgICdmb250U2l6ZSc6ICcxMycsXG5cdCAgICAgICAgICAgICAgJ2ZpbGwnOiAnIzY5Njk2OScsXG5cdCAgICAgICAgICAgICAgJ2xpbmUtaGVpZ2h0JzogJzEnLFxuXHQgICAgICAgICAgICAgICdsZXR0ZXItc3BhY2luZyc6ICctMC4wNGVtJ1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9KS5hdHRhY2hFdmVudEhhbmRsZXJzKHtcblx0ICAgICAgICAgICAgJ2NsaWNrJzogZnVuY3Rpb24gY2xpY2soKSB7XG5cdCAgICAgICAgICAgICAgc2VsZi5zZXRBY3RpdmVQZXJpb2Qoc2VsZi5zdGFuZGFyZENvbnRleHVhbFBlcmlvZHNbX2kyXS5kYXRlU3RhcnQsIHNlbGYuc3RhbmRhcmRDb250ZXh1YWxQZXJpb2RzW19pMl0uZGF0ZUVuZCk7XG5cdCAgICAgICAgICAgICAgc2VsZi5jbGlja2VkSWQgPSBzZWxmLnN0YW5kYXJkQ29udGV4dWFsUGVyaW9kc1tfaTJdLmFiYnJldmlhdGlvbjtcblx0ICAgICAgICAgICAgICAvLyB0b29sYmFyLmRpc3Bvc2UoKTtcblx0ICAgICAgICAgICAgICAvLyBzZWxmLnRvb2xiYXJzLnBvcCgpO1xuXHQgICAgICAgICAgICAgIC8vIHNlbGYudG9vbGJhcnMucHVzaChzZWxmLmNyZWF0ZVRvb2xiYXIoKSk7XG5cdCAgICAgICAgICAgICAgLy8gc2VsZi5nZXRMb2dpY2FsU3BhY2UoKTtcblx0ICAgICAgICAgICAgICAvLyBzZWxmLmRyYXcoKTtcblx0ICAgICAgICAgICAgICAvLyBzZWxmLl9yZWYucmVBbGxvY2F0ZShzZWxmLnBhcmVudEdyb3VwKTtcblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgdG9vbHRleHQ6IF90aGlzLnN0YW5kYXJkQ29udGV4dWFsUGVyaW9kc1tfaTJdLmRlc2NyaXB0aW9uXG5cdCAgICAgICAgICB9KTtcblx0ICAgICAgICAgIHVuaWdyb3VwLmFkZFN5bWJvbChjb250ZXh0dWFsQnV0dG9uc1tfaTJdKTtcblx0ICAgICAgICB9O1xuXHRcblx0ICAgICAgICBmb3IgKHZhciBfaTIgPSAwOyBfaTIgPCB0aGlzLnN0YW5kYXJkQ29udGV4dWFsUGVyaW9kcy5sZW5ndGg7IF9pMisrKSB7XG5cdCAgICAgICAgICBfbG9vcDIoX2kyKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHRoaXMuU3ltYm9sU3RvcmUucmVnaXN0ZXIoJ3RleHRCb3hJY29uJywgZnVuY3Rpb24gKHgsIHksIHJhZCwgdywgaCwgcGFkWCwgcGFkWSkge1xuXHQgICAgICAgICAgdmFyIHgxID0geCAtIHcgLyAyICsgcGFkWCAvIDIsXG5cdCAgICAgICAgICAgICAgeDIgPSB4ICsgdyAvIDIgLSBwYWRYIC8gMixcblx0ICAgICAgICAgICAgICB5MSA9IHkgLSBoIC8gMiArIHBhZFkgLyAyLFxuXHQgICAgICAgICAgICAgIHkyID0geSArIGggLyAyIC0gcGFkWSAvIDI7XG5cdFxuXHQgICAgICAgICAgcmV0dXJuIFsnTScsIHgxLCB5MSwgJ0wnLCB4MiwgeTEsICdMJywgeDIsIHkyLCAnTCcsIHgxLCB5MiwgJ1onXTtcblx0ICAgICAgICB9KTtcblx0XG5cdCAgICAgICAgdG9vbGJhci5hZGRDb21wb25lbnQoZ3JvdXApO1xuXHQgICAgICAgIHRvb2xiYXIuYWRkQ29tcG9uZW50KHVuaWdyb3VwKTtcblx0ICAgICAgICB0aGlzLnRvb2xiYXIgPSB0b29sYmFyO1xuXHQgICAgICAgIHJldHVybiB0b29sYmFyO1xuXHQgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgIGtleTogJ2dldExvZ2ljYWxTcGFjZScsXG5cdCAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRMb2dpY2FsU3BhY2UoKSB7XG5cdCAgICAgICAgdmFyIGF2YWlsYWJsZVdpZHRoID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB0aGlzLl9wV2lkdGg7XG5cdCAgICAgICAgdmFyIGF2YWlsYWJsZUhlaWdodCA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogdGhpcy5fcEhlaWdodDtcblx0XG5cdCAgICAgICAgLy8gYXZhaWxhYmxlV2lkdGggLz0gMjtcblx0ICAgICAgICB2YXIgbG9naWNhbFNwYWNlLFxuXHQgICAgICAgICAgICB3aWR0aCA9IDQyMCxcblx0ICAgICAgICAgICAgLy8gd2lkdGggaGFyZGNvZGVkOyBUT0RPOiBtYWtlIGl0IGR5bmFtaWNcblx0ICAgICAgICBoZWlnaHQgPSAwLFxuXHQgICAgICAgICAgICBpLFxuXHQgICAgICAgICAgICBsbjtcblx0XG5cdCAgICAgICAgZm9yIChpID0gMCwgbG4gPSB0aGlzLnRvb2xiYXJzLmxlbmd0aDsgaSA8IGxuOyBpKyspIHtcblx0ICAgICAgICAgIGxvZ2ljYWxTcGFjZSA9IHRoaXMudG9vbGJhcnNbaV0uZ2V0TG9naWNhbFNwYWNlKGF2YWlsYWJsZVdpZHRoLCBhdmFpbGFibGVIZWlnaHQpO1xuXHQgICAgICAgICAgLy8gd2lkdGggPSBNYXRoLm1heChsb2dpY2FsU3BhY2Uud2lkdGgsIHdpZHRoKTtcblx0ICAgICAgICAgIGhlaWdodCArPSBsb2dpY2FsU3BhY2UuaGVpZ2h0O1xuXHQgICAgICAgICAgdGhpcy50b29sYmFyc1tpXS53aWR0aCA9IGxvZ2ljYWxTcGFjZS53aWR0aDtcblx0ICAgICAgICAgIHRoaXMudG9vbGJhcnNbaV0uaGVpZ2h0ID0gbG9naWNhbFNwYWNlLmhlaWdodDtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaGVpZ2h0ICs9IHRoaXMucGFkZGluZztcblx0ICAgICAgICByZXR1cm4ge1xuXHQgICAgICAgICAgd2lkdGg6IHdpZHRoLFxuXHQgICAgICAgICAgaGVpZ2h0OiBoZWlnaHRcblx0ICAgICAgICB9O1xuXHQgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgIGtleTogJ2dldERlZmF1bHRHcm91cCcsXG5cdCAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXREZWZhdWx0R3JvdXAoKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMucGFyZW50R3JvdXA7XG5cdCAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAga2V5OiAncGxhY2VJbkNhbnZhcycsXG5cdCAgICAgIHZhbHVlOiBmdW5jdGlvbiBwbGFjZUluQ2FudmFzKCkge1xuXHQgICAgICAgIHZhciBfc2VsZiA9IHRoaXM7XG5cdCAgICAgICAgX3NlbGYucGFkZGluZyA9IDU7XG5cdCAgICAgICAgX3NlbGYuc3BhY2VNYW5hZ2VySW5zdGFuY2UuYWRkKFt7XG5cdCAgICAgICAgICBuYW1lOiBmdW5jdGlvbiBuYW1lKCkge1xuXHQgICAgICAgICAgICByZXR1cm4gJ3N0YW5kYXJkLXBlcmlvZC1zZWxlY3Rvci1leHQnO1xuXHQgICAgICAgICAgfSxcblx0ICAgICAgICAgIHJlZjogZnVuY3Rpb24gcmVmKG9iaikge1xuXHQgICAgICAgICAgICByZXR1cm4gb2JqWycwJ107XG5cdCAgICAgICAgICB9LFxuXHQgICAgICAgICAgc2VsZjogZnVuY3Rpb24gc2VsZigpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIF9zZWxmO1xuXHQgICAgICAgICAgfSxcblx0ICAgICAgICAgIHByaW9yaXR5OiBmdW5jdGlvbiBwcmlvcml0eSgpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIDI7XG5cdCAgICAgICAgICB9LFxuXHQgICAgICAgICAgbGF5b3V0OiBmdW5jdGlvbiBsYXlvdXQob2JqKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBvYmouaW5saW5lO1xuXHQgICAgICAgICAgfSxcblx0ICAgICAgICAgIG9yaWVudGF0aW9uOiBbe1xuXHQgICAgICAgICAgICB0eXBlOiBmdW5jdGlvbiB0eXBlKG9iaikge1xuXHQgICAgICAgICAgICAgIHJldHVybiBvYmouaG9yaXpvbnRhbDtcblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgcG9zaXRpb246IFt7XG5cdCAgICAgICAgICAgICAgdHlwZTogZnVuY3Rpb24gdHlwZShvYmopIHtcblx0ICAgICAgICAgICAgICAgIHJldHVybiBvYmoudG9wO1xuXHQgICAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgICAgYWxpZ25tZW50OiBbe1xuXHQgICAgICAgICAgICAgICAgdHlwZTogZnVuY3Rpb24gdHlwZShvYmopIHtcblx0ICAgICAgICAgICAgICAgICAgcmV0dXJuIG9iai5sZWZ0O1xuXHQgICAgICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgICAgIGRpbWVuc2lvbnM6IFtmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgICAgIHZhciBwYXJlbnQgPSB0aGlzLmdldFBhcmVudENvbXBvbmVudEdyb3VwKCk7XG5cdCAgICAgICAgICAgICAgICAgIF9zZWxmLl9yZWYgPSB0aGlzO1xuXHQgICAgICAgICAgICAgICAgICByZXR1cm4gX3NlbGYuZ2V0TG9naWNhbFNwYWNlKF9zZWxmLl9wV2lkdGggPSBwYXJlbnQuZ2V0V2lkdGgoKSwgX3NlbGYuX3BIZWlnaHQgPSBwYXJlbnQuZ2V0SGVpZ2h0KCkpO1xuXHQgICAgICAgICAgICAgICAgfV1cblx0ICAgICAgICAgICAgICB9XVxuXHQgICAgICAgICAgICB9XVxuXHQgICAgICAgICAgfV1cblx0ICAgICAgICB9XSk7XG5cdCAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAga2V5OiAnc2V0RHJhd2luZ0NvbmZpZ3VyYXRpb24nLFxuXHQgICAgICB2YWx1ZTogZnVuY3Rpb24gc2V0RHJhd2luZ0NvbmZpZ3VyYXRpb24oeCwgeSwgd2lkdGgsIGhlaWdodCwgZ3JvdXApIHtcblx0ICAgICAgICB2YXIgbWVzID0gdGhpcy5tZWFzdXJlbWVudDtcblx0ICAgICAgICBtZXMueCA9IHg7XG5cdCAgICAgICAgbWVzLnkgPSB5O1xuXHQgICAgICAgIG1lcy53aWR0aCA9IHdpZHRoO1xuXHQgICAgICAgIG1lcy5oZWlnaHQgPSBoZWlnaHQ7XG5cdFxuXHQgICAgICAgIHRoaXMucGFyZW50R3JvdXAgPSBncm91cDtcblx0XG5cdCAgICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAga2V5OiAnZHJhdycsXG5cdCAgICAgIHZhbHVlOiBmdW5jdGlvbiBkcmF3KHgsIHksIHdpZHRoLCBoZWlnaHQsIGdyb3VwKSB7XG5cdCAgICAgICAgdmFyIG1lYXN1cmVtZW50ID0gdGhpcy5tZWFzdXJlbWVudCxcblx0ICAgICAgICAgICAgdG9vbGJhcnMgPSB0aGlzLnRvb2xiYXJzLFxuXHQgICAgICAgICAgICBzZWxmID0gdGhpcyxcblx0ICAgICAgICAgICAgbG4sXG5cdCAgICAgICAgICAgIGksXG5cdCAgICAgICAgICAgIHRvb2xiYXIsXG5cdCAgICAgICAgICAgIGJvdW5kRWxlbWVudCxcblx0ICAgICAgICAgICAgYkJveCxcblx0ICAgICAgICAgICAgeDEsXG5cdCAgICAgICAgICAgIHgyLFxuXHQgICAgICAgICAgICB5Mixcblx0ICAgICAgICAgICAgc2VsZWN0TGluZSxcblx0ICAgICAgICAgICAgbW9kZWwgPSB0aGlzLmdsb2JhbFJlYWN0aXZlTW9kZWw7XG5cdFxuXHQgICAgICAgIHRoaXMuZmxhZyA9IHRydWU7XG5cdCAgICAgICAgc2VsZWN0TGluZSA9IHRoaXMuc2F2ZVNlbGVjdExpbmUgfHwgdGhpcy5ncmFwaGljcy5wYXBlci5wYXRoKHtcblx0ICAgICAgICAgICdzdHJva2UnOiAnI2M5NWE1YScsXG5cdCAgICAgICAgICAnc3Ryb2tlLXdpZHRoJzogJzJweCdcblx0ICAgICAgICB9KS50b0Zyb250KCk7XG5cdCAgICAgICAgeCA9IHggPT09IHVuZGVmaW5lZCA/IG1lYXN1cmVtZW50LnggOiB4O1xuXHQgICAgICAgIHkgPSB5ID09PSB1bmRlZmluZWQgPyBtZWFzdXJlbWVudC55IDogeTtcblx0ICAgICAgICB3aWR0aCA9IHdpZHRoID09PSB1bmRlZmluZWQgPyBtZWFzdXJlbWVudC53aWR0aCA6IHdpZHRoO1xuXHQgICAgICAgIGhlaWdodCA9IGhlaWdodCA9PT0gdW5kZWZpbmVkID8gbWVhc3VyZW1lbnQuaGVpZ2h0IDogaGVpZ2h0O1xuXHQgICAgICAgIGdyb3VwID0gZ3JvdXAgPT09IHVuZGVmaW5lZCA/IHRoaXMucGFyZW50R3JvdXAgOiBncm91cDtcblx0ICAgICAgICBpZiAod2lkdGggJiYgaGVpZ2h0KSB7XG5cdCAgICAgICAgICBmb3IgKGkgPSAwLCBsbiA9IHRvb2xiYXJzLmxlbmd0aDsgaSA8IGxuOyBpKyspIHtcblx0ICAgICAgICAgICAgdG9vbGJhciA9IHRvb2xiYXJzW2ldO1xuXHQgICAgICAgICAgICB0b29sYmFyLmRyYXcoeCwgeSwgZ3JvdXApO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLnNhdmVTZWxlY3RMaW5lID0gc2VsZWN0TGluZTtcblx0ICAgICAgICBmb3IgKHZhciBfaTMgPSAwLCBpaSA9IHRvb2xiYXJzWzBdLmNvbXBvbmVudEdyb3Vwc1sxXS5zeW1ib2xMaXN0OyBfaTMgPCBpaS5sZW5ndGg7IF9pMysrKSB7XG5cdCAgICAgICAgICBpZiAoaWlbX2kzXS5zeW1ib2wgPT09IHRoaXMuY2xpY2tlZElkKSB7XG5cdCAgICAgICAgICAgIGJvdW5kRWxlbWVudCA9IGlpW19pM10uZ2V0Qm91bmRFbGVtZW50KCk7XG5cdCAgICAgICAgICAgIGJCb3ggPSBib3VuZEVsZW1lbnQuZ2V0QkJveCgpO1xuXHQgICAgICAgICAgICB4MSA9IGJCb3gueDtcblx0ICAgICAgICAgICAgeDIgPSBiQm94LngyO1xuXHQgICAgICAgICAgICB5MiA9IGJCb3gueTI7XG5cdFxuXHQgICAgICAgICAgICBzZWxlY3RMaW5lLmF0dHIoe1xuXHQgICAgICAgICAgICAgIHBhdGg6IFsnTScsIHgxIC0gMC41LCB5MiAtIDAuNSwgJ0wnLCB4MiArIDAuNSwgeTIgLSAwLjVdXG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfV0pO1xuXHRcblx0ICAgIHJldHVybiBTdGFuZGFyZFBlcmlvZFNlbGVjdG9yO1xuXHQgIH0oKTtcblx0XG5cdCAgcmV0dXJuIFN0YW5kYXJkUGVyaW9kU2VsZWN0b3I7XG5cdH07XG5cbi8qKiovIH1cbi8qKioqKiovIF0pO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBzdGFuZGFyZC1wZXJpb2Qtc2VsZWN0b3ItZXM1Lm1pbi5qcyIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuXG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRleHBvcnRzOiB7fSxcbiBcdFx0XHRpZDogbW9kdWxlSWQsXG4gXHRcdFx0bG9hZGVkOiBmYWxzZVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2svYm9vdHN0cmFwIDk4M2EzMmFjNWI1MGJkNzczNzljIiwiJ3VzZSBzdHJpY3QnO1xuY29uc3QgU3RhbmRhcmRQZXJpb2RTZWxlY3RvciA9IHJlcXVpcmUoJy4vc3RhbmRhcmQtcGVyaW9kLXNlbGVjdG9yJyk7XG5cbndpbmRvdy5zdFBTID0gbmV3IFN0YW5kYXJkUGVyaW9kU2VsZWN0b3IoKTtcblxuOyhmdW5jdGlvbiAoZW52LCBmYWN0b3J5KSB7XG4gIGlmICh0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0JyAmJiBtb2R1bGUuZXhwb3J0cykge1xuICAgIG1vZHVsZS5leHBvcnRzID0gZW52LmRvY3VtZW50XG4gICAgICAgPyBmYWN0b3J5KGVudikgOiBmdW5jdGlvbiAod2luKSB7XG4gICAgICAgICBpZiAoIXdpbi5kb2N1bWVudCkge1xuICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1dpbmRvdyB3aXRoIGRvY3VtZW50IG5vdCBwcmVzZW50Jyk7XG4gICAgICAgICB9XG4gICAgICAgICByZXR1cm4gZmFjdG9yeSh3aW4sIHRydWUpO1xuICAgICAgIH07XG4gIH0gZWxzZSB7XG4gICAgZW52LlN0YW5kYXJkUGVyaW9kU2VsZWN0b3IgPSBmYWN0b3J5KGVudiwgdHJ1ZSk7XG4gIH1cbn0pKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2luZG93IDogdGhpcywgZnVuY3Rpb24gKF93aW5kb3csIHdpbmRvd0V4aXN0cykge1xuICB2YXIgRkMgPSBfd2luZG93LkZ1c2lvbkNoYXJ0cztcbiAgRkMucmVnaXN0ZXIoJ2V4dGVuc2lvbicsIFsncHJpdmF0ZScsICdTdGFuZGFyZFBlcmlvZFNlbGVjdG9yJywgZnVuY3Rpb24gKCkge1xuICAgIEZDLnJlZ2lzdGVyQ29tcG9uZW50KCdleHRlbnNpb25zJywgJ1N0YW5kYXJkUGVyaW9kU2VsZWN0b3InLCBTdGFuZGFyZFBlcmlvZFNlbGVjdG9yKHtGdXNpb25DaGFydHM6IEZDfSkpO1xuICB9XSk7XG59KTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9pbmRleC5qcyIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24obW9kdWxlKSB7XG5cdGlmKCFtb2R1bGUud2VicGFja1BvbHlmaWxsKSB7XG5cdFx0bW9kdWxlLmRlcHJlY2F0ZSA9IGZ1bmN0aW9uKCkge307XG5cdFx0bW9kdWxlLnBhdGhzID0gW107XG5cdFx0Ly8gbW9kdWxlLnBhcmVudCA9IHVuZGVmaW5lZCBieSBkZWZhdWx0XG5cdFx0bW9kdWxlLmNoaWxkcmVuID0gW107XG5cdFx0bW9kdWxlLndlYnBhY2tQb2x5ZmlsbCA9IDE7XG5cdH1cblx0cmV0dXJuIG1vZHVsZTtcbn1cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vICh3ZWJwYWNrKS9idWlsZGluL21vZHVsZS5qc1xuLy8gbW9kdWxlIGlkID0gMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIndXNlIHN0cmljdCc7XG5cbi8qKlxuICogQ2xhc3MgZGVmaW5pdGlvbiBvZiBTdGFuZGFyZFBlcmlvZFNlbGVjdG9yXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoZGVwKSB7XG4gIGNsYXNzIFN0YW5kYXJkUGVyaW9kU2VsZWN0b3Ige1xuICAgIGNvbnN0cnVjdG9yICgpIHtcbiAgICAgIC8qKlxuICAgICAgICogQHByaXZhdGVcbiAgICAgICAqL1xuICAgICAgdGhpcy5yYXRpbyA9IDg7XG4gICAgICB0aGlzLnRvb2xib3ggPSBGdXNpb25DaGFydHMuZ2V0Q29tcG9uZW50KCdhcGknLCAndG9vbGJveCcpO1xuICAgICAgdGhpcy5Ib3Jpem9udGFsVG9vbGJhciA9IHRoaXMudG9vbGJveC5Ib3Jpem9udGFsVG9vbGJhcjtcbiAgICAgIHRoaXMuQ29tcG9uZW50R3JvdXAgPSB0aGlzLnRvb2xib3guQ29tcG9uZW50R3JvdXA7XG4gICAgICB0aGlzLlN5bWJvbFN0b3JlID0gdGhpcy50b29sYm94LlN5bWJvbFN0b3JlO1xuICAgICAgdGhpcy5hbGwgPSAxO1xuICAgICAgdGhpcy5jYWxjdWxhdGVkUGVyaW9kcyA9IFtdO1xuICAgICAgdGhpcy5zdGFydERhdGFzZXQgPSAwO1xuICAgICAgLy8gdGhpcy5lbmREYXRhc2V0ID0gdGhpcy5nbG9iYWxSZWFjdGl2ZU1vZGVsLm1vZGVsWyd4LWF4aXMtYWJzb2x1dGUtcmFuZ2UtZW5kJ107XG4gICAgICB0aGlzLnN0YXJ0QWN0aXZlV2luZG93ID0gMDtcbiAgICAgIHRoaXMuZW5kQWN0aXZlV2luZG93ID0gMTtcbiAgICAgIHRoaXMuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kcyA9IFtdO1xuICAgICAgdGhpcy5zdGFuZGFyZENvbnRleHVhbFBlcmlvZHMgPSBbXTtcbiAgICAgIHRoaXMuc3RhcnRQb2ludFVuaXQgPSAwO1xuICAgICAgdGhpcy5zdGFydFBvaW50TXVsdGlwbGllciA9IDA7XG4gICAgICB0aGlzLmNsaWNrZWRJZCA9ICdBTEwnO1xuICAgICAgdGhpcy5ub0NhbGNCdXR0b25zID0gMDtcbiAgICAgIHRoaXMuY2FsY3VsYXRlZEJ1dHRvbk9iaiA9IHt9O1xuICAgICAgdGhpcy50ZEJ1dHRvbnMgPSBbXG4gICAgICAgIHtcbiAgICAgICAgICAnbmFtZSc6ICdZVEQnLFxuICAgICAgICAgICdhYmJyZXZpYXRpb24nOiAnWVREJyxcbiAgICAgICAgICAncGFyZW50JzogJ3llYXInLFxuICAgICAgICAgICdtaWxsaXNlY29uZHMnOiAzMTEwNDAwMDAwMCxcbiAgICAgICAgICAnZGVzY3JpcHRpb24nOiAnWWVhciB0byBEYXRlJ1xuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgJ25hbWUnOiAnUVREJyxcbiAgICAgICAgICAnYWJicmV2aWF0aW9uJzogJ1FURCcsXG4gICAgICAgICAgJ3BhcmVudCc6ICdtb250aCcsXG4gICAgICAgICAgJ211bHRpcGxpZXInOiAzLFxuICAgICAgICAgICdtaWxsaXNlY29uZHMnOiA3Nzc2MDAwMDAwLFxuICAgICAgICAgICdkZXNjcmlwdGlvbic6ICdRdWFydGVyIHRvIERhdGUnXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAnbmFtZSc6ICdNVEQnLFxuICAgICAgICAgICdhYmJyZXZpYXRpb24nOiAnTVREJyxcbiAgICAgICAgICAncGFyZW50JzogJ21vbnRoJyxcbiAgICAgICAgICAnbWlsbGlzZWNvbmRzJzogMjU5MjAwMDAwMCxcbiAgICAgICAgICAnZGVzY3JpcHRpb24nOiAnTW9udGggdG8gRGF0ZSdcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICduYW1lJzogJ1dURCcsXG4gICAgICAgICAgJ2FiYnJldmlhdGlvbic6ICdXVEQnLFxuICAgICAgICAgICdwYXJlbnQnOiAnZGF5JyxcbiAgICAgICAgICAnbXVsdGlwbGllcic6IDcsXG4gICAgICAgICAgJ21pbGxpc2Vjb25kcyc6IDYwNDgwMDAwMCxcbiAgICAgICAgICAnZGVzY3JpcHRpb24nOiAnV2VlayB0byBEYXRlJ1xuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgJ25hbWUnOiAnWScsXG4gICAgICAgICAgJ2FiYnJldmlhdGlvbic6ICdZJyxcbiAgICAgICAgICAncGFyZW50JzogJ2RheScsXG4gICAgICAgICAgJ21pbGxpc2Vjb25kcyc6IDg2NDAwMDAwLFxuICAgICAgICAgICdkZXNjcmlwdGlvbic6ICdZZXN0ZXJkYXknXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAnbmFtZSc6ICdUJyxcbiAgICAgICAgICAnYWJicmV2aWF0aW9uJzogJ1QnLFxuICAgICAgICAgICdwYXJlbnQnOiAnZGF5JyxcbiAgICAgICAgICAnbWlsbGlzZWNvbmRzJzogODY0MDAwMDAsXG4gICAgICAgICAgJ2Rlc2NyaXB0aW9uJzogJ1RvZGF5J1xuICAgICAgICB9XG4gICAgICBdO1xuICAgICAgdGhpcy5jb25maWcgPSB7XG4gICAgICAgIGFuY2hvclBvc2l0aW9uczogJ3JpZ2h0JyxcbiAgICAgICAgYWxsOiAnMScsXG4gICAgICAgIGNvbnRleHR1YWw6ICcxJyxcbiAgICAgICAgY2FsY3VsYXRlZDogJzEnLFxuICAgICAgICB0ZXJ0aWFyeVRpbWVQZXJpb2RzOiB7fVxuICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBIGZ1bmN0aW9uIHRvIGdlbmVyYXRlIHRoZSBjYWxjdWxhdGVkIGJ1dHRvbnMgdXNpbmdcbiAgICAgKiB0aGUgYWN0aXZlIHJhbmdlIGFuZCB0aGUgbG9jYXRpb24gb2YgdGhlIGFjdGl2ZSByYW5nZVxuICAgICAqL1xuICAgIGdlbmVyYXRlQ2FsY3VsYXRlZEJ1dHRvbnMgKCkge1xuICAgICAgdmFyIHRhcmdldEJsb2NrID0gdGhpcy5lbmRBY3RpdmVXaW5kb3cgLSB0aGlzLnN0YXJ0RGF0YXNldCxcbiAgICAgICAgaSA9IDAsXG4gICAgICAgIGogPSAwLFxuICAgICAgICBhY3RpdmVXaW5kb3cgPSB0aGlzLmVuZEFjdGl2ZVdpbmRvdyAtIHRoaXMuc3RhcnRBY3RpdmVXaW5kb3csXG4gICAgICAgIGNvdW50ID0gMDtcbiAgICAgIHRoaXMuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kcyA9IFtdO1xuICAgICAgZm9yIChpID0gMDsgaSA8IHRoaXMudGltZVBlcmlvZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgLy8gY2hlY2tpbmcgd2hldGhlciB0aGUgdW5pdCBpcyBhcHBsaWNhYmxlIGZvciB0aGUgY3VycmVudCB0YXJnZXQgYmxvY2tcbiAgICAgICAgaWYgKHRhcmdldEJsb2NrIC8gdGhpcy50aW1lUGVyaW9kc1tpXS5pbnRlcnZhbCA+PSAxKSB7XG4gICAgICAgICAgLy8gY2hlY2tpbmcgd2hldGhlciB0aGUgdW5pdCBpcyBvZiB0aGUgaGlnaGVyIG9yZGVyIGFuZCBvbmx5IG11bHRpcGxpZXIgMSBpcyBhcHBsaWNhYmxlXG4gICAgICAgICAgaWYgKE1hdGguZmxvb3IoKGFjdGl2ZVdpbmRvdykgLyB0aGlzLnRpbWVQZXJpb2RzW2ldLmludGVydmFsKSA8IDEpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kcy5wdXNoKHtcbiAgICAgICAgICAgICAgJ2FiYnJldmlhdGlvbic6IHRoaXMudGltZVBlcmlvZHNbaV0uYWJicmV2aWF0aW9uLnNpbmdsZSxcbiAgICAgICAgICAgICAgJ2Rlc2NyaXB0aW9uJzogdGhpcy50aW1lUGVyaW9kc1tpXS5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgICAgJ21pbGxpc2Vjb25kcyc6IHRoaXMudGltZVBlcmlvZHNbaV0uaW50ZXJ2YWwsXG4gICAgICAgICAgICAgICduYW1lJzogdGhpcy50aW1lUGVyaW9kc1tpXS5uYW1lLFxuICAgICAgICAgICAgICAnbXVsdGlwbGllcnMnOiBbMV1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7IC8vIGlmIHRoZSB1bml0IGlzIG9mIHRoZSBvcmRlciBvZiB0aGUgdGFyZ2V0IGJsb2NrIGFuZCBjYWxjdWxhdGluZyB0aGUgbXVsdGlwbGllcnNcbiAgICAgICAgICAgIHRoaXMuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kcy5wdXNoKHtcbiAgICAgICAgICAgICAgJ2FiYnJldmlhdGlvbic6IHRoaXMudGltZVBlcmlvZHNbaV0uYWJicmV2aWF0aW9uLnNpbmdsZSxcbiAgICAgICAgICAgICAgJ2Rlc2NyaXB0aW9uJzogdGhpcy50aW1lUGVyaW9kc1tpXS5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgICAgJ21pbGxpc2Vjb25kcyc6IHRoaXMudGltZVBlcmlvZHNbaV0uaW50ZXJ2YWwsXG4gICAgICAgICAgICAgICduYW1lJzogdGhpcy50aW1lUGVyaW9kc1tpXS5uYW1lLFxuICAgICAgICAgICAgICAnbXVsdGlwbGllcnMnOiBbXVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyBjYWxjdWxhdGluZyBhbmQgcG9wdWxhdGluZyB0aGUgYXBwbGljYWJsZSBtdWx0cGxpZXJzIG9mIGVhY2ggdW5pdFxuICAgICAgICAgICAgZm9yIChqID0gMDsgaiA8IHRoaXMudGltZVBlcmlvZHNbaV0ubXVsdGlwbGllcnMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgaWYgKGFjdGl2ZVdpbmRvdyAvIHRoaXMucmF0aW8gPCB0aGlzLnRpbWVQZXJpb2RzW2ldLm11bHRpcGxpZXJzW2pdICogdGhpcy50aW1lUGVyaW9kc1tpXS5pbnRlcnZhbCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kc1t0aGlzLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHMubGVuZ3RoIC0gMV0ubXVsdGlwbGllcnMucHVzaChcbiAgICAgICAgICAgICAgICAgIHRoaXMudGltZVBlcmlvZHNbaV0ubXVsdGlwbGllcnNbal1cbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRoaXMubm9DYWxjQnV0dG9ucyA9IEluZmluaXR5O1xuICAgICAgZm9yIChpID0gMDsgaSA8IHRoaXMuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBmb3IgKGogPSAwOyBqIDwgdGhpcy5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW2ldLm11bHRpcGxpZXJzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgKytjb3VudDtcbiAgICAgICAgICBpZiAodGhpcy5ub0NhbGNCdXR0b25zID4gaSkge1xuICAgICAgICAgICAgdGhpcy5ub0NhbGNCdXR0b25zID0gaTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGNvdW50IDw9IDQpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhcnRQb2ludE11bHRpcGxpZXIgPSBqO1xuICAgICAgICAgICAgdGhpcy5zdGFydFBvaW50VW5pdCA9IGk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIHRoaXMuZHJhd0J1dHRvbnNDYWxjdWxhdGVkKHRoaXMuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kcyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQSBmdW5jdGlvbiB0byBnZW5lcmF0ZSB0aGUgY29udGV4dHVhbCBidXR0b25zIHVzaW5nXG4gICAgICogdGhlIGVuZCBwb2ludCBvZiB0aGUgdGltZS1zY2FsZVxuICAgICAqL1xuICAgIGdlbmVyYXRlQ29udGV4dHVhbEJ1dHRvbnMgKCkge1xuICAgICAgLy8gZ2VuZXJhdGluZyBhbiBhcnJheSB3aXRoIGFwcGxpY2FibGUgVEQgYnV0dG9uc1xuICAgICAgdmFyIGJ1dHRvbnMgPSBbXSxcbiAgICAgICAgaSA9IDAsXG4gICAgICAgIGVuZFN0YW1wID0gdGhpcy5nbG9iYWxSZWFjdGl2ZU1vZGVsLm1vZGVsWyd4LWF4aXMtYWJzb2x1dGUtcmFuZ2UtZW5kJ10sXG4gICAgICAgIGRhdGVTdGFydCA9IGVuZFN0YW1wIC0gMixcbiAgICAgICAgZGF0ZUVuZCA9IGVuZFN0YW1wLFxuICAgICAgICByZWxhdGl2ZVREQnV0dG9uID0ge307XG4gICAgICBmb3IgKDsgaSA8IHRoaXMudGRCdXR0b25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGRhdGVTdGFydCA9IG5ldyBEYXRlKGVuZFN0YW1wKTtcbiAgICAgICAgaWYgKHRoaXMudGRCdXR0b25zW2ldLm5hbWUgPT09ICdZVEQnKSB7XG4gICAgICAgICAgZGF0ZVN0YXJ0LnNldE1vbnRoKDApO1xuICAgICAgICAgIGRhdGVTdGFydC5zZXREYXRlKDEpO1xuICAgICAgICAgIGRhdGVTdGFydC5zZXRIb3VycygwKTtcbiAgICAgICAgICBkYXRlU3RhcnQuc2V0TWludXRlcygwKTtcbiAgICAgICAgICBkYXRlU3RhcnQuc2V0U2Vjb25kcygwKTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnRkQnV0dG9uc1tpXS5uYW1lID09PSAnTVREJykge1xuICAgICAgICAgIGRhdGVTdGFydC5zZXREYXRlKDEpO1xuICAgICAgICAgIGRhdGVTdGFydC5zZXRIb3VycygwKTtcbiAgICAgICAgICBkYXRlU3RhcnQuc2V0TWludXRlcygwKTtcbiAgICAgICAgICBkYXRlU3RhcnQuc2V0U2Vjb25kcygwKTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnRkQnV0dG9uc1tpXS5uYW1lID09PSAnUVREJykge1xuICAgICAgICAgIGRhdGVTdGFydC5zZXRNb250aCgxMSAtIChkYXRlU3RhcnQuZ2V0TW9udGgoKSAlIDQpKTtcbiAgICAgICAgICBkYXRlU3RhcnQuc2V0RGF0ZSgwKTtcbiAgICAgICAgICBkYXRlU3RhcnQuc2V0SG91cnMoMCk7XG4gICAgICAgICAgZGF0ZVN0YXJ0LnNldE1pbnV0ZXMoMCk7XG4gICAgICAgICAgZGF0ZVN0YXJ0LnNldFNlY29uZHMoMCk7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy50ZEJ1dHRvbnNbaV0ubmFtZSA9PT0gJ1dURCcpIHtcbiAgICAgICAgICBkYXRlU3RhcnQuc2V0RGF0ZShkYXRlU3RhcnQuZ2V0RGF0ZSgpIC0gZGF0ZVN0YXJ0LmdldERheSgpKTtcbiAgICAgICAgICBkYXRlU3RhcnQuc2V0SG91cnMoMCk7XG4gICAgICAgICAgZGF0ZVN0YXJ0LnNldE1pbnV0ZXMoMCk7XG4gICAgICAgICAgZGF0ZVN0YXJ0LnNldFNlY29uZHMoMCk7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy50ZEJ1dHRvbnNbaV0ubmFtZSA9PT0gJ1knKSB7XG4gICAgICAgICAgZGF0ZVN0YXJ0LnNldEhvdXJzKDApO1xuICAgICAgICAgIGRhdGVTdGFydC5zZXRNaW51dGVzKDApO1xuICAgICAgICAgIGRhdGVTdGFydC5zZXRTZWNvbmRzKDApO1xuICAgICAgICAgIGRhdGVTdGFydCAtPSA4NjQwMDAwMDtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnRkQnV0dG9uc1tpXS5uYW1lID09PSAnVCcpIHtcbiAgICAgICAgICBkYXRlU3RhcnQuc2V0SG91cnMoMCk7XG4gICAgICAgICAgZGF0ZVN0YXJ0LnNldE1pbnV0ZXMoMCk7XG4gICAgICAgICAgZGF0ZVN0YXJ0LnNldFNlY29uZHMoMCk7XG4gICAgICAgICAgaWYgKCt0aGlzLmVuZERhdGFzZXQgPT09ICtkYXRlU3RhcnQpIHtcbiAgICAgICAgICAgIGRhdGVTdGFydCA9ICtkYXRlU3RhcnQgLSA4NjQwMDAwMDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZGF0ZUVuZCA8IGRhdGVTdGFydCkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMudGRCdXR0b25zW2ldLmRhdGVTdGFydCA9IGRhdGVTdGFydC52YWx1ZU9mKCk7XG4gICAgICAgICAgdGhpcy50ZEJ1dHRvbnNbaV0uZGF0ZUVuZCA9IGRhdGVFbmQudmFsdWVPZigpO1xuICAgICAgICAgIGJ1dHRvbnMucHVzaCh0aGlzLnRkQnV0dG9uc1tpXSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJlbGF0aXZlVERCdXR0b24ubWlsbGlzZWNvbmRzID0gSW5maW5pdHk7XG4gICAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy50ZEJ1dHRvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKE1hdGguYWJzKHRoaXMudGRCdXR0b25zW2ldLm1pbGxpc2Vjb25kcyAtICh0aGlzLmVuZEFjdGl2ZVdpbmRvdyAtIHRoaXMuc3RhcnRBY3RpdmVXaW5kb3cpKSA8IHJlbGF0aXZlVERCdXR0b24ubWlsbGlzZWNvbmRzKSB7XG4gICAgICAgICAgcmVsYXRpdmVUREJ1dHRvbi5taWxsaXNlY29uZHMgPSB0aGlzLnRkQnV0dG9uc1tpXS5taWxsaXNlY29uZHM7XG4gICAgICAgICAgcmVsYXRpdmVUREJ1dHRvbi5uYW1lID0gdGhpcy50ZEJ1dHRvbnNbaV0uYWJicmV2aWF0aW9uO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHRoaXMuc3RhbmRhcmRDb250ZXh1YWxQZXJpb2RzID0gYnV0dG9ucztcbiAgICAgIC8vIHRoaXMuZHJhd0J1dHRvbnNDb250ZXh0dWFsKHRoaXMuc3RhbmRhcmRDb250ZXh1YWxQZXJpb2RzKTtcbiAgICB9XG5cbiAgICBwcm9jZXNzTXVsdGlwbGllcnMgKHRpbWVBcnIpIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGltZUFyci5sZW5ndGg7IGkrKykge1xuICAgICAgICBsZXQgbGVuID0gdGltZUFycltpXS5wb3NzaWJsZUZhY3RvcnMubGVuZ3RoO1xuICAgICAgICB0aW1lQXJyW2ldLm11bHRpcGxpZXJzID0gW107XG4gICAgICAgIGlmIChsZW4gPT09IDEpIHtcbiAgICAgICAgICB0aW1lQXJyW2ldLm11bHRpcGxpZXJzLnB1c2godGltZUFycltpXS5wb3NzaWJsZUZhY3RvcnNbMF0pO1xuICAgICAgICB9IGVsc2UgaWYgKGxlbiA9PT0gMikge1xuICAgICAgICAgIHRpbWVBcnJbaV0ubXVsdGlwbGllcnMucHVzaCh0aW1lQXJyW2ldLnBvc3NpYmxlRmFjdG9yc1swXSk7XG4gICAgICAgICAgdGltZUFycltpXS5tdWx0aXBsaWVycy5wdXNoKHRpbWVBcnJbaV0ucG9zc2libGVGYWN0b3JzW2xlbiAtIDFdKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aW1lQXJyW2ldLm11bHRpcGxpZXJzLnB1c2godGltZUFycltpXS5wb3NzaWJsZUZhY3RvcnNbMF0pO1xuICAgICAgICAgIHRpbWVBcnJbaV0ubXVsdGlwbGllcnMucHVzaChNYXRoLmZsb29yKHRpbWVBcnJbaV0ucG9zc2libGVGYWN0b3JzW2xlbiAtIDFdIC8gMikpO1xuICAgICAgICAgIHRpbWVBcnJbaV0ubXVsdGlwbGllcnMucHVzaCh0aW1lQXJyW2ldLnBvc3NpYmxlRmFjdG9yc1tsZW4gLSAxXSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB0aW1lQXJyO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEEgZnVuY3Rpb24gdG8gc2V0IHRoZSBhY3RpdmUgcGVyaW9kJ3NcbiAgICAgKiBzdGFydCBhbmQgZW5kIHBvaW50XG4gICAgICogQHBhcmFtICB7bnVtYmVyfSBkYXRlIHN0YW1wIC0gQSBVTklYIHRpbWVzdGFtcCB0byBiZSBzZXQgYXMgdGhlIHN0YXJ0IHBvaW50IG9mIGFjdGl2ZSBwZXJpb2RcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IGRhdGUgc3RhbXAgLSBBIFVOSVggdGltZXN0YW1wIHRvIGJlIHNldCBhcyB0aGUgZW5kIHBvaW50IG9mIGFjdGl2ZSBwZXJpb2RcbiAgICAgKi9cbiAgICBzZXRBY3RpdmVQZXJpb2QgKCkge1xuICAgICAgdmFyIHN0YXJ0LFxuICAgICAgICBlbmQsXG4gICAgICAgIHRlbXAgPSB3aW5kb3cucGVyZm9ybWFuY2Uubm93KCk7XG4gICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBlbmQgPSB0aGlzLmdsb2JhbFJlYWN0aXZlTW9kZWwubW9kZWxbJ3gtYXhpcy12aXNpYmxlLXJhbmdlLWVuZCddO1xuICAgICAgICBzdGFydCA9IGVuZCAtIGFyZ3VtZW50c1swXTtcbiAgICAgIH0gZWxzZSBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMikge1xuICAgICAgICBzdGFydCA9IGFyZ3VtZW50c1swXTtcbiAgICAgICAgZW5kID0gYXJndW1lbnRzWzFdO1xuICAgICAgfVxuICAgICAgdGhpcy5zdGFydEFjdGl2ZVdpbmRvdyA9IHN0YXJ0O1xuICAgICAgdGhpcy5lbmRBY3RpdmVXaW5kb3cgPSBlbmQ7XG4gICAgICB0aGlzLmdlbmVyYXRlQ2FsY3VsYXRlZEJ1dHRvbnMoKTtcbiAgICAgIHRoaXMuZ2xvYmFsUmVhY3RpdmVNb2RlbC5tb2RlbFsneC1heGlzLXZpc2libGUtcmFuZ2Utc3RhcnQnXSA9IHRoaXMuc3RhcnRBY3RpdmVXaW5kb3c7XG4gICAgICB0aGlzLmdsb2JhbFJlYWN0aXZlTW9kZWwubW9kZWxbJ3gtYXhpcy12aXNpYmxlLXJhbmdlLWVuZCddID0gdGhpcy5lbmRBY3RpdmVXaW5kb3c7XG4gICAgICB0aGlzLmdlbmVyYXRlQ29udGV4dHVhbEJ1dHRvbnMoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBIGZ1bmN0aW9uIHRvIHNldCB0aGUgc3RhcnQgYW5kIGVuZCBwb2ludCBvZiB0aGVcbiAgICAgKiBlbnRpcmUgdGltZS1saW5lXG4gICAgICogQHBhcmFtICB7bnVtYmVyfSBkYXRlIHN0YW1wIC0gQSBVTklYIHRpbWVzdGFtcCB0byBiZSBzZXQgYXMgdGhlIHN0YXJ0IHBvaW50IG9mIHRpbWUtbGluZVxuICAgICAqIEBwYXJhbSAge251bWJlcn0gZGF0ZSBzdGFtcCAtIEEgVU5JWCB0aW1lc3RhbXAgdG8gYmUgc2V0IGFzIHRoZSBlbmQgcG9pbnQgb2YgdGltZS1saW5lXG4gICAgICovXG5cbiAgICAvKipcbiAgICAgKiBBIGZ1bmN0aW9uIHRvIHNldCB0aGUgb2JqZWN0IHRvIHNldCB0aGUgdXNlciBwcmVmZXJlbmNlc1xuICAgICAqL1xuICAgIGNvbmZpZ3VyZSAoY29uZmlnKSB7XG4gICAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGdXNpb25jaGFydHMgbGlmZSBjeWNsZSBtZXRob2QgZm9yIGV4dGVuc2lvblxuICAgICAqL1xuICAgIGluaXQgKHJlcXVpcmUpIHtcbiAgICAgIHZhciBpbnN0YW5jZSA9IHRoaXM7XG4gICAgICByZXF1aXJlKFtcbiAgICAgICAgJ3hBeGlzJyxcbiAgICAgICAgJ3lBeGlzJyxcbiAgICAgICAgJ2dyYXBoaWNzJyxcbiAgICAgICAgJ2NoYXJ0JyxcbiAgICAgICAgJ2RhdGFzZXQnLFxuICAgICAgICAnUGxvdE1hbmFnZXInLFxuICAgICAgICAnY2FudmFzQ29uZmlnJyxcbiAgICAgICAgJ01hcmtlck1hbmFnZXInLFxuICAgICAgICAncmVhY3RpdmVNb2RlbCcsXG4gICAgICAgICdnbG9iYWxSZWFjdGl2ZU1vZGVsJyxcbiAgICAgICAgJ3NwYWNlTWFuYWdlckluc3RhbmNlJyxcbiAgICAgICAgJ3NtYXJ0TGFiZWwnLFxuICAgICAgICAnZXh0RGF0YScsXG4gICAgICAgICdjaGFydEluc3RhbmNlJyxcbiAgICAgICAgZnVuY3Rpb24gKFxuICAgICAgICAgICAgICB4QXhpcyxcbiAgICAgICAgICAgICAgeUF4aXMsXG4gICAgICAgICAgICAgIGdyYXBoaWNzLFxuICAgICAgICAgICAgICBjaGFydCxcbiAgICAgICAgICAgICAgZGF0YXNldCxcbiAgICAgICAgICAgICAgcGxvdE1hbmFnZXIsXG4gICAgICAgICAgICAgIGNhbnZhc0NvbmZpZyxcbiAgICAgICAgICAgICAgbWFya2VyTWFuYWdlcixcbiAgICAgICAgICAgICAgcmVhY3RpdmVNb2RlbCxcbiAgICAgICAgICAgICAgZ2xvYmFsUmVhY3RpdmVNb2RlbCxcbiAgICAgICAgICAgICAgc3BhY2VNYW5hZ2VySW5zdGFuY2UsXG4gICAgICAgICAgICAgIHNtYXJ0TGFiZWwsXG4gICAgICAgICAgICAgIGV4dERhdGEsXG4gICAgICAgICAgICAgIGNoYXJ0SW5zdGFuY2UpIHtcbiAgICAgICAgICBpbnN0YW5jZS54QXhpcyA9IHhBeGlzO1xuICAgICAgICAgIGluc3RhbmNlLnlBeGlzID0geUF4aXM7XG4gICAgICAgICAgaW5zdGFuY2UuZ3JhcGhpY3MgPSBncmFwaGljcztcbiAgICAgICAgICBpbnN0YW5jZS5jaGFydCA9IGNoYXJ0O1xuICAgICAgICAgIGluc3RhbmNlLmRhdGFzZXQgPSBkYXRhc2V0O1xuICAgICAgICAgIGluc3RhbmNlLnBsb3RNYW5hZ2VyID0gcGxvdE1hbmFnZXI7XG4gICAgICAgICAgaW5zdGFuY2UubWFya2VyTWFuYWdlciA9IG1hcmtlck1hbmFnZXI7XG4gICAgICAgICAgaW5zdGFuY2UuY2FudmFzQ29uZmlnID0gY2FudmFzQ29uZmlnO1xuICAgICAgICAgIGluc3RhbmNlLnJlYWN0aXZlTW9kZWwgPSByZWFjdGl2ZU1vZGVsO1xuICAgICAgICAgIGluc3RhbmNlLmdsb2JhbFJlYWN0aXZlTW9kZWwgPSBnbG9iYWxSZWFjdGl2ZU1vZGVsO1xuICAgICAgICAgIGluc3RhbmNlLnNwYWNlTWFuYWdlckluc3RhbmNlID0gc3BhY2VNYW5hZ2VySW5zdGFuY2U7XG4gICAgICAgICAgaW5zdGFuY2Uuc21hcnRMYWJlbCA9IHNtYXJ0TGFiZWw7XG4gICAgICAgICAgaW5zdGFuY2UuZXh0RGF0YSA9IGV4dERhdGE7XG4gICAgICAgICAgaW5zdGFuY2UuY2hhcnRJbnN0YW5jZSA9IGNoYXJ0SW5zdGFuY2U7XG4gICAgICAgIH1cbiAgICAgIF0pO1xuICAgICAgdGhpcy5zcGFjZU1hbmFnZXJJbnN0YW5jZSA9IGluc3RhbmNlLnNwYWNlTWFuYWdlckluc3RhbmNlO1xuICAgICAgdGhpcy5nbG9iYWxSZWFjdGl2ZU1vZGVsID0gaW5zdGFuY2UuZ2xvYmFsUmVhY3RpdmVNb2RlbDtcbiAgICAgIHRoaXMuZW5kQWN0aXZlV2luZG93ID0gaW5zdGFuY2UuZ2xvYmFsUmVhY3RpdmVNb2RlbC5tb2RlbFsneC1heGlzLXZpc2libGUtcmFuZ2UtZW5kJ107XG4gICAgICB0aGlzLnN0YXJ0QWN0aXZlV2luZG93ID0gaW5zdGFuY2UuZ2xvYmFsUmVhY3RpdmVNb2RlbC5tb2RlbFsneC1heGlzLXZpc2libGUtcmFuZ2Utc3RhcnQnXTtcbiAgICAgIHRoaXMuc3RhcnREYXRhc2V0ID0gaW5zdGFuY2UuZ2xvYmFsUmVhY3RpdmVNb2RlbC5tb2RlbFsneC1heGlzLWFic29sdXRlLXJhbmdlLXN0YXJ0J107XG4gICAgICB0aGlzLmVuZERhdGFzZXQgPSBpbnN0YW5jZS5nbG9iYWxSZWFjdGl2ZU1vZGVsLm1vZGVsWyd4LWF4aXMtYWJzb2x1dGUtcmFuZ2UtZW5kJ107XG4gICAgICAvLyBpbnN0YW5jZS5nbG9iYWxSZWFjdGl2ZU1vZGVsLm1vZGVsWydfeC1heGlzLXZpc2libGUtcmFuZ2Utc3RhcnQnXSArPSAxMjQ0MTYwMDAwMDA7XG4gICAgICB0aGlzLnRpbWVSdWxlcyA9IHRoaXMuY2hhcnRJbnN0YW5jZS5hcGlJbnN0YW5jZS5nZXRDb21wb25lbnRTdG9yZSgpO1xuICAgICAgdGhpcy50aW1lUnVsZXMgPSB0aGlzLnRpbWVSdWxlcy5nZXRDYW52YXNCeUluZGV4KDApLmNvbXBvc2l0aW9uLmltcGw7XG4gICAgICB0aGlzLnRpbWVSdWxlcyA9IHRoaXMudGltZVJ1bGVzLmdldERhdGFBZ2dyZWdhdG9yKCk7XG4gICAgICB0aGlzLnRpbWVSdWxlcyA9IHRoaXMudGltZVJ1bGVzLmdldEFnZ3JlZ2F0aW9uVGltZVJ1bGVzKCk7XG4gICAgICB0aGlzLnRpbWVQZXJpb2RzID0gdGhpcy5wcm9jZXNzTXVsdGlwbGllcnModGhpcy50aW1lUnVsZXMpO1xuICAgICAgdGhpcy5zZXRBY3RpdmVQZXJpb2QodGhpcy5zdGFydEFjdGl2ZVdpbmRvdywgdGhpcy5lbmRBY3RpdmVXaW5kb3cpO1xuICAgICAgdGhpcy50b29sYmFycyA9IFtdO1xuICAgICAgdGhpcy5tZWFzdXJlbWVudCA9IHt9O1xuICAgICAgdGhpcy5mbGFnID0gdHJ1ZTtcblxuICAgICAgdGhpcy50b29sYmFycy5wdXNoKHRoaXMuY3JlYXRlVG9vbGJhcigpKTtcblxuICAgICAgdGhpcy5nbG9iYWxSZWFjdGl2ZU1vZGVsLm9uUHJvcHNDaGFuZ2UoWyd4LWF4aXMtdmlzaWJsZS1yYW5nZS1zdGFydCcsICd4LWF4aXMtdmlzaWJsZS1yYW5nZS1lbmQnXSxcbiAgICAgICAgZnVuY3Rpb24gKHN0YXJ0LCBlbmQpIHtcbiAgICAgICAgICBpZiAoaW5zdGFuY2UuZmxhZykge1xuICAgICAgICAgICAgaW5zdGFuY2UuZmxhZyA9IGZhbHNlO1xuICAgICAgICAgICAgaW5zdGFuY2Uuc2V0QWN0aXZlUGVyaW9kKHN0YXJ0WzFdLCBlbmRbMV0pO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbnN0YW5jZS5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgaW5zdGFuY2Uuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kc1tpXS5tdWx0aXBsaWVycy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgIGlmICgoZW5kWzFdIC0gc3RhcnRbMV0pID49IGluc3RhbmNlLnRpbWVQZXJpb2RzW2ldLm11bHRpcGxpZXJzW2pdICogaW5zdGFuY2UudGltZVBlcmlvZHNbaV0uaW50ZXJ2YWwpIHtcbiAgICAgICAgICAgICAgICAgIC8vIGluc3RhbmNlLmNsaWNrZWRJZCA9IGluc3RhbmNlLnRpbWVQZXJpb2RzW2ldLm11bHRpcGxpZXJzW2pdICsgaW5zdGFuY2UudGltZVBlcmlvZHNbaV0uYWJicmV2aWF0aW9uLnNpbmdsZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGluc3RhbmNlLnRvb2xiYXIuZGlzcG9zZSgpO1xuICAgICAgICAgICAgaW5zdGFuY2UudG9vbGJhcnMucG9wKCk7XG4gICAgICAgICAgICBpbnN0YW5jZS50b29sYmFycy5wdXNoKGluc3RhbmNlLmNyZWF0ZVRvb2xiYXIoKSk7XG4gICAgICAgICAgICBpbnN0YW5jZS5nZXRMb2dpY2FsU3BhY2UoKTtcbiAgICAgICAgICAgIGluc3RhbmNlLmRyYXcoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIGNyZWF0ZVRvb2xiYXIgKCkge1xuICAgICAgdmFyIHVuaWdyb3VwLFxuICAgICAgICB0b29sYmFyLFxuICAgICAgICBjYWxjdWxhdGVkQnV0dG9ucyxcbiAgICAgICAgY29udGV4dHVhbEJ1dHRvbnMsXG4gICAgICAgIGFsbEJ1dHRvbixcbiAgICAgICAgc2VsZiA9IHRoaXMsXG4gICAgICAgIGRlZHVjdG9yQXIgPSBbXSxcbiAgICAgICAgc3RhcnRNdWx0aXBsaWVyLFxuICAgICAgICBkZWR1Y3RvcixcbiAgICAgICAgaSxcbiAgICAgICAgaixcbiAgICAgICAgbWFyZ2luLFxuICAgICAgICBmcm9tRGF0ZUxhYmVsLFxuICAgICAgICBncm91cDtcblxuICAgICAgZ3JvdXAgPSBuZXcgdGhpcy50b29sYm94LkNvbXBvbmVudEdyb3VwKHtcbiAgICAgICAgcGFwZXI6IHRoaXMuZ3JhcGhpY3MucGFwZXIsXG4gICAgICAgIGNoYXJ0OiB0aGlzLmNoYXJ0LFxuICAgICAgICBzbWFydExhYmVsOiB0aGlzLnNtYXJ0TGFiZWwsXG4gICAgICAgIGNoYXJ0Q29udGFpbmVyOiB0aGlzLmdyYXBoaWNzLmNvbnRhaW5lclxuICAgICAgfSk7XG5cbiAgICAgIHVuaWdyb3VwID0gbmV3IHRoaXMudG9vbGJveC5VbmlTZWxlY3RDb21wb25lbnRHcm91cCh7XG4gICAgICAgIHBhcGVyOiB0aGlzLmdyYXBoaWNzLnBhcGVyLFxuICAgICAgICBjaGFydDogdGhpcy5jaGFydCxcbiAgICAgICAgc21hcnRMYWJlbDogdGhpcy5zbWFydExhYmVsLFxuICAgICAgICBjaGFydENvbnRhaW5lcjogdGhpcy5ncmFwaGljcy5jb250YWluZXJcbiAgICAgIH0pO1xuICAgICAgdW5pZ3JvdXAuc2V0Q29uZmlnKHtcbiAgICAgICAgZmlsbDogJyNmZmYnLFxuICAgICAgICBib3JkZXJUaGlja25lc3M6IDBcbiAgICAgIH0pO1xuICAgICAgZ3JvdXAuc2V0Q29uZmlnKHtcbiAgICAgICAgZmlsbDogJyNmZmYnLFxuICAgICAgICBib3JkZXJUaGlja25lc3M6IDBcbiAgICAgIH0pO1xuICAgICAgdG9vbGJhciA9IG5ldyB0aGlzLkhvcml6b250YWxUb29sYmFyKHtcbiAgICAgICAgcGFwZXI6IHRoaXMuZ3JhcGhpY3MucGFwZXIsXG4gICAgICAgIGNoYXJ0OiB0aGlzLmNoYXJ0LFxuICAgICAgICBzbWFydExhYmVsOiB0aGlzLnNtYXJ0TGFiZWwsXG4gICAgICAgIGNoYXJ0Q29udGFpbmVyOiB0aGlzLmdyYXBoaWNzLmNvbnRhaW5lclxuICAgICAgfSk7XG4gICAgICB0b29sYmFyLnNldENvbmZpZyh7XG4gICAgICAgIGZpbGw6ICcjZmZmJyxcbiAgICAgICAgYm9yZGVyVGhpY2tuZXNzOiAwXG4gICAgICB9KTtcbiAgICAgIGZyb21EYXRlTGFiZWwgPSBuZXcgdGhpcy50b29sYm94LkxhYmVsKCdab29tOicsIHtcbiAgICAgICAgc21hcnRMYWJlbDogdGhpcy5zbWFydExhYmVsLFxuICAgICAgICBwYXBlcjogdGhpcy5ncmFwaGljcy5wYXBlclxuICAgICAgfSwge1xuICAgICAgICB0ZXh0OiB7XG4gICAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICAgICdmb250LWZhbWlseSc6ICdcIkx1Y2lkYSBHcmFuZGVcIiwgc2Fucy1zZXJpZicsXG4gICAgICAgICAgICAnZm9udC1zaXplJzogJzEzJyxcbiAgICAgICAgICAgICdmaWxsJzogJyM2OTY5NjknLFxuICAgICAgICAgICAgJ2ZvbnQtd2VpZ2h0JzogJ2JvbGQnXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBjb250YWluZXI6IHtcbiAgICAgICAgICBoZWlnaHQ6IDIyXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgZ3JvdXAuYWRkU3ltYm9sKGZyb21EYXRlTGFiZWwpO1xuICAgICAgYWxsQnV0dG9uID0gbmV3IHRoaXMudG9vbGJveC5TeW1ib2woJ0FMTCcsIHRydWUsIHtcbiAgICAgICAgcGFwZXI6IHRoaXMuZ3JhcGhpY3MucGFwZXIsXG4gICAgICAgIGNoYXJ0OiB0aGlzLmNoYXJ0LFxuICAgICAgICBzbWFydExhYmVsOiB0aGlzLnNtYXJ0TGFiZWwsXG4gICAgICAgIGNoYXJ0Q29udGFpbmVyOiB0aGlzLmdyYXBoaWNzLmNvbnRhaW5lclxuICAgICAgfSwge1xuICAgICAgICBmaWxsOiAnI2ZmZmZmZicsXG4gICAgICAgIGxhYmVsRmlsbDogJyM2OTY5NjknLFxuICAgICAgICBzeW1ib2xTdHJva2VXaWR0aDogJzInLFxuICAgICAgICBzdHJva2U6ICcjY2VkNWQ0JyxcbiAgICAgICAgc3Ryb2tlV2lkdGg6ICcxJyxcbiAgICAgICAgaG92ZXJGaWxsOiAnI2NlZDVkNCcsXG4gICAgICAgIGhlaWdodDogMjIsXG4gICAgICAgIHJhZGl1czogMSxcbiAgICAgICAgbWFyZ2luOiB7XG4gICAgICAgICAgcmlnaHQ6IDVcbiAgICAgICAgfSxcbiAgICAgICAgYnRuVGV4dFN0eWxlOiB7XG4gICAgICAgICAgJ2ZvbnRGYW1pbHknOiAnXCJMdWNpZGEgR3JhbmRlXCIsIHNhbnMtc2VyaWYnLFxuICAgICAgICAgICdmb250U2l6ZSc6ICcxMycsXG4gICAgICAgICAgJ2ZpbGwnOiAnIzY5Njk2OScsXG4gICAgICAgICAgJ2xpbmUtaGVpZ2h0JzogJzEnLFxuICAgICAgICAgICdsZXR0ZXItc3BhY2luZyc6ICctMC4wNGVtJ1xuICAgICAgICB9XG4gICAgICB9KS5hdHRhY2hFdmVudEhhbmRsZXJzKHtcbiAgICAgICAgY2xpY2s6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBzZWxmLnNldEFjdGl2ZVBlcmlvZChzZWxmLnN0YXJ0RGF0YXNldCwgc2VsZi5lbmREYXRhc2V0KTtcbiAgICAgICAgICB0b29sYmFyLmRpc3Bvc2UoKTtcbiAgICAgICAgICBzZWxmLmNsaWNrZWRJZCA9ICdBTEwnO1xuICAgICAgICAgIC8vIHNlbGYudG9vbGJhcnMucG9wKCk7XG4gICAgICAgICAgLy8gc2VsZi50b29sYmFycy5wdXNoKHNlbGYuY3JlYXRlVG9vbGJhcigpKTtcbiAgICAgICAgICAvLyBzZWxmLmdldExvZ2ljYWxTcGFjZSgpO1xuICAgICAgICAgIC8vIHNlbGYuZHJhdygpO1xuICAgICAgICAgIC8vIHNlbGYuX3JlZi5yZUFsbG9jYXRlKHNlbGYucGFyZW50R3JvdXApO1xuICAgICAgICB9LFxuICAgICAgICB0b29sdGV4dDogJ0FMTCdcbiAgICAgIH0pO1xuXG4gICAgICB1bmlncm91cC5hZGRTeW1ib2woYWxsQnV0dG9uKTtcbiAgICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZm9yIChqID0gdGhpcy5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW2ldLm11bHRpcGxpZXJzLmxlbmd0aCAtIDE7IGogPj0gMDsgai0tKSB7XG4gICAgICAgICAgZGVkdWN0b3JBci5wdXNoKHNlbGYuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kc1tpXS5tdWx0aXBsaWVyc1tqXSAqIHNlbGYuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kc1tpXS5taWxsaXNlY29uZHMpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGNhbGN1bGF0ZWRCdXR0b25zID0ge307XG4gICAgICBmb3IgKGxldCBrZXkgaW4gdGhpcy5jYWxjdWxhdGVkQnV0dG9uT2JqKSB7XG4gICAgICAgIHRoaXMuY2FsY3VsYXRlZEJ1dHRvbk9ialtrZXldLmhpZGUoKTtcbiAgICAgIH1cbiAgICAgIGZvciAobGV0IGkgPSBzZWxmLnN0YXJ0UG9pbnRVbml0OyBpID49IDA7IGktLSkge1xuICAgICAgICBpZiAoaSA9PT0gc2VsZi5zdGFydFBvaW50VW5pdCkge1xuICAgICAgICAgIHN0YXJ0TXVsdGlwbGllciA9IHNlbGYuc3RhcnRQb2ludE11bHRpcGxpZXI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3RhcnRNdWx0aXBsaWVyID0gc2VsZi5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW2ldLm11bHRpcGxpZXJzLmxlbmd0aCAtIDE7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgaiA9IHN0YXJ0TXVsdGlwbGllcjsgaiA+PSAwOyBqLS0pIHtcbiAgICAgICAgICBtYXJnaW4gPSAoaSA9PT0gc2VsZi5ub0NhbGNCdXR0b25zICYmIGogPT09IDApID8gNSA6IDA7XG4gICAgICAgICAgbGV0IGtleUFiYiA9IHNlbGYuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kc1tpXS5tdWx0aXBsaWVyc1tqXSArIHNlbGYuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kc1tpXS5hYmJyZXZpYXRpb247XG4gICAgICAgICAgaWYgKHRoaXMuY2FsY3VsYXRlZEJ1dHRvbk9ialtrZXlBYmJdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNhbGN1bGF0ZWRCdXR0b25zID0gbmV3IHRoaXMudG9vbGJveC5TeW1ib2woa2V5QWJiLCB0cnVlLCB7XG4gICAgICAgICAgICAgIHBhcGVyOiB0aGlzLmdyYXBoaWNzLnBhcGVyLFxuICAgICAgICAgICAgICBjaGFydDogdGhpcy5jaGFydCxcbiAgICAgICAgICAgICAgc21hcnRMYWJlbDogdGhpcy5zbWFydExhYmVsLFxuICAgICAgICAgICAgICBjaGFydENvbnRhaW5lcjogdGhpcy5ncmFwaGljcy5jb250YWluZXJcbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgZmlsbDogJyNmZmZmZmYnLFxuICAgICAgICAgICAgICBsYWJlbEZpbGw6ICcjNjk2OTY5JyxcbiAgICAgICAgICAgICAgc3ltYm9sU3Ryb2tlV2lkdGg6ICcyJyxcbiAgICAgICAgICAgICAgc3Ryb2tlOiAnI2NlZDVkNCcsXG4gICAgICAgICAgICAgIHN0cm9rZVdpZHRoOiAnMScsXG4gICAgICAgICAgICAgIGhvdmVyRmlsbDogJyNjZWQ1ZDQnLFxuICAgICAgICAgICAgICBoZWlnaHQ6IDIyLFxuICAgICAgICAgICAgICByYWRpdXM6IDEsXG4gICAgICAgICAgICAgIG1hcmdpbjoge1xuICAgICAgICAgICAgICAgIHJpZ2h0OiAwXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGJ0blRleHRTdHlsZToge1xuICAgICAgICAgICAgICAgICdmb250RmFtaWx5JzogJ1wiTHVjaWRhIEdyYW5kZVwiLCBzYW5zLXNlcmlmJyxcbiAgICAgICAgICAgICAgICAnZm9udFNpemUnOiAnMTMnLFxuICAgICAgICAgICAgICAgICdmaWxsJzogJyM2OTY5NjknLFxuICAgICAgICAgICAgICAgICdsaW5lLWhlaWdodCc6ICcxJyxcbiAgICAgICAgICAgICAgICAnbGV0dGVyLXNwYWNpbmcnOiAnLTAuMDRlbSdcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkuYXR0YWNoRXZlbnRIYW5kbGVycyh7XG4gICAgICAgICAgICAgICdjbGljayc6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBkZWR1Y3RvciA9IChzZWxmLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHNbaV0ubXVsdGlwbGllcnNbal0gKiBzZWxmLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHNbaV0ubWlsbGlzZWNvbmRzKTtcbiAgICAgICAgICAgICAgICBzZWxmLmNsaWNrZWRJZCA9IHNlbGYuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kc1tpXS5tdWx0aXBsaWVyc1tqXSArIHNlbGYuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kc1tpXS5hYmJyZXZpYXRpb247XG4gICAgICAgICAgICAgICAgc2VsZi5zZXRBY3RpdmVQZXJpb2QoZGVkdWN0b3IpO1xuICAgICAgICAgICAgICAgIC8vIHRvb2xiYXIuZGlzcG9zZSgpO1xuICAgICAgICAgICAgICAgIC8vIHNlbGYudG9vbGJhcnMucG9wKCk7XG4gICAgICAgICAgICAgICAgLy8gc2VsZi50b29sYmFycy5wdXNoKHNlbGYuY3JlYXRlVG9vbGJhcigpKTtcbiAgICAgICAgICAgICAgICAvLyBzZWxmLmdldExvZ2ljYWxTcGFjZSgpO1xuICAgICAgICAgICAgICAgIC8vIHNlbGYuZHJhdygpO1xuICAgICAgICAgICAgICAgIC8vIHNlbGYuX3JlZi5yZUFsbG9jYXRlKHNlbGYucGFyZW50R3JvdXApO1xuICAgICAgICAgICAgICAgIC8vIHRoaXMudG9vbGJhcnNbdGhpcy50b29sYmFycy5sZW5ndGggLSAxXSA9IHRoaXMuY3JlYXRlVG9vbGJhcigpO1xuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB0b29sdGV4dDogc2VsZi5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW2ldLm11bHRpcGxpZXJzW2pdICsgJyAnICsgc2VsZi5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW2ldLmRlc2NyaXB0aW9uXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuY2FsY3VsYXRlZEJ1dHRvbk9ialtrZXlBYmJdID0gY2FsY3VsYXRlZEJ1dHRvbnM7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIHVuaWdyb3VwLmFkZFN5bWJvbChjYWxjdWxhdGVkQnV0dG9uc1tpXSk7XG4gICAgICAgICAgdGhpcy5jYWxjdWxhdGVkQnV0dG9uT2JqW2tleUFiYl0uc2hvdygpO1xuICAgICAgICAgIHVuaWdyb3VwLmFkZFN5bWJvbCh0aGlzLmNhbGN1bGF0ZWRCdXR0b25PYmpba2V5QWJiXSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gZm9yIChsZXQgaSA9IHNlbGYuc3RhcnRQb2ludFVuaXQ7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAvLyAgIGZvciAobGV0IGogPSBzdGFydE11bHRpcGxpZXI7IGogPj0gMDsgai0tKSB7XG4gICAgICAvLyAgICAgbGV0IGtleUFiYiA9IHNlbGYuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kc1tpXS5tdWx0aXBsaWVyc1tqXSArIHNlbGYuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kc1tpXS5hYmJyZXZpYXRpb247XG4gICAgICAvLyAgICAgdW5pZ3JvdXAuYWRkU3ltYm9sKHRoaXMuY2FsY3VsYXRlZEJ1dHRvbk9ialtrZXlBYmJdKTtcbiAgICAgIC8vICAgfVxuICAgICAgLy8gfVxuXG4gICAgICBjb250ZXh0dWFsQnV0dG9ucyA9IFtdO1xuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc3RhbmRhcmRDb250ZXh1YWxQZXJpb2RzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIG1hcmdpbiA9IChpID09PSAwKSA/IDUgOiAwO1xuICAgICAgICBjb250ZXh0dWFsQnV0dG9uc1tpXSA9IG5ldyB0aGlzLnRvb2xib3guU3ltYm9sKHRoaXMuc3RhbmRhcmRDb250ZXh1YWxQZXJpb2RzW2ldLmFiYnJldmlhdGlvbiwgdHJ1ZSwge1xuICAgICAgICAgIHBhcGVyOiB0aGlzLmdyYXBoaWNzLnBhcGVyLFxuICAgICAgICAgIGNoYXJ0OiB0aGlzLmNoYXJ0LFxuICAgICAgICAgIHNtYXJ0TGFiZWw6IHRoaXMuc21hcnRMYWJlbCxcbiAgICAgICAgICBjaGFydENvbnRhaW5lcjogdGhpcy5ncmFwaGljcy5jb250YWluZXJcbiAgICAgICAgfSwge1xuICAgICAgICAgIGZpbGw6ICcjZmZmZmZmJyxcbiAgICAgICAgICBsYWJlbEZpbGw6ICcjNjk2OTY5JyxcbiAgICAgICAgICBzeW1ib2xTdHJva2VXaWR0aDogJzInLFxuICAgICAgICAgIHN0cm9rZTogJyNjZWQ1ZDQnLFxuICAgICAgICAgIHN0cm9rZVdpZHRoOiAnMScsXG4gICAgICAgICAgaGVpZ2h0OiAyMixcbiAgICAgICAgICBob3ZlckZpbGw6ICcjY2VkNWQ0JyxcbiAgICAgICAgICByYWRpdXM6IDEsXG4gICAgICAgICAgbWFyZ2luOiB7XG4gICAgICAgICAgICByaWdodDogMCxcbiAgICAgICAgICAgIGxlZnQ6IG1hcmdpblxuICAgICAgICAgIH0sXG4gICAgICAgICAgYnRuVGV4dFN0eWxlOiB7XG4gICAgICAgICAgICAnZm9udEZhbWlseSc6ICdcIkx1Y2lkYSBHcmFuZGVcIiwgc2Fucy1zZXJpZicsXG4gICAgICAgICAgICAnZm9udFNpemUnOiAnMTMnLFxuICAgICAgICAgICAgJ2ZpbGwnOiAnIzY5Njk2OScsXG4gICAgICAgICAgICAnbGluZS1oZWlnaHQnOiAnMScsXG4gICAgICAgICAgICAnbGV0dGVyLXNwYWNpbmcnOiAnLTAuMDRlbSdcbiAgICAgICAgICB9XG4gICAgICAgIH0pLmF0dGFjaEV2ZW50SGFuZGxlcnMoe1xuICAgICAgICAgICdjbGljayc6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHNlbGYuc2V0QWN0aXZlUGVyaW9kKHNlbGYuc3RhbmRhcmRDb250ZXh1YWxQZXJpb2RzW2ldLmRhdGVTdGFydCwgc2VsZi5zdGFuZGFyZENvbnRleHVhbFBlcmlvZHNbaV0uZGF0ZUVuZCk7XG4gICAgICAgICAgICBzZWxmLmNsaWNrZWRJZCA9IHNlbGYuc3RhbmRhcmRDb250ZXh1YWxQZXJpb2RzW2ldLmFiYnJldmlhdGlvbjtcbiAgICAgICAgICAgIC8vIHRvb2xiYXIuZGlzcG9zZSgpO1xuICAgICAgICAgICAgLy8gc2VsZi50b29sYmFycy5wb3AoKTtcbiAgICAgICAgICAgIC8vIHNlbGYudG9vbGJhcnMucHVzaChzZWxmLmNyZWF0ZVRvb2xiYXIoKSk7XG4gICAgICAgICAgICAvLyBzZWxmLmdldExvZ2ljYWxTcGFjZSgpO1xuICAgICAgICAgICAgLy8gc2VsZi5kcmF3KCk7XG4gICAgICAgICAgICAvLyBzZWxmLl9yZWYucmVBbGxvY2F0ZShzZWxmLnBhcmVudEdyb3VwKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHRvb2x0ZXh0OiB0aGlzLnN0YW5kYXJkQ29udGV4dWFsUGVyaW9kc1tpXS5kZXNjcmlwdGlvblxuICAgICAgICB9KTtcbiAgICAgICAgdW5pZ3JvdXAuYWRkU3ltYm9sKGNvbnRleHR1YWxCdXR0b25zW2ldKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5TeW1ib2xTdG9yZS5yZWdpc3RlcigndGV4dEJveEljb24nLCBmdW5jdGlvbiAoeCwgeSwgcmFkLCB3LCBoLCBwYWRYLCBwYWRZKSB7XG4gICAgICAgIHZhciB4MSA9IHggLSB3IC8gMiArIHBhZFggLyAyLFxuICAgICAgICAgIHgyID0geCArIHcgLyAyIC0gcGFkWCAvIDIsXG4gICAgICAgICAgeTEgPSB5IC0gaCAvIDIgKyBwYWRZIC8gMixcbiAgICAgICAgICB5MiA9IHkgKyBoIC8gMiAtIHBhZFkgLyAyO1xuXG4gICAgICAgIHJldHVybiBbJ00nLCB4MSwgeTEsICdMJywgeDIsIHkxLCAnTCcsIHgyLCB5MiwgJ0wnLCB4MSwgeTIsICdaJ107XG4gICAgICB9KTtcblxuICAgICAgdG9vbGJhci5hZGRDb21wb25lbnQoZ3JvdXApO1xuICAgICAgdG9vbGJhci5hZGRDb21wb25lbnQodW5pZ3JvdXApO1xuICAgICAgdGhpcy50b29sYmFyID0gdG9vbGJhcjtcbiAgICAgIHJldHVybiB0b29sYmFyO1xuICAgIH07XG5cbiAgICBnZXRMb2dpY2FsU3BhY2UgKGF2YWlsYWJsZVdpZHRoID0gdGhpcy5fcFdpZHRoLCBhdmFpbGFibGVIZWlnaHQgPSB0aGlzLl9wSGVpZ2h0KSB7XG4gICAgICAvLyBhdmFpbGFibGVXaWR0aCAvPSAyO1xuICAgICAgdmFyIGxvZ2ljYWxTcGFjZSxcbiAgICAgICAgd2lkdGggPSA0MjAsIC8vIHdpZHRoIGhhcmRjb2RlZDsgVE9ETzogbWFrZSBpdCBkeW5hbWljXG4gICAgICAgIGhlaWdodCA9IDAsXG4gICAgICAgIGksXG4gICAgICAgIGxuO1xuXG4gICAgICBmb3IgKGkgPSAwLCBsbiA9IHRoaXMudG9vbGJhcnMubGVuZ3RoOyBpIDwgbG47IGkrKykge1xuICAgICAgICBsb2dpY2FsU3BhY2UgPSB0aGlzLnRvb2xiYXJzW2ldLmdldExvZ2ljYWxTcGFjZShhdmFpbGFibGVXaWR0aCwgYXZhaWxhYmxlSGVpZ2h0KTtcbiAgICAgICAgLy8gd2lkdGggPSBNYXRoLm1heChsb2dpY2FsU3BhY2Uud2lkdGgsIHdpZHRoKTtcbiAgICAgICAgaGVpZ2h0ICs9IGxvZ2ljYWxTcGFjZS5oZWlnaHQ7XG4gICAgICAgIHRoaXMudG9vbGJhcnNbaV0ud2lkdGggPSBsb2dpY2FsU3BhY2Uud2lkdGg7XG4gICAgICAgIHRoaXMudG9vbGJhcnNbaV0uaGVpZ2h0ID0gbG9naWNhbFNwYWNlLmhlaWdodDtcbiAgICAgIH1cbiAgICAgIGhlaWdodCArPSB0aGlzLnBhZGRpbmc7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB3aWR0aDogd2lkdGgsXG4gICAgICAgIGhlaWdodDogaGVpZ2h0XG4gICAgICB9O1xuICAgIH07XG5cbiAgICBnZXREZWZhdWx0R3JvdXAgKCkge1xuICAgICAgcmV0dXJuIHRoaXMucGFyZW50R3JvdXA7XG4gICAgfVxuXG4gICAgcGxhY2VJbkNhbnZhcyAoKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICBzZWxmLnBhZGRpbmcgPSA1O1xuICAgICAgc2VsZi5zcGFjZU1hbmFnZXJJbnN0YW5jZS5hZGQoW3tcbiAgICAgICAgbmFtZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJldHVybiAnc3RhbmRhcmQtcGVyaW9kLXNlbGVjdG9yLWV4dCc7XG4gICAgICAgIH0sXG4gICAgICAgIHJlZjogZnVuY3Rpb24gKG9iaikge1xuICAgICAgICAgIHJldHVybiBvYmpbJzAnXTtcbiAgICAgICAgfSxcbiAgICAgICAgc2VsZjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJldHVybiBzZWxmO1xuICAgICAgICB9LFxuICAgICAgICBwcmlvcml0eTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJldHVybiAyO1xuICAgICAgICB9LFxuICAgICAgICBsYXlvdXQ6IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgICByZXR1cm4gb2JqLmlubGluZTtcbiAgICAgICAgfSxcbiAgICAgICAgb3JpZW50YXRpb246IFt7XG4gICAgICAgICAgdHlwZTogZnVuY3Rpb24gKG9iaikge1xuICAgICAgICAgICAgcmV0dXJuIG9iai5ob3Jpem9udGFsO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgcG9zaXRpb246IFt7XG4gICAgICAgICAgICB0eXBlOiBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgICAgICAgIHJldHVybiBvYmoudG9wO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGFsaWdubWVudDogW3tcbiAgICAgICAgICAgICAgdHlwZTogZnVuY3Rpb24gKG9iaikge1xuICAgICAgICAgICAgICAgIHJldHVybiBvYmoubGVmdDtcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgZGltZW5zaW9uczogW2Z1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgcGFyZW50ID0gdGhpcy5nZXRQYXJlbnRDb21wb25lbnRHcm91cCgpO1xuICAgICAgICAgICAgICAgIHNlbGYuX3JlZiA9IHRoaXM7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYuZ2V0TG9naWNhbFNwYWNlKChzZWxmLl9wV2lkdGggPSBwYXJlbnQuZ2V0V2lkdGgoKSksIChzZWxmLl9wSGVpZ2h0ID0gcGFyZW50LmdldEhlaWdodCgpKSk7XG4gICAgICAgICAgICAgIH1dXG4gICAgICAgICAgICB9XVxuICAgICAgICAgIH1dXG4gICAgICAgIH1dXG4gICAgICB9XSk7XG4gICAgfTtcblxuICAgIHNldERyYXdpbmdDb25maWd1cmF0aW9uICh4LCB5LCB3aWR0aCwgaGVpZ2h0LCBncm91cCkge1xuICAgICAgdmFyIG1lcyA9IHRoaXMubWVhc3VyZW1lbnQ7XG4gICAgICBtZXMueCA9IHg7XG4gICAgICBtZXMueSA9IHk7XG4gICAgICBtZXMud2lkdGggPSB3aWR0aDtcbiAgICAgIG1lcy5oZWlnaHQgPSBoZWlnaHQ7XG5cbiAgICAgIHRoaXMucGFyZW50R3JvdXAgPSBncm91cDtcblxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIGRyYXcgKHgsIHksIHdpZHRoLCBoZWlnaHQsIGdyb3VwKSB7XG4gICAgICB2YXIgbWVhc3VyZW1lbnQgPSB0aGlzLm1lYXN1cmVtZW50LFxuICAgICAgICB0b29sYmFycyA9IHRoaXMudG9vbGJhcnMsXG4gICAgICAgIHNlbGYgPSB0aGlzLFxuICAgICAgICBsbixcbiAgICAgICAgaSxcbiAgICAgICAgdG9vbGJhcixcbiAgICAgICAgYm91bmRFbGVtZW50LFxuICAgICAgICBiQm94LFxuICAgICAgICB4MSxcbiAgICAgICAgeDIsXG4gICAgICAgIHkyLFxuICAgICAgICBzZWxlY3RMaW5lLFxuICAgICAgICBtb2RlbCA9IHRoaXMuZ2xvYmFsUmVhY3RpdmVNb2RlbDtcblxuICAgICAgdGhpcy5mbGFnID0gdHJ1ZTtcbiAgICAgIHNlbGVjdExpbmUgPSB0aGlzLnNhdmVTZWxlY3RMaW5lIHx8IHRoaXMuZ3JhcGhpY3MucGFwZXIucGF0aCh7XG4gICAgICAgICdzdHJva2UnOiAnI2M5NWE1YScsXG4gICAgICAgICdzdHJva2Utd2lkdGgnOiAnMnB4J1xuICAgICAgfSkudG9Gcm9udCgpO1xuICAgICAgeCA9IHggPT09IHVuZGVmaW5lZCA/IG1lYXN1cmVtZW50LnggOiB4O1xuICAgICAgeSA9IHkgPT09IHVuZGVmaW5lZCA/IG1lYXN1cmVtZW50LnkgOiB5O1xuICAgICAgd2lkdGggPSB3aWR0aCA9PT0gdW5kZWZpbmVkID8gbWVhc3VyZW1lbnQud2lkdGggOiB3aWR0aDtcbiAgICAgIGhlaWdodCA9IGhlaWdodCA9PT0gdW5kZWZpbmVkID8gbWVhc3VyZW1lbnQuaGVpZ2h0IDogaGVpZ2h0O1xuICAgICAgZ3JvdXAgPSBncm91cCA9PT0gdW5kZWZpbmVkID8gdGhpcy5wYXJlbnRHcm91cCA6IGdyb3VwO1xuICAgICAgaWYgKHdpZHRoICYmIGhlaWdodCkge1xuICAgICAgICBmb3IgKGkgPSAwLCBsbiA9IHRvb2xiYXJzLmxlbmd0aDsgaSA8IGxuOyBpKyspIHtcbiAgICAgICAgICB0b29sYmFyID0gdG9vbGJhcnNbaV07XG4gICAgICAgICAgdG9vbGJhci5kcmF3KHgsIHksIGdyb3VwKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy5zYXZlU2VsZWN0TGluZSA9IHNlbGVjdExpbmU7XG4gICAgICBmb3IgKGxldCBpID0gMCwgaWkgPSB0b29sYmFyc1swXS5jb21wb25lbnRHcm91cHNbMV0uc3ltYm9sTGlzdDsgaSA8IGlpLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChpaVtpXS5zeW1ib2wgPT09IHRoaXMuY2xpY2tlZElkKSB7XG4gICAgICAgICAgYm91bmRFbGVtZW50ID0gaWlbaV0uZ2V0Qm91bmRFbGVtZW50KCk7XG4gICAgICAgICAgYkJveCA9IGJvdW5kRWxlbWVudC5nZXRCQm94KCk7XG4gICAgICAgICAgeDEgPSBiQm94Lng7XG4gICAgICAgICAgeDIgPSBiQm94LngyO1xuICAgICAgICAgIHkyID0gYkJveC55MjtcblxuICAgICAgICAgIHNlbGVjdExpbmUuYXR0cih7XG4gICAgICAgICAgICBwYXRoOiBbJ00nLCB4MSAtIDAuNSwgeTIgLSAwLjUsICdMJywgeDIgKyAwLjUsIHkyIC0gMC41XVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgfVxuICByZXR1cm4gU3RhbmRhcmRQZXJpb2RTZWxlY3Rvcjtcbn07XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvc3RhbmRhcmQtcGVyaW9kLXNlbGVjdG9yLmpzIl0sInNvdXJjZVJvb3QiOiIifQ==