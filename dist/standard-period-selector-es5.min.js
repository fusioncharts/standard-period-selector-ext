!function(t){function e(a){if(i[a])return i[a].exports;var n=i[a]={exports:{},id:a,loaded:!1};return t[a].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){(function(t){"use strict";var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=i(2);window.stPS=new a,function(i,a){"object"===e(t)&&t.exports?t.exports=i.document?a(i):function(t){if(!t.document)throw new Error("Window with document not present");return a(t,!0)}:i.Aggregator=a(i,!0)}("undefined"!=typeof window?window:void 0,function(t,e){var i=t.FusionCharts;i.register("extension",["private","StandardPeriodSelector",function(){i.registerComponent("extensions","StandardPeriodSelector",a)}])})}).call(e,i(1)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}(),n=function(){function t(){i(this,t),this.ratio=8,this.toolbox=FusionCharts.getComponent("api","toolbox"),this.HorizontalToolbar=this.toolbox.HorizontalToolbar,this.ComponentGroup=this.toolbox.ComponentGroup,this.SymbolStore=this.toolbox.SymbolStore,this.all=1,this.calculatedPeriods=[],this.startDataset=0,this.startActiveWindow=0,this.endActiveWindow=1,this.standardCalculatedPeriods=[],this.standardContexualPeriods=[],this.startPointUnit=0,this.startPointMultiplier=0,this.clickedId,this.noCalcButtons=0,this.timePeriods=[{name:"second",milliseconds:1e3,startingPoint:0,total:60,abbreviation:"sec",description:"SECOND",parent:"minute",multipliers:[1,5,15,30]},{name:"minute",milliseconds:6e4,startingPoint:0,total:60,abbreviation:"min",description:"MINUTE",parent:"hour",multipliers:[1,5,15,30]},{name:"hour",milliseconds:36e5,startingPoint:0,total:24,abbreviation:"hr",description:"HOUR",parent:"day",multipliers:[1,3,6,12]},{name:"day",milliseconds:864e5,startingPoint:0,total:30,abbreviation:"D",description:"DAY",parent:"month",multipliers:[1,7,15]},{name:"month",milliseconds:2592e6,startingPoint:0,total:12,abbreviation:"M",description:"MONTH",parent:"year",multipliers:[1,3,6]},{name:"year",milliseconds:31104e6,startingPoint:0,abbreviation:"Y",description:"YEAR",multipliers:[1,3,5]}],this.tdButtons=[{name:"YTD",abbreviation:"YTD",parent:"year",milliseconds:31104e6,description:"Year to Date"},{name:"QTD",abbreviation:"QTD",parent:"month",multiplier:3,milliseconds:7776e6,description:"Quarter to Date"},{name:"MTD",abbreviation:"MTD",parent:"month",milliseconds:2592e6,description:"Month to Date"},{name:"WTD",abbreviation:"WTD",parent:"day",multiplier:7,milliseconds:6048e5,description:"Week to Date"},{name:"Y",abbreviation:"Y",parent:"day",milliseconds:864e5,description:"Yesterday"},{name:"T",abbreviation:"T",parent:"day",milliseconds:864e5,description:"Today"}],this.config={anchorPositions:"right",all:"1",contextual:"1",calculated:"1",tertiaryTimePeriods:{}}}return a(t,[{key:"generateCalculatedButtons",value:function(){var t=this.endActiveWindow-this.startDataset,e=0,i=0,a=this.endActiveWindow-this.startActiveWindow,n=0;for(this.standardCalculatedPeriods=[],e=0;e<this.timePeriods.length;e++)if(t/this.timePeriods[e].milliseconds>=1)if(Math.floor(a/this.timePeriods[e].milliseconds)<1)this.standardCalculatedPeriods.push({abbreviation:this.timePeriods[e].abbreviation,description:this.timePeriods[e].description,milliseconds:this.timePeriods[e].milliseconds,multipliers:[1]});else for(this.standardCalculatedPeriods.push({abbreviation:this.timePeriods[e].abbreviation,description:this.timePeriods[e].description,milliseconds:this.timePeriods[e].milliseconds,multipliers:[]}),i=0;i<this.timePeriods[e].multipliers.length;i++)a/this.ratio<this.timePeriods[e].multipliers[i]*this.timePeriods[e].milliseconds&&this.standardCalculatedPeriods[this.standardCalculatedPeriods.length-1].multipliers.push(this.timePeriods[e].multipliers[i]);for(this.noCalcButtons=1/0,e=0;e<this.standardCalculatedPeriods.length;e++)for(i=0;i<this.standardCalculatedPeriods[e].multipliers.length;i++)++n,this.noCalcButtons>e&&(this.noCalcButtons=e),n<=4&&(this.startPointMultiplier=i,this.startPointUnit=e)}},{key:"generateContextualButtons",value:function(){for(var t=[],e=0,i=this.globalReactiveModel.model["x-axis-absolute-range-end"],a=i-2,n=i,o={};e<this.tdButtons.length;e++)a=new Date(i),"YTD"===this.tdButtons[e].name?(a.setMonth(0),a.setDate(1),a.setHours(0),a.setMinutes(0),a.setSeconds(0)):"MTD"===this.tdButtons[e].name?(a.setDate(1),a.setHours(0),a.setMinutes(0),a.setSeconds(0)):"QTD"===this.tdButtons[e].name?(a.setMonth(11-a.getMonth()%4),a.setDate(0),a.setHours(0),a.setMinutes(0),a.setSeconds(0)):"WTD"===this.tdButtons[e].name?(a.setDate(a.getDate()-a.getDay()),a.setHours(0),a.setMinutes(0),a.setSeconds(0)):"Y"===this.tdButtons[e].name?(a.setHours(0),a.setMinutes(0),a.setSeconds(0),a-=864e5):"T"===this.tdButtons[e].name&&(a.setHours(0),a.setMinutes(0),a.setSeconds(0)),n<a||(this.tdButtons[e].dateStart=a.valueOf(),this.tdButtons[e].dateEnd=n.valueOf(),t.push(this.tdButtons[e]));for(o.milliseconds=1/0,e=0;e<this.tdButtons.length;e++)Math.abs(this.tdButtons[e].milliseconds-(this.endActiveWindow-this.startActiveWindow))<o.milliseconds&&(o.milliseconds=this.tdButtons[e].milliseconds,o.name=this.tdButtons[e].abbreviation);this.standardContexualPeriods=t}},{key:"setActivePeriod",value:function(){var t,e;1===arguments.length?(e=this.globalReactiveModel.model["x-axis-visible-range-end"],t=e-arguments[0]):2===arguments.length&&(t=arguments[0],e=arguments[1]),this.startActiveWindow=t,this.endActiveWindow=e,document.getElementById("startActiveRange").innerHTML=new Date(this.startActiveWindow),document.getElementById("endActiveRange").innerHTML=new Date(this.endActiveWindow),this.generateCalculatedButtons(),this.globalReactiveModel.model["x-axis-visible-range-start"]=this.startActiveWindow,this.globalReactiveModel.model["x-axis-visible-range-end"]=this.endActiveWindow,this.generateContextualButtons()}},{key:"setTimeline",value:function(t,e){this.startDataset=t,this.endDataset=e,document.getElementById("startActiveRange").innerHTML=new Date(this.startDataset),document.getElementById("endActiveRange").innerHTML=new Date(this.endDataset),this.generateCalculatedButtons()}},{key:"drawButtonsCalculated",value:function(t){var e,i=document.getElementById("calculated"),a=0,n=0,o=0,s=this,r=this.globalReactiveModel.model["x-axis-visible-range-end"];for(i.innerHTML="",a=t.length-1;a>=0;a--)for(n=t[a].multipliers.length-1;n>=0;n--)e=document.createElement("BUTTON"),e.id=t[a].multipliers[n]+t[a].abbreviation,e.innerHTML=t[a].multipliers[n]+t[a].abbreviation,o=t[a].multipliers[n]*t[a].milliseconds,e.multiplierValue=o,e.addEventListener("click",function(t){s.setActivePeriod(r-t.srcElement.multiplierValue,r)}),i.appendChild(e);this.standardCalculatedPeriods=[]}},{key:"drawButtonsContextual",value:function(t){function e(t){o.setActivePeriod(t.dateStart,t.dateEnd)}var i,a=document.getElementById("contextual"),n=0,o=this;for(a.innerHTML="",n=0;n<t.length;n++)i=document.createElement("BUTTON"),i.id=t[n].abbreviation,i.innerHTML=t[n].abbreviation,i.addEventListener("click",e.bind(this,t[n])),a.appendChild(i);this.standardContextualPeriods=[]}},{key:"drawButtonAll",value:function(t){var e,i=document.getElementById("allButton"),a=this;i.innerHTML="",e=document.createElement("BUTTON"),e.id="all",e.innerHTML="ALL",e.addEventListener("click",function(t){a.setActivePeriod(a.startDataset,a.endDataset)}),i.appendChild(e)}},{key:"configure",value:function(t){this.config=t}},{key:"init",value:function(t){var e=this;return t(["xAxis","yAxis","graphics","chart","dataset","PlotManager","canvasConfig","MarkerManager","reactiveModel","globalReactiveModel","spaceManagerInstance","smartLabel",function(t,i,a,n,o,s,r,l,d,c,h,u){e.xAxis=t,e.yAxis=i,e.graphics=a,e.chart=n,e.dataset=o,e.plotManager=s,e.markerManager=l,e.canvasConfig=r,e.reactiveModel=d,e.globalReactiveModel=c,e.spaceManagerInstance=h,e.smartLabel=u}]),this.spaceManagerInstance=e.spaceManagerInstance,this.globalReactiveModel=e.globalReactiveModel,this.endActiveWindow=e.globalReactiveModel.model["x-axis-visible-range-end"],this.startActiveWindow=e.globalReactiveModel.model["x-axis-visible-range-start"],this.startDataset=e.globalReactiveModel.model["x-axis-absolute-range-start"],this.endDataset=e.globalReactiveModel.model["x-axis-absolute-range-end"],this.setActivePeriod(this.startActiveWindow,this.endActiveWindow),this.setActivePeriod(this.startActiveWindow,this.endActiveWindow),this.toolbars=[],this.measurement={},this.toolbars.push(this.createToolbar()),this}},{key:"createToolbar",value:function(){var t,e,i,a,n,o,s,r,l,d,c,h,u=this,p=this,m=this.globalReactiveModel.model["x-axis-visible-range-end"],b=[];for(h=new this.toolbox.ComponentGroup({paper:this.graphics.paper,chart:this.chart,smartLabel:this.smartLabel,chartContainer:this.graphics.container}),t=new this.toolbox.UniSelectComponentGroup({paper:this.graphics.paper,chart:this.chart,smartLabel:this.smartLabel,chartContainer:this.graphics.container}),t.setConfig({fill:"#fff",borderThickness:0}),h.setConfig({fill:"#fff",borderThickness:0}),e=new this.HorizontalToolbar({paper:this.graphics.paper,chart:this.chart,smartLabel:this.smartLabel,chartContainer:this.graphics.container}),e.setConfig({fill:"#fff",borderThickness:0}),c=new this.toolbox.Label("Zoom:",{smartLabel:this.smartLabel,paper:this.graphics.paper},{text:{style:{"font-size":"15",fontFamily:"MyriadPro"}}}),h.addSymbol(c),n=new this.toolbox.Symbol("ALL",!0,{paper:this.graphics.paper,chart:this.chart,smartLabel:this.smartLabel,chartContainer:this.graphics.container},{fill:"#ffffff",labelFill:"#696969",symbolStrokeWidth:"2",symbolStroke:"#000000",strokeWidth:"1",hoverFill:"#7f7f7f",radius:1,margin:{right:5}}).attachEventHandlers({click:function(){p.setActivePeriod(p.startDataset,p.endDataset),e.dispose(),p.clickedId="ALL",p.toolbars.pop(),p.toolbars.push(p.createToolbar()),p.getLogicalSpace(),p.draw()}}),t.addSymbol(n),r=0;r<this.standardCalculatedPeriods.length;r++)for(l=this.standardCalculatedPeriods[r].multipliers.length-1;l>=0;l--)b.push(p.standardCalculatedPeriods[r].multipliers[l]*p.standardCalculatedPeriods[r].milliseconds);i=[];for(var f=function(a){o=a===p.startPointUnit?p.startPointMultiplier:p.standardCalculatedPeriods[a].multipliers.length-1;for(var n=function(n){d=a===p.noCalcButtons&&0===n?5:0,console.log(m,a,p.noCalcButtons,n,d),i[a]=new u.toolbox.Symbol(p.standardCalculatedPeriods[a].multipliers[n]+p.standardCalculatedPeriods[a].abbreviation,!0,{paper:u.graphics.paper,chart:u.chart,smartLabel:u.smartLabel,chartContainer:u.graphics.container},{fill:"#ffffff",labelFill:"#696969",symbolStrokeWidth:"2",symbolStroke:"#000000",strokeWidth:"1",hoverFill:"#7f7f7f",radius:1,margin:{right:d}}).attachEventHandlers({click:function(){s=p.standardCalculatedPeriods[a].multipliers[n]*p.standardCalculatedPeriods[a].milliseconds,p.clickedId=p.standardCalculatedPeriods[a].multipliers[n]+p.standardCalculatedPeriods[a].abbreviation,p.setActivePeriod(s),e.dispose(),p.toolbars.pop(),p.toolbars.push(p.createToolbar()),p.getLogicalSpace(),p.draw()}}),t.addSymbol(i[a])},r=o;r>=0;r--)n(r)},g=p.startPointUnit;g>=0;g--)f(g);a=[];for(var v=function(i){a[i]=new u.toolbox.Symbol(u.standardContexualPeriods[i].abbreviation,!0,{paper:u.graphics.paper,chart:u.chart,smartLabel:u.smartLabel,chartContainer:u.graphics.container},{fill:"#ffffff",labelFill:"#696969",symbolStrokeWidth:"2",symbolStroke:"#000000",strokeWidth:"1",hoverFill:"#7f7f7f",radius:1,margin:{right:0}}).attachEventHandlers({click:function(){p.setActivePeriod(p.standardContexualPeriods[i].dateStart,p.standardContexualPeriods[i].dateEnd),p.clickedId=p.standardContexualPeriods[i].abbreviation,e.dispose(),p.toolbars.pop(),p.toolbars.push(p.createToolbar()),p.getLogicalSpace(),p.draw()}}),t.addSymbol(a[i])},y=0;y<this.standardContexualPeriods.length;y++)v(y);return this.SymbolStore.register("textBoxIcon",function(t,e,i,a,n,o,s){var r=t-a/2+o/2,l=t+a/2-o/2,d=e-n/2+s/2,c=e+n/2-s/2;return["M",r,d,"L",l,d,"L",l,c,"L",r,c,"Z"]}),e.addComponent(h),e.addComponent(t),e}},{key:"getLogicalSpace",value:function(t,e){t/=2;var i,a,n,o=0,s=0;for(a=0,n=this.toolbars.length;a<n;a++)i=this.toolbars[a].getLogicalSpace(),o=Math.max(i.width,o),s+=i.height,this.toolbars[a].width=i.width,this.toolbars[a].height=i.height;return s+=this.padding,{width:o>t?0:o,height:s>e?0:s}}},{key:"placeInCanvas",value:function(){var t=this;t.padding=5,t.spaceManagerInstance.add([{name:function(){return"ToolBoxExt"},ref:function(t){return t[0]},self:function(){return t},priority:function(){return 2},layout:function(t){return t.inline},orientation:[{type:function(t){return t.horizontal},position:[{type:function(t){return t.top},alignment:[{type:function(t){return t.left},dimensions:[function(){var e=this.getParentComponentGroup();return t.getLogicalSpace(e.getWidth(),e.getHeight())}]}]}]}]}])}},{key:"setDrawingConfiguration",value:function(t,e,i,a,n){var o=this.measurement;return o.x=t,o.y=e,o.width=i,o.height=a,this.parentGroup=n,this}},{key:"draw",value:function(t,e,i,a,n){var o,s,r,l,d,c,h,u,p=this.measurement,m=this.toolbars;if(t=void 0===t?p.x:t,e=void 0===e?p.y:e,i=void 0===i?p.width:i,a=void 0===a?p.height:a,n=void 0===n?this.parentGroup:n,i&&a)for(s=0,o=m.length;s<o;s++)r=m[s],r.draw(t,e);console.log(m);for(var b=0,f=m[0].componentGroups[1].symbolList;b<f.length;b++)f[b].symbol===this.clickedId&&(l=f[b].getBoundElement(),d=l.getBBox(),c=d.x,h=d.x2,u=d.y2,this.graphics.paper.path({path:["M",c,u-1,"L",h,u-1],stroke:"#ff0000"}).toFront())}}]),t}();"undefined"!=typeof t&&"undefined"!=typeof t.exports?t.exports=n:window.StandardPeriod=n}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3RhbmRhcmQtcGVyaW9kLXNlbGVjdG9yLWVzNS5taW4uanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svYm9vdHN0cmFwIDU5ZGRmYTkxZmM3MDk2NmMzY2EwIiwid2VicGFjazovLy8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL2J1aWxkaW4vbW9kdWxlLmpzIiwid2VicGFjazovLy8uL3NyYy9zdGFuZGFyZC1wZXJpb2Qtc2VsZWN0b3IuanMiXSwibmFtZXMiOlsibW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImluc3RhbGxlZE1vZHVsZXMiLCJleHBvcnRzIiwibW9kdWxlIiwiaWQiLCJsb2FkZWQiLCJjYWxsIiwibSIsImMiLCJwIiwiX3R5cGVvZiIsIlN5bWJvbCIsIml0ZXJhdG9yIiwib2JqIiwiY29uc3RydWN0b3IiLCJwcm90b3R5cGUiLCJTdGFuZGFyZFBlcmlvZFNlbGVjdG9yIiwid2luZG93Iiwic3RQUyIsImVudiIsImZhY3RvcnkiLCJkb2N1bWVudCIsIndpbiIsIkVycm9yIiwiQWdncmVnYXRvciIsInVuZGVmaW5lZCIsIl93aW5kb3ciLCJ3aW5kb3dFeGlzdHMiLCJGQyIsIkZ1c2lvbkNoYXJ0cyIsInJlZ2lzdGVyIiwicmVnaXN0ZXJDb21wb25lbnQiLCJ3ZWJwYWNrUG9seWZpbGwiLCJkZXByZWNhdGUiLCJwYXRocyIsImNoaWxkcmVuIiwiX2NsYXNzQ2FsbENoZWNrIiwiaW5zdGFuY2UiLCJDb25zdHJ1Y3RvciIsIlR5cGVFcnJvciIsIl9jcmVhdGVDbGFzcyIsImRlZmluZVByb3BlcnRpZXMiLCJ0YXJnZXQiLCJwcm9wcyIsImkiLCJsZW5ndGgiLCJkZXNjcmlwdG9yIiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJrZXkiLCJwcm90b1Byb3BzIiwic3RhdGljUHJvcHMiLCJ0aGlzIiwicmF0aW8iLCJ0b29sYm94IiwiZ2V0Q29tcG9uZW50IiwiSG9yaXpvbnRhbFRvb2xiYXIiLCJDb21wb25lbnRHcm91cCIsIlN5bWJvbFN0b3JlIiwiYWxsIiwiY2FsY3VsYXRlZFBlcmlvZHMiLCJzdGFydERhdGFzZXQiLCJzdGFydEFjdGl2ZVdpbmRvdyIsImVuZEFjdGl2ZVdpbmRvdyIsInN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHMiLCJzdGFuZGFyZENvbnRleHVhbFBlcmlvZHMiLCJzdGFydFBvaW50VW5pdCIsInN0YXJ0UG9pbnRNdWx0aXBsaWVyIiwiY2xpY2tlZElkIiwibm9DYWxjQnV0dG9ucyIsInRpbWVQZXJpb2RzIiwibmFtZSIsIm1pbGxpc2Vjb25kcyIsInN0YXJ0aW5nUG9pbnQiLCJ0b3RhbCIsImFiYnJldmlhdGlvbiIsImRlc2NyaXB0aW9uIiwicGFyZW50IiwibXVsdGlwbGllcnMiLCJ0ZEJ1dHRvbnMiLCJtdWx0aXBsaWVyIiwiY29uZmlnIiwiYW5jaG9yUG9zaXRpb25zIiwiY29udGV4dHVhbCIsImNhbGN1bGF0ZWQiLCJ0ZXJ0aWFyeVRpbWVQZXJpb2RzIiwidmFsdWUiLCJ0YXJnZXRCbG9jayIsImoiLCJhY3RpdmVXaW5kb3ciLCJjb3VudCIsIk1hdGgiLCJmbG9vciIsInB1c2giLCJJbmZpbml0eSIsImJ1dHRvbnMiLCJlbmRTdGFtcCIsImdsb2JhbFJlYWN0aXZlTW9kZWwiLCJtb2RlbCIsImRhdGVTdGFydCIsImRhdGVFbmQiLCJyZWxhdGl2ZVREQnV0dG9uIiwiRGF0ZSIsInNldE1vbnRoIiwic2V0RGF0ZSIsInNldEhvdXJzIiwic2V0TWludXRlcyIsInNldFNlY29uZHMiLCJnZXRNb250aCIsImdldERhdGUiLCJnZXREYXkiLCJ2YWx1ZU9mIiwiYWJzIiwic3RhcnQiLCJlbmQiLCJhcmd1bWVudHMiLCJnZXRFbGVtZW50QnlJZCIsImlubmVySFRNTCIsImdlbmVyYXRlQ2FsY3VsYXRlZEJ1dHRvbnMiLCJnZW5lcmF0ZUNvbnRleHR1YWxCdXR0b25zIiwiZW5kRGF0YXNldCIsInN0YW5kYXJkUGVyaW9kcyIsImJ0biIsImNhbGN1bGF0ZWRCdXR0b25zIiwibXVsdGlwbGllclZhbHVlIiwic2VsZiIsImVuZEFjdGl2ZSIsImNyZWF0ZUVsZW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJzZXRBY3RpdmVQZXJpb2QiLCJzcmNFbGVtZW50IiwiYXBwZW5kQ2hpbGQiLCJldmVudEJ0biIsImNvbnRleHR1YWxCdXR0b25zIiwiYmluZCIsInN0YW5kYXJkQ29udGV4dHVhbFBlcmlvZHMiLCJhbGxCdXR0b25zIiwicmVxdWlyZSIsInhBeGlzIiwieUF4aXMiLCJncmFwaGljcyIsImNoYXJ0IiwiZGF0YXNldCIsInBsb3RNYW5hZ2VyIiwiY2FudmFzQ29uZmlnIiwibWFya2VyTWFuYWdlciIsInJlYWN0aXZlTW9kZWwiLCJzcGFjZU1hbmFnZXJJbnN0YW5jZSIsInNtYXJ0TGFiZWwiLCJ0b29sYmFycyIsIm1lYXN1cmVtZW50IiwiY3JlYXRlVG9vbGJhciIsInVuaWdyb3VwIiwidG9vbGJhciIsImFsbEJ1dHRvbiIsInN0YXJ0TXVsdGlwbGllciIsImRlZHVjdG9yIiwibWFyZ2luIiwiZnJvbURhdGVMYWJlbCIsImdyb3VwIiwiX3RoaXMiLCJkZWR1Y3RvckFyIiwicGFwZXIiLCJjaGFydENvbnRhaW5lciIsImNvbnRhaW5lciIsIlVuaVNlbGVjdENvbXBvbmVudEdyb3VwIiwic2V0Q29uZmlnIiwiZmlsbCIsImJvcmRlclRoaWNrbmVzcyIsIkxhYmVsIiwidGV4dCIsInN0eWxlIiwiZm9udC1zaXplIiwiZm9udEZhbWlseSIsImFkZFN5bWJvbCIsImxhYmVsRmlsbCIsInN5bWJvbFN0cm9rZVdpZHRoIiwic3ltYm9sU3Ryb2tlIiwic3Ryb2tlV2lkdGgiLCJob3ZlckZpbGwiLCJyYWRpdXMiLCJyaWdodCIsImF0dGFjaEV2ZW50SGFuZGxlcnMiLCJjbGljayIsImRpc3Bvc2UiLCJwb3AiLCJnZXRMb2dpY2FsU3BhY2UiLCJkcmF3IiwiX2xvb3AiLCJfbG9vcDMiLCJjb25zb2xlIiwibG9nIiwiX2xvb3AyIiwieCIsInkiLCJyYWQiLCJ3IiwiaCIsInBhZFgiLCJwYWRZIiwieDEiLCJ4MiIsInkxIiwieTIiLCJhZGRDb21wb25lbnQiLCJhdmFpbGFibGVXaWR0aCIsImF2YWlsYWJsZUhlaWdodCIsImxvZ2ljYWxTcGFjZSIsImxuIiwid2lkdGgiLCJoZWlnaHQiLCJtYXgiLCJwYWRkaW5nIiwiYWRkIiwicmVmIiwicHJpb3JpdHkiLCJsYXlvdXQiLCJpbmxpbmUiLCJvcmllbnRhdGlvbiIsInR5cGUiLCJob3Jpem9udGFsIiwicG9zaXRpb24iLCJ0b3AiLCJhbGlnbm1lbnQiLCJsZWZ0IiwiZGltZW5zaW9ucyIsImdldFBhcmVudENvbXBvbmVudEdyb3VwIiwiZ2V0V2lkdGgiLCJnZXRIZWlnaHQiLCJtZXMiLCJwYXJlbnRHcm91cCIsImJvdW5kRWxlbWVudCIsImJCb3giLCJpaSIsImNvbXBvbmVudEdyb3VwcyIsInN5bWJvbExpc3QiLCJzeW1ib2wiLCJnZXRCb3VuZEVsZW1lbnQiLCJnZXRCQm94IiwicGF0aCIsInN0cm9rZSIsInRvRnJvbnQiLCJTdGFuZGFyZFBlcmlvZCJdLCJtYXBwaW5ncyI6IkNBQVMsU0FBVUEsR0NJbkIsUUFBQUMsR0FBQUMsR0FHQSxHQUFBQyxFQUFBRCxHQUNBLE1BQUFDLEdBQUFELEdBQUFFLE9BR0EsSUFBQUMsR0FBQUYsRUFBQUQsSUFDQUUsV0FDQUUsR0FBQUosRUFDQUssUUFBQSxFQVVBLE9BTkFQLEdBQUFFLEdBQUFNLEtBQUFILEVBQUFELFFBQUFDLElBQUFELFFBQUFILEdBR0FJLEVBQUFFLFFBQUEsRUFHQUYsRUFBQUQsUUF2QkEsR0FBQUQsS0FxQ0EsT0FUQUYsR0FBQVEsRUFBQVQsRUFHQUMsRUFBQVMsRUFBQVAsRUFHQUYsRUFBQVUsRUFBQSxHQUdBVixFQUFBLEtETU0sU0FBU0ksRUFBUUQsRUFBU0gsSUU1Q2hDLFNBQUFJLEdBQUEsWUZnREMsSUFBSU8sR0FBNEIsa0JBQVhDLFNBQW9ELGdCQUFwQkEsUUFBT0MsU0FBd0IsU0FBVUMsR0FBTyxhQUFjQSxJQUFTLFNBQVVBLEdBQU8sTUFBT0EsSUFBeUIsa0JBQVhGLFNBQXlCRSxFQUFJQyxjQUFnQkgsUUFBVUUsSUFBUUYsT0FBT0ksVUFBWSxlQUFrQkYsSUUvQ2pRRyxFQUF5QmpCLEVBQVEsRUFFdkNrQixRQUFPQyxLQUFPLEdBQUlGLEdBRWpCLFNBQVdHLEVBQUtDLEdBQ08sV0FBbEJWLEVBQU9QLElBQXVCQSxFQUFPRCxRQUN2Q0MsRUFBT0QsUUFBVWlCLEVBQUlFLFNBQ2hCRCxFQUFRRCxHQUFPLFNBQVVHLEdBQ3pCLElBQUtBLEVBQUlELFNBQ1AsS0FBTSxJQUFJRSxPQUFNLG1DQUVsQixPQUFPSCxHQUFRRSxHQUFLLElBR3pCSCxFQUFJSyxXQUFhSixFQUFRRCxHQUFLLElBRWIsbUJBQVhGLFFBQXlCQSxPQUFoQ1EsT0FBK0MsU0FBVUMsRUFBU0MsR0FDbkUsR0FBSUMsR0FBS0YsRUFBUUcsWUFFakJELEdBQUdFLFNBQVMsYUFBYyxVQUFXLHlCQUEwQixXQUM3REYsRUFBR0csa0JBQWtCLGFBQWMseUJBQTBCZixVRm1EbkNWLEtBQUtKLEVBQVNILEVBQW9CLEdBQUdJLEtBSTdELFNBQVNBLEVBQVFELEdHNUV2QkMsRUFBQUQsUUFBQSxTQUFBQyxHQVFBLE1BUEFBLEdBQUE2QixrQkFDQTdCLEVBQUE4QixVQUFBLGFBQ0E5QixFQUFBK0IsU0FFQS9CLEVBQUFnQyxZQUNBaEMsRUFBQTZCLGdCQUFBLEdBRUE3QixJSG9GTSxTQUFTQSxFQUFRRCxHSTVGdkIsWUpzR0MsU0FBU2tDLEdBQWdCQyxFQUFVQyxHQUFlLEtBQU1ELFlBQW9CQyxJQUFnQixLQUFNLElBQUlDLFdBQVUscUNBRmhILEdBQUlDLEdBQWUsV0FBYyxRQUFTQyxHQUFpQkMsRUFBUUMsR0FBUyxJQUFLLEdBQUlDLEdBQUksRUFBR0EsRUFBSUQsRUFBTUUsT0FBUUQsSUFBSyxDQUFFLEdBQUlFLEdBQWFILEVBQU1DLEVBQUlFLEdBQVdDLFdBQWFELEVBQVdDLGFBQWMsRUFBT0QsRUFBV0UsY0FBZSxFQUFVLFNBQVdGLEtBQVlBLEVBQVdHLFVBQVcsR0FBTUMsT0FBT0MsZUFBZVQsRUFBUUksRUFBV00sSUFBS04sSUFBaUIsTUFBTyxVQUFVUixFQUFhZSxFQUFZQyxHQUFpSixNQUE5SEQsSUFBWVosRUFBaUJILEVBQVl2QixVQUFXc0MsR0FBaUJDLEdBQWFiLEVBQWlCSCxFQUFhZ0IsR0FBcUJoQixNSTlGM2hCdEIsRUprR3dCLFdJakc1QixRQUFBQSxLQUFlb0IsRUFBQW1CLEtBQUF2QyxHQUlidUMsS0FBS0MsTUFBUSxFQUNiRCxLQUFLRSxRQUFVNUIsYUFBYTZCLGFBQWEsTUFBTyxXQUNoREgsS0FBS0ksa0JBQW9CSixLQUFLRSxRQUFRRSxrQkFDdENKLEtBQUtLLGVBQWlCTCxLQUFLRSxRQUFRRyxlQUNuQ0wsS0FBS00sWUFBY04sS0FBS0UsUUFBUUksWUFDaENOLEtBQUtPLElBQU0sRUFDWFAsS0FBS1EscUJBQ0xSLEtBQUtTLGFBQWUsRUFFcEJULEtBQUtVLGtCQUFvQixFQUN6QlYsS0FBS1csZ0JBQWtCLEVBQ3ZCWCxLQUFLWSw2QkFDTFosS0FBS2EsNEJBQ0xiLEtBQUtjLGVBQWlCLEVBQ3RCZCxLQUFLZSxxQkFBdUIsRUFDNUJmLEtBQUtnQixVQUNMaEIsS0FBS2lCLGNBQWdCLEVBQ3JCakIsS0FBS2tCLGNBQ0hDLEtBQVEsU0FDUkMsYUFBZ0IsSUFDaEJDLGNBQWlCLEVBQ2pCQyxNQUFTLEdBQ1RDLGFBQWdCLE1BQ2hCQyxZQUFlLFNBQ2ZDLE9BQVUsU0FDVkMsYUFBZ0IsRUFBRyxFQUFHLEdBQUksTUFFMUJQLEtBQVEsU0FDUkMsYUFBZ0IsSUFDaEJDLGNBQWlCLEVBQ2pCQyxNQUFTLEdBQ1RDLGFBQWdCLE1BQ2hCQyxZQUFlLFNBQ2ZDLE9BQVUsT0FDVkMsYUFBZ0IsRUFBRyxFQUFHLEdBQUksTUFFMUJQLEtBQVEsT0FDUkMsYUFBZ0IsS0FDaEJDLGNBQWlCLEVBQ2pCQyxNQUFTLEdBQ1RDLGFBQWdCLEtBQ2hCQyxZQUFlLE9BQ2ZDLE9BQVUsTUFDVkMsYUFBZ0IsRUFBRyxFQUFHLEVBQUcsTUFFekJQLEtBQVEsTUFDUkMsYUFBZ0IsTUFDaEJDLGNBQWlCLEVBQ2pCQyxNQUFTLEdBQ1RDLGFBQWdCLElBQ2hCQyxZQUFlLE1BQ2ZDLE9BQVUsUUFDVkMsYUFBZ0IsRUFBRyxFQUFHLE1BRXRCUCxLQUFRLFFBQ1JDLGFBQWdCLE9BQ2hCQyxjQUFpQixFQUNqQkMsTUFBUyxHQUNUQyxhQUFnQixJQUNoQkMsWUFBZSxRQUNmQyxPQUFVLE9BQ1ZDLGFBQWdCLEVBQUcsRUFBRyxLQUV0QlAsS0FBUSxPQUNSQyxhQUFnQixRQUNoQkMsY0FBaUIsRUFDakJFLGFBQWdCLElBQ2hCQyxZQUFlLE9BQ2ZFLGFBQWdCLEVBQUcsRUFBRyxLQUV4QjFCLEtBQUsyQixZQUVEUixLQUFRLE1BQ1JJLGFBQWdCLE1BQ2hCRSxPQUFVLE9BQ1ZMLGFBQWdCLFFBQ2hCSSxZQUFlLGlCQUdmTCxLQUFRLE1BQ1JJLGFBQWdCLE1BQ2hCRSxPQUFVLFFBQ1ZHLFdBQWMsRUFDZFIsYUFBZ0IsT0FDaEJJLFlBQWUsb0JBR2ZMLEtBQVEsTUFDUkksYUFBZ0IsTUFDaEJFLE9BQVUsUUFDVkwsYUFBZ0IsT0FDaEJJLFlBQWUsa0JBR2ZMLEtBQVEsTUFDUkksYUFBZ0IsTUFDaEJFLE9BQVUsTUFDVkcsV0FBYyxFQUNkUixhQUFnQixPQUNoQkksWUFBZSxpQkFHZkwsS0FBUSxJQUNSSSxhQUFnQixJQUNoQkUsT0FBVSxNQUNWTCxhQUFnQixNQUNoQkksWUFBZSxjQUdmTCxLQUFRLElBQ1JJLGFBQWdCLElBQ2hCRSxPQUFVLE1BQ1ZMLGFBQWdCLE1BQ2hCSSxZQUFlLFVBR25CeEIsS0FBSzZCLFFBQ0hDLGdCQUFpQixRQUNqQnZCLElBQUssSUFDTHdCLFdBQVksSUFDWkMsV0FBWSxJQUNaQyx3Qko4dEJILE1Bdm5CQWhELEdBQWF4QixJQUNYb0MsSUFBSyw0QkFDTHFDLE1BQU8sV0loR1IsR0FBSUMsR0FBY25DLEtBQUtXLGdCQUFrQlgsS0FBS1MsYUFDNUNwQixFQUFJLEVBQ0orQyxFQUFJLEVBQ0pDLEVBQWVyQyxLQUFLVyxnQkFBa0JYLEtBQUtVLGtCQUMzQzRCLEVBQVEsQ0FFVixLQURBdEMsS0FBS1ksNkJBQ0F2QixFQUFJLEVBQUdBLEVBQUlXLEtBQUtrQixZQUFZNUIsT0FBUUQsSUFFdkMsR0FBSThDLEVBQWNuQyxLQUFLa0IsWUFBWTdCLEdBQUcrQixjQUFnQixFQUVwRCxHQUFJbUIsS0FBS0MsTUFBT0gsRUFBZ0JyQyxLQUFLa0IsWUFBWTdCLEdBQUcrQixjQUFnQixFQUNsRXBCLEtBQUtZLDBCQUEwQjZCLE1BQzdCbEIsYUFBZ0J2QixLQUFLa0IsWUFBWTdCLEdBQUdrQyxhQUNwQ0MsWUFBZXhCLEtBQUtrQixZQUFZN0IsR0FBR21DLFlBQ25DSixhQUFnQnBCLEtBQUtrQixZQUFZN0IsR0FBRytCLGFBQ3BDTSxhQUFnQixTQVVsQixLQVBBMUIsS0FBS1ksMEJBQTBCNkIsTUFDN0JsQixhQUFnQnZCLEtBQUtrQixZQUFZN0IsR0FBR2tDLGFBQ3BDQyxZQUFleEIsS0FBS2tCLFlBQVk3QixHQUFHbUMsWUFDbkNKLGFBQWdCcEIsS0FBS2tCLFlBQVk3QixHQUFHK0IsYUFDcENNLGlCQUdHVSxFQUFJLEVBQUdBLEVBQUlwQyxLQUFLa0IsWUFBWTdCLEdBQUdxQyxZQUFZcEMsT0FBUThDLElBQ2xEQyxFQUFlckMsS0FBS0MsTUFBUUQsS0FBS2tCLFlBQVk3QixHQUFHcUMsWUFBWVUsR0FBS3BDLEtBQUtrQixZQUFZN0IsR0FBRytCLGNBQ3ZGcEIsS0FBS1ksMEJBQTBCWixLQUFLWSwwQkFBMEJ0QixPQUFTLEdBQUdvQyxZQUFZZSxLQUNwRnpDLEtBQUtrQixZQUFZN0IsR0FBR3FDLFlBQVlVLEdBUTVDLEtBREFwQyxLQUFLaUIsY0FBZ0J5QixJQUNoQnJELEVBQUksRUFBR0EsRUFBSVcsS0FBS1ksMEJBQTBCdEIsT0FBUUQsSUFDckQsSUFBSytDLEVBQUksRUFBR0EsRUFBSXBDLEtBQUtZLDBCQUEwQnZCLEdBQUdxQyxZQUFZcEMsT0FBUThDLE1BQ2xFRSxFQUNFdEMsS0FBS2lCLGNBQWdCNUIsSUFDdkJXLEtBQUtpQixjQUFnQjVCLEdBRW5CaUQsR0FBUyxJQUNYdEMsS0FBS2UscUJBQXVCcUIsRUFDNUJwQyxLQUFLYyxlQUFpQnpCLE1KOEczQlEsSUFBSyw0QkFDTHFDLE1BQU8sV0kzRlIsSUFOQSxHQUFJUyxNQUNGdEQsRUFBSSxFQUNKdUQsRUFBVzVDLEtBQUs2QyxvQkFBb0JDLE1BQU0sNkJBQzFDQyxFQUFZSCxFQUFXLEVBQ3ZCSSxFQUFVSixFQUNWSyxLQUNLNUQsRUFBSVcsS0FBSzJCLFVBQVVyQyxPQUFRRCxJQUNoQzBELEVBQVksR0FBSUcsTUFBS04sR0FDVSxRQUEzQjVDLEtBQUsyQixVQUFVdEMsR0FBRzhCLE1BQ3BCNEIsRUFBVUksU0FBUyxHQUNuQkosRUFBVUssUUFBUSxHQUNsQkwsRUFBVU0sU0FBUyxHQUNuQk4sRUFBVU8sV0FBVyxHQUNyQlAsRUFBVVEsV0FBVyxJQUNlLFFBQTNCdkQsS0FBSzJCLFVBQVV0QyxHQUFHOEIsTUFDM0I0QixFQUFVSyxRQUFRLEdBQ2xCTCxFQUFVTSxTQUFTLEdBQ25CTixFQUFVTyxXQUFXLEdBQ3JCUCxFQUFVUSxXQUFXLElBQ2UsUUFBM0J2RCxLQUFLMkIsVUFBVXRDLEdBQUc4QixNQUMzQjRCLEVBQVVJLFNBQVMsR0FBTUosRUFBVVMsV0FBYSxHQUNoRFQsRUFBVUssUUFBUSxHQUNsQkwsRUFBVU0sU0FBUyxHQUNuQk4sRUFBVU8sV0FBVyxHQUNyQlAsRUFBVVEsV0FBVyxJQUNlLFFBQTNCdkQsS0FBSzJCLFVBQVV0QyxHQUFHOEIsTUFDM0I0QixFQUFVSyxRQUFRTCxFQUFVVSxVQUFZVixFQUFVVyxVQUNsRFgsRUFBVU0sU0FBUyxHQUNuQk4sRUFBVU8sV0FBVyxHQUNyQlAsRUFBVVEsV0FBVyxJQUNlLE1BQTNCdkQsS0FBSzJCLFVBQVV0QyxHQUFHOEIsTUFDM0I0QixFQUFVTSxTQUFTLEdBQ25CTixFQUFVTyxXQUFXLEdBQ3JCUCxFQUFVUSxXQUFXLEdBQ3JCUixHQUFhLE9BQ3VCLE1BQTNCL0MsS0FBSzJCLFVBQVV0QyxHQUFHOEIsT0FDM0I0QixFQUFVTSxTQUFTLEdBQ25CTixFQUFVTyxXQUFXLEdBQ3JCUCxFQUFVUSxXQUFXLElBR25CUCxFQUFVRCxJQUdaL0MsS0FBSzJCLFVBQVV0QyxHQUFHMEQsVUFBWUEsRUFBVVksVUFDeEMzRCxLQUFLMkIsVUFBVXRDLEdBQUcyRCxRQUFVQSxFQUFRVyxVQUNwQ2hCLEVBQVFGLEtBQUt6QyxLQUFLMkIsVUFBVXRDLElBSWhDLEtBREE0RCxFQUFpQjdCLGFBQWVzQixJQUMzQnJELEVBQUksRUFBR0EsRUFBSVcsS0FBSzJCLFVBQVVyQyxPQUFRRCxJQUNqQ2tELEtBQUtxQixJQUFJNUQsS0FBSzJCLFVBQVV0QyxHQUFHK0IsY0FBZ0JwQixLQUFLVyxnQkFBa0JYLEtBQUtVLG9CQUFzQnVDLEVBQWlCN0IsZUFDaEg2QixFQUFpQjdCLGFBQWVwQixLQUFLMkIsVUFBVXRDLEdBQUcrQixhQUNsRDZCLEVBQWlCOUIsS0FBT25CLEtBQUsyQixVQUFVdEMsR0FBR2tDLGFBSTlDdkIsTUFBS2EseUJBQTJCOEIsS0orRy9COUMsSUFBSyxrQkFDTHFDLE1BQU8sV0lyR1IsR0FBSTJCLEdBQ0ZDLENBQ3VCLEtBQXJCQyxVQUFVekUsUUFDWndFLEVBQU05RCxLQUFLNkMsb0JBQW9CQyxNQUFNLDRCQUNyQ2UsRUFBUUMsRUFBTUMsVUFBVSxJQUNNLElBQXJCQSxVQUFVekUsU0FDbkJ1RSxFQUFRRSxVQUFVLEdBQ2xCRCxFQUFNQyxVQUFVLElBR2xCL0QsS0FBS1Usa0JBQW9CbUQsRUFDekI3RCxLQUFLVyxnQkFBa0JtRCxFQUN2QmhHLFNBQVNrRyxlQUFlLG9CQUFvQkMsVUFBWSxHQUFJZixNQUFLbEQsS0FBS1UsbUJBQ3RFNUMsU0FBU2tHLGVBQWUsa0JBQWtCQyxVQUFZLEdBQUlmLE1BQUtsRCxLQUFLVyxpQkFDcEVYLEtBQUtrRSw0QkFDTGxFLEtBQUs2QyxvQkFBb0JDLE1BQU0sOEJBQWdDOUMsS0FBS1Usa0JBQ3BFVixLQUFLNkMsb0JBQW9CQyxNQUFNLDRCQUE4QjlDLEtBQUtXLGdCQUNsRVgsS0FBS21FLCtCSm1ISnRFLElBQUssY0FDTHFDLE1BQU8sU0l4R0cyQixFQUFPQyxHQUNsQjlELEtBQUtTLGFBQWVvRCxFQUNwQjdELEtBQUtvRSxXQUFhTixFQUNsQmhHLFNBQVNrRyxlQUFlLG9CQUFvQkMsVUFBWSxHQUFJZixNQUFLbEQsS0FBS1MsY0FDdEUzQyxTQUFTa0csZUFBZSxrQkFBa0JDLFVBQVksR0FBSWYsTUFBS2xELEtBQUtvRSxZQUNwRXBFLEtBQUtrRSwrQkppSEpyRSxJQUFLLHdCQUNMcUMsTUFBTyxTSTNHYW1DLEdBQ3JCLEdBQ0VDLEdBREVDLEVBQW9CekcsU0FBU2tHLGVBQWUsY0FFOUMzRSxFQUFJLEVBQ0orQyxFQUFJLEVBQ0pvQyxFQUFrQixFQUNsQkMsRUFBT3pFLEtBQ1AwRSxFQUFZMUUsS0FBSzZDLG9CQUFvQkMsTUFBTSwyQkFFN0MsS0FEQXlCLEVBQWtCTixVQUFZLEdBQ3pCNUUsRUFBSWdGLEVBQWdCL0UsT0FBUyxFQUFHRCxHQUFLLEVBQUdBLElBQzNDLElBQUsrQyxFQUFJaUMsRUFBZ0JoRixHQUFHcUMsWUFBWXBDLE9BQVMsRUFBRzhDLEdBQUssRUFBR0EsSUFDMURrQyxFQUFNeEcsU0FBUzZHLGNBQWMsVUFDN0JMLEVBQUl6SCxHQUFLd0gsRUFBZ0JoRixHQUFHcUMsWUFBWVUsR0FBS2lDLEVBQWdCaEYsR0FBR2tDLGFBQ2hFK0MsRUFBSUwsVUFBWUksRUFBZ0JoRixHQUFHcUMsWUFBWVUsR0FBS2lDLEVBQWdCaEYsR0FBR2tDLGFBQ3ZFaUQsRUFBa0JILEVBQWdCaEYsR0FBR3FDLFlBQVlVLEdBQUtpQyxFQUFnQmhGLEdBQUcrQixhQUN6RWtELEVBQUlFLGdCQUFrQkEsRUFDdEJGLEVBQUlNLGlCQUFpQixRQUFTLFNBQVVDLEdBQ3RDSixFQUFLSyxnQkFBZ0JKLEVBQVlHLEVBQU1FLFdBQVdQLGdCQUFpQkUsS0FFckVILEVBQWtCUyxZQUFZVixFQUdsQ3RFLE1BQUtZLGdDSm9ISmYsSUFBSyx3QkFDTHFDLE1BQU8sU0k5R2FtQyxHQWFyQixRQUFTWSxHQUFVM0gsR0FDakJtSCxFQUFLSyxnQkFBZ0J4SCxFQUFJeUYsVUFBV3pGLEVBQUkwRixTQWIxQyxHQUNFc0IsR0FERVksRUFBb0JwSCxTQUFTa0csZUFBZSxjQUU5QzNFLEVBQUksRUFDSm9GLEVBQU96RSxJQUVULEtBREFrRixFQUFrQmpCLFVBQVksR0FDekI1RSxFQUFJLEVBQUdBLEVBQUlnRixFQUFnQi9FLE9BQVFELElBQ3RDaUYsRUFBTXhHLFNBQVM2RyxjQUFjLFVBQzdCTCxFQUFJekgsR0FBS3dILEVBQWdCaEYsR0FBR2tDLGFBQzVCK0MsRUFBSUwsVUFBWUksRUFBZ0JoRixHQUFHa0MsYUFDbkMrQyxFQUFJTSxpQkFBaUIsUUFBU0ssRUFBU0UsS0FBS25GLEtBQU1xRSxFQUFnQmhGLEtBQ2xFNkYsRUFBa0JGLFlBQVlWLEVBS2hDdEUsTUFBS29GLGdDSnVISnZGLElBQUssZ0JBQ0xxQyxNQUFPLFNJakhLbUMsR0FDYixHQUNFQyxHQURFZSxFQUFhdkgsU0FBU2tHLGVBQWUsYUFFdkNTLEVBQU96RSxJQUNUcUYsR0FBV3BCLFVBQVksR0FDdkJLLEVBQU14RyxTQUFTNkcsY0FBYyxVQUM3QkwsRUFBSXpILEdBQUssTUFDVHlILEVBQUlMLFVBQVksTUFDaEJLLEVBQUlNLGlCQUFpQixRQUFTLFNBQVVDLEdBQ3RDSixFQUFLSyxnQkFBZ0JMLEVBQUtoRSxhQUFjZ0UsRUFBS0wsY0FFL0NpQixFQUFXTCxZQUFZVixNSnlIdEJ6RSxJQUFLLFlBQ0xxQyxNQUFPLFNJcEhDTCxHQUNUN0IsS0FBSzZCLE9BQVNBLEtKNEhiaEMsSUFBSyxPQUNMcUMsTUFBTyxTSXZISm9ELEdBQ0osR0FBSXhHLEdBQVdrQixJQXdEZixPQXZEQXNGLElBQ0UsUUFDQSxRQUNBLFdBQ0EsUUFDQSxVQUNBLGNBQ0EsZUFDQSxnQkFDQSxnQkFDQSxzQkFDQSx1QkFDQSxhQUNBLFNBQ01DLEVBQ0FDLEVBQ0FDLEVBQ0FDLEVBQ0FDLEVBQ0FDLEVBQ0FDLEVBQ0FDLEVBQ0FDLEVBQ0FsRCxFQUNBbUQsRUFDQUMsR0FDSm5ILEVBQVN5RyxNQUFRQSxFQUNqQnpHLEVBQVMwRyxNQUFRQSxFQUNqQjFHLEVBQVMyRyxTQUFXQSxFQUNwQjNHLEVBQVM0RyxNQUFRQSxFQUNqQjVHLEVBQVM2RyxRQUFVQSxFQUNuQjdHLEVBQVM4RyxZQUFjQSxFQUN2QjlHLEVBQVNnSCxjQUFnQkEsRUFDekJoSCxFQUFTK0csYUFBZUEsRUFDeEIvRyxFQUFTaUgsY0FBZ0JBLEVBQ3pCakgsRUFBUytELG9CQUFzQkEsRUFDL0IvRCxFQUFTa0gscUJBQXVCQSxFQUNoQ2xILEVBQVNtSCxXQUFhQSxLQUcxQmpHLEtBQUtnRyxxQkFBdUJsSCxFQUFTa0gscUJBQ3JDaEcsS0FBSzZDLG9CQUFzQi9ELEVBQVMrRCxvQkFDcEM3QyxLQUFLVyxnQkFBa0I3QixFQUFTK0Qsb0JBQW9CQyxNQUFNLDRCQUMxRDlDLEtBQUtVLGtCQUFvQjVCLEVBQVMrRCxvQkFBb0JDLE1BQU0sOEJBQzVEOUMsS0FBS1MsYUFBZTNCLEVBQVMrRCxvQkFBb0JDLE1BQU0sK0JBQ3ZEOUMsS0FBS29FLFdBQWF0RixFQUFTK0Qsb0JBQW9CQyxNQUFNLDZCQUNyRDlDLEtBQUs4RSxnQkFBZ0I5RSxLQUFLVSxrQkFBbUJWLEtBQUtXLGlCQUVsRFgsS0FBSzhFLGdCQUFnQjlFLEtBQUtVLGtCQUFtQlYsS0FBS1csaUJBRWxEWCxLQUFLa0csWUFFTGxHLEtBQUttRyxlQUVMbkcsS0FBS2tHLFNBQVN6RCxLQUFLekMsS0FBS29HLGlCQUNqQnBHLFFKZ0dOSCxJQUFLLGdCQUNMcUMsTUFBTyxXSTlGTyxHQUNYbUUsR0FDRkMsRUFDQS9CLEVBQ0FXLEVBQ0FxQixFQUlBQyxFQUNBQyxFQUNBcEgsRUFDQStDLEVBQ0FzRSxFQUNBQyxFQUNBQyxFQWZhQyxFQUFBN0csS0FNYnlFLEVBQU96RSxLQUNQMEUsRUFBWTFFLEtBQUs2QyxvQkFBb0JDLE1BQU0sNEJBQzNDZ0UsSUFpRkYsS0F4RUFGLEVBQVEsR0FBSTVHLE1BQUtFLFFBQVFHLGdCQUN2QjBHLE1BQU8vRyxLQUFLeUYsU0FBU3NCLE1BQ3JCckIsTUFBTzFGLEtBQUswRixNQUNaTyxXQUFZakcsS0FBS2lHLFdBQ2pCZSxlQUFnQmhILEtBQUt5RixTQUFTd0IsWUFHaENaLEVBQVcsR0FBSXJHLE1BQUtFLFFBQVFnSCx5QkFDMUJILE1BQU8vRyxLQUFLeUYsU0FBU3NCLE1BQ3JCckIsTUFBTzFGLEtBQUswRixNQUNaTyxXQUFZakcsS0FBS2lHLFdBQ2pCZSxlQUFnQmhILEtBQUt5RixTQUFTd0IsWUFFaENaLEVBQVNjLFdBQ1BDLEtBQU0sT0FDTkMsZ0JBQWlCLElBRW5CVCxFQUFNTyxXQUNKQyxLQUFNLE9BQ05DLGdCQUFpQixJQUVuQmYsRUFBVSxHQUFJdEcsTUFBS0ksbUJBQ2pCMkcsTUFBTy9HLEtBQUt5RixTQUFTc0IsTUFDckJyQixNQUFPMUYsS0FBSzBGLE1BQ1pPLFdBQVlqRyxLQUFLaUcsV0FDakJlLGVBQWdCaEgsS0FBS3lGLFNBQVN3QixZQUVoQ1gsRUFBUWEsV0FDTkMsS0FBTSxPQUNOQyxnQkFBaUIsSUFFbkJWLEVBQWdCLEdBQUkzRyxNQUFLRSxRQUFRb0gsTUFBTSxTQUNyQ3JCLFdBQVlqRyxLQUFLaUcsV0FDakJjLE1BQU8vRyxLQUFLeUYsU0FBU3NCLFFBRXJCUSxNQUNFQyxPQUNFQyxZQUFhLEtBQ2JDLFdBQWMsZ0JBSXBCZCxFQUFNZSxVQUFVaEIsR0FDaEJKLEVBQVksR0FBSXZHLE1BQUtFLFFBQVE5QyxPQUFPLE9BQU8sR0FDekMySixNQUFPL0csS0FBS3lGLFNBQVNzQixNQUNyQnJCLE1BQU8xRixLQUFLMEYsTUFDWk8sV0FBWWpHLEtBQUtpRyxXQUNqQmUsZUFBZ0JoSCxLQUFLeUYsU0FBU3dCLFlBRTlCRyxLQUFNLFVBQ05RLFVBQVcsVUFDWEMsa0JBQW1CLElBQ25CQyxhQUFjLFVBQ2RDLFlBQWEsSUFDYkMsVUFBVyxVQUNYQyxPQUFRLEVBQ1J2QixRQUNFd0IsTUFBTyxLQUVSQyxxQkFDREMsTUFBTyxXQUNMM0QsRUFBS0ssZ0JBQWdCTCxFQUFLaEUsYUFBY2dFLEVBQUtMLFlBQzdDa0MsRUFBUStCLFVBQ1I1RCxFQUFLekQsVUFBWSxNQUNqQnlELEVBQUt5QixTQUFTb0MsTUFDZDdELEVBQUt5QixTQUFTekQsS0FBS2dDLEVBQUsyQixpQkFDeEIzQixFQUFLOEQsa0JBQ0w5RCxFQUFLK0QsVUFJVG5DLEVBQVNzQixVQUFVcEIsR0FDZGxILEVBQUksRUFBR0EsRUFBSVcsS0FBS1ksMEJBQTBCdEIsT0FBUUQsSUFDckQsSUFBSytDLEVBQUlwQyxLQUFLWSwwQkFBMEJ2QixHQUFHcUMsWUFBWXBDLE9BQVMsRUFBRzhDLEdBQUssRUFBR0EsSUFDekUwRSxFQUFXckUsS0FBS2dDLEVBQUs3RCwwQkFBMEJ2QixHQUFHcUMsWUFBWVUsR0FBS3FDLEVBQUs3RCwwQkFBMEJ2QixHQUFHK0IsYUFJekdtRCxLQUNBLEtBQUssR0FoR1VrRSxHQUFBLFNBZ0dOcEosR0FFTG1ILEVBREVuSCxJQUFNb0YsRUFBSzNELGVBQ0syRCxFQUFLMUQscUJBRUwwRCxFQUFLN0QsMEJBQTBCdkIsR0FBR3FDLFlBQVlwQyxPQUFTLENBRTNFLEtBQUssR0F0R1FvSixHQUFBLFNBc0dKdEcsR0FDUHNFLEVBQVVySCxJQUFNb0YsRUFBS3hELGVBQXVCLElBQU5tQixFQUFXLEVBQUksRUFDckR1RyxRQUFRQyxJQUFJbEUsRUFBV3JGLEVBQUdvRixFQUFLeEQsY0FBZW1CLEVBQUdzRSxHQUNqRG5DLEVBQWtCbEYsR0FBSyxHQUFJd0gsR0FBSzNHLFFBQVE5QyxPQUFPcUgsRUFBSzdELDBCQUEwQnZCLEdBQUdxQyxZQUFZVSxHQUFLcUMsRUFBSzdELDBCQUEwQnZCLEdBQUdrQyxjQUFjLEdBQ2hKd0YsTUFBT0YsRUFBS3BCLFNBQVNzQixNQUNyQnJCLE1BQU9tQixFQUFLbkIsTUFDWk8sV0FBWVksRUFBS1osV0FDakJlLGVBQWdCSCxFQUFLcEIsU0FBU3dCLFlBRTlCRyxLQUFNLFVBQ05RLFVBQVcsVUFDWEMsa0JBQW1CLElBQ25CQyxhQUFjLFVBQ2RDLFlBQWEsSUFDYkMsVUFBVyxVQUNYQyxPQUFRLEVBQ1J2QixRQUNFd0IsTUFBT3hCLEtBRVJ5QixxQkFDREMsTUFBUyxXQUNQM0IsRUFBWWhDLEVBQUs3RCwwQkFBMEJ2QixHQUFHcUMsWUFBWVUsR0FBS3FDLEVBQUs3RCwwQkFBMEJ2QixHQUFHK0IsYUFDakdxRCxFQUFLekQsVUFBWXlELEVBQUs3RCwwQkFBMEJ2QixHQUFHcUMsWUFBWVUsR0FBS3FDLEVBQUs3RCwwQkFBMEJ2QixHQUFHa0MsYUFDdEdrRCxFQUFLSyxnQkFBZ0IyQixHQUNyQkgsRUFBUStCLFVBQ1I1RCxFQUFLeUIsU0FBU29DLE1BQ2Q3RCxFQUFLeUIsU0FBU3pELEtBQUtnQyxFQUFLMkIsaUJBQ3hCM0IsRUFBSzhELGtCQUNMOUQsRUFBSytELFVBSVRuQyxFQUFTc0IsVUFBVXBELEVBQWtCbEYsS0FoQzlCK0MsRUFBSW9FLEVBQWlCcEUsR0FBSyxFQUFHQSxJQUFLc0csRUFBbEN0RyxJQU5GL0MsRUFBSW9GLEVBQUszRCxlQUFnQnpCLEdBQUssRUFBR0EsSUFBS29KLEVBQXRDcEosRUEwQ1Q2RixLQUVBLEtBQUssR0E1SVUyRCxHQUFBLFNBNElOeEosR0FDUDZGLEVBQWtCN0YsR0FBSyxHQUFJd0gsR0FBSzNHLFFBQVE5QyxPQUFPeUosRUFBS2hHLHlCQUF5QnhCLEdBQUdrQyxjQUFjLEdBQzVGd0YsTUFBT0YsRUFBS3BCLFNBQVNzQixNQUNyQnJCLE1BQU9tQixFQUFLbkIsTUFDWk8sV0FBWVksRUFBS1osV0FDakJlLGVBQWdCSCxFQUFLcEIsU0FBU3dCLFlBRTlCRyxLQUFNLFVBQ05RLFVBQVcsVUFDWEMsa0JBQW1CLElBQ25CQyxhQUFjLFVBQ2RDLFlBQWEsSUFDYkMsVUFBVyxVQUNYQyxPQUFRLEVBQ1J2QixRQUNFd0IsTUFBTyxLQUVSQyxxQkFDREMsTUFBUyxXQUNQM0QsRUFBS0ssZ0JBQWdCTCxFQUFLNUQseUJBQXlCeEIsR0FBRzBELFVBQVcwQixFQUFLNUQseUJBQXlCeEIsR0FBRzJELFNBQ2xHeUIsRUFBS3pELFVBQVl5RCxFQUFLNUQseUJBQXlCeEIsR0FBR2tDLGFBQ2xEK0UsRUFBUStCLFVBQ1I1RCxFQUFLeUIsU0FBU29DLE1BQ2Q3RCxFQUFLeUIsU0FBU3pELEtBQUtnQyxFQUFLMkIsaUJBQ3hCM0IsRUFBSzhELGtCQUNMOUQsRUFBSytELFVBR1RuQyxFQUFTc0IsVUFBVXpDLEVBQWtCN0YsS0E1QjlCQSxFQUFJLEVBQUdBLEVBQUlXLEtBQUthLHlCQUF5QnZCLE9BQVFELElBQUt3SixFQUF0RHhKLEVBZ0RULE9BWEFXLE1BQUtNLFlBQVkvQixTQUFTLGNBQWUsU0FBVXVLLEVBQUdDLEVBQUdDLEVBQUtDLEVBQUdDLEVBQUdDLEVBQU1DLEdBQ3hFLEdBQUlDLEdBQUtQLEVBQUlHLEVBQUksRUFBSUUsRUFBTyxFQUMxQkcsRUFBS1IsRUFBSUcsRUFBSSxFQUFJRSxFQUFPLEVBQ3hCSSxFQUFLUixFQUFJRyxFQUFJLEVBQUlFLEVBQU8sRUFDeEJJLEVBQUtULEVBQUlHLEVBQUksRUFBSUUsRUFBTyxDQUUxQixRQUFRLElBQUtDLEVBQUlFLEVBQUksSUFBS0QsRUFBSUMsRUFBSSxJQUFLRCxFQUFJRSxFQUFJLElBQUtILEVBQUlHLEVBQUksT0FHOURsRCxFQUFRbUQsYUFBYTdDLEdBQ3JCTixFQUFRbUQsYUFBYXBELEdBQ2RDLEtKaUhOekcsSUFBSyxrQkFDTHFDLE1BQU8sU0kvR093SCxFQUFnQkMsR0FDL0JELEdBQWtCLENBQ2xCLElBQUlFLEdBR0Z2SyxFQUNBd0ssRUFIQUMsRUFBUSxFQUNSQyxFQUFTLENBSVgsS0FBSzFLLEVBQUksRUFBR3dLLEVBQUs3SixLQUFLa0csU0FBUzVHLE9BQVFELEVBQUl3SyxFQUFJeEssSUFDN0N1SyxFQUFlNUosS0FBS2tHLFNBQVM3RyxHQUFHa0osa0JBQ2hDdUIsRUFBUXZILEtBQUt5SCxJQUFJSixFQUFhRSxNQUFPQSxHQUNyQ0MsR0FBVUgsRUFBYUcsT0FDdkIvSixLQUFLa0csU0FBUzdHLEdBQUd5SyxNQUFRRixFQUFhRSxNQUN0QzlKLEtBQUtrRyxTQUFTN0csR0FBRzBLLE9BQVNILEVBQWFHLE1BR3pDLE9BREFBLElBQVUvSixLQUFLaUssU0FFYkgsTUFBT0EsRUFBUUosRUFBaUIsRUFBSUksRUFDcENDLE9BQVFBLEVBQVNKLEVBQWtCLEVBQUlJLE1KbUh4Q2xLLElBQUssZ0JBQ0xxQyxNQUFPLFdJL0dSLEdBQUl1QyxHQUFPekUsSUFDWHlFLEdBQUt3RixRQUFVLEVBQ2Z4RixFQUFLdUIscUJBQXFCa0UsTUFDeEIvSSxLQUFNLFdBQ0osTUFBTyxjQUVUZ0osSUFBSyxTQUFVN00sR0FDYixNQUFPQSxHQUFJLElBRWJtSCxLQUFNLFdBQ0osTUFBT0EsSUFFVDJGLFNBQVUsV0FDUixNQUFPLElBRVRDLE9BQVEsU0FBVS9NLEdBQ2hCLE1BQU9BLEdBQUlnTixRQUViQyxjQUNFQyxLQUFNLFNBQVVsTixHQUNkLE1BQU9BLEdBQUltTixZQUViQyxXQUNFRixLQUFNLFNBQVVsTixHQUNkLE1BQU9BLEdBQUlxTixLQUViQyxZQUNFSixLQUFNLFNBQVVsTixHQUNkLE1BQU9BLEdBQUl1TixNQUViQyxZQUFhLFdBQ1gsR0FBSXJKLEdBQVN6QixLQUFLK0sseUJBQ2xCLE9BQU90RyxHQUFLOEQsZ0JBQWdCOUcsRUFBT3VKLFdBQVl2SixFQUFPd0osMkJKd0gvRHBMLElBQUssMEJBQ0xxQyxNQUFPLFNJakhlNEcsRUFBR0MsRUFBR2UsRUFBT0MsRUFBUW5ELEdBQzVDLEdBQUlzRSxHQUFNbEwsS0FBS21HLFdBUWYsT0FQQStFLEdBQUlwQyxFQUFJQSxFQUNSb0MsRUFBSW5DLEVBQUlBLEVBQ1JtQyxFQUFJcEIsTUFBUUEsRUFDWm9CLEVBQUluQixPQUFTQSxFQUViL0osS0FBS21MLFlBQWN2RSxFQUVaNUcsUUpvSE5ILElBQUssT0FDTHFDLE1BQU8sU0lsSEo0RyxFQUFHQyxFQUFHZSxFQUFPQyxFQUFRbkQsR0FDekIsR0FFRWlELEdBQ0F4SyxFQUNBaUgsRUFDQThFLEVBQ0FDLEVBQ0FoQyxFQUNBQyxFQUNBRSxFQVRFckQsRUFBY25HLEtBQUttRyxZQUNyQkQsRUFBV2xHLEtBQUtrRyxRQWVsQixJQUxBNEMsRUFBVTVLLFNBQU40SyxFQUFrQjNDLEVBQVkyQyxFQUFJQSxFQUN0Q0MsRUFBVTdLLFNBQU42SyxFQUFrQjVDLEVBQVk0QyxFQUFJQSxFQUN0Q2UsRUFBa0I1TCxTQUFWNEwsRUFBc0IzRCxFQUFZMkQsTUFBUUEsRUFDbERDLEVBQW9CN0wsU0FBWDZMLEVBQXVCNUQsRUFBWTRELE9BQVNBLEVBQ3JEbkQsRUFBa0IxSSxTQUFWMEksRUFBc0I1RyxLQUFLbUwsWUFBY3ZFLEVBQzdDa0QsR0FBU0MsRUFDWCxJQUFLMUssRUFBSSxFQUFHd0ssRUFBSzNELEVBQVM1RyxPQUFRRCxFQUFJd0ssRUFBSXhLLElBQ3hDaUgsRUFBVUosRUFBUzdHLEdBQ25CaUgsRUFBUWtDLEtBQUtNLEVBQUdDLEVBR3BCSixTQUFRQyxJQUFJMUMsRUFDWixLQUFLLEdBQUk3RyxHQUFJLEVBQUdpTSxFQUFLcEYsRUFBUyxHQUFHcUYsZ0JBQWdCLEdBQUdDLFdBQVluTSxFQUFJaU0sRUFBR2hNLE9BQVFELElBQ3pFaU0sRUFBR2pNLEdBQUdvTSxTQUFXekwsS0FBS2dCLFlBQ3hCb0ssRUFBZUUsRUFBR2pNLEdBQUdxTSxrQkFDckJMLEVBQU9ELEVBQWFPLFVBQ3BCdEMsRUFBS2dDLEVBQUt2QyxFQUNWUSxFQUFLK0IsRUFBSy9CLEdBQ1ZFLEVBQUs2QixFQUFLN0IsR0FFVnhKLEtBQUt5RixTQUFTc0IsTUFBTTZFLE1BQ2xCQSxNQUFPLElBQUt2QyxFQUFJRyxFQUFLLEVBQU8sSUFBS0YsRUFBSUUsRUFBSyxHQUMxQ3FDLE9BQVUsWUFDVEMsZUp5SERyTyxJSWxIWSxvQkFBWGIsSUFBb0QsbUJBQW5CQSxHQUFPRCxRQUNqREMsRUFBT0QsUUFBVWMsRUFFakJDLE9BQU9xTyxlQUFpQnRPIiwiZmlsZSI6InN0YW5kYXJkLXBlcmlvZC1zZWxlY3Rvci1lczUubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqKioqKi8gKGZ1bmN0aW9uKG1vZHVsZXMpIHsgLy8gd2VicGFja0Jvb3RzdHJhcFxuLyoqKioqKi8gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuLyoqKioqKi8gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuLyoqKioqKi8gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuLyoqKioqKi8gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4vKioqKioqLyBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuLyoqKioqKi8gXHRcdFx0ZXhwb3J0czoge30sXG4vKioqKioqLyBcdFx0XHRpZDogbW9kdWxlSWQsXG4vKioqKioqLyBcdFx0XHRsb2FkZWQ6IGZhbHNlXG4vKioqKioqLyBcdFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4vKioqKioqLyBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbi8qKioqKiovIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbi8qKioqKiovIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4vKioqKioqLyBcdH1cbi8qKioqKiovXG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8qKioqKiovIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMCk7XG4vKioqKioqLyB9KVxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKioqKiovIChbXG4vKiAwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24obW9kdWxlKSB7J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXHRcblx0dmFyIFN0YW5kYXJkUGVyaW9kU2VsZWN0b3IgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHRcblx0d2luZG93LnN0UFMgPSBuZXcgU3RhbmRhcmRQZXJpb2RTZWxlY3RvcigpO1xuXHRcblx0OyhmdW5jdGlvbiAoZW52LCBmYWN0b3J5KSB7XG5cdCAgaWYgKCggZmFsc2UgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YobW9kdWxlKSkgPT09ICdvYmplY3QnICYmIG1vZHVsZS5leHBvcnRzKSB7XG5cdCAgICBtb2R1bGUuZXhwb3J0cyA9IGVudi5kb2N1bWVudCA/IGZhY3RvcnkoZW52KSA6IGZ1bmN0aW9uICh3aW4pIHtcblx0ICAgICAgaWYgKCF3aW4uZG9jdW1lbnQpIHtcblx0ICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1dpbmRvdyB3aXRoIGRvY3VtZW50IG5vdCBwcmVzZW50Jyk7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIGZhY3Rvcnkod2luLCB0cnVlKTtcblx0ICAgIH07XG5cdCAgfSBlbHNlIHtcblx0ICAgIGVudi5BZ2dyZWdhdG9yID0gZmFjdG9yeShlbnYsIHRydWUpO1xuXHQgIH1cblx0fSkodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cgOiB1bmRlZmluZWQsIGZ1bmN0aW9uIChfd2luZG93LCB3aW5kb3dFeGlzdHMpIHtcblx0ICB2YXIgRkMgPSBfd2luZG93LkZ1c2lvbkNoYXJ0cztcblx0XG5cdCAgRkMucmVnaXN0ZXIoJ2V4dGVuc2lvbicsIFsncHJpdmF0ZScsICdTdGFuZGFyZFBlcmlvZFNlbGVjdG9yJywgZnVuY3Rpb24gKCkge1xuXHQgICAgRkMucmVnaXN0ZXJDb21wb25lbnQoJ2V4dGVuc2lvbnMnLCAnU3RhbmRhcmRQZXJpb2RTZWxlY3RvcicsIFN0YW5kYXJkUGVyaW9kU2VsZWN0b3IpO1xuXHQgIH1dKTtcblx0fSk7XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpKG1vZHVsZSkpKVxuXG4vKioqLyB9LFxuLyogMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihtb2R1bGUpIHtcblx0XHRpZighbW9kdWxlLndlYnBhY2tQb2x5ZmlsbCkge1xuXHRcdFx0bW9kdWxlLmRlcHJlY2F0ZSA9IGZ1bmN0aW9uKCkge307XG5cdFx0XHRtb2R1bGUucGF0aHMgPSBbXTtcblx0XHRcdC8vIG1vZHVsZS5wYXJlbnQgPSB1bmRlZmluZWQgYnkgZGVmYXVsdFxuXHRcdFx0bW9kdWxlLmNoaWxkcmVuID0gW107XG5cdFx0XHRtb2R1bGUud2VicGFja1BvbHlmaWxsID0gMTtcblx0XHR9XG5cdFx0cmV0dXJuIG1vZHVsZTtcblx0fVxuXG5cbi8qKiovIH0sXG4vKiAyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHQvKipcblx0ICogQ2xhc3MgZGVmaW5pdGlvbiBvZiBTdGFuZGFyZFBlcmlvZFNlbGVjdG9yXG5cdCAqL1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cdFxuXHR2YXIgU3RhbmRhcmRQZXJpb2RTZWxlY3RvciA9IGZ1bmN0aW9uICgpIHtcblx0ICBmdW5jdGlvbiBTdGFuZGFyZFBlcmlvZFNlbGVjdG9yKCkge1xuXHQgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFN0YW5kYXJkUGVyaW9kU2VsZWN0b3IpO1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogQHByaXZhdGVcblx0ICAgICAqL1xuXHQgICAgdGhpcy5yYXRpbyA9IDg7XG5cdCAgICB0aGlzLnRvb2xib3ggPSBGdXNpb25DaGFydHMuZ2V0Q29tcG9uZW50KCdhcGknLCAndG9vbGJveCcpO1xuXHQgICAgdGhpcy5Ib3Jpem9udGFsVG9vbGJhciA9IHRoaXMudG9vbGJveC5Ib3Jpem9udGFsVG9vbGJhcjtcblx0ICAgIHRoaXMuQ29tcG9uZW50R3JvdXAgPSB0aGlzLnRvb2xib3guQ29tcG9uZW50R3JvdXA7XG5cdCAgICB0aGlzLlN5bWJvbFN0b3JlID0gdGhpcy50b29sYm94LlN5bWJvbFN0b3JlO1xuXHQgICAgdGhpcy5hbGwgPSAxO1xuXHQgICAgdGhpcy5jYWxjdWxhdGVkUGVyaW9kcyA9IFtdO1xuXHQgICAgdGhpcy5zdGFydERhdGFzZXQgPSAwO1xuXHQgICAgLy8gdGhpcy5lbmREYXRhc2V0ID0gdGhpcy5nbG9iYWxSZWFjdGl2ZU1vZGVsLm1vZGVsWyd4LWF4aXMtYWJzb2x1dGUtcmFuZ2UtZW5kJ107XG5cdCAgICB0aGlzLnN0YXJ0QWN0aXZlV2luZG93ID0gMDtcblx0ICAgIHRoaXMuZW5kQWN0aXZlV2luZG93ID0gMTtcblx0ICAgIHRoaXMuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kcyA9IFtdO1xuXHQgICAgdGhpcy5zdGFuZGFyZENvbnRleHVhbFBlcmlvZHMgPSBbXTtcblx0ICAgIHRoaXMuc3RhcnRQb2ludFVuaXQgPSAwO1xuXHQgICAgdGhpcy5zdGFydFBvaW50TXVsdGlwbGllciA9IDA7XG5cdCAgICB0aGlzLmNsaWNrZWRJZDtcblx0ICAgIHRoaXMubm9DYWxjQnV0dG9ucyA9IDA7XG5cdCAgICB0aGlzLnRpbWVQZXJpb2RzID0gW3tcblx0ICAgICAgJ25hbWUnOiAnc2Vjb25kJyxcblx0ICAgICAgJ21pbGxpc2Vjb25kcyc6IDEwMDAsXG5cdCAgICAgICdzdGFydGluZ1BvaW50JzogMCxcblx0ICAgICAgJ3RvdGFsJzogNjAsXG5cdCAgICAgICdhYmJyZXZpYXRpb24nOiAnc2VjJyxcblx0ICAgICAgJ2Rlc2NyaXB0aW9uJzogJ1NFQ09ORCcsXG5cdCAgICAgICdwYXJlbnQnOiAnbWludXRlJyxcblx0ICAgICAgJ211bHRpcGxpZXJzJzogWzEsIDUsIDE1LCAzMF1cblx0ICAgIH0sIHtcblx0ICAgICAgJ25hbWUnOiAnbWludXRlJyxcblx0ICAgICAgJ21pbGxpc2Vjb25kcyc6IDYwMDAwLFxuXHQgICAgICAnc3RhcnRpbmdQb2ludCc6IDAsXG5cdCAgICAgICd0b3RhbCc6IDYwLFxuXHQgICAgICAnYWJicmV2aWF0aW9uJzogJ21pbicsXG5cdCAgICAgICdkZXNjcmlwdGlvbic6ICdNSU5VVEUnLFxuXHQgICAgICAncGFyZW50JzogJ2hvdXInLFxuXHQgICAgICAnbXVsdGlwbGllcnMnOiBbMSwgNSwgMTUsIDMwXVxuXHQgICAgfSwge1xuXHQgICAgICAnbmFtZSc6ICdob3VyJyxcblx0ICAgICAgJ21pbGxpc2Vjb25kcyc6IDM2MDAwMDAsXG5cdCAgICAgICdzdGFydGluZ1BvaW50JzogMCxcblx0ICAgICAgJ3RvdGFsJzogMjQsXG5cdCAgICAgICdhYmJyZXZpYXRpb24nOiAnaHInLFxuXHQgICAgICAnZGVzY3JpcHRpb24nOiAnSE9VUicsXG5cdCAgICAgICdwYXJlbnQnOiAnZGF5Jyxcblx0ICAgICAgJ211bHRpcGxpZXJzJzogWzEsIDMsIDYsIDEyXVxuXHQgICAgfSwge1xuXHQgICAgICAnbmFtZSc6ICdkYXknLFxuXHQgICAgICAnbWlsbGlzZWNvbmRzJzogODY0MDAwMDAsXG5cdCAgICAgICdzdGFydGluZ1BvaW50JzogMCxcblx0ICAgICAgJ3RvdGFsJzogMzAsXG5cdCAgICAgICdhYmJyZXZpYXRpb24nOiAnRCcsXG5cdCAgICAgICdkZXNjcmlwdGlvbic6ICdEQVknLFxuXHQgICAgICAncGFyZW50JzogJ21vbnRoJyxcblx0ICAgICAgJ211bHRpcGxpZXJzJzogWzEsIDcsIDE1XVxuXHQgICAgfSwge1xuXHQgICAgICAnbmFtZSc6ICdtb250aCcsXG5cdCAgICAgICdtaWxsaXNlY29uZHMnOiAyNTkyMDAwMDAwLFxuXHQgICAgICAnc3RhcnRpbmdQb2ludCc6IDAsXG5cdCAgICAgICd0b3RhbCc6IDEyLFxuXHQgICAgICAnYWJicmV2aWF0aW9uJzogJ00nLFxuXHQgICAgICAnZGVzY3JpcHRpb24nOiAnTU9OVEgnLFxuXHQgICAgICAncGFyZW50JzogJ3llYXInLFxuXHQgICAgICAnbXVsdGlwbGllcnMnOiBbMSwgMywgNl1cblx0ICAgIH0sIHtcblx0ICAgICAgJ25hbWUnOiAneWVhcicsXG5cdCAgICAgICdtaWxsaXNlY29uZHMnOiAzMTEwNDAwMDAwMCxcblx0ICAgICAgJ3N0YXJ0aW5nUG9pbnQnOiAwLFxuXHQgICAgICAnYWJicmV2aWF0aW9uJzogJ1knLFxuXHQgICAgICAnZGVzY3JpcHRpb24nOiAnWUVBUicsXG5cdCAgICAgICdtdWx0aXBsaWVycyc6IFsxLCAzLCA1XVxuXHQgICAgfV07XG5cdCAgICB0aGlzLnRkQnV0dG9ucyA9IFt7XG5cdCAgICAgICduYW1lJzogJ1lURCcsXG5cdCAgICAgICdhYmJyZXZpYXRpb24nOiAnWVREJyxcblx0ICAgICAgJ3BhcmVudCc6ICd5ZWFyJyxcblx0ICAgICAgJ21pbGxpc2Vjb25kcyc6IDMxMTA0MDAwMDAwLFxuXHQgICAgICAnZGVzY3JpcHRpb24nOiAnWWVhciB0byBEYXRlJ1xuXHQgICAgfSwge1xuXHQgICAgICAnbmFtZSc6ICdRVEQnLFxuXHQgICAgICAnYWJicmV2aWF0aW9uJzogJ1FURCcsXG5cdCAgICAgICdwYXJlbnQnOiAnbW9udGgnLFxuXHQgICAgICAnbXVsdGlwbGllcic6IDMsXG5cdCAgICAgICdtaWxsaXNlY29uZHMnOiA3Nzc2MDAwMDAwLFxuXHQgICAgICAnZGVzY3JpcHRpb24nOiAnUXVhcnRlciB0byBEYXRlJ1xuXHQgICAgfSwge1xuXHQgICAgICAnbmFtZSc6ICdNVEQnLFxuXHQgICAgICAnYWJicmV2aWF0aW9uJzogJ01URCcsXG5cdCAgICAgICdwYXJlbnQnOiAnbW9udGgnLFxuXHQgICAgICAnbWlsbGlzZWNvbmRzJzogMjU5MjAwMDAwMCxcblx0ICAgICAgJ2Rlc2NyaXB0aW9uJzogJ01vbnRoIHRvIERhdGUnXG5cdCAgICB9LCB7XG5cdCAgICAgICduYW1lJzogJ1dURCcsXG5cdCAgICAgICdhYmJyZXZpYXRpb24nOiAnV1REJyxcblx0ICAgICAgJ3BhcmVudCc6ICdkYXknLFxuXHQgICAgICAnbXVsdGlwbGllcic6IDcsXG5cdCAgICAgICdtaWxsaXNlY29uZHMnOiA2MDQ4MDAwMDAsXG5cdCAgICAgICdkZXNjcmlwdGlvbic6ICdXZWVrIHRvIERhdGUnXG5cdCAgICB9LCB7XG5cdCAgICAgICduYW1lJzogJ1knLFxuXHQgICAgICAnYWJicmV2aWF0aW9uJzogJ1knLFxuXHQgICAgICAncGFyZW50JzogJ2RheScsXG5cdCAgICAgICdtaWxsaXNlY29uZHMnOiA4NjQwMDAwMCxcblx0ICAgICAgJ2Rlc2NyaXB0aW9uJzogJ1llc3RlcmRheSdcblx0ICAgIH0sIHtcblx0ICAgICAgJ25hbWUnOiAnVCcsXG5cdCAgICAgICdhYmJyZXZpYXRpb24nOiAnVCcsXG5cdCAgICAgICdwYXJlbnQnOiAnZGF5Jyxcblx0ICAgICAgJ21pbGxpc2Vjb25kcyc6IDg2NDAwMDAwLFxuXHQgICAgICAnZGVzY3JpcHRpb24nOiAnVG9kYXknXG5cdCAgICB9XTtcblx0ICAgIHRoaXMuY29uZmlnID0ge1xuXHQgICAgICBhbmNob3JQb3NpdGlvbnM6ICdyaWdodCcsXG5cdCAgICAgIGFsbDogJzEnLFxuXHQgICAgICBjb250ZXh0dWFsOiAnMScsXG5cdCAgICAgIGNhbGN1bGF0ZWQ6ICcxJyxcblx0ICAgICAgdGVydGlhcnlUaW1lUGVyaW9kczoge31cblx0ICAgIH07XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBBIGZ1bmN0aW9uIHRvIGdlbmVyYXRlIHRoZSBjYWxjdWxhdGVkIGJ1dHRvbnMgdXNpbmdcblx0ICAgKiB0aGUgYWN0aXZlIHJhbmdlIGFuZCB0aGUgbG9jYXRpb24gb2YgdGhlIGFjdGl2ZSByYW5nZVxuXHQgICAqL1xuXHRcblx0XG5cdCAgX2NyZWF0ZUNsYXNzKFN0YW5kYXJkUGVyaW9kU2VsZWN0b3IsIFt7XG5cdCAgICBrZXk6ICdnZW5lcmF0ZUNhbGN1bGF0ZWRCdXR0b25zJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBnZW5lcmF0ZUNhbGN1bGF0ZWRCdXR0b25zKCkge1xuXHQgICAgICB2YXIgdGFyZ2V0QmxvY2sgPSB0aGlzLmVuZEFjdGl2ZVdpbmRvdyAtIHRoaXMuc3RhcnREYXRhc2V0LFxuXHQgICAgICAgICAgaSA9IDAsXG5cdCAgICAgICAgICBqID0gMCxcblx0ICAgICAgICAgIGFjdGl2ZVdpbmRvdyA9IHRoaXMuZW5kQWN0aXZlV2luZG93IC0gdGhpcy5zdGFydEFjdGl2ZVdpbmRvdyxcblx0ICAgICAgICAgIGNvdW50ID0gMDtcblx0ICAgICAgdGhpcy5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzID0gW107XG5cdCAgICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLnRpbWVQZXJpb2RzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgLy8gY2hlY2tpbmcgd2hldGhlciB0aGUgdW5pdCBpcyBhcHBsaWNhYmxlIGZvciB0aGUgY3VycmVudCB0YXJnZXQgYmxvY2tcblx0ICAgICAgICBpZiAodGFyZ2V0QmxvY2sgLyB0aGlzLnRpbWVQZXJpb2RzW2ldLm1pbGxpc2Vjb25kcyA+PSAxKSB7XG5cdCAgICAgICAgICAvLyBjaGVja2luZyB3aGV0aGVyIHRoZSB1bml0IGlzIG9mIHRoZSBoaWdoZXIgb3JkZXIgYW5kIG9ubHkgbXVsdGlwbGllciAxIGlzIGFwcGxpY2FibGVcblx0ICAgICAgICAgIGlmIChNYXRoLmZsb29yKGFjdGl2ZVdpbmRvdyAvIHRoaXMudGltZVBlcmlvZHNbaV0ubWlsbGlzZWNvbmRzKSA8IDEpIHtcblx0ICAgICAgICAgICAgdGhpcy5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzLnB1c2goe1xuXHQgICAgICAgICAgICAgICdhYmJyZXZpYXRpb24nOiB0aGlzLnRpbWVQZXJpb2RzW2ldLmFiYnJldmlhdGlvbixcblx0ICAgICAgICAgICAgICAnZGVzY3JpcHRpb24nOiB0aGlzLnRpbWVQZXJpb2RzW2ldLmRlc2NyaXB0aW9uLFxuXHQgICAgICAgICAgICAgICdtaWxsaXNlY29uZHMnOiB0aGlzLnRpbWVQZXJpb2RzW2ldLm1pbGxpc2Vjb25kcyxcblx0ICAgICAgICAgICAgICAnbXVsdGlwbGllcnMnOiBbMV1cblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAvLyBpZiB0aGUgdW5pdCBpcyBvZiB0aGUgb3JkZXIgb2YgdGhlIHRhcmdldCBibG9jayBhbmQgY2FsY3VsYXRpbmcgdGhlIG11bHRpcGxpZXJzXG5cdCAgICAgICAgICAgIHRoaXMuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kcy5wdXNoKHtcblx0ICAgICAgICAgICAgICAnYWJicmV2aWF0aW9uJzogdGhpcy50aW1lUGVyaW9kc1tpXS5hYmJyZXZpYXRpb24sXG5cdCAgICAgICAgICAgICAgJ2Rlc2NyaXB0aW9uJzogdGhpcy50aW1lUGVyaW9kc1tpXS5kZXNjcmlwdGlvbixcblx0ICAgICAgICAgICAgICAnbWlsbGlzZWNvbmRzJzogdGhpcy50aW1lUGVyaW9kc1tpXS5taWxsaXNlY29uZHMsXG5cdCAgICAgICAgICAgICAgJ211bHRpcGxpZXJzJzogW11cblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgIC8vIGNhbGN1bGF0aW5nIGFuZCBwb3B1bGF0aW5nIHRoZSBhcHBsaWNhYmxlIG11bHRwbGllcnMgb2YgZWFjaCB1bml0XG5cdCAgICAgICAgICAgIGZvciAoaiA9IDA7IGogPCB0aGlzLnRpbWVQZXJpb2RzW2ldLm11bHRpcGxpZXJzLmxlbmd0aDsgaisrKSB7XG5cdCAgICAgICAgICAgICAgaWYgKGFjdGl2ZVdpbmRvdyAvIHRoaXMucmF0aW8gPCB0aGlzLnRpbWVQZXJpb2RzW2ldLm11bHRpcGxpZXJzW2pdICogdGhpcy50aW1lUGVyaW9kc1tpXS5taWxsaXNlY29uZHMpIHtcblx0ICAgICAgICAgICAgICAgIHRoaXMuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kc1t0aGlzLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHMubGVuZ3RoIC0gMV0ubXVsdGlwbGllcnMucHVzaCh0aGlzLnRpbWVQZXJpb2RzW2ldLm11bHRpcGxpZXJzW2pdKTtcblx0ICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAgdGhpcy5ub0NhbGNCdXR0b25zID0gSW5maW5pdHk7XG5cdCAgICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICBmb3IgKGogPSAwOyBqIDwgdGhpcy5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW2ldLm11bHRpcGxpZXJzLmxlbmd0aDsgaisrKSB7XG5cdCAgICAgICAgICArK2NvdW50O1xuXHQgICAgICAgICAgaWYgKHRoaXMubm9DYWxjQnV0dG9ucyA+IGkpIHtcblx0ICAgICAgICAgICAgdGhpcy5ub0NhbGNCdXR0b25zID0gaTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIGlmIChjb3VudCA8PSA0KSB7XG5cdCAgICAgICAgICAgIHRoaXMuc3RhcnRQb2ludE11bHRpcGxpZXIgPSBqO1xuXHQgICAgICAgICAgICB0aGlzLnN0YXJ0UG9pbnRVbml0ID0gaTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8vIHRoaXMuZHJhd0J1dHRvbnNDYWxjdWxhdGVkKHRoaXMuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kcyk7XG5cdCAgICB9XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBBIGZ1bmN0aW9uIHRvIGdlbmVyYXRlIHRoZSBjb250ZXh0dWFsIGJ1dHRvbnMgdXNpbmdcblx0ICAgICAqIHRoZSBlbmQgcG9pbnQgb2YgdGhlIHRpbWUtc2NhbGVcblx0ICAgICAqL1xuXHRcblx0ICB9LCB7XG5cdCAgICBrZXk6ICdnZW5lcmF0ZUNvbnRleHR1YWxCdXR0b25zJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBnZW5lcmF0ZUNvbnRleHR1YWxCdXR0b25zKCkge1xuXHQgICAgICAvLyBnZW5lcmF0aW5nIGFuIGFycmF5IHdpdGggYXBwbGljYWJsZSBURCBidXR0b25zXG5cdCAgICAgIHZhciBidXR0b25zID0gW10sXG5cdCAgICAgICAgICBpID0gMCxcblx0ICAgICAgICAgIGVuZFN0YW1wID0gdGhpcy5nbG9iYWxSZWFjdGl2ZU1vZGVsLm1vZGVsWyd4LWF4aXMtYWJzb2x1dGUtcmFuZ2UtZW5kJ10sXG5cdCAgICAgICAgICBkYXRlU3RhcnQgPSBlbmRTdGFtcCAtIDIsXG5cdCAgICAgICAgICBkYXRlRW5kID0gZW5kU3RhbXAsXG5cdCAgICAgICAgICByZWxhdGl2ZVREQnV0dG9uID0ge307XG5cdCAgICAgIGZvciAoOyBpIDwgdGhpcy50ZEJ1dHRvbnMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICBkYXRlU3RhcnQgPSBuZXcgRGF0ZShlbmRTdGFtcCk7XG5cdCAgICAgICAgaWYgKHRoaXMudGRCdXR0b25zW2ldLm5hbWUgPT09ICdZVEQnKSB7XG5cdCAgICAgICAgICBkYXRlU3RhcnQuc2V0TW9udGgoMCk7XG5cdCAgICAgICAgICBkYXRlU3RhcnQuc2V0RGF0ZSgxKTtcblx0ICAgICAgICAgIGRhdGVTdGFydC5zZXRIb3VycygwKTtcblx0ICAgICAgICAgIGRhdGVTdGFydC5zZXRNaW51dGVzKDApO1xuXHQgICAgICAgICAgZGF0ZVN0YXJ0LnNldFNlY29uZHMoMCk7XG5cdCAgICAgICAgfSBlbHNlIGlmICh0aGlzLnRkQnV0dG9uc1tpXS5uYW1lID09PSAnTVREJykge1xuXHQgICAgICAgICAgZGF0ZVN0YXJ0LnNldERhdGUoMSk7XG5cdCAgICAgICAgICBkYXRlU3RhcnQuc2V0SG91cnMoMCk7XG5cdCAgICAgICAgICBkYXRlU3RhcnQuc2V0TWludXRlcygwKTtcblx0ICAgICAgICAgIGRhdGVTdGFydC5zZXRTZWNvbmRzKDApO1xuXHQgICAgICAgIH0gZWxzZSBpZiAodGhpcy50ZEJ1dHRvbnNbaV0ubmFtZSA9PT0gJ1FURCcpIHtcblx0ICAgICAgICAgIGRhdGVTdGFydC5zZXRNb250aCgxMSAtIGRhdGVTdGFydC5nZXRNb250aCgpICUgNCk7XG5cdCAgICAgICAgICBkYXRlU3RhcnQuc2V0RGF0ZSgwKTtcblx0ICAgICAgICAgIGRhdGVTdGFydC5zZXRIb3VycygwKTtcblx0ICAgICAgICAgIGRhdGVTdGFydC5zZXRNaW51dGVzKDApO1xuXHQgICAgICAgICAgZGF0ZVN0YXJ0LnNldFNlY29uZHMoMCk7XG5cdCAgICAgICAgfSBlbHNlIGlmICh0aGlzLnRkQnV0dG9uc1tpXS5uYW1lID09PSAnV1REJykge1xuXHQgICAgICAgICAgZGF0ZVN0YXJ0LnNldERhdGUoZGF0ZVN0YXJ0LmdldERhdGUoKSAtIGRhdGVTdGFydC5nZXREYXkoKSk7XG5cdCAgICAgICAgICBkYXRlU3RhcnQuc2V0SG91cnMoMCk7XG5cdCAgICAgICAgICBkYXRlU3RhcnQuc2V0TWludXRlcygwKTtcblx0ICAgICAgICAgIGRhdGVTdGFydC5zZXRTZWNvbmRzKDApO1xuXHQgICAgICAgIH0gZWxzZSBpZiAodGhpcy50ZEJ1dHRvbnNbaV0ubmFtZSA9PT0gJ1knKSB7XG5cdCAgICAgICAgICBkYXRlU3RhcnQuc2V0SG91cnMoMCk7XG5cdCAgICAgICAgICBkYXRlU3RhcnQuc2V0TWludXRlcygwKTtcblx0ICAgICAgICAgIGRhdGVTdGFydC5zZXRTZWNvbmRzKDApO1xuXHQgICAgICAgICAgZGF0ZVN0YXJ0IC09IDg2NDAwMDAwO1xuXHQgICAgICAgIH0gZWxzZSBpZiAodGhpcy50ZEJ1dHRvbnNbaV0ubmFtZSA9PT0gJ1QnKSB7XG5cdCAgICAgICAgICBkYXRlU3RhcnQuc2V0SG91cnMoMCk7XG5cdCAgICAgICAgICBkYXRlU3RhcnQuc2V0TWludXRlcygwKTtcblx0ICAgICAgICAgIGRhdGVTdGFydC5zZXRTZWNvbmRzKDApO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgaWYgKGRhdGVFbmQgPCBkYXRlU3RhcnQpIHtcblx0ICAgICAgICAgIGNvbnRpbnVlO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICB0aGlzLnRkQnV0dG9uc1tpXS5kYXRlU3RhcnQgPSBkYXRlU3RhcnQudmFsdWVPZigpO1xuXHQgICAgICAgICAgdGhpcy50ZEJ1dHRvbnNbaV0uZGF0ZUVuZCA9IGRhdGVFbmQudmFsdWVPZigpO1xuXHQgICAgICAgICAgYnV0dG9ucy5wdXNoKHRoaXMudGRCdXR0b25zW2ldKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAgcmVsYXRpdmVUREJ1dHRvbi5taWxsaXNlY29uZHMgPSBJbmZpbml0eTtcblx0ICAgICAgZm9yIChpID0gMDsgaSA8IHRoaXMudGRCdXR0b25zLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgaWYgKE1hdGguYWJzKHRoaXMudGRCdXR0b25zW2ldLm1pbGxpc2Vjb25kcyAtICh0aGlzLmVuZEFjdGl2ZVdpbmRvdyAtIHRoaXMuc3RhcnRBY3RpdmVXaW5kb3cpKSA8IHJlbGF0aXZlVERCdXR0b24ubWlsbGlzZWNvbmRzKSB7XG5cdCAgICAgICAgICByZWxhdGl2ZVREQnV0dG9uLm1pbGxpc2Vjb25kcyA9IHRoaXMudGRCdXR0b25zW2ldLm1pbGxpc2Vjb25kcztcblx0ICAgICAgICAgIHJlbGF0aXZlVERCdXR0b24ubmFtZSA9IHRoaXMudGRCdXR0b25zW2ldLmFiYnJldmlhdGlvbjtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHRoaXMuc3RhbmRhcmRDb250ZXh1YWxQZXJpb2RzID0gYnV0dG9ucztcblx0ICAgICAgLy8gdGhpcy5kcmF3QnV0dG9uc0NvbnRleHR1YWwodGhpcy5zdGFuZGFyZENvbnRleHVhbFBlcmlvZHMpO1xuXHQgICAgfVxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogQSBmdW5jdGlvbiB0byBzZXQgdGhlIGFjdGl2ZSBwZXJpb2Qnc1xuXHQgICAgICogc3RhcnQgYW5kIGVuZCBwb2ludFxuXHQgICAgICogQHBhcmFtICB7bnVtYmVyfSBkYXRlIHN0YW1wIC0gQSBVTklYIHRpbWVzdGFtcCB0byBiZSBzZXQgYXMgdGhlIHN0YXJ0IHBvaW50IG9mIGFjdGl2ZSBwZXJpb2Rcblx0ICAgICAqIEBwYXJhbSAge251bWJlcn0gZGF0ZSBzdGFtcCAtIEEgVU5JWCB0aW1lc3RhbXAgdG8gYmUgc2V0IGFzIHRoZSBlbmQgcG9pbnQgb2YgYWN0aXZlIHBlcmlvZFxuXHQgICAgICovXG5cdFxuXHQgIH0sIHtcblx0ICAgIGtleTogJ3NldEFjdGl2ZVBlcmlvZCcsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gc2V0QWN0aXZlUGVyaW9kKCkge1xuXHQgICAgICB2YXIgc3RhcnQsIGVuZDtcblx0ICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEpIHtcblx0ICAgICAgICBlbmQgPSB0aGlzLmdsb2JhbFJlYWN0aXZlTW9kZWwubW9kZWxbJ3gtYXhpcy12aXNpYmxlLXJhbmdlLWVuZCddO1xuXHQgICAgICAgIHN0YXJ0ID0gZW5kIC0gYXJndW1lbnRzWzBdO1xuXHQgICAgICB9IGVsc2UgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDIpIHtcblx0ICAgICAgICBzdGFydCA9IGFyZ3VtZW50c1swXTtcblx0ICAgICAgICBlbmQgPSBhcmd1bWVudHNbMV07XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHRoaXMuc3RhcnRBY3RpdmVXaW5kb3cgPSBzdGFydDtcblx0ICAgICAgdGhpcy5lbmRBY3RpdmVXaW5kb3cgPSBlbmQ7XG5cdCAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdGFydEFjdGl2ZVJhbmdlJykuaW5uZXJIVE1MID0gbmV3IERhdGUodGhpcy5zdGFydEFjdGl2ZVdpbmRvdyk7XG5cdCAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbmRBY3RpdmVSYW5nZScpLmlubmVySFRNTCA9IG5ldyBEYXRlKHRoaXMuZW5kQWN0aXZlV2luZG93KTtcblx0ICAgICAgdGhpcy5nZW5lcmF0ZUNhbGN1bGF0ZWRCdXR0b25zKCk7XG5cdCAgICAgIHRoaXMuZ2xvYmFsUmVhY3RpdmVNb2RlbC5tb2RlbFsneC1heGlzLXZpc2libGUtcmFuZ2Utc3RhcnQnXSA9IHRoaXMuc3RhcnRBY3RpdmVXaW5kb3c7XG5cdCAgICAgIHRoaXMuZ2xvYmFsUmVhY3RpdmVNb2RlbC5tb2RlbFsneC1heGlzLXZpc2libGUtcmFuZ2UtZW5kJ10gPSB0aGlzLmVuZEFjdGl2ZVdpbmRvdztcblx0ICAgICAgdGhpcy5nZW5lcmF0ZUNvbnRleHR1YWxCdXR0b25zKCk7XG5cdCAgICAgIC8vIHRoaXMuY3JlYXRlVG9vbGJhcigpO1xuXHQgICAgICAvLyB0aGlzLmRyYXdCdXR0b25BbGwoKTtcblx0ICAgICAgLy8gaW5zdGFuY2UuZ2xvYmFsUmVhY3RpdmVNb2RlbC5tb2RlbFsnX3gtYXhpcy12aXNpYmxlLXJhbmdlLXN0YXJ0J10gKz0gMTI0NDE2MDAwMDAwXG5cdCAgICB9XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBBIGZ1bmN0aW9uIHRvIHNldCB0aGUgc3RhcnQgYW5kIGVuZCBwb2ludCBvZiB0aGVcblx0ICAgICAqIGVudGlyZSB0aW1lLWxpbmVcblx0ICAgICAqIEBwYXJhbSAge251bWJlcn0gZGF0ZSBzdGFtcCAtIEEgVU5JWCB0aW1lc3RhbXAgdG8gYmUgc2V0IGFzIHRoZSBzdGFydCBwb2ludCBvZiB0aW1lLWxpbmVcblx0ICAgICAqIEBwYXJhbSAge251bWJlcn0gZGF0ZSBzdGFtcCAtIEEgVU5JWCB0aW1lc3RhbXAgdG8gYmUgc2V0IGFzIHRoZSBlbmQgcG9pbnQgb2YgdGltZS1saW5lXG5cdCAgICAgKi9cblx0XG5cdCAgfSwge1xuXHQgICAga2V5OiAnc2V0VGltZWxpbmUnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHNldFRpbWVsaW5lKHN0YXJ0LCBlbmQpIHtcblx0ICAgICAgdGhpcy5zdGFydERhdGFzZXQgPSBzdGFydDtcblx0ICAgICAgdGhpcy5lbmREYXRhc2V0ID0gZW5kO1xuXHQgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3RhcnRBY3RpdmVSYW5nZScpLmlubmVySFRNTCA9IG5ldyBEYXRlKHRoaXMuc3RhcnREYXRhc2V0KTtcblx0ICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VuZEFjdGl2ZVJhbmdlJykuaW5uZXJIVE1MID0gbmV3IERhdGUodGhpcy5lbmREYXRhc2V0KTtcblx0ICAgICAgdGhpcy5nZW5lcmF0ZUNhbGN1bGF0ZWRCdXR0b25zKCk7XG5cdCAgICB9XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBBIGZ1bmN0aW9uIHRvIGRyYXcgdGhlIGNhbGN1bGF0ZWQgYnV0dG9ucyBpbiB0aGUgY2FudmFzXG5cdCAgICAgKiBAcGFyYW0gIHthcnJheX0gYXJyYXkgb2Ygb2JqZWN0cyAtIEFuIGFycmF5IG9mIG9iamVjdHMgd2l0aCB0aGUgc3RhbmRhcmQgcGVyaW9kcyB0byBiZSBkcmF3biBpbmZvcm1hdGlvblxuXHQgICAgICovXG5cdFxuXHQgIH0sIHtcblx0ICAgIGtleTogJ2RyYXdCdXR0b25zQ2FsY3VsYXRlZCcsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gZHJhd0J1dHRvbnNDYWxjdWxhdGVkKHN0YW5kYXJkUGVyaW9kcykge1xuXHQgICAgICB2YXIgY2FsY3VsYXRlZEJ1dHRvbnMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FsY3VsYXRlZCcpLFxuXHQgICAgICAgICAgYnRuLFxuXHQgICAgICAgICAgaSA9IDAsXG5cdCAgICAgICAgICBqID0gMCxcblx0ICAgICAgICAgIG11bHRpcGxpZXJWYWx1ZSA9IDAsXG5cdCAgICAgICAgICBzZWxmID0gdGhpcyxcblx0ICAgICAgICAgIGVuZEFjdGl2ZSA9IHRoaXMuZ2xvYmFsUmVhY3RpdmVNb2RlbC5tb2RlbFsneC1heGlzLXZpc2libGUtcmFuZ2UtZW5kJ107XG5cdCAgICAgIGNhbGN1bGF0ZWRCdXR0b25zLmlubmVySFRNTCA9ICcnO1xuXHQgICAgICBmb3IgKGkgPSBzdGFuZGFyZFBlcmlvZHMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcblx0ICAgICAgICBmb3IgKGogPSBzdGFuZGFyZFBlcmlvZHNbaV0ubXVsdGlwbGllcnMubGVuZ3RoIC0gMTsgaiA+PSAwOyBqLS0pIHtcblx0ICAgICAgICAgIGJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ0JVVFRPTicpO1xuXHQgICAgICAgICAgYnRuLmlkID0gc3RhbmRhcmRQZXJpb2RzW2ldLm11bHRpcGxpZXJzW2pdICsgc3RhbmRhcmRQZXJpb2RzW2ldLmFiYnJldmlhdGlvbjtcblx0ICAgICAgICAgIGJ0bi5pbm5lckhUTUwgPSBzdGFuZGFyZFBlcmlvZHNbaV0ubXVsdGlwbGllcnNbal0gKyBzdGFuZGFyZFBlcmlvZHNbaV0uYWJicmV2aWF0aW9uO1xuXHQgICAgICAgICAgbXVsdGlwbGllclZhbHVlID0gc3RhbmRhcmRQZXJpb2RzW2ldLm11bHRpcGxpZXJzW2pdICogc3RhbmRhcmRQZXJpb2RzW2ldLm1pbGxpc2Vjb25kcztcblx0ICAgICAgICAgIGJ0bi5tdWx0aXBsaWVyVmFsdWUgPSBtdWx0aXBsaWVyVmFsdWU7XG5cdCAgICAgICAgICBidG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcblx0ICAgICAgICAgICAgc2VsZi5zZXRBY3RpdmVQZXJpb2QoZW5kQWN0aXZlIC0gZXZlbnQuc3JjRWxlbWVudC5tdWx0aXBsaWVyVmFsdWUsIGVuZEFjdGl2ZSk7XG5cdCAgICAgICAgICB9KTtcblx0ICAgICAgICAgIGNhbGN1bGF0ZWRCdXR0b25zLmFwcGVuZENoaWxkKGJ0bik7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIHRoaXMuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kcyA9IFtdO1xuXHQgICAgfVxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogQSBmdW5jdGlvbiB0byBkcmF3IHRoZSBjb250ZXh0dWFsIGJ1dHRvbnMuXG5cdCAgICAgKiBAcGFyYW0gIHthcnJheX0gYXJyYXkgb2Ygb2JqZWN0cyAtIEFuIGFycmF5IG9mIG9iamVjdHMgd2l0aCB0aGUgc3RhbmRhcmQgcGVyaW9kcyB0byBiZSBkcmF3biBpbmZvcm1hdGlvblxuXHQgICAgICovXG5cdFxuXHQgIH0sIHtcblx0ICAgIGtleTogJ2RyYXdCdXR0b25zQ29udGV4dHVhbCcsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gZHJhd0J1dHRvbnNDb250ZXh0dWFsKHN0YW5kYXJkUGVyaW9kcykge1xuXHQgICAgICB2YXIgY29udGV4dHVhbEJ1dHRvbnMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udGV4dHVhbCcpLFxuXHQgICAgICAgICAgYnRuLFxuXHQgICAgICAgICAgaSA9IDAsXG5cdCAgICAgICAgICBzZWxmID0gdGhpcztcblx0ICAgICAgY29udGV4dHVhbEJ1dHRvbnMuaW5uZXJIVE1MID0gJyc7XG5cdCAgICAgIGZvciAoaSA9IDA7IGkgPCBzdGFuZGFyZFBlcmlvZHMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICBidG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdCVVRUT04nKTtcblx0ICAgICAgICBidG4uaWQgPSBzdGFuZGFyZFBlcmlvZHNbaV0uYWJicmV2aWF0aW9uO1xuXHQgICAgICAgIGJ0bi5pbm5lckhUTUwgPSBzdGFuZGFyZFBlcmlvZHNbaV0uYWJicmV2aWF0aW9uO1xuXHQgICAgICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGV2ZW50QnRuLmJpbmQodGhpcywgc3RhbmRhcmRQZXJpb2RzW2ldKSk7XG5cdCAgICAgICAgY29udGV4dHVhbEJ1dHRvbnMuYXBwZW5kQ2hpbGQoYnRuKTtcblx0ICAgICAgfVxuXHQgICAgICBmdW5jdGlvbiBldmVudEJ0bihvYmopIHtcblx0ICAgICAgICBzZWxmLnNldEFjdGl2ZVBlcmlvZChvYmouZGF0ZVN0YXJ0LCBvYmouZGF0ZUVuZCk7XG5cdCAgICAgIH1cblx0ICAgICAgdGhpcy5zdGFuZGFyZENvbnRleHR1YWxQZXJpb2RzID0gW107XG5cdCAgICB9XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBBIGZ1bmN0aW9uIHRvIGRyYXcgdGhlIEFMTCBidXR0b24uXG5cdCAgICAgKiBAcGFyYW0gIHthcnJheX0gYXJyYXkgb2Ygb2JqZWN0cyAtIEFuIGFycmF5IG9mIG9iamVjdHMgd2l0aCB0aGUgc3RhbmRhcmQgcGVyaW9kcyB0byBiZSBkcmF3biBpbmZvcm1hdGlvblxuXHQgICAgICovXG5cdFxuXHQgIH0sIHtcblx0ICAgIGtleTogJ2RyYXdCdXR0b25BbGwnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGRyYXdCdXR0b25BbGwoc3RhbmRhcmRQZXJpb2RzKSB7XG5cdCAgICAgIHZhciBhbGxCdXR0b25zID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FsbEJ1dHRvbicpLFxuXHQgICAgICAgICAgYnRuLFxuXHQgICAgICAgICAgc2VsZiA9IHRoaXM7XG5cdCAgICAgIGFsbEJ1dHRvbnMuaW5uZXJIVE1MID0gJyc7XG5cdCAgICAgIGJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ0JVVFRPTicpO1xuXHQgICAgICBidG4uaWQgPSAnYWxsJztcblx0ICAgICAgYnRuLmlubmVySFRNTCA9ICdBTEwnO1xuXHQgICAgICBidG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcblx0ICAgICAgICBzZWxmLnNldEFjdGl2ZVBlcmlvZChzZWxmLnN0YXJ0RGF0YXNldCwgc2VsZi5lbmREYXRhc2V0KTtcblx0ICAgICAgfSk7XG5cdCAgICAgIGFsbEJ1dHRvbnMuYXBwZW5kQ2hpbGQoYnRuKTtcblx0ICAgIH1cblx0XG5cdCAgICAvKipcblx0ICAgICAqIEEgZnVuY3Rpb24gdG8gc2V0IHRoZSBvYmplY3QgdG8gc2V0IHRoZSB1c2VyIHByZWZlcmVuY2VzXG5cdCAgICAgKi9cblx0XG5cdCAgfSwge1xuXHQgICAga2V5OiAnY29uZmlndXJlJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBjb25maWd1cmUoY29uZmlnKSB7XG5cdCAgICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuXHQgICAgfVxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogRnVzaW9uY2hhcnRzIGxpZmUgY3ljbGUgbWV0aG9kIGZvciBleHRlbnNpb25cblx0ICAgICAqL1xuXHRcblx0ICB9LCB7XG5cdCAgICBrZXk6ICdpbml0Jyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0KHJlcXVpcmUpIHtcblx0ICAgICAgdmFyIGluc3RhbmNlID0gdGhpcztcblx0ICAgICAgcmVxdWlyZShbJ3hBeGlzJywgJ3lBeGlzJywgJ2dyYXBoaWNzJywgJ2NoYXJ0JywgJ2RhdGFzZXQnLCAnUGxvdE1hbmFnZXInLCAnY2FudmFzQ29uZmlnJywgJ01hcmtlck1hbmFnZXInLCAncmVhY3RpdmVNb2RlbCcsICdnbG9iYWxSZWFjdGl2ZU1vZGVsJywgJ3NwYWNlTWFuYWdlckluc3RhbmNlJywgJ3NtYXJ0TGFiZWwnLCBmdW5jdGlvbiAoeEF4aXMsIHlBeGlzLCBncmFwaGljcywgY2hhcnQsIGRhdGFzZXQsIHBsb3RNYW5hZ2VyLCBjYW52YXNDb25maWcsIG1hcmtlck1hbmFnZXIsIHJlYWN0aXZlTW9kZWwsIGdsb2JhbFJlYWN0aXZlTW9kZWwsIHNwYWNlTWFuYWdlckluc3RhbmNlLCBzbWFydExhYmVsKSB7XG5cdCAgICAgICAgaW5zdGFuY2UueEF4aXMgPSB4QXhpcztcblx0ICAgICAgICBpbnN0YW5jZS55QXhpcyA9IHlBeGlzO1xuXHQgICAgICAgIGluc3RhbmNlLmdyYXBoaWNzID0gZ3JhcGhpY3M7XG5cdCAgICAgICAgaW5zdGFuY2UuY2hhcnQgPSBjaGFydDtcblx0ICAgICAgICBpbnN0YW5jZS5kYXRhc2V0ID0gZGF0YXNldDtcblx0ICAgICAgICBpbnN0YW5jZS5wbG90TWFuYWdlciA9IHBsb3RNYW5hZ2VyO1xuXHQgICAgICAgIGluc3RhbmNlLm1hcmtlck1hbmFnZXIgPSBtYXJrZXJNYW5hZ2VyO1xuXHQgICAgICAgIGluc3RhbmNlLmNhbnZhc0NvbmZpZyA9IGNhbnZhc0NvbmZpZztcblx0ICAgICAgICBpbnN0YW5jZS5yZWFjdGl2ZU1vZGVsID0gcmVhY3RpdmVNb2RlbDtcblx0ICAgICAgICBpbnN0YW5jZS5nbG9iYWxSZWFjdGl2ZU1vZGVsID0gZ2xvYmFsUmVhY3RpdmVNb2RlbDtcblx0ICAgICAgICBpbnN0YW5jZS5zcGFjZU1hbmFnZXJJbnN0YW5jZSA9IHNwYWNlTWFuYWdlckluc3RhbmNlO1xuXHQgICAgICAgIGluc3RhbmNlLnNtYXJ0TGFiZWwgPSBzbWFydExhYmVsO1xuXHQgICAgICB9XSk7XG5cdCAgICAgIHRoaXMuc3BhY2VNYW5hZ2VySW5zdGFuY2UgPSBpbnN0YW5jZS5zcGFjZU1hbmFnZXJJbnN0YW5jZTtcblx0ICAgICAgdGhpcy5nbG9iYWxSZWFjdGl2ZU1vZGVsID0gaW5zdGFuY2UuZ2xvYmFsUmVhY3RpdmVNb2RlbDtcblx0ICAgICAgdGhpcy5lbmRBY3RpdmVXaW5kb3cgPSBpbnN0YW5jZS5nbG9iYWxSZWFjdGl2ZU1vZGVsLm1vZGVsWyd4LWF4aXMtdmlzaWJsZS1yYW5nZS1lbmQnXTtcblx0ICAgICAgdGhpcy5zdGFydEFjdGl2ZVdpbmRvdyA9IGluc3RhbmNlLmdsb2JhbFJlYWN0aXZlTW9kZWwubW9kZWxbJ3gtYXhpcy12aXNpYmxlLXJhbmdlLXN0YXJ0J107XG5cdCAgICAgIHRoaXMuc3RhcnREYXRhc2V0ID0gaW5zdGFuY2UuZ2xvYmFsUmVhY3RpdmVNb2RlbC5tb2RlbFsneC1heGlzLWFic29sdXRlLXJhbmdlLXN0YXJ0J107XG5cdCAgICAgIHRoaXMuZW5kRGF0YXNldCA9IGluc3RhbmNlLmdsb2JhbFJlYWN0aXZlTW9kZWwubW9kZWxbJ3gtYXhpcy1hYnNvbHV0ZS1yYW5nZS1lbmQnXTtcblx0ICAgICAgdGhpcy5zZXRBY3RpdmVQZXJpb2QodGhpcy5zdGFydEFjdGl2ZVdpbmRvdywgdGhpcy5lbmRBY3RpdmVXaW5kb3cpO1xuXHQgICAgICAvLyBpbnN0YW5jZS5nbG9iYWxSZWFjdGl2ZU1vZGVsLm1vZGVsWydfeC1heGlzLXZpc2libGUtcmFuZ2Utc3RhcnQnXSArPSAxMjQ0MTYwMDAwMDA7XG5cdCAgICAgIHRoaXMuc2V0QWN0aXZlUGVyaW9kKHRoaXMuc3RhcnRBY3RpdmVXaW5kb3csIHRoaXMuZW5kQWN0aXZlV2luZG93KTtcblx0XG5cdCAgICAgIHRoaXMudG9vbGJhcnMgPSBbXTtcblx0XG5cdCAgICAgIHRoaXMubWVhc3VyZW1lbnQgPSB7fTtcblx0XG5cdCAgICAgIHRoaXMudG9vbGJhcnMucHVzaCh0aGlzLmNyZWF0ZVRvb2xiYXIoKSk7XG5cdCAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ2NyZWF0ZVRvb2xiYXInLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZVRvb2xiYXIoKSB7XG5cdCAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cdFxuXHQgICAgICB2YXIgdW5pZ3JvdXAsXG5cdCAgICAgICAgICB0b29sYmFyLFxuXHQgICAgICAgICAgY2FsY3VsYXRlZEJ1dHRvbnMsXG5cdCAgICAgICAgICBjb250ZXh0dWFsQnV0dG9ucyxcblx0ICAgICAgICAgIGFsbEJ1dHRvbixcblx0ICAgICAgICAgIHNlbGYgPSB0aGlzLFxuXHQgICAgICAgICAgZW5kQWN0aXZlID0gdGhpcy5nbG9iYWxSZWFjdGl2ZU1vZGVsLm1vZGVsWyd4LWF4aXMtdmlzaWJsZS1yYW5nZS1lbmQnXSxcblx0ICAgICAgICAgIGRlZHVjdG9yQXIgPSBbXSxcblx0ICAgICAgICAgIHN0YXJ0TXVsdGlwbGllcixcblx0ICAgICAgICAgIGRlZHVjdG9yLFxuXHQgICAgICAgICAgaSxcblx0ICAgICAgICAgIGosXG5cdCAgICAgICAgICBtYXJnaW4sXG5cdCAgICAgICAgICBmcm9tRGF0ZUxhYmVsLFxuXHQgICAgICAgICAgZ3JvdXA7XG5cdFxuXHQgICAgICBncm91cCA9IG5ldyB0aGlzLnRvb2xib3guQ29tcG9uZW50R3JvdXAoe1xuXHQgICAgICAgIHBhcGVyOiB0aGlzLmdyYXBoaWNzLnBhcGVyLFxuXHQgICAgICAgIGNoYXJ0OiB0aGlzLmNoYXJ0LFxuXHQgICAgICAgIHNtYXJ0TGFiZWw6IHRoaXMuc21hcnRMYWJlbCxcblx0ICAgICAgICBjaGFydENvbnRhaW5lcjogdGhpcy5ncmFwaGljcy5jb250YWluZXJcblx0ICAgICAgfSk7XG5cdFxuXHQgICAgICB1bmlncm91cCA9IG5ldyB0aGlzLnRvb2xib3guVW5pU2VsZWN0Q29tcG9uZW50R3JvdXAoe1xuXHQgICAgICAgIHBhcGVyOiB0aGlzLmdyYXBoaWNzLnBhcGVyLFxuXHQgICAgICAgIGNoYXJ0OiB0aGlzLmNoYXJ0LFxuXHQgICAgICAgIHNtYXJ0TGFiZWw6IHRoaXMuc21hcnRMYWJlbCxcblx0ICAgICAgICBjaGFydENvbnRhaW5lcjogdGhpcy5ncmFwaGljcy5jb250YWluZXJcblx0ICAgICAgfSk7XG5cdCAgICAgIHVuaWdyb3VwLnNldENvbmZpZyh7XG5cdCAgICAgICAgZmlsbDogJyNmZmYnLFxuXHQgICAgICAgIGJvcmRlclRoaWNrbmVzczogMFxuXHQgICAgICB9KTtcblx0ICAgICAgZ3JvdXAuc2V0Q29uZmlnKHtcblx0ICAgICAgICBmaWxsOiAnI2ZmZicsXG5cdCAgICAgICAgYm9yZGVyVGhpY2tuZXNzOiAwXG5cdCAgICAgIH0pO1xuXHQgICAgICB0b29sYmFyID0gbmV3IHRoaXMuSG9yaXpvbnRhbFRvb2xiYXIoe1xuXHQgICAgICAgIHBhcGVyOiB0aGlzLmdyYXBoaWNzLnBhcGVyLFxuXHQgICAgICAgIGNoYXJ0OiB0aGlzLmNoYXJ0LFxuXHQgICAgICAgIHNtYXJ0TGFiZWw6IHRoaXMuc21hcnRMYWJlbCxcblx0ICAgICAgICBjaGFydENvbnRhaW5lcjogdGhpcy5ncmFwaGljcy5jb250YWluZXJcblx0ICAgICAgfSk7XG5cdCAgICAgIHRvb2xiYXIuc2V0Q29uZmlnKHtcblx0ICAgICAgICBmaWxsOiAnI2ZmZicsXG5cdCAgICAgICAgYm9yZGVyVGhpY2tuZXNzOiAwXG5cdCAgICAgIH0pO1xuXHQgICAgICBmcm9tRGF0ZUxhYmVsID0gbmV3IHRoaXMudG9vbGJveC5MYWJlbCgnWm9vbTonLCB7XG5cdCAgICAgICAgc21hcnRMYWJlbDogdGhpcy5zbWFydExhYmVsLFxuXHQgICAgICAgIHBhcGVyOiB0aGlzLmdyYXBoaWNzLnBhcGVyXG5cdCAgICAgIH0sIHtcblx0ICAgICAgICB0ZXh0OiB7XG5cdCAgICAgICAgICBzdHlsZToge1xuXHQgICAgICAgICAgICAnZm9udC1zaXplJzogJzE1Jyxcblx0ICAgICAgICAgICAgJ2ZvbnRGYW1pbHknOiAnTXlyaWFkUHJvJ1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICAgIGdyb3VwLmFkZFN5bWJvbChmcm9tRGF0ZUxhYmVsKTtcblx0ICAgICAgYWxsQnV0dG9uID0gbmV3IHRoaXMudG9vbGJveC5TeW1ib2woJ0FMTCcsIHRydWUsIHtcblx0ICAgICAgICBwYXBlcjogdGhpcy5ncmFwaGljcy5wYXBlcixcblx0ICAgICAgICBjaGFydDogdGhpcy5jaGFydCxcblx0ICAgICAgICBzbWFydExhYmVsOiB0aGlzLnNtYXJ0TGFiZWwsXG5cdCAgICAgICAgY2hhcnRDb250YWluZXI6IHRoaXMuZ3JhcGhpY3MuY29udGFpbmVyXG5cdCAgICAgIH0sIHtcblx0ICAgICAgICBmaWxsOiAnI2ZmZmZmZicsXG5cdCAgICAgICAgbGFiZWxGaWxsOiAnIzY5Njk2OScsXG5cdCAgICAgICAgc3ltYm9sU3Ryb2tlV2lkdGg6ICcyJyxcblx0ICAgICAgICBzeW1ib2xTdHJva2U6ICcjMDAwMDAwJyxcblx0ICAgICAgICBzdHJva2VXaWR0aDogJzEnLFxuXHQgICAgICAgIGhvdmVyRmlsbDogJyM3ZjdmN2YnLFxuXHQgICAgICAgIHJhZGl1czogMSxcblx0ICAgICAgICBtYXJnaW46IHtcblx0ICAgICAgICAgIHJpZ2h0OiA1XG5cdCAgICAgICAgfVxuXHQgICAgICB9KS5hdHRhY2hFdmVudEhhbmRsZXJzKHtcblx0ICAgICAgICBjbGljazogZnVuY3Rpb24gY2xpY2soKSB7XG5cdCAgICAgICAgICBzZWxmLnNldEFjdGl2ZVBlcmlvZChzZWxmLnN0YXJ0RGF0YXNldCwgc2VsZi5lbmREYXRhc2V0KTtcblx0ICAgICAgICAgIHRvb2xiYXIuZGlzcG9zZSgpO1xuXHQgICAgICAgICAgc2VsZi5jbGlja2VkSWQgPSAnQUxMJztcblx0ICAgICAgICAgIHNlbGYudG9vbGJhcnMucG9wKCk7XG5cdCAgICAgICAgICBzZWxmLnRvb2xiYXJzLnB1c2goc2VsZi5jcmVhdGVUb29sYmFyKCkpO1xuXHQgICAgICAgICAgc2VsZi5nZXRMb2dpY2FsU3BhY2UoKTtcblx0ICAgICAgICAgIHNlbGYuZHJhdygpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdFxuXHQgICAgICB1bmlncm91cC5hZGRTeW1ib2woYWxsQnV0dG9uKTtcblx0ICAgICAgZm9yIChpID0gMDsgaSA8IHRoaXMuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kcy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgIGZvciAoaiA9IHRoaXMuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kc1tpXS5tdWx0aXBsaWVycy5sZW5ndGggLSAxOyBqID49IDA7IGotLSkge1xuXHQgICAgICAgICAgZGVkdWN0b3JBci5wdXNoKHNlbGYuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kc1tpXS5tdWx0aXBsaWVyc1tqXSAqIHNlbGYuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kc1tpXS5taWxsaXNlY29uZHMpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHRcblx0ICAgICAgY2FsY3VsYXRlZEJ1dHRvbnMgPSBbXTtcblx0XG5cdCAgICAgIHZhciBfbG9vcCA9IGZ1bmN0aW9uIF9sb29wKF9pKSB7XG5cdCAgICAgICAgaWYgKF9pID09PSBzZWxmLnN0YXJ0UG9pbnRVbml0KSB7XG5cdCAgICAgICAgICBzdGFydE11bHRpcGxpZXIgPSBzZWxmLnN0YXJ0UG9pbnRNdWx0aXBsaWVyO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBzdGFydE11bHRpcGxpZXIgPSBzZWxmLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHNbX2ldLm11bHRpcGxpZXJzLmxlbmd0aCAtIDE7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICB2YXIgX2xvb3AzID0gZnVuY3Rpb24gX2xvb3AzKF9qKSB7XG5cdCAgICAgICAgICBtYXJnaW4gPSBfaSA9PT0gc2VsZi5ub0NhbGNCdXR0b25zICYmIF9qID09PSAwID8gNSA6IDA7XG5cdCAgICAgICAgICBjb25zb2xlLmxvZyhlbmRBY3RpdmUsIF9pLCBzZWxmLm5vQ2FsY0J1dHRvbnMsIF9qLCBtYXJnaW4pO1xuXHQgICAgICAgICAgY2FsY3VsYXRlZEJ1dHRvbnNbX2ldID0gbmV3IF90aGlzLnRvb2xib3guU3ltYm9sKHNlbGYuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kc1tfaV0ubXVsdGlwbGllcnNbX2pdICsgc2VsZi5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW19pXS5hYmJyZXZpYXRpb24sIHRydWUsIHtcblx0ICAgICAgICAgICAgcGFwZXI6IF90aGlzLmdyYXBoaWNzLnBhcGVyLFxuXHQgICAgICAgICAgICBjaGFydDogX3RoaXMuY2hhcnQsXG5cdCAgICAgICAgICAgIHNtYXJ0TGFiZWw6IF90aGlzLnNtYXJ0TGFiZWwsXG5cdCAgICAgICAgICAgIGNoYXJ0Q29udGFpbmVyOiBfdGhpcy5ncmFwaGljcy5jb250YWluZXJcblx0ICAgICAgICAgIH0sIHtcblx0ICAgICAgICAgICAgZmlsbDogJyNmZmZmZmYnLFxuXHQgICAgICAgICAgICBsYWJlbEZpbGw6ICcjNjk2OTY5Jyxcblx0ICAgICAgICAgICAgc3ltYm9sU3Ryb2tlV2lkdGg6ICcyJyxcblx0ICAgICAgICAgICAgc3ltYm9sU3Ryb2tlOiAnIzAwMDAwMCcsXG5cdCAgICAgICAgICAgIHN0cm9rZVdpZHRoOiAnMScsXG5cdCAgICAgICAgICAgIGhvdmVyRmlsbDogJyM3ZjdmN2YnLFxuXHQgICAgICAgICAgICByYWRpdXM6IDEsXG5cdCAgICAgICAgICAgIG1hcmdpbjoge1xuXHQgICAgICAgICAgICAgIHJpZ2h0OiBtYXJnaW5cblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfSkuYXR0YWNoRXZlbnRIYW5kbGVycyh7XG5cdCAgICAgICAgICAgICdjbGljayc6IGZ1bmN0aW9uIGNsaWNrKCkge1xuXHQgICAgICAgICAgICAgIGRlZHVjdG9yID0gc2VsZi5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW19pXS5tdWx0aXBsaWVyc1tfal0gKiBzZWxmLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHNbX2ldLm1pbGxpc2Vjb25kcztcblx0ICAgICAgICAgICAgICBzZWxmLmNsaWNrZWRJZCA9IHNlbGYuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kc1tfaV0ubXVsdGlwbGllcnNbX2pdICsgc2VsZi5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW19pXS5hYmJyZXZpYXRpb247XG5cdCAgICAgICAgICAgICAgc2VsZi5zZXRBY3RpdmVQZXJpb2QoZGVkdWN0b3IpO1xuXHQgICAgICAgICAgICAgIHRvb2xiYXIuZGlzcG9zZSgpO1xuXHQgICAgICAgICAgICAgIHNlbGYudG9vbGJhcnMucG9wKCk7XG5cdCAgICAgICAgICAgICAgc2VsZi50b29sYmFycy5wdXNoKHNlbGYuY3JlYXRlVG9vbGJhcigpKTtcblx0ICAgICAgICAgICAgICBzZWxmLmdldExvZ2ljYWxTcGFjZSgpO1xuXHQgICAgICAgICAgICAgIHNlbGYuZHJhdygpO1xuXHQgICAgICAgICAgICAgIC8vIHRoaXMudG9vbGJhcnNbdGhpcy50b29sYmFycy5sZW5ndGggLSAxXSA9IHRoaXMuY3JlYXRlVG9vbGJhcigpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9KTtcblx0ICAgICAgICAgIHVuaWdyb3VwLmFkZFN5bWJvbChjYWxjdWxhdGVkQnV0dG9uc1tfaV0pO1xuXHQgICAgICAgIH07XG5cdFxuXHQgICAgICAgIGZvciAodmFyIF9qID0gc3RhcnRNdWx0aXBsaWVyOyBfaiA+PSAwOyBfai0tKSB7XG5cdCAgICAgICAgICBfbG9vcDMoX2opO1xuXHQgICAgICAgIH1cblx0ICAgICAgfTtcblx0XG5cdCAgICAgIGZvciAodmFyIF9pID0gc2VsZi5zdGFydFBvaW50VW5pdDsgX2kgPj0gMDsgX2ktLSkge1xuXHQgICAgICAgIF9sb29wKF9pKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgY29udGV4dHVhbEJ1dHRvbnMgPSBbXTtcblx0XG5cdCAgICAgIHZhciBfbG9vcDIgPSBmdW5jdGlvbiBfbG9vcDIoX2kyKSB7XG5cdCAgICAgICAgY29udGV4dHVhbEJ1dHRvbnNbX2kyXSA9IG5ldyBfdGhpcy50b29sYm94LlN5bWJvbChfdGhpcy5zdGFuZGFyZENvbnRleHVhbFBlcmlvZHNbX2kyXS5hYmJyZXZpYXRpb24sIHRydWUsIHtcblx0ICAgICAgICAgIHBhcGVyOiBfdGhpcy5ncmFwaGljcy5wYXBlcixcblx0ICAgICAgICAgIGNoYXJ0OiBfdGhpcy5jaGFydCxcblx0ICAgICAgICAgIHNtYXJ0TGFiZWw6IF90aGlzLnNtYXJ0TGFiZWwsXG5cdCAgICAgICAgICBjaGFydENvbnRhaW5lcjogX3RoaXMuZ3JhcGhpY3MuY29udGFpbmVyXG5cdCAgICAgICAgfSwge1xuXHQgICAgICAgICAgZmlsbDogJyNmZmZmZmYnLFxuXHQgICAgICAgICAgbGFiZWxGaWxsOiAnIzY5Njk2OScsXG5cdCAgICAgICAgICBzeW1ib2xTdHJva2VXaWR0aDogJzInLFxuXHQgICAgICAgICAgc3ltYm9sU3Ryb2tlOiAnIzAwMDAwMCcsXG5cdCAgICAgICAgICBzdHJva2VXaWR0aDogJzEnLFxuXHQgICAgICAgICAgaG92ZXJGaWxsOiAnIzdmN2Y3ZicsXG5cdCAgICAgICAgICByYWRpdXM6IDEsXG5cdCAgICAgICAgICBtYXJnaW46IHtcblx0ICAgICAgICAgICAgcmlnaHQ6IDBcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9KS5hdHRhY2hFdmVudEhhbmRsZXJzKHtcblx0ICAgICAgICAgICdjbGljayc6IGZ1bmN0aW9uIGNsaWNrKCkge1xuXHQgICAgICAgICAgICBzZWxmLnNldEFjdGl2ZVBlcmlvZChzZWxmLnN0YW5kYXJkQ29udGV4dWFsUGVyaW9kc1tfaTJdLmRhdGVTdGFydCwgc2VsZi5zdGFuZGFyZENvbnRleHVhbFBlcmlvZHNbX2kyXS5kYXRlRW5kKTtcblx0ICAgICAgICAgICAgc2VsZi5jbGlja2VkSWQgPSBzZWxmLnN0YW5kYXJkQ29udGV4dWFsUGVyaW9kc1tfaTJdLmFiYnJldmlhdGlvbjtcblx0ICAgICAgICAgICAgdG9vbGJhci5kaXNwb3NlKCk7XG5cdCAgICAgICAgICAgIHNlbGYudG9vbGJhcnMucG9wKCk7XG5cdCAgICAgICAgICAgIHNlbGYudG9vbGJhcnMucHVzaChzZWxmLmNyZWF0ZVRvb2xiYXIoKSk7XG5cdCAgICAgICAgICAgIHNlbGYuZ2V0TG9naWNhbFNwYWNlKCk7XG5cdCAgICAgICAgICAgIHNlbGYuZHJhdygpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0pO1xuXHQgICAgICAgIHVuaWdyb3VwLmFkZFN5bWJvbChjb250ZXh0dWFsQnV0dG9uc1tfaTJdKTtcblx0ICAgICAgfTtcblx0XG5cdCAgICAgIGZvciAodmFyIF9pMiA9IDA7IF9pMiA8IHRoaXMuc3RhbmRhcmRDb250ZXh1YWxQZXJpb2RzLmxlbmd0aDsgX2kyKyspIHtcblx0ICAgICAgICBfbG9vcDIoX2kyKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgLy8gYnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnQlVUVE9OJyk7XG5cdCAgICAgIC8vIGJ0bi5pZCA9IHN0YW5kYXJkUGVyaW9kc1tpXS5hYmJyZXZpYXRpb247XG5cdCAgICAgIC8vIGJ0bi5pbm5lckhUTUwgPSBzdGFuZGFyZFBlcmlvZHNbaV0uYWJicmV2aWF0aW9uO1xuXHQgICAgICAvLyBidG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBldmVudEJ0bi5iaW5kKHRoaXMsIHN0YW5kYXJkUGVyaW9kc1tpXSkpO1xuXHQgICAgICAvLyBjb250ZXh0dWFsQnV0dG9ucy5hcHBlbmRDaGlsZChidG4pO1xuXHRcblx0ICAgICAgdGhpcy5TeW1ib2xTdG9yZS5yZWdpc3RlcigndGV4dEJveEljb24nLCBmdW5jdGlvbiAoeCwgeSwgcmFkLCB3LCBoLCBwYWRYLCBwYWRZKSB7XG5cdCAgICAgICAgdmFyIHgxID0geCAtIHcgLyAyICsgcGFkWCAvIDIsXG5cdCAgICAgICAgICAgIHgyID0geCArIHcgLyAyIC0gcGFkWCAvIDIsXG5cdCAgICAgICAgICAgIHkxID0geSAtIGggLyAyICsgcGFkWSAvIDIsXG5cdCAgICAgICAgICAgIHkyID0geSArIGggLyAyIC0gcGFkWSAvIDI7XG5cdFxuXHQgICAgICAgIHJldHVybiBbJ00nLCB4MSwgeTEsICdMJywgeDIsIHkxLCAnTCcsIHgyLCB5MiwgJ0wnLCB4MSwgeTIsICdaJ107XG5cdCAgICAgIH0pO1xuXHRcblx0ICAgICAgdG9vbGJhci5hZGRDb21wb25lbnQoZ3JvdXApO1xuXHQgICAgICB0b29sYmFyLmFkZENvbXBvbmVudCh1bmlncm91cCk7XG5cdCAgICAgIHJldHVybiB0b29sYmFyO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ2dldExvZ2ljYWxTcGFjZScsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0TG9naWNhbFNwYWNlKGF2YWlsYWJsZVdpZHRoLCBhdmFpbGFibGVIZWlnaHQpIHtcblx0ICAgICAgYXZhaWxhYmxlV2lkdGggLz0gMjtcblx0ICAgICAgdmFyIGxvZ2ljYWxTcGFjZSxcblx0ICAgICAgICAgIHdpZHRoID0gMCxcblx0ICAgICAgICAgIGhlaWdodCA9IDAsXG5cdCAgICAgICAgICBpLFxuXHQgICAgICAgICAgbG47XG5cdFxuXHQgICAgICBmb3IgKGkgPSAwLCBsbiA9IHRoaXMudG9vbGJhcnMubGVuZ3RoOyBpIDwgbG47IGkrKykge1xuXHQgICAgICAgIGxvZ2ljYWxTcGFjZSA9IHRoaXMudG9vbGJhcnNbaV0uZ2V0TG9naWNhbFNwYWNlKCk7XG5cdCAgICAgICAgd2lkdGggPSBNYXRoLm1heChsb2dpY2FsU3BhY2Uud2lkdGgsIHdpZHRoKTtcblx0ICAgICAgICBoZWlnaHQgKz0gbG9naWNhbFNwYWNlLmhlaWdodDtcblx0ICAgICAgICB0aGlzLnRvb2xiYXJzW2ldLndpZHRoID0gbG9naWNhbFNwYWNlLndpZHRoO1xuXHQgICAgICAgIHRoaXMudG9vbGJhcnNbaV0uaGVpZ2h0ID0gbG9naWNhbFNwYWNlLmhlaWdodDtcblx0ICAgICAgfVxuXHQgICAgICBoZWlnaHQgKz0gdGhpcy5wYWRkaW5nO1xuXHQgICAgICByZXR1cm4ge1xuXHQgICAgICAgIHdpZHRoOiB3aWR0aCA+IGF2YWlsYWJsZVdpZHRoID8gMCA6IHdpZHRoLFxuXHQgICAgICAgIGhlaWdodDogaGVpZ2h0ID4gYXZhaWxhYmxlSGVpZ2h0ID8gMCA6IGhlaWdodFxuXHQgICAgICB9O1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ3BsYWNlSW5DYW52YXMnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHBsYWNlSW5DYW52YXMoKSB7XG5cdCAgICAgIHZhciBfc2VsZiA9IHRoaXM7XG5cdCAgICAgIF9zZWxmLnBhZGRpbmcgPSA1O1xuXHQgICAgICBfc2VsZi5zcGFjZU1hbmFnZXJJbnN0YW5jZS5hZGQoW3tcblx0ICAgICAgICBuYW1lOiBmdW5jdGlvbiBuYW1lKCkge1xuXHQgICAgICAgICAgcmV0dXJuICdUb29sQm94RXh0Jztcblx0ICAgICAgICB9LFxuXHQgICAgICAgIHJlZjogZnVuY3Rpb24gcmVmKG9iaikge1xuXHQgICAgICAgICAgcmV0dXJuIG9ialsnMCddO1xuXHQgICAgICAgIH0sXG5cdCAgICAgICAgc2VsZjogZnVuY3Rpb24gc2VsZigpIHtcblx0ICAgICAgICAgIHJldHVybiBfc2VsZjtcblx0ICAgICAgICB9LFxuXHQgICAgICAgIHByaW9yaXR5OiBmdW5jdGlvbiBwcmlvcml0eSgpIHtcblx0ICAgICAgICAgIHJldHVybiAyO1xuXHQgICAgICAgIH0sXG5cdCAgICAgICAgbGF5b3V0OiBmdW5jdGlvbiBsYXlvdXQob2JqKSB7XG5cdCAgICAgICAgICByZXR1cm4gb2JqLmlubGluZTtcblx0ICAgICAgICB9LFxuXHQgICAgICAgIG9yaWVudGF0aW9uOiBbe1xuXHQgICAgICAgICAgdHlwZTogZnVuY3Rpb24gdHlwZShvYmopIHtcblx0ICAgICAgICAgICAgcmV0dXJuIG9iai5ob3Jpem9udGFsO1xuXHQgICAgICAgICAgfSxcblx0ICAgICAgICAgIHBvc2l0aW9uOiBbe1xuXHQgICAgICAgICAgICB0eXBlOiBmdW5jdGlvbiB0eXBlKG9iaikge1xuXHQgICAgICAgICAgICAgIHJldHVybiBvYmoudG9wO1xuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBhbGlnbm1lbnQ6IFt7XG5cdCAgICAgICAgICAgICAgdHlwZTogZnVuY3Rpb24gdHlwZShvYmopIHtcblx0ICAgICAgICAgICAgICAgIHJldHVybiBvYmoubGVmdDtcblx0ICAgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICAgIGRpbWVuc2lvbnM6IFtmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgICB2YXIgcGFyZW50ID0gdGhpcy5nZXRQYXJlbnRDb21wb25lbnRHcm91cCgpO1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuIF9zZWxmLmdldExvZ2ljYWxTcGFjZShwYXJlbnQuZ2V0V2lkdGgoKSwgcGFyZW50LmdldEhlaWdodCgpKTtcblx0ICAgICAgICAgICAgICB9XVxuXHQgICAgICAgICAgICB9XVxuXHQgICAgICAgICAgfV1cblx0ICAgICAgICB9XVxuXHQgICAgICB9XSk7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnc2V0RHJhd2luZ0NvbmZpZ3VyYXRpb24nLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHNldERyYXdpbmdDb25maWd1cmF0aW9uKHgsIHksIHdpZHRoLCBoZWlnaHQsIGdyb3VwKSB7XG5cdCAgICAgIHZhciBtZXMgPSB0aGlzLm1lYXN1cmVtZW50O1xuXHQgICAgICBtZXMueCA9IHg7XG5cdCAgICAgIG1lcy55ID0geTtcblx0ICAgICAgbWVzLndpZHRoID0gd2lkdGg7XG5cdCAgICAgIG1lcy5oZWlnaHQgPSBoZWlnaHQ7XG5cdFxuXHQgICAgICB0aGlzLnBhcmVudEdyb3VwID0gZ3JvdXA7XG5cdFxuXHQgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdkcmF3Jyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBkcmF3KHgsIHksIHdpZHRoLCBoZWlnaHQsIGdyb3VwKSB7XG5cdCAgICAgIHZhciBtZWFzdXJlbWVudCA9IHRoaXMubWVhc3VyZW1lbnQsXG5cdCAgICAgICAgICB0b29sYmFycyA9IHRoaXMudG9vbGJhcnMsXG5cdCAgICAgICAgICBsbixcblx0ICAgICAgICAgIGksXG5cdCAgICAgICAgICB0b29sYmFyLFxuXHQgICAgICAgICAgYm91bmRFbGVtZW50LFxuXHQgICAgICAgICAgYkJveCxcblx0ICAgICAgICAgIHgxLFxuXHQgICAgICAgICAgeDIsXG5cdCAgICAgICAgICB5Mjtcblx0XG5cdCAgICAgIHggPSB4ID09PSB1bmRlZmluZWQgPyBtZWFzdXJlbWVudC54IDogeDtcblx0ICAgICAgeSA9IHkgPT09IHVuZGVmaW5lZCA/IG1lYXN1cmVtZW50LnkgOiB5O1xuXHQgICAgICB3aWR0aCA9IHdpZHRoID09PSB1bmRlZmluZWQgPyBtZWFzdXJlbWVudC53aWR0aCA6IHdpZHRoO1xuXHQgICAgICBoZWlnaHQgPSBoZWlnaHQgPT09IHVuZGVmaW5lZCA/IG1lYXN1cmVtZW50LmhlaWdodCA6IGhlaWdodDtcblx0ICAgICAgZ3JvdXAgPSBncm91cCA9PT0gdW5kZWZpbmVkID8gdGhpcy5wYXJlbnRHcm91cCA6IGdyb3VwO1xuXHQgICAgICBpZiAod2lkdGggJiYgaGVpZ2h0KSB7XG5cdCAgICAgICAgZm9yIChpID0gMCwgbG4gPSB0b29sYmFycy5sZW5ndGg7IGkgPCBsbjsgaSsrKSB7XG5cdCAgICAgICAgICB0b29sYmFyID0gdG9vbGJhcnNbaV07XG5cdCAgICAgICAgICB0b29sYmFyLmRyYXcoeCwgeSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIGNvbnNvbGUubG9nKHRvb2xiYXJzKTtcblx0ICAgICAgZm9yICh2YXIgX2kzID0gMCwgaWkgPSB0b29sYmFyc1swXS5jb21wb25lbnRHcm91cHNbMV0uc3ltYm9sTGlzdDsgX2kzIDwgaWkubGVuZ3RoOyBfaTMrKykge1xuXHQgICAgICAgIGlmIChpaVtfaTNdLnN5bWJvbCA9PT0gdGhpcy5jbGlja2VkSWQpIHtcblx0ICAgICAgICAgIGJvdW5kRWxlbWVudCA9IGlpW19pM10uZ2V0Qm91bmRFbGVtZW50KCk7XG5cdCAgICAgICAgICBiQm94ID0gYm91bmRFbGVtZW50LmdldEJCb3goKTtcblx0ICAgICAgICAgIHgxID0gYkJveC54O1xuXHQgICAgICAgICAgeDIgPSBiQm94LngyO1xuXHQgICAgICAgICAgeTIgPSBiQm94LnkyO1xuXHRcblx0ICAgICAgICAgIHRoaXMuZ3JhcGhpY3MucGFwZXIucGF0aCh7XG5cdCAgICAgICAgICAgIHBhdGg6IFsnTScsIHgxLCB5MiAtIDIgLyAyLCAnTCcsIHgyLCB5MiAtIDIgLyAyXSxcblx0ICAgICAgICAgICAgJ3N0cm9rZSc6ICcjZmYwMDAwJ1xuXHQgICAgICAgICAgfSkudG9Gcm9udCgpO1xuXHQgICAgICAgICAgLy8gdGhpcy5fcGFyZW50R3JvdXAuc2V0U3RhdGUodGhpcyk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfV0pO1xuXHRcblx0ICByZXR1cm4gU3RhbmRhcmRQZXJpb2RTZWxlY3Rvcjtcblx0fSgpO1xuXHRcblx0aWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBtb2R1bGUuZXhwb3J0cyAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0ICBtb2R1bGUuZXhwb3J0cyA9IFN0YW5kYXJkUGVyaW9kU2VsZWN0b3I7XG5cdH0gZWxzZSB7XG5cdCAgd2luZG93LlN0YW5kYXJkUGVyaW9kID0gU3RhbmRhcmRQZXJpb2RTZWxlY3Rvcjtcblx0fVxuXG4vKioqLyB9XG4vKioqKioqLyBdKTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gc3RhbmRhcmQtcGVyaW9kLXNlbGVjdG9yLWVzNS5taW4uanMiLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcblxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0ZXhwb3J0czoge30sXG4gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuIFx0XHRcdGxvYWRlZDogZmFsc2VcbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrL2Jvb3RzdHJhcCA1OWRkZmE5MWZjNzA5NjZjM2NhMCIsIid1c2Ugc3RyaWN0JztcbmNvbnN0IFN0YW5kYXJkUGVyaW9kU2VsZWN0b3IgPSByZXF1aXJlKCcuL3N0YW5kYXJkLXBlcmlvZC1zZWxlY3RvcicpO1xuXG53aW5kb3cuc3RQUyA9IG5ldyBTdGFuZGFyZFBlcmlvZFNlbGVjdG9yKCk7XG5cbjsoZnVuY3Rpb24gKGVudiwgZmFjdG9yeSkge1xuICBpZiAodHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcgJiYgbW9kdWxlLmV4cG9ydHMpIHtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IGVudi5kb2N1bWVudFxuICAgICAgID8gZmFjdG9yeShlbnYpIDogZnVuY3Rpb24gKHdpbikge1xuICAgICAgICAgaWYgKCF3aW4uZG9jdW1lbnQpIHtcbiAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdXaW5kb3cgd2l0aCBkb2N1bWVudCBub3QgcHJlc2VudCcpO1xuICAgICAgICAgfVxuICAgICAgICAgcmV0dXJuIGZhY3Rvcnkod2luLCB0cnVlKTtcbiAgICAgICB9O1xuICB9IGVsc2Uge1xuICAgIGVudi5BZ2dyZWdhdG9yID0gZmFjdG9yeShlbnYsIHRydWUpO1xuICB9XG59KSh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHRoaXMsIGZ1bmN0aW9uIChfd2luZG93LCB3aW5kb3dFeGlzdHMpIHtcbiAgdmFyIEZDID0gX3dpbmRvdy5GdXNpb25DaGFydHM7XG5cbiAgRkMucmVnaXN0ZXIoJ2V4dGVuc2lvbicsIFsncHJpdmF0ZScsICdTdGFuZGFyZFBlcmlvZFNlbGVjdG9yJywgZnVuY3Rpb24gKCkge1xuICAgIEZDLnJlZ2lzdGVyQ29tcG9uZW50KCdleHRlbnNpb25zJywgJ1N0YW5kYXJkUGVyaW9kU2VsZWN0b3InLCBTdGFuZGFyZFBlcmlvZFNlbGVjdG9yKTtcbiAgfV0pO1xufSk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvaW5kZXguanMiLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuXHRpZighbW9kdWxlLndlYnBhY2tQb2x5ZmlsbCkge1xuXHRcdG1vZHVsZS5kZXByZWNhdGUgPSBmdW5jdGlvbigpIHt9O1xuXHRcdG1vZHVsZS5wYXRocyA9IFtdO1xuXHRcdC8vIG1vZHVsZS5wYXJlbnQgPSB1bmRlZmluZWQgYnkgZGVmYXVsdFxuXHRcdG1vZHVsZS5jaGlsZHJlbiA9IFtdO1xuXHRcdG1vZHVsZS53ZWJwYWNrUG9seWZpbGwgPSAxO1xuXHR9XG5cdHJldHVybiBtb2R1bGU7XG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAod2VicGFjaykvYnVpbGRpbi9tb2R1bGUuanNcbi8vIG1vZHVsZSBpZCA9IDFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIENsYXNzIGRlZmluaXRpb24gb2YgU3RhbmRhcmRQZXJpb2RTZWxlY3RvclxuICovXG5cbmNsYXNzIFN0YW5kYXJkUGVyaW9kU2VsZWN0b3Ige1xuICBjb25zdHJ1Y3RvciAoKSB7XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLnJhdGlvID0gODtcbiAgICB0aGlzLnRvb2xib3ggPSBGdXNpb25DaGFydHMuZ2V0Q29tcG9uZW50KCdhcGknLCAndG9vbGJveCcpO1xuICAgIHRoaXMuSG9yaXpvbnRhbFRvb2xiYXIgPSB0aGlzLnRvb2xib3guSG9yaXpvbnRhbFRvb2xiYXI7XG4gICAgdGhpcy5Db21wb25lbnRHcm91cCA9IHRoaXMudG9vbGJveC5Db21wb25lbnRHcm91cDtcbiAgICB0aGlzLlN5bWJvbFN0b3JlID0gdGhpcy50b29sYm94LlN5bWJvbFN0b3JlO1xuICAgIHRoaXMuYWxsID0gMTtcbiAgICB0aGlzLmNhbGN1bGF0ZWRQZXJpb2RzID0gW107XG4gICAgdGhpcy5zdGFydERhdGFzZXQgPSAwO1xuICAgIC8vIHRoaXMuZW5kRGF0YXNldCA9IHRoaXMuZ2xvYmFsUmVhY3RpdmVNb2RlbC5tb2RlbFsneC1heGlzLWFic29sdXRlLXJhbmdlLWVuZCddO1xuICAgIHRoaXMuc3RhcnRBY3RpdmVXaW5kb3cgPSAwO1xuICAgIHRoaXMuZW5kQWN0aXZlV2luZG93ID0gMTtcbiAgICB0aGlzLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHMgPSBbXTtcbiAgICB0aGlzLnN0YW5kYXJkQ29udGV4dWFsUGVyaW9kcyA9IFtdO1xuICAgIHRoaXMuc3RhcnRQb2ludFVuaXQgPSAwO1xuICAgIHRoaXMuc3RhcnRQb2ludE11bHRpcGxpZXIgPSAwO1xuICAgIHRoaXMuY2xpY2tlZElkO1xuICAgIHRoaXMubm9DYWxjQnV0dG9ucyA9IDA7XG4gICAgdGhpcy50aW1lUGVyaW9kcyA9IFt7XG4gICAgICAnbmFtZSc6ICdzZWNvbmQnLFxuICAgICAgJ21pbGxpc2Vjb25kcyc6IDEwMDAsXG4gICAgICAnc3RhcnRpbmdQb2ludCc6IDAsXG4gICAgICAndG90YWwnOiA2MCxcbiAgICAgICdhYmJyZXZpYXRpb24nOiAnc2VjJyxcbiAgICAgICdkZXNjcmlwdGlvbic6ICdTRUNPTkQnLFxuICAgICAgJ3BhcmVudCc6ICdtaW51dGUnLFxuICAgICAgJ211bHRpcGxpZXJzJzogWzEsIDUsIDE1LCAzMF1cbiAgICB9LCB7XG4gICAgICAnbmFtZSc6ICdtaW51dGUnLFxuICAgICAgJ21pbGxpc2Vjb25kcyc6IDYwMDAwLFxuICAgICAgJ3N0YXJ0aW5nUG9pbnQnOiAwLFxuICAgICAgJ3RvdGFsJzogNjAsXG4gICAgICAnYWJicmV2aWF0aW9uJzogJ21pbicsXG4gICAgICAnZGVzY3JpcHRpb24nOiAnTUlOVVRFJyxcbiAgICAgICdwYXJlbnQnOiAnaG91cicsXG4gICAgICAnbXVsdGlwbGllcnMnOiBbMSwgNSwgMTUsIDMwXVxuICAgIH0sIHtcbiAgICAgICduYW1lJzogJ2hvdXInLFxuICAgICAgJ21pbGxpc2Vjb25kcyc6IDM2MDAwMDAsXG4gICAgICAnc3RhcnRpbmdQb2ludCc6IDAsXG4gICAgICAndG90YWwnOiAyNCxcbiAgICAgICdhYmJyZXZpYXRpb24nOiAnaHInLFxuICAgICAgJ2Rlc2NyaXB0aW9uJzogJ0hPVVInLFxuICAgICAgJ3BhcmVudCc6ICdkYXknLFxuICAgICAgJ211bHRpcGxpZXJzJzogWzEsIDMsIDYsIDEyXVxuICAgIH0sIHtcbiAgICAgICduYW1lJzogJ2RheScsXG4gICAgICAnbWlsbGlzZWNvbmRzJzogODY0MDAwMDAsXG4gICAgICAnc3RhcnRpbmdQb2ludCc6IDAsXG4gICAgICAndG90YWwnOiAzMCxcbiAgICAgICdhYmJyZXZpYXRpb24nOiAnRCcsXG4gICAgICAnZGVzY3JpcHRpb24nOiAnREFZJyxcbiAgICAgICdwYXJlbnQnOiAnbW9udGgnLFxuICAgICAgJ211bHRpcGxpZXJzJzogWzEsIDcsIDE1XVxuICAgIH0sIHtcbiAgICAgICduYW1lJzogJ21vbnRoJyxcbiAgICAgICdtaWxsaXNlY29uZHMnOiAyNTkyMDAwMDAwLFxuICAgICAgJ3N0YXJ0aW5nUG9pbnQnOiAwLFxuICAgICAgJ3RvdGFsJzogMTIsXG4gICAgICAnYWJicmV2aWF0aW9uJzogJ00nLFxuICAgICAgJ2Rlc2NyaXB0aW9uJzogJ01PTlRIJyxcbiAgICAgICdwYXJlbnQnOiAneWVhcicsXG4gICAgICAnbXVsdGlwbGllcnMnOiBbMSwgMywgNl1cbiAgICB9LCB7XG4gICAgICAnbmFtZSc6ICd5ZWFyJyxcbiAgICAgICdtaWxsaXNlY29uZHMnOiAzMTEwNDAwMDAwMCxcbiAgICAgICdzdGFydGluZ1BvaW50JzogMCxcbiAgICAgICdhYmJyZXZpYXRpb24nOiAnWScsXG4gICAgICAnZGVzY3JpcHRpb24nOiAnWUVBUicsXG4gICAgICAnbXVsdGlwbGllcnMnOiBbMSwgMywgNV1cbiAgICB9XTtcbiAgICB0aGlzLnRkQnV0dG9ucyA9IFtcbiAgICAgIHtcbiAgICAgICAgJ25hbWUnOiAnWVREJyxcbiAgICAgICAgJ2FiYnJldmlhdGlvbic6ICdZVEQnLFxuICAgICAgICAncGFyZW50JzogJ3llYXInLFxuICAgICAgICAnbWlsbGlzZWNvbmRzJzogMzExMDQwMDAwMDAsXG4gICAgICAgICdkZXNjcmlwdGlvbic6ICdZZWFyIHRvIERhdGUnXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICAnbmFtZSc6ICdRVEQnLFxuICAgICAgICAnYWJicmV2aWF0aW9uJzogJ1FURCcsXG4gICAgICAgICdwYXJlbnQnOiAnbW9udGgnLFxuICAgICAgICAnbXVsdGlwbGllcic6IDMsXG4gICAgICAgICdtaWxsaXNlY29uZHMnOiA3Nzc2MDAwMDAwLFxuICAgICAgICAnZGVzY3JpcHRpb24nOiAnUXVhcnRlciB0byBEYXRlJ1xuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgJ25hbWUnOiAnTVREJyxcbiAgICAgICAgJ2FiYnJldmlhdGlvbic6ICdNVEQnLFxuICAgICAgICAncGFyZW50JzogJ21vbnRoJyxcbiAgICAgICAgJ21pbGxpc2Vjb25kcyc6IDI1OTIwMDAwMDAsXG4gICAgICAgICdkZXNjcmlwdGlvbic6ICdNb250aCB0byBEYXRlJ1xuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgJ25hbWUnOiAnV1REJyxcbiAgICAgICAgJ2FiYnJldmlhdGlvbic6ICdXVEQnLFxuICAgICAgICAncGFyZW50JzogJ2RheScsXG4gICAgICAgICdtdWx0aXBsaWVyJzogNyxcbiAgICAgICAgJ21pbGxpc2Vjb25kcyc6IDYwNDgwMDAwMCxcbiAgICAgICAgJ2Rlc2NyaXB0aW9uJzogJ1dlZWsgdG8gRGF0ZSdcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgICduYW1lJzogJ1knLFxuICAgICAgICAnYWJicmV2aWF0aW9uJzogJ1knLFxuICAgICAgICAncGFyZW50JzogJ2RheScsXG4gICAgICAgICdtaWxsaXNlY29uZHMnOiA4NjQwMDAwMCxcbiAgICAgICAgJ2Rlc2NyaXB0aW9uJzogJ1llc3RlcmRheSdcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgICduYW1lJzogJ1QnLFxuICAgICAgICAnYWJicmV2aWF0aW9uJzogJ1QnLFxuICAgICAgICAncGFyZW50JzogJ2RheScsXG4gICAgICAgICdtaWxsaXNlY29uZHMnOiA4NjQwMDAwMCxcbiAgICAgICAgJ2Rlc2NyaXB0aW9uJzogJ1RvZGF5J1xuICAgICAgfVxuICAgIF07XG4gICAgdGhpcy5jb25maWcgPSB7XG4gICAgICBhbmNob3JQb3NpdGlvbnM6ICdyaWdodCcsXG4gICAgICBhbGw6ICcxJyxcbiAgICAgIGNvbnRleHR1YWw6ICcxJyxcbiAgICAgIGNhbGN1bGF0ZWQ6ICcxJyxcbiAgICAgIHRlcnRpYXJ5VGltZVBlcmlvZHM6IHt9XG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBIGZ1bmN0aW9uIHRvIGdlbmVyYXRlIHRoZSBjYWxjdWxhdGVkIGJ1dHRvbnMgdXNpbmdcbiAgICogdGhlIGFjdGl2ZSByYW5nZSBhbmQgdGhlIGxvY2F0aW9uIG9mIHRoZSBhY3RpdmUgcmFuZ2VcbiAgICovXG4gIGdlbmVyYXRlQ2FsY3VsYXRlZEJ1dHRvbnMgKCkge1xuICAgIHZhciB0YXJnZXRCbG9jayA9IHRoaXMuZW5kQWN0aXZlV2luZG93IC0gdGhpcy5zdGFydERhdGFzZXQsXG4gICAgICBpID0gMCxcbiAgICAgIGogPSAwLFxuICAgICAgYWN0aXZlV2luZG93ID0gdGhpcy5lbmRBY3RpdmVXaW5kb3cgLSB0aGlzLnN0YXJ0QWN0aXZlV2luZG93LFxuICAgICAgY291bnQgPSAwO1xuICAgIHRoaXMuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kcyA9IFtdO1xuICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLnRpbWVQZXJpb2RzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAvLyBjaGVja2luZyB3aGV0aGVyIHRoZSB1bml0IGlzIGFwcGxpY2FibGUgZm9yIHRoZSBjdXJyZW50IHRhcmdldCBibG9ja1xuICAgICAgaWYgKHRhcmdldEJsb2NrIC8gdGhpcy50aW1lUGVyaW9kc1tpXS5taWxsaXNlY29uZHMgPj0gMSkge1xuICAgICAgICAvLyBjaGVja2luZyB3aGV0aGVyIHRoZSB1bml0IGlzIG9mIHRoZSBoaWdoZXIgb3JkZXIgYW5kIG9ubHkgbXVsdGlwbGllciAxIGlzIGFwcGxpY2FibGVcbiAgICAgICAgaWYgKE1hdGguZmxvb3IoKGFjdGl2ZVdpbmRvdykgLyB0aGlzLnRpbWVQZXJpb2RzW2ldLm1pbGxpc2Vjb25kcykgPCAxKSB7XG4gICAgICAgICAgdGhpcy5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzLnB1c2goe1xuICAgICAgICAgICAgJ2FiYnJldmlhdGlvbic6IHRoaXMudGltZVBlcmlvZHNbaV0uYWJicmV2aWF0aW9uLFxuICAgICAgICAgICAgJ2Rlc2NyaXB0aW9uJzogdGhpcy50aW1lUGVyaW9kc1tpXS5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgICdtaWxsaXNlY29uZHMnOiB0aGlzLnRpbWVQZXJpb2RzW2ldLm1pbGxpc2Vjb25kcyxcbiAgICAgICAgICAgICdtdWx0aXBsaWVycyc6IFsxXVxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2UgeyAvLyBpZiB0aGUgdW5pdCBpcyBvZiB0aGUgb3JkZXIgb2YgdGhlIHRhcmdldCBibG9jayBhbmQgY2FsY3VsYXRpbmcgdGhlIG11bHRpcGxpZXJzXG4gICAgICAgICAgdGhpcy5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzLnB1c2goe1xuICAgICAgICAgICAgJ2FiYnJldmlhdGlvbic6IHRoaXMudGltZVBlcmlvZHNbaV0uYWJicmV2aWF0aW9uLFxuICAgICAgICAgICAgJ2Rlc2NyaXB0aW9uJzogdGhpcy50aW1lUGVyaW9kc1tpXS5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgICdtaWxsaXNlY29uZHMnOiB0aGlzLnRpbWVQZXJpb2RzW2ldLm1pbGxpc2Vjb25kcyxcbiAgICAgICAgICAgICdtdWx0aXBsaWVycyc6IFtdXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgLy8gY2FsY3VsYXRpbmcgYW5kIHBvcHVsYXRpbmcgdGhlIGFwcGxpY2FibGUgbXVsdHBsaWVycyBvZiBlYWNoIHVuaXRcbiAgICAgICAgICBmb3IgKGogPSAwOyBqIDwgdGhpcy50aW1lUGVyaW9kc1tpXS5tdWx0aXBsaWVycy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgaWYgKGFjdGl2ZVdpbmRvdyAvIHRoaXMucmF0aW8gPCB0aGlzLnRpbWVQZXJpb2RzW2ldLm11bHRpcGxpZXJzW2pdICogdGhpcy50aW1lUGVyaW9kc1tpXS5taWxsaXNlY29uZHMpIHtcbiAgICAgICAgICAgICAgdGhpcy5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW3RoaXMuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kcy5sZW5ndGggLSAxXS5tdWx0aXBsaWVycy5wdXNoKFxuICAgICAgICAgICAgICAgIHRoaXMudGltZVBlcmlvZHNbaV0ubXVsdGlwbGllcnNbal1cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLm5vQ2FsY0J1dHRvbnMgPSBJbmZpbml0eTtcbiAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBmb3IgKGogPSAwOyBqIDwgdGhpcy5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW2ldLm11bHRpcGxpZXJzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICsrY291bnQ7XG4gICAgICAgIGlmICh0aGlzLm5vQ2FsY0J1dHRvbnMgPiBpKSB7XG4gICAgICAgICAgdGhpcy5ub0NhbGNCdXR0b25zID0gaTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY291bnQgPD0gNCkge1xuICAgICAgICAgIHRoaXMuc3RhcnRQb2ludE11bHRpcGxpZXIgPSBqO1xuICAgICAgICAgIHRoaXMuc3RhcnRQb2ludFVuaXQgPSBpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gdGhpcy5kcmF3QnV0dG9uc0NhbGN1bGF0ZWQodGhpcy5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBIGZ1bmN0aW9uIHRvIGdlbmVyYXRlIHRoZSBjb250ZXh0dWFsIGJ1dHRvbnMgdXNpbmdcbiAgICogdGhlIGVuZCBwb2ludCBvZiB0aGUgdGltZS1zY2FsZVxuICAgKi9cbiAgZ2VuZXJhdGVDb250ZXh0dWFsQnV0dG9ucyAoKSB7XG4gICAgLy8gZ2VuZXJhdGluZyBhbiBhcnJheSB3aXRoIGFwcGxpY2FibGUgVEQgYnV0dG9uc1xuICAgIHZhciBidXR0b25zID0gW10sXG4gICAgICBpID0gMCxcbiAgICAgIGVuZFN0YW1wID0gdGhpcy5nbG9iYWxSZWFjdGl2ZU1vZGVsLm1vZGVsWyd4LWF4aXMtYWJzb2x1dGUtcmFuZ2UtZW5kJ10sXG4gICAgICBkYXRlU3RhcnQgPSBlbmRTdGFtcCAtIDIsXG4gICAgICBkYXRlRW5kID0gZW5kU3RhbXAsXG4gICAgICByZWxhdGl2ZVREQnV0dG9uID0ge307XG4gICAgZm9yICg7IGkgPCB0aGlzLnRkQnV0dG9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgZGF0ZVN0YXJ0ID0gbmV3IERhdGUoZW5kU3RhbXApO1xuICAgICAgaWYgKHRoaXMudGRCdXR0b25zW2ldLm5hbWUgPT09ICdZVEQnKSB7XG4gICAgICAgIGRhdGVTdGFydC5zZXRNb250aCgwKTtcbiAgICAgICAgZGF0ZVN0YXJ0LnNldERhdGUoMSk7XG4gICAgICAgIGRhdGVTdGFydC5zZXRIb3VycygwKTtcbiAgICAgICAgZGF0ZVN0YXJ0LnNldE1pbnV0ZXMoMCk7XG4gICAgICAgIGRhdGVTdGFydC5zZXRTZWNvbmRzKDApO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLnRkQnV0dG9uc1tpXS5uYW1lID09PSAnTVREJykge1xuICAgICAgICBkYXRlU3RhcnQuc2V0RGF0ZSgxKTtcbiAgICAgICAgZGF0ZVN0YXJ0LnNldEhvdXJzKDApO1xuICAgICAgICBkYXRlU3RhcnQuc2V0TWludXRlcygwKTtcbiAgICAgICAgZGF0ZVN0YXJ0LnNldFNlY29uZHMoMCk7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMudGRCdXR0b25zW2ldLm5hbWUgPT09ICdRVEQnKSB7XG4gICAgICAgIGRhdGVTdGFydC5zZXRNb250aCgxMSAtIChkYXRlU3RhcnQuZ2V0TW9udGgoKSAlIDQpKTtcbiAgICAgICAgZGF0ZVN0YXJ0LnNldERhdGUoMCk7XG4gICAgICAgIGRhdGVTdGFydC5zZXRIb3VycygwKTtcbiAgICAgICAgZGF0ZVN0YXJ0LnNldE1pbnV0ZXMoMCk7XG4gICAgICAgIGRhdGVTdGFydC5zZXRTZWNvbmRzKDApO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLnRkQnV0dG9uc1tpXS5uYW1lID09PSAnV1REJykge1xuICAgICAgICBkYXRlU3RhcnQuc2V0RGF0ZShkYXRlU3RhcnQuZ2V0RGF0ZSgpIC0gZGF0ZVN0YXJ0LmdldERheSgpKTtcbiAgICAgICAgZGF0ZVN0YXJ0LnNldEhvdXJzKDApO1xuICAgICAgICBkYXRlU3RhcnQuc2V0TWludXRlcygwKTtcbiAgICAgICAgZGF0ZVN0YXJ0LnNldFNlY29uZHMoMCk7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMudGRCdXR0b25zW2ldLm5hbWUgPT09ICdZJykge1xuICAgICAgICBkYXRlU3RhcnQuc2V0SG91cnMoMCk7XG4gICAgICAgIGRhdGVTdGFydC5zZXRNaW51dGVzKDApO1xuICAgICAgICBkYXRlU3RhcnQuc2V0U2Vjb25kcygwKTtcbiAgICAgICAgZGF0ZVN0YXJ0IC09IDg2NDAwMDAwO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLnRkQnV0dG9uc1tpXS5uYW1lID09PSAnVCcpIHtcbiAgICAgICAgZGF0ZVN0YXJ0LnNldEhvdXJzKDApO1xuICAgICAgICBkYXRlU3RhcnQuc2V0TWludXRlcygwKTtcbiAgICAgICAgZGF0ZVN0YXJ0LnNldFNlY29uZHMoMCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChkYXRlRW5kIDwgZGF0ZVN0YXJ0KSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy50ZEJ1dHRvbnNbaV0uZGF0ZVN0YXJ0ID0gZGF0ZVN0YXJ0LnZhbHVlT2YoKTtcbiAgICAgICAgdGhpcy50ZEJ1dHRvbnNbaV0uZGF0ZUVuZCA9IGRhdGVFbmQudmFsdWVPZigpO1xuICAgICAgICBidXR0b25zLnB1c2godGhpcy50ZEJ1dHRvbnNbaV0pO1xuICAgICAgfVxuICAgIH1cbiAgICByZWxhdGl2ZVREQnV0dG9uLm1pbGxpc2Vjb25kcyA9IEluZmluaXR5O1xuICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLnRkQnV0dG9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKE1hdGguYWJzKHRoaXMudGRCdXR0b25zW2ldLm1pbGxpc2Vjb25kcyAtICh0aGlzLmVuZEFjdGl2ZVdpbmRvdyAtIHRoaXMuc3RhcnRBY3RpdmVXaW5kb3cpKSA8IHJlbGF0aXZlVERCdXR0b24ubWlsbGlzZWNvbmRzKSB7XG4gICAgICAgIHJlbGF0aXZlVERCdXR0b24ubWlsbGlzZWNvbmRzID0gdGhpcy50ZEJ1dHRvbnNbaV0ubWlsbGlzZWNvbmRzO1xuICAgICAgICByZWxhdGl2ZVREQnV0dG9uLm5hbWUgPSB0aGlzLnRkQnV0dG9uc1tpXS5hYmJyZXZpYXRpb247XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5zdGFuZGFyZENvbnRleHVhbFBlcmlvZHMgPSBidXR0b25zO1xuICAgIC8vIHRoaXMuZHJhd0J1dHRvbnNDb250ZXh0dWFsKHRoaXMuc3RhbmRhcmRDb250ZXh1YWxQZXJpb2RzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBIGZ1bmN0aW9uIHRvIHNldCB0aGUgYWN0aXZlIHBlcmlvZCdzXG4gICAqIHN0YXJ0IGFuZCBlbmQgcG9pbnRcbiAgICogQHBhcmFtICB7bnVtYmVyfSBkYXRlIHN0YW1wIC0gQSBVTklYIHRpbWVzdGFtcCB0byBiZSBzZXQgYXMgdGhlIHN0YXJ0IHBvaW50IG9mIGFjdGl2ZSBwZXJpb2RcbiAgICogQHBhcmFtICB7bnVtYmVyfSBkYXRlIHN0YW1wIC0gQSBVTklYIHRpbWVzdGFtcCB0byBiZSBzZXQgYXMgdGhlIGVuZCBwb2ludCBvZiBhY3RpdmUgcGVyaW9kXG4gICAqL1xuICBzZXRBY3RpdmVQZXJpb2QgKCkge1xuICAgIHZhciBzdGFydCxcbiAgICAgIGVuZDtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgZW5kID0gdGhpcy5nbG9iYWxSZWFjdGl2ZU1vZGVsLm1vZGVsWyd4LWF4aXMtdmlzaWJsZS1yYW5nZS1lbmQnXTtcbiAgICAgIHN0YXJ0ID0gZW5kIC0gYXJndW1lbnRzWzBdO1xuICAgIH0gZWxzZSBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMikge1xuICAgICAgc3RhcnQgPSBhcmd1bWVudHNbMF07XG4gICAgICBlbmQgPSBhcmd1bWVudHNbMV07XG4gICAgfVxuXG4gICAgdGhpcy5zdGFydEFjdGl2ZVdpbmRvdyA9IHN0YXJ0O1xuICAgIHRoaXMuZW5kQWN0aXZlV2luZG93ID0gZW5kO1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdGFydEFjdGl2ZVJhbmdlJykuaW5uZXJIVE1MID0gbmV3IERhdGUodGhpcy5zdGFydEFjdGl2ZVdpbmRvdyk7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VuZEFjdGl2ZVJhbmdlJykuaW5uZXJIVE1MID0gbmV3IERhdGUodGhpcy5lbmRBY3RpdmVXaW5kb3cpO1xuICAgIHRoaXMuZ2VuZXJhdGVDYWxjdWxhdGVkQnV0dG9ucygpO1xuICAgIHRoaXMuZ2xvYmFsUmVhY3RpdmVNb2RlbC5tb2RlbFsneC1heGlzLXZpc2libGUtcmFuZ2Utc3RhcnQnXSA9IHRoaXMuc3RhcnRBY3RpdmVXaW5kb3c7XG4gICAgdGhpcy5nbG9iYWxSZWFjdGl2ZU1vZGVsLm1vZGVsWyd4LWF4aXMtdmlzaWJsZS1yYW5nZS1lbmQnXSA9IHRoaXMuZW5kQWN0aXZlV2luZG93O1xuICAgIHRoaXMuZ2VuZXJhdGVDb250ZXh0dWFsQnV0dG9ucygpO1xuICAgIC8vIHRoaXMuY3JlYXRlVG9vbGJhcigpO1xuICAgIC8vIHRoaXMuZHJhd0J1dHRvbkFsbCgpO1xuICAgIC8vIGluc3RhbmNlLmdsb2JhbFJlYWN0aXZlTW9kZWwubW9kZWxbJ194LWF4aXMtdmlzaWJsZS1yYW5nZS1zdGFydCddICs9IDEyNDQxNjAwMDAwMFxuICB9XG5cbiAgLyoqXG4gICAqIEEgZnVuY3Rpb24gdG8gc2V0IHRoZSBzdGFydCBhbmQgZW5kIHBvaW50IG9mIHRoZVxuICAgKiBlbnRpcmUgdGltZS1saW5lXG4gICAqIEBwYXJhbSAge251bWJlcn0gZGF0ZSBzdGFtcCAtIEEgVU5JWCB0aW1lc3RhbXAgdG8gYmUgc2V0IGFzIHRoZSBzdGFydCBwb2ludCBvZiB0aW1lLWxpbmVcbiAgICogQHBhcmFtICB7bnVtYmVyfSBkYXRlIHN0YW1wIC0gQSBVTklYIHRpbWVzdGFtcCB0byBiZSBzZXQgYXMgdGhlIGVuZCBwb2ludCBvZiB0aW1lLWxpbmVcbiAgICovXG4gIHNldFRpbWVsaW5lIChzdGFydCwgZW5kKSB7XG4gICAgdGhpcy5zdGFydERhdGFzZXQgPSBzdGFydDtcbiAgICB0aGlzLmVuZERhdGFzZXQgPSBlbmQ7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0YXJ0QWN0aXZlUmFuZ2UnKS5pbm5lckhUTUwgPSBuZXcgRGF0ZSh0aGlzLnN0YXJ0RGF0YXNldCk7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VuZEFjdGl2ZVJhbmdlJykuaW5uZXJIVE1MID0gbmV3IERhdGUodGhpcy5lbmREYXRhc2V0KTtcbiAgICB0aGlzLmdlbmVyYXRlQ2FsY3VsYXRlZEJ1dHRvbnMoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBIGZ1bmN0aW9uIHRvIGRyYXcgdGhlIGNhbGN1bGF0ZWQgYnV0dG9ucyBpbiB0aGUgY2FudmFzXG4gICAqIEBwYXJhbSAge2FycmF5fSBhcnJheSBvZiBvYmplY3RzIC0gQW4gYXJyYXkgb2Ygb2JqZWN0cyB3aXRoIHRoZSBzdGFuZGFyZCBwZXJpb2RzIHRvIGJlIGRyYXduIGluZm9ybWF0aW9uXG4gICAqL1xuICBkcmF3QnV0dG9uc0NhbGN1bGF0ZWQgKHN0YW5kYXJkUGVyaW9kcykge1xuICAgIHZhciBjYWxjdWxhdGVkQnV0dG9ucyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYWxjdWxhdGVkJyksXG4gICAgICBidG4sXG4gICAgICBpID0gMCxcbiAgICAgIGogPSAwLFxuICAgICAgbXVsdGlwbGllclZhbHVlID0gMCxcbiAgICAgIHNlbGYgPSB0aGlzLFxuICAgICAgZW5kQWN0aXZlID0gdGhpcy5nbG9iYWxSZWFjdGl2ZU1vZGVsLm1vZGVsWyd4LWF4aXMtdmlzaWJsZS1yYW5nZS1lbmQnXTtcbiAgICBjYWxjdWxhdGVkQnV0dG9ucy5pbm5lckhUTUwgPSAnJztcbiAgICBmb3IgKGkgPSBzdGFuZGFyZFBlcmlvZHMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgIGZvciAoaiA9IHN0YW5kYXJkUGVyaW9kc1tpXS5tdWx0aXBsaWVycy5sZW5ndGggLSAxOyBqID49IDA7IGotLSkge1xuICAgICAgICBidG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdCVVRUT04nKTtcbiAgICAgICAgYnRuLmlkID0gc3RhbmRhcmRQZXJpb2RzW2ldLm11bHRpcGxpZXJzW2pdICsgc3RhbmRhcmRQZXJpb2RzW2ldLmFiYnJldmlhdGlvbjtcbiAgICAgICAgYnRuLmlubmVySFRNTCA9IHN0YW5kYXJkUGVyaW9kc1tpXS5tdWx0aXBsaWVyc1tqXSArIHN0YW5kYXJkUGVyaW9kc1tpXS5hYmJyZXZpYXRpb247XG4gICAgICAgIG11bHRpcGxpZXJWYWx1ZSA9IHN0YW5kYXJkUGVyaW9kc1tpXS5tdWx0aXBsaWVyc1tqXSAqIHN0YW5kYXJkUGVyaW9kc1tpXS5taWxsaXNlY29uZHM7XG4gICAgICAgIGJ0bi5tdWx0aXBsaWVyVmFsdWUgPSBtdWx0aXBsaWVyVmFsdWU7XG4gICAgICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgIHNlbGYuc2V0QWN0aXZlUGVyaW9kKGVuZEFjdGl2ZSAtIGV2ZW50LnNyY0VsZW1lbnQubXVsdGlwbGllclZhbHVlLCBlbmRBY3RpdmUpO1xuICAgICAgICB9KTtcbiAgICAgICAgY2FsY3VsYXRlZEJ1dHRvbnMuYXBwZW5kQ2hpbGQoYnRuKTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzID0gW107XG4gIH1cblxuICAvKipcbiAgICogQSBmdW5jdGlvbiB0byBkcmF3IHRoZSBjb250ZXh0dWFsIGJ1dHRvbnMuXG4gICAqIEBwYXJhbSAge2FycmF5fSBhcnJheSBvZiBvYmplY3RzIC0gQW4gYXJyYXkgb2Ygb2JqZWN0cyB3aXRoIHRoZSBzdGFuZGFyZCBwZXJpb2RzIHRvIGJlIGRyYXduIGluZm9ybWF0aW9uXG4gICAqL1xuICBkcmF3QnV0dG9uc0NvbnRleHR1YWwgKHN0YW5kYXJkUGVyaW9kcykge1xuICAgIHZhciBjb250ZXh0dWFsQnV0dG9ucyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb250ZXh0dWFsJyksXG4gICAgICBidG4sXG4gICAgICBpID0gMCxcbiAgICAgIHNlbGYgPSB0aGlzO1xuICAgIGNvbnRleHR1YWxCdXR0b25zLmlubmVySFRNTCA9ICcnO1xuICAgIGZvciAoaSA9IDA7IGkgPCBzdGFuZGFyZFBlcmlvZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ0JVVFRPTicpO1xuICAgICAgYnRuLmlkID0gc3RhbmRhcmRQZXJpb2RzW2ldLmFiYnJldmlhdGlvbjtcbiAgICAgIGJ0bi5pbm5lckhUTUwgPSBzdGFuZGFyZFBlcmlvZHNbaV0uYWJicmV2aWF0aW9uO1xuICAgICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZXZlbnRCdG4uYmluZCh0aGlzLCBzdGFuZGFyZFBlcmlvZHNbaV0pKTtcbiAgICAgIGNvbnRleHR1YWxCdXR0b25zLmFwcGVuZENoaWxkKGJ0bik7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGV2ZW50QnRuIChvYmopIHtcbiAgICAgIHNlbGYuc2V0QWN0aXZlUGVyaW9kKG9iai5kYXRlU3RhcnQsIG9iai5kYXRlRW5kKTtcbiAgICB9XG4gICAgdGhpcy5zdGFuZGFyZENvbnRleHR1YWxQZXJpb2RzID0gW107XG4gIH1cblxuICAvKipcbiAgICogQSBmdW5jdGlvbiB0byBkcmF3IHRoZSBBTEwgYnV0dG9uLlxuICAgKiBAcGFyYW0gIHthcnJheX0gYXJyYXkgb2Ygb2JqZWN0cyAtIEFuIGFycmF5IG9mIG9iamVjdHMgd2l0aCB0aGUgc3RhbmRhcmQgcGVyaW9kcyB0byBiZSBkcmF3biBpbmZvcm1hdGlvblxuICAgKi9cbiAgZHJhd0J1dHRvbkFsbCAoc3RhbmRhcmRQZXJpb2RzKSB7XG4gICAgdmFyIGFsbEJ1dHRvbnMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWxsQnV0dG9uJyksXG4gICAgICBidG4sXG4gICAgICBzZWxmID0gdGhpcztcbiAgICBhbGxCdXR0b25zLmlubmVySFRNTCA9ICcnO1xuICAgIGJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ0JVVFRPTicpO1xuICAgIGJ0bi5pZCA9ICdhbGwnO1xuICAgIGJ0bi5pbm5lckhUTUwgPSAnQUxMJztcbiAgICBidG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIHNlbGYuc2V0QWN0aXZlUGVyaW9kKHNlbGYuc3RhcnREYXRhc2V0LCBzZWxmLmVuZERhdGFzZXQpO1xuICAgIH0pO1xuICAgIGFsbEJ1dHRvbnMuYXBwZW5kQ2hpbGQoYnRuKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBIGZ1bmN0aW9uIHRvIHNldCB0aGUgb2JqZWN0IHRvIHNldCB0aGUgdXNlciBwcmVmZXJlbmNlc1xuICAgKi9cbiAgY29uZmlndXJlIChjb25maWcpIHtcbiAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgfVxuXG4gIC8qKlxuICAgKiBGdXNpb25jaGFydHMgbGlmZSBjeWNsZSBtZXRob2QgZm9yIGV4dGVuc2lvblxuICAgKi9cbiAgaW5pdCAocmVxdWlyZSkge1xuICAgIHZhciBpbnN0YW5jZSA9IHRoaXM7XG4gICAgcmVxdWlyZShbXG4gICAgICAneEF4aXMnLFxuICAgICAgJ3lBeGlzJyxcbiAgICAgICdncmFwaGljcycsXG4gICAgICAnY2hhcnQnLFxuICAgICAgJ2RhdGFzZXQnLFxuICAgICAgJ1Bsb3RNYW5hZ2VyJyxcbiAgICAgICdjYW52YXNDb25maWcnLFxuICAgICAgJ01hcmtlck1hbmFnZXInLFxuICAgICAgJ3JlYWN0aXZlTW9kZWwnLFxuICAgICAgJ2dsb2JhbFJlYWN0aXZlTW9kZWwnLFxuICAgICAgJ3NwYWNlTWFuYWdlckluc3RhbmNlJyxcbiAgICAgICdzbWFydExhYmVsJyxcbiAgICAgIGZ1bmN0aW9uIChcbiAgICAgICAgICAgIHhBeGlzLFxuICAgICAgICAgICAgeUF4aXMsXG4gICAgICAgICAgICBncmFwaGljcyxcbiAgICAgICAgICAgIGNoYXJ0LFxuICAgICAgICAgICAgZGF0YXNldCxcbiAgICAgICAgICAgIHBsb3RNYW5hZ2VyLFxuICAgICAgICAgICAgY2FudmFzQ29uZmlnLFxuICAgICAgICAgICAgbWFya2VyTWFuYWdlcixcbiAgICAgICAgICAgIHJlYWN0aXZlTW9kZWwsXG4gICAgICAgICAgICBnbG9iYWxSZWFjdGl2ZU1vZGVsLFxuICAgICAgICAgICAgc3BhY2VNYW5hZ2VySW5zdGFuY2UsXG4gICAgICAgICAgICBzbWFydExhYmVsKSB7XG4gICAgICAgIGluc3RhbmNlLnhBeGlzID0geEF4aXM7XG4gICAgICAgIGluc3RhbmNlLnlBeGlzID0geUF4aXM7XG4gICAgICAgIGluc3RhbmNlLmdyYXBoaWNzID0gZ3JhcGhpY3M7XG4gICAgICAgIGluc3RhbmNlLmNoYXJ0ID0gY2hhcnQ7XG4gICAgICAgIGluc3RhbmNlLmRhdGFzZXQgPSBkYXRhc2V0O1xuICAgICAgICBpbnN0YW5jZS5wbG90TWFuYWdlciA9IHBsb3RNYW5hZ2VyO1xuICAgICAgICBpbnN0YW5jZS5tYXJrZXJNYW5hZ2VyID0gbWFya2VyTWFuYWdlcjtcbiAgICAgICAgaW5zdGFuY2UuY2FudmFzQ29uZmlnID0gY2FudmFzQ29uZmlnO1xuICAgICAgICBpbnN0YW5jZS5yZWFjdGl2ZU1vZGVsID0gcmVhY3RpdmVNb2RlbDtcbiAgICAgICAgaW5zdGFuY2UuZ2xvYmFsUmVhY3RpdmVNb2RlbCA9IGdsb2JhbFJlYWN0aXZlTW9kZWw7XG4gICAgICAgIGluc3RhbmNlLnNwYWNlTWFuYWdlckluc3RhbmNlID0gc3BhY2VNYW5hZ2VySW5zdGFuY2U7XG4gICAgICAgIGluc3RhbmNlLnNtYXJ0TGFiZWwgPSBzbWFydExhYmVsO1xuICAgICAgfVxuICAgIF0pO1xuICAgIHRoaXMuc3BhY2VNYW5hZ2VySW5zdGFuY2UgPSBpbnN0YW5jZS5zcGFjZU1hbmFnZXJJbnN0YW5jZTtcbiAgICB0aGlzLmdsb2JhbFJlYWN0aXZlTW9kZWwgPSBpbnN0YW5jZS5nbG9iYWxSZWFjdGl2ZU1vZGVsO1xuICAgIHRoaXMuZW5kQWN0aXZlV2luZG93ID0gaW5zdGFuY2UuZ2xvYmFsUmVhY3RpdmVNb2RlbC5tb2RlbFsneC1heGlzLXZpc2libGUtcmFuZ2UtZW5kJ107XG4gICAgdGhpcy5zdGFydEFjdGl2ZVdpbmRvdyA9IGluc3RhbmNlLmdsb2JhbFJlYWN0aXZlTW9kZWwubW9kZWxbJ3gtYXhpcy12aXNpYmxlLXJhbmdlLXN0YXJ0J107XG4gICAgdGhpcy5zdGFydERhdGFzZXQgPSBpbnN0YW5jZS5nbG9iYWxSZWFjdGl2ZU1vZGVsLm1vZGVsWyd4LWF4aXMtYWJzb2x1dGUtcmFuZ2Utc3RhcnQnXTtcbiAgICB0aGlzLmVuZERhdGFzZXQgPSBpbnN0YW5jZS5nbG9iYWxSZWFjdGl2ZU1vZGVsLm1vZGVsWyd4LWF4aXMtYWJzb2x1dGUtcmFuZ2UtZW5kJ107XG4gICAgdGhpcy5zZXRBY3RpdmVQZXJpb2QodGhpcy5zdGFydEFjdGl2ZVdpbmRvdywgdGhpcy5lbmRBY3RpdmVXaW5kb3cpO1xuICAgIC8vIGluc3RhbmNlLmdsb2JhbFJlYWN0aXZlTW9kZWwubW9kZWxbJ194LWF4aXMtdmlzaWJsZS1yYW5nZS1zdGFydCddICs9IDEyNDQxNjAwMDAwMDtcbiAgICB0aGlzLnNldEFjdGl2ZVBlcmlvZCh0aGlzLnN0YXJ0QWN0aXZlV2luZG93LCB0aGlzLmVuZEFjdGl2ZVdpbmRvdyk7XG5cbiAgICB0aGlzLnRvb2xiYXJzID0gW107XG5cbiAgICB0aGlzLm1lYXN1cmVtZW50ID0ge307XG5cbiAgICB0aGlzLnRvb2xiYXJzLnB1c2godGhpcy5jcmVhdGVUb29sYmFyKCkpO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIGNyZWF0ZVRvb2xiYXIgKCkge1xuICAgIHZhciB1bmlncm91cCxcbiAgICAgIHRvb2xiYXIsXG4gICAgICBjYWxjdWxhdGVkQnV0dG9ucyxcbiAgICAgIGNvbnRleHR1YWxCdXR0b25zLFxuICAgICAgYWxsQnV0dG9uLFxuICAgICAgc2VsZiA9IHRoaXMsXG4gICAgICBlbmRBY3RpdmUgPSB0aGlzLmdsb2JhbFJlYWN0aXZlTW9kZWwubW9kZWxbJ3gtYXhpcy12aXNpYmxlLXJhbmdlLWVuZCddLFxuICAgICAgZGVkdWN0b3JBciA9IFtdLFxuICAgICAgc3RhcnRNdWx0aXBsaWVyLFxuICAgICAgZGVkdWN0b3IsXG4gICAgICBpLFxuICAgICAgaixcbiAgICAgIG1hcmdpbixcbiAgICAgIGZyb21EYXRlTGFiZWwsXG4gICAgICBncm91cDtcblxuICAgIGdyb3VwID0gbmV3IHRoaXMudG9vbGJveC5Db21wb25lbnRHcm91cCh7XG4gICAgICBwYXBlcjogdGhpcy5ncmFwaGljcy5wYXBlcixcbiAgICAgIGNoYXJ0OiB0aGlzLmNoYXJ0LFxuICAgICAgc21hcnRMYWJlbDogdGhpcy5zbWFydExhYmVsLFxuICAgICAgY2hhcnRDb250YWluZXI6IHRoaXMuZ3JhcGhpY3MuY29udGFpbmVyXG4gICAgfSk7XG5cbiAgICB1bmlncm91cCA9IG5ldyB0aGlzLnRvb2xib3guVW5pU2VsZWN0Q29tcG9uZW50R3JvdXAoe1xuICAgICAgcGFwZXI6IHRoaXMuZ3JhcGhpY3MucGFwZXIsXG4gICAgICBjaGFydDogdGhpcy5jaGFydCxcbiAgICAgIHNtYXJ0TGFiZWw6IHRoaXMuc21hcnRMYWJlbCxcbiAgICAgIGNoYXJ0Q29udGFpbmVyOiB0aGlzLmdyYXBoaWNzLmNvbnRhaW5lclxuICAgIH0pO1xuICAgIHVuaWdyb3VwLnNldENvbmZpZyh7XG4gICAgICBmaWxsOiAnI2ZmZicsXG4gICAgICBib3JkZXJUaGlja25lc3M6IDBcbiAgICB9KTtcbiAgICBncm91cC5zZXRDb25maWcoe1xuICAgICAgZmlsbDogJyNmZmYnLFxuICAgICAgYm9yZGVyVGhpY2tuZXNzOiAwXG4gICAgfSk7XG4gICAgdG9vbGJhciA9IG5ldyB0aGlzLkhvcml6b250YWxUb29sYmFyKHtcbiAgICAgIHBhcGVyOiB0aGlzLmdyYXBoaWNzLnBhcGVyLFxuICAgICAgY2hhcnQ6IHRoaXMuY2hhcnQsXG4gICAgICBzbWFydExhYmVsOiB0aGlzLnNtYXJ0TGFiZWwsXG4gICAgICBjaGFydENvbnRhaW5lcjogdGhpcy5ncmFwaGljcy5jb250YWluZXJcbiAgICB9KTtcbiAgICB0b29sYmFyLnNldENvbmZpZyh7XG4gICAgICBmaWxsOiAnI2ZmZicsXG4gICAgICBib3JkZXJUaGlja25lc3M6IDBcbiAgICB9KTtcbiAgICBmcm9tRGF0ZUxhYmVsID0gbmV3IHRoaXMudG9vbGJveC5MYWJlbCgnWm9vbTonLCB7XG4gICAgICBzbWFydExhYmVsOiB0aGlzLnNtYXJ0TGFiZWwsXG4gICAgICBwYXBlcjogdGhpcy5ncmFwaGljcy5wYXBlclxuICAgIH0sIHtcbiAgICAgIHRleHQ6IHtcbiAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICAnZm9udC1zaXplJzogJzE1JyxcbiAgICAgICAgICAnZm9udEZhbWlseSc6ICdNeXJpYWRQcm8nXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgICBncm91cC5hZGRTeW1ib2woZnJvbURhdGVMYWJlbCk7XG4gICAgYWxsQnV0dG9uID0gbmV3IHRoaXMudG9vbGJveC5TeW1ib2woJ0FMTCcsIHRydWUsIHtcbiAgICAgIHBhcGVyOiB0aGlzLmdyYXBoaWNzLnBhcGVyLFxuICAgICAgY2hhcnQ6IHRoaXMuY2hhcnQsXG4gICAgICBzbWFydExhYmVsOiB0aGlzLnNtYXJ0TGFiZWwsXG4gICAgICBjaGFydENvbnRhaW5lcjogdGhpcy5ncmFwaGljcy5jb250YWluZXJcbiAgICB9LCB7XG4gICAgICBmaWxsOiAnI2ZmZmZmZicsXG4gICAgICBsYWJlbEZpbGw6ICcjNjk2OTY5JyxcbiAgICAgIHN5bWJvbFN0cm9rZVdpZHRoOiAnMicsXG4gICAgICBzeW1ib2xTdHJva2U6ICcjMDAwMDAwJyxcbiAgICAgIHN0cm9rZVdpZHRoOiAnMScsXG4gICAgICBob3ZlckZpbGw6ICcjN2Y3ZjdmJyxcbiAgICAgIHJhZGl1czogMSxcbiAgICAgIG1hcmdpbjoge1xuICAgICAgICByaWdodDogNVxuICAgICAgfVxuICAgIH0pLmF0dGFjaEV2ZW50SGFuZGxlcnMoe1xuICAgICAgY2xpY2s6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc2VsZi5zZXRBY3RpdmVQZXJpb2Qoc2VsZi5zdGFydERhdGFzZXQsIHNlbGYuZW5kRGF0YXNldCk7XG4gICAgICAgIHRvb2xiYXIuZGlzcG9zZSgpO1xuICAgICAgICBzZWxmLmNsaWNrZWRJZCA9ICdBTEwnO1xuICAgICAgICBzZWxmLnRvb2xiYXJzLnBvcCgpO1xuICAgICAgICBzZWxmLnRvb2xiYXJzLnB1c2goc2VsZi5jcmVhdGVUb29sYmFyKCkpO1xuICAgICAgICBzZWxmLmdldExvZ2ljYWxTcGFjZSgpO1xuICAgICAgICBzZWxmLmRyYXcoKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHVuaWdyb3VwLmFkZFN5bWJvbChhbGxCdXR0b24pO1xuICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGZvciAoaiA9IHRoaXMuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kc1tpXS5tdWx0aXBsaWVycy5sZW5ndGggLSAxOyBqID49IDA7IGotLSkge1xuICAgICAgICBkZWR1Y3RvckFyLnB1c2goc2VsZi5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW2ldLm11bHRpcGxpZXJzW2pdICogc2VsZi5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW2ldLm1pbGxpc2Vjb25kcyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY2FsY3VsYXRlZEJ1dHRvbnMgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gc2VsZi5zdGFydFBvaW50VW5pdDsgaSA+PSAwOyBpLS0pIHtcbiAgICAgIGlmIChpID09PSBzZWxmLnN0YXJ0UG9pbnRVbml0KSB7XG4gICAgICAgIHN0YXJ0TXVsdGlwbGllciA9IHNlbGYuc3RhcnRQb2ludE11bHRpcGxpZXI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdGFydE11bHRpcGxpZXIgPSBzZWxmLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHNbaV0ubXVsdGlwbGllcnMubGVuZ3RoIC0gMTtcbiAgICAgIH1cbiAgICAgIGZvciAobGV0IGogPSBzdGFydE11bHRpcGxpZXI7IGogPj0gMDsgai0tKSB7XG4gICAgICAgIG1hcmdpbiA9IChpID09PSBzZWxmLm5vQ2FsY0J1dHRvbnMgJiYgaiA9PT0gMCkgPyA1IDogMDtcbiAgICAgICAgY29uc29sZS5sb2coZW5kQWN0aXZlLCBpLCBzZWxmLm5vQ2FsY0J1dHRvbnMsIGosIG1hcmdpbik7XG4gICAgICAgIGNhbGN1bGF0ZWRCdXR0b25zW2ldID0gbmV3IHRoaXMudG9vbGJveC5TeW1ib2woc2VsZi5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW2ldLm11bHRpcGxpZXJzW2pdICsgc2VsZi5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW2ldLmFiYnJldmlhdGlvbiwgdHJ1ZSwge1xuICAgICAgICAgIHBhcGVyOiB0aGlzLmdyYXBoaWNzLnBhcGVyLFxuICAgICAgICAgIGNoYXJ0OiB0aGlzLmNoYXJ0LFxuICAgICAgICAgIHNtYXJ0TGFiZWw6IHRoaXMuc21hcnRMYWJlbCxcbiAgICAgICAgICBjaGFydENvbnRhaW5lcjogdGhpcy5ncmFwaGljcy5jb250YWluZXJcbiAgICAgICAgfSwge1xuICAgICAgICAgIGZpbGw6ICcjZmZmZmZmJyxcbiAgICAgICAgICBsYWJlbEZpbGw6ICcjNjk2OTY5JyxcbiAgICAgICAgICBzeW1ib2xTdHJva2VXaWR0aDogJzInLFxuICAgICAgICAgIHN5bWJvbFN0cm9rZTogJyMwMDAwMDAnLFxuICAgICAgICAgIHN0cm9rZVdpZHRoOiAnMScsXG4gICAgICAgICAgaG92ZXJGaWxsOiAnIzdmN2Y3ZicsXG4gICAgICAgICAgcmFkaXVzOiAxLFxuICAgICAgICAgIG1hcmdpbjoge1xuICAgICAgICAgICAgcmlnaHQ6IG1hcmdpblxuICAgICAgICAgIH1cbiAgICAgICAgfSkuYXR0YWNoRXZlbnRIYW5kbGVycyh7XG4gICAgICAgICAgJ2NsaWNrJzogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZGVkdWN0b3IgPSAoc2VsZi5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW2ldLm11bHRpcGxpZXJzW2pdICogc2VsZi5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW2ldLm1pbGxpc2Vjb25kcyk7XG4gICAgICAgICAgICBzZWxmLmNsaWNrZWRJZCA9IHNlbGYuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kc1tpXS5tdWx0aXBsaWVyc1tqXSArIHNlbGYuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kc1tpXS5hYmJyZXZpYXRpb247XG4gICAgICAgICAgICBzZWxmLnNldEFjdGl2ZVBlcmlvZChkZWR1Y3Rvcik7XG4gICAgICAgICAgICB0b29sYmFyLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgIHNlbGYudG9vbGJhcnMucG9wKCk7XG4gICAgICAgICAgICBzZWxmLnRvb2xiYXJzLnB1c2goc2VsZi5jcmVhdGVUb29sYmFyKCkpO1xuICAgICAgICAgICAgc2VsZi5nZXRMb2dpY2FsU3BhY2UoKTtcbiAgICAgICAgICAgIHNlbGYuZHJhdygpO1xuICAgICAgICAgICAgLy8gdGhpcy50b29sYmFyc1t0aGlzLnRvb2xiYXJzLmxlbmd0aCAtIDFdID0gdGhpcy5jcmVhdGVUb29sYmFyKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdW5pZ3JvdXAuYWRkU3ltYm9sKGNhbGN1bGF0ZWRCdXR0b25zW2ldKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb250ZXh0dWFsQnV0dG9ucyA9IFtdO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnN0YW5kYXJkQ29udGV4dWFsUGVyaW9kcy5sZW5ndGg7IGkrKykge1xuICAgICAgY29udGV4dHVhbEJ1dHRvbnNbaV0gPSBuZXcgdGhpcy50b29sYm94LlN5bWJvbCh0aGlzLnN0YW5kYXJkQ29udGV4dWFsUGVyaW9kc1tpXS5hYmJyZXZpYXRpb24sIHRydWUsIHtcbiAgICAgICAgcGFwZXI6IHRoaXMuZ3JhcGhpY3MucGFwZXIsXG4gICAgICAgIGNoYXJ0OiB0aGlzLmNoYXJ0LFxuICAgICAgICBzbWFydExhYmVsOiB0aGlzLnNtYXJ0TGFiZWwsXG4gICAgICAgIGNoYXJ0Q29udGFpbmVyOiB0aGlzLmdyYXBoaWNzLmNvbnRhaW5lclxuICAgICAgfSwge1xuICAgICAgICBmaWxsOiAnI2ZmZmZmZicsXG4gICAgICAgIGxhYmVsRmlsbDogJyM2OTY5NjknLFxuICAgICAgICBzeW1ib2xTdHJva2VXaWR0aDogJzInLFxuICAgICAgICBzeW1ib2xTdHJva2U6ICcjMDAwMDAwJyxcbiAgICAgICAgc3Ryb2tlV2lkdGg6ICcxJyxcbiAgICAgICAgaG92ZXJGaWxsOiAnIzdmN2Y3ZicsXG4gICAgICAgIHJhZGl1czogMSxcbiAgICAgICAgbWFyZ2luOiB7XG4gICAgICAgICAgcmlnaHQ6IDBcbiAgICAgICAgfVxuICAgICAgfSkuYXR0YWNoRXZlbnRIYW5kbGVycyh7XG4gICAgICAgICdjbGljayc6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBzZWxmLnNldEFjdGl2ZVBlcmlvZChzZWxmLnN0YW5kYXJkQ29udGV4dWFsUGVyaW9kc1tpXS5kYXRlU3RhcnQsIHNlbGYuc3RhbmRhcmRDb250ZXh1YWxQZXJpb2RzW2ldLmRhdGVFbmQpO1xuICAgICAgICAgIHNlbGYuY2xpY2tlZElkID0gc2VsZi5zdGFuZGFyZENvbnRleHVhbFBlcmlvZHNbaV0uYWJicmV2aWF0aW9uO1xuICAgICAgICAgIHRvb2xiYXIuZGlzcG9zZSgpO1xuICAgICAgICAgIHNlbGYudG9vbGJhcnMucG9wKCk7XG4gICAgICAgICAgc2VsZi50b29sYmFycy5wdXNoKHNlbGYuY3JlYXRlVG9vbGJhcigpKTtcbiAgICAgICAgICBzZWxmLmdldExvZ2ljYWxTcGFjZSgpO1xuICAgICAgICAgIHNlbGYuZHJhdygpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHVuaWdyb3VwLmFkZFN5bWJvbChjb250ZXh0dWFsQnV0dG9uc1tpXSk7XG4gICAgfVxuXG4gICAgICAvLyBidG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdCVVRUT04nKTtcbiAgICAgIC8vIGJ0bi5pZCA9IHN0YW5kYXJkUGVyaW9kc1tpXS5hYmJyZXZpYXRpb247XG4gICAgICAvLyBidG4uaW5uZXJIVE1MID0gc3RhbmRhcmRQZXJpb2RzW2ldLmFiYnJldmlhdGlvbjtcbiAgICAgIC8vIGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGV2ZW50QnRuLmJpbmQodGhpcywgc3RhbmRhcmRQZXJpb2RzW2ldKSk7XG4gICAgICAvLyBjb250ZXh0dWFsQnV0dG9ucy5hcHBlbmRDaGlsZChidG4pO1xuXG4gICAgdGhpcy5TeW1ib2xTdG9yZS5yZWdpc3RlcigndGV4dEJveEljb24nLCBmdW5jdGlvbiAoeCwgeSwgcmFkLCB3LCBoLCBwYWRYLCBwYWRZKSB7XG4gICAgICB2YXIgeDEgPSB4IC0gdyAvIDIgKyBwYWRYIC8gMixcbiAgICAgICAgeDIgPSB4ICsgdyAvIDIgLSBwYWRYIC8gMixcbiAgICAgICAgeTEgPSB5IC0gaCAvIDIgKyBwYWRZIC8gMixcbiAgICAgICAgeTIgPSB5ICsgaCAvIDIgLSBwYWRZIC8gMjtcblxuICAgICAgcmV0dXJuIFsnTScsIHgxLCB5MSwgJ0wnLCB4MiwgeTEsICdMJywgeDIsIHkyLCAnTCcsIHgxLCB5MiwgJ1onXTtcbiAgICB9KTtcblxuICAgIHRvb2xiYXIuYWRkQ29tcG9uZW50KGdyb3VwKTtcbiAgICB0b29sYmFyLmFkZENvbXBvbmVudCh1bmlncm91cCk7XG4gICAgcmV0dXJuIHRvb2xiYXI7XG4gIH07XG5cbiAgZ2V0TG9naWNhbFNwYWNlIChhdmFpbGFibGVXaWR0aCwgYXZhaWxhYmxlSGVpZ2h0KSB7XG4gICAgYXZhaWxhYmxlV2lkdGggLz0gMjtcbiAgICB2YXIgbG9naWNhbFNwYWNlLFxuICAgICAgd2lkdGggPSAwLFxuICAgICAgaGVpZ2h0ID0gMCxcbiAgICAgIGksXG4gICAgICBsbjtcblxuICAgIGZvciAoaSA9IDAsIGxuID0gdGhpcy50b29sYmFycy5sZW5ndGg7IGkgPCBsbjsgaSsrKSB7XG4gICAgICBsb2dpY2FsU3BhY2UgPSB0aGlzLnRvb2xiYXJzW2ldLmdldExvZ2ljYWxTcGFjZSgpO1xuICAgICAgd2lkdGggPSBNYXRoLm1heChsb2dpY2FsU3BhY2Uud2lkdGgsIHdpZHRoKTtcbiAgICAgIGhlaWdodCArPSBsb2dpY2FsU3BhY2UuaGVpZ2h0O1xuICAgICAgdGhpcy50b29sYmFyc1tpXS53aWR0aCA9IGxvZ2ljYWxTcGFjZS53aWR0aDtcbiAgICAgIHRoaXMudG9vbGJhcnNbaV0uaGVpZ2h0ID0gbG9naWNhbFNwYWNlLmhlaWdodDtcbiAgICB9XG4gICAgaGVpZ2h0ICs9IHRoaXMucGFkZGluZztcbiAgICByZXR1cm4ge1xuICAgICAgd2lkdGg6IHdpZHRoID4gYXZhaWxhYmxlV2lkdGggPyAwIDogd2lkdGgsXG4gICAgICBoZWlnaHQ6IGhlaWdodCA+IGF2YWlsYWJsZUhlaWdodCA/IDAgOiBoZWlnaHRcbiAgICB9O1xuICB9O1xuXG4gIHBsYWNlSW5DYW52YXMgKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBzZWxmLnBhZGRpbmcgPSA1O1xuICAgIHNlbGYuc3BhY2VNYW5hZ2VySW5zdGFuY2UuYWRkKFt7XG4gICAgICBuYW1lOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAnVG9vbEJveEV4dCc7XG4gICAgICB9LFxuICAgICAgcmVmOiBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgIHJldHVybiBvYmpbJzAnXTtcbiAgICAgIH0sXG4gICAgICBzZWxmOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBzZWxmO1xuICAgICAgfSxcbiAgICAgIHByaW9yaXR5OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAyO1xuICAgICAgfSxcbiAgICAgIGxheW91dDogZnVuY3Rpb24gKG9iaikge1xuICAgICAgICByZXR1cm4gb2JqLmlubGluZTtcbiAgICAgIH0sXG4gICAgICBvcmllbnRhdGlvbjogW3tcbiAgICAgICAgdHlwZTogZnVuY3Rpb24gKG9iaikge1xuICAgICAgICAgIHJldHVybiBvYmouaG9yaXpvbnRhbDtcbiAgICAgICAgfSxcbiAgICAgICAgcG9zaXRpb246IFt7XG4gICAgICAgICAgdHlwZTogZnVuY3Rpb24gKG9iaikge1xuICAgICAgICAgICAgcmV0dXJuIG9iai50b3A7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBhbGlnbm1lbnQ6IFt7XG4gICAgICAgICAgICB0eXBlOiBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgICAgICAgIHJldHVybiBvYmoubGVmdDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkaW1lbnNpb25zOiBbZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICB2YXIgcGFyZW50ID0gdGhpcy5nZXRQYXJlbnRDb21wb25lbnRHcm91cCgpO1xuICAgICAgICAgICAgICByZXR1cm4gc2VsZi5nZXRMb2dpY2FsU3BhY2UocGFyZW50LmdldFdpZHRoKCksIHBhcmVudC5nZXRIZWlnaHQoKSk7XG4gICAgICAgICAgICB9XVxuICAgICAgICAgIH1dXG4gICAgICAgIH1dXG4gICAgICB9XVxuICAgIH1dKTtcbiAgfTtcblxuICBzZXREcmF3aW5nQ29uZmlndXJhdGlvbiAoeCwgeSwgd2lkdGgsIGhlaWdodCwgZ3JvdXApIHtcbiAgICB2YXIgbWVzID0gdGhpcy5tZWFzdXJlbWVudDtcbiAgICBtZXMueCA9IHg7XG4gICAgbWVzLnkgPSB5O1xuICAgIG1lcy53aWR0aCA9IHdpZHRoO1xuICAgIG1lcy5oZWlnaHQgPSBoZWlnaHQ7XG5cbiAgICB0aGlzLnBhcmVudEdyb3VwID0gZ3JvdXA7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICBkcmF3ICh4LCB5LCB3aWR0aCwgaGVpZ2h0LCBncm91cCkge1xuICAgIHZhciBtZWFzdXJlbWVudCA9IHRoaXMubWVhc3VyZW1lbnQsXG4gICAgICB0b29sYmFycyA9IHRoaXMudG9vbGJhcnMsXG4gICAgICBsbixcbiAgICAgIGksXG4gICAgICB0b29sYmFyLFxuICAgICAgYm91bmRFbGVtZW50LFxuICAgICAgYkJveCxcbiAgICAgIHgxLFxuICAgICAgeDIsXG4gICAgICB5MjtcblxuICAgIHggPSB4ID09PSB1bmRlZmluZWQgPyBtZWFzdXJlbWVudC54IDogeDtcbiAgICB5ID0geSA9PT0gdW5kZWZpbmVkID8gbWVhc3VyZW1lbnQueSA6IHk7XG4gICAgd2lkdGggPSB3aWR0aCA9PT0gdW5kZWZpbmVkID8gbWVhc3VyZW1lbnQud2lkdGggOiB3aWR0aDtcbiAgICBoZWlnaHQgPSBoZWlnaHQgPT09IHVuZGVmaW5lZCA/IG1lYXN1cmVtZW50LmhlaWdodCA6IGhlaWdodDtcbiAgICBncm91cCA9IGdyb3VwID09PSB1bmRlZmluZWQgPyB0aGlzLnBhcmVudEdyb3VwIDogZ3JvdXA7XG4gICAgaWYgKHdpZHRoICYmIGhlaWdodCkge1xuICAgICAgZm9yIChpID0gMCwgbG4gPSB0b29sYmFycy5sZW5ndGg7IGkgPCBsbjsgaSsrKSB7XG4gICAgICAgIHRvb2xiYXIgPSB0b29sYmFyc1tpXTtcbiAgICAgICAgdG9vbGJhci5kcmF3KHgsIHkpO1xuICAgICAgfVxuICAgIH1cbiAgICBjb25zb2xlLmxvZyh0b29sYmFycyk7XG4gICAgZm9yIChsZXQgaSA9IDAsIGlpID0gdG9vbGJhcnNbMF0uY29tcG9uZW50R3JvdXBzWzFdLnN5bWJvbExpc3Q7IGkgPCBpaS5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGlpW2ldLnN5bWJvbCA9PT0gdGhpcy5jbGlja2VkSWQpIHtcbiAgICAgICAgYm91bmRFbGVtZW50ID0gaWlbaV0uZ2V0Qm91bmRFbGVtZW50KCk7XG4gICAgICAgIGJCb3ggPSBib3VuZEVsZW1lbnQuZ2V0QkJveCgpO1xuICAgICAgICB4MSA9IGJCb3gueDtcbiAgICAgICAgeDIgPSBiQm94LngyO1xuICAgICAgICB5MiA9IGJCb3gueTI7XG5cbiAgICAgICAgdGhpcy5ncmFwaGljcy5wYXBlci5wYXRoKHtcbiAgICAgICAgICBwYXRoOiBbJ00nLCB4MSwgeTIgLSAyIC8gMiwgJ0wnLCB4MiwgeTIgLSAyIC8gMl0sXG4gICAgICAgICAgJ3N0cm9rZSc6ICcjZmYwMDAwJ1xuICAgICAgICB9KS50b0Zyb250KCk7XG4gICAgICAgIC8vIHRoaXMuX3BhcmVudEdyb3VwLnNldFN0YXRlKHRoaXMpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbn1cblxuaWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBtb2R1bGUuZXhwb3J0cyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgbW9kdWxlLmV4cG9ydHMgPSBTdGFuZGFyZFBlcmlvZFNlbGVjdG9yO1xufSBlbHNlIHtcbiAgd2luZG93LlN0YW5kYXJkUGVyaW9kID0gU3RhbmRhcmRQZXJpb2RTZWxlY3Rvcjtcbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9zdGFuZGFyZC1wZXJpb2Qtc2VsZWN0b3IuanMiXSwic291cmNlUm9vdCI6IiJ9