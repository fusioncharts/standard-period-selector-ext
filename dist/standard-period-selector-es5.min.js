!function(t){function e(a){if(i[a])return i[a].exports;var s=i[a]={exports:{},id:a,loaded:!1};return t[a].call(s.exports,s,s.exports,e),s.loaded=!0,s.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){(function(t){"use strict";var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=i(2);window.stPS=new a,function(i,a){"object"===e(t)&&t.exports?t.exports=i.document?a(i):function(t){if(!t.document)throw new Error("Window with document not present");return a(t,!0)}:i.StandardPeriodSelector=a(i,!0)}("undefined"!=typeof window?window:void 0,function(t,e){var i=t.FusionCharts;i.register("extension",["private","StandardPeriodSelector",function(){i.registerComponent("extensions","StandardPeriodSelector",a({FusionCharts:i}))}])})}).call(e,i(1)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}();t.exports=function(t){var e=function(){function t(){i(this,t),this.ratio=8,this.toolbox=FusionCharts.getComponent("api","toolbox"),this.HorizontalToolbar=this.toolbox.HorizontalToolbar,this.ComponentGroup=this.toolbox.ComponentGroup,this.SymbolStore=this.toolbox.SymbolStore,this.all=1,this.calculatedPeriods=[],this.startDataset=0,this.startActiveWindow=0,this.endActiveWindow=1,this.standardCalculatedPeriods=[],this.standardContexualPeriods=[],this.startPointUnit=0,this.startPointMultiplier=0,this.clickedId="ALL",this.noCalcButtons=0,this.timePeriods=[{name:"second",milliseconds:1e3,startingPoint:0,total:60,abbreviation:"s",description:"SECOND",parent:"minute",multipliers:[1,5,15,30]},{name:"minute",milliseconds:6e4,startingPoint:0,total:60,abbreviation:"m",description:"MINUTE",parent:"hour",multipliers:[1,5,15,30]},{name:"hour",milliseconds:36e5,startingPoint:0,total:24,abbreviation:"h",description:"HOUR",parent:"day",multipliers:[1,3,6,12]},{name:"day",milliseconds:864e5,startingPoint:0,total:30,abbreviation:"D",description:"DAY",parent:"month",multipliers:[1,7,15]},{name:"month",milliseconds:2592e6,startingPoint:0,total:12,abbreviation:"M",description:"MONTH",parent:"year",multipliers:[1,3,6]},{name:"year",milliseconds:31104e6,startingPoint:0,abbreviation:"Y",description:"YEAR",multipliers:[1]}],this.tdButtons=[{name:"YTD",abbreviation:"YTD",parent:"year",milliseconds:31104e6,description:"Year to Date"},{name:"QTD",abbreviation:"QTD",parent:"month",multiplier:3,milliseconds:7776e6,description:"Quarter to Date"},{name:"MTD",abbreviation:"MTD",parent:"month",milliseconds:2592e6,description:"Month to Date"},{name:"WTD",abbreviation:"WTD",parent:"day",multiplier:7,milliseconds:6048e5,description:"Week to Date"},{name:"Y",abbreviation:"Y",parent:"day",milliseconds:864e5,description:"Yesterday"},{name:"T",abbreviation:"T",parent:"day",milliseconds:864e5,description:"Today"}],this.config={anchorPositions:"right",all:"1",contextual:"1",calculated:"1",tertiaryTimePeriods:{}}}return a(t,[{key:"generateCalculatedButtons",value:function(){var t=this.endActiveWindow-this.startDataset,e=0,i=0,a=this.endActiveWindow-this.startActiveWindow,s=0;for(this.standardCalculatedPeriods=[],e=0;e<this.timePeriods.length;e++)if(t/this.timePeriods[e].milliseconds>=1)if(Math.floor(a/this.timePeriods[e].milliseconds)<1)this.standardCalculatedPeriods.push({abbreviation:this.timePeriods[e].abbreviation,description:this.timePeriods[e].description,milliseconds:this.timePeriods[e].milliseconds,name:this.timePeriods[e].name,multipliers:[1]});else for(this.standardCalculatedPeriods.push({abbreviation:this.timePeriods[e].abbreviation,description:this.timePeriods[e].description,milliseconds:this.timePeriods[e].milliseconds,name:this.timePeriods[e].name,multipliers:[]}),i=0;i<this.timePeriods[e].multipliers.length;i++)a/this.ratio<this.timePeriods[e].multipliers[i]*this.timePeriods[e].milliseconds&&this.standardCalculatedPeriods[this.standardCalculatedPeriods.length-1].multipliers.push(this.timePeriods[e].multipliers[i]);for(this.noCalcButtons=1/0,e=0;e<this.standardCalculatedPeriods.length;e++)for(i=0;i<this.standardCalculatedPeriods[e].multipliers.length;i++)++s,this.noCalcButtons>e&&(this.noCalcButtons=e),s<=4&&(this.startPointMultiplier=i,this.startPointUnit=e)}},{key:"generateContextualButtons",value:function(){for(var t=[],e=0,i=this.globalReactiveModel.model["x-axis-absolute-range-end"],a=i-2,s=i,o={};e<this.tdButtons.length;e++)a=new Date(i),"YTD"===this.tdButtons[e].name?(a.setMonth(0),a.setDate(1),a.setHours(0),a.setMinutes(0),a.setSeconds(0)):"MTD"===this.tdButtons[e].name?(a.setDate(1),a.setHours(0),a.setMinutes(0),a.setSeconds(0)):"QTD"===this.tdButtons[e].name?(a.setMonth(11-a.getMonth()%4),a.setDate(0),a.setHours(0),a.setMinutes(0),a.setSeconds(0)):"WTD"===this.tdButtons[e].name?(a.setDate(a.getDate()-a.getDay()),a.setHours(0),a.setMinutes(0),a.setSeconds(0)):"Y"===this.tdButtons[e].name?(a.setHours(0),a.setMinutes(0),a.setSeconds(0),a-=864e5):"T"===this.tdButtons[e].name&&(a.setHours(0),a.setMinutes(0),a.setSeconds(0)),s<a||(this.tdButtons[e].dateStart=a.valueOf(),this.tdButtons[e].dateEnd=s.valueOf(),t.push(this.tdButtons[e]));for(o.milliseconds=1/0,e=0;e<this.tdButtons.length;e++)Math.abs(this.tdButtons[e].milliseconds-(this.endActiveWindow-this.startActiveWindow))<o.milliseconds&&(o.milliseconds=this.tdButtons[e].milliseconds,o.name=this.tdButtons[e].abbreviation);this.standardContexualPeriods=t}},{key:"setActivePeriod",value:function(){var t,e;window.performance.now();1===arguments.length?(e=this.globalReactiveModel.model["x-axis-visible-range-end"],t=e-arguments[0]):2===arguments.length&&(t=arguments[0],e=arguments[1]),this.startActiveWindow=t,this.endActiveWindow=e,this.generateCalculatedButtons(),this.globalReactiveModel.model["x-axis-visible-range-start"]=this.startActiveWindow,this.globalReactiveModel.model["x-axis-visible-range-end"]=this.endActiveWindow,this.generateContextualButtons()}},{key:"setActivePeriodForButtonChange",value:function(){var t,e;t=arguments[0],e=arguments[1],this.startActiveWindow=t,this.endActiveWindow=e,this.generateCalculatedButtons(),this.generateContextualButtons()}},{key:"configure",value:function(t){this.config=t}},{key:"init",value:function(t){var e=this;return t(["xAxis","yAxis","graphics","chart","dataset","PlotManager","canvasConfig","MarkerManager","reactiveModel","globalReactiveModel","spaceManagerInstance","smartLabel","extData","chartInstance",function(t,i,a,s,o,n,r,l,d,c,h,u,p,m){e.xAxis=t,e.yAxis=i,e.graphics=a,e.chart=s,e.dataset=o,e.plotManager=n,e.markerManager=l,e.canvasConfig=r,e.reactiveModel=d,e.globalReactiveModel=c,e.spaceManagerInstance=h,e.smartLabel=u,e.extData=p,e.chartInstance=m}]),this.spaceManagerInstance=e.spaceManagerInstance,this.globalReactiveModel=e.globalReactiveModel,this.endActiveWindow=e.globalReactiveModel.model["x-axis-visible-range-end"],this.startActiveWindow=e.globalReactiveModel.model["x-axis-visible-range-start"],this.startDataset=e.globalReactiveModel.model["x-axis-absolute-range-start"],this.endDataset=e.globalReactiveModel.model["x-axis-absolute-range-end"],this.setActivePeriod(this.startActiveWindow,this.endActiveWindow),this.setActivePeriod(this.startActiveWindow,this.endActiveWindow),this.timeRules=this.chartInstance.apiInstance.getComponentStore(),this.timeRules=this.timeRules.getCanvasByIndex(0).composition.impl,this.timeRules=this.timeRules.getDataAggregator(),this.timeRules=this.timeRules.getAggregationTimeRules(),this.toolbars=[],this.measurement={},this.flag=!0,this.toolbars.push(this.createToolbar()),this.globalReactiveModel.onPropsChange(["x-axis-visible-range-start","x-axis-visible-range-end"],function(t,i){var a=window.performance.now();window.tempTime=a,e.flag&&(e.flag=!1,e.setActivePeriod(t[1],i[1]),e.toolbar.dispose(),e.toolbars.pop(),e.toolbars.push(e.createToolbar()),e.getLogicalSpace(),e.draw())}),this}},{key:"createToolbar",value:function(){var t,e,i,a,s,o,n,r,l,d,c,h,u=this,p=this,m=[];for(h=new this.toolbox.ComponentGroup({paper:this.graphics.paper,chart:this.chart,smartLabel:this.smartLabel,chartContainer:this.graphics.container}),t=new this.toolbox.UniSelectComponentGroup({paper:this.graphics.paper,chart:this.chart,smartLabel:this.smartLabel,chartContainer:this.graphics.container}),t.setConfig({fill:"#fff",borderThickness:0}),h.setConfig({fill:"#fff",borderThickness:0}),e=new this.HorizontalToolbar({paper:this.graphics.paper,chart:this.chart,smartLabel:this.smartLabel,chartContainer:this.graphics.container}),e.setConfig({fill:"#fff",borderThickness:0}),c=new this.toolbox.Label("Zoom:",{smartLabel:this.smartLabel,paper:this.graphics.paper},{text:{style:{"font-family":'"Lucida Grande", sans-serif',"font-size":"13",fill:"#696969","font-weight":"bold"}},container:{height:22}}),h.addSymbol(c),s=new this.toolbox.Symbol("ALL",!0,{paper:this.graphics.paper,chart:this.chart,smartLabel:this.smartLabel,chartContainer:this.graphics.container},{fill:"#ffffff",labelFill:"#696969",symbolStrokeWidth:"2",stroke:"#ced5d4",strokeWidth:"1",hoverFill:"#ced5d4",height:22,radius:1,margin:{right:5},btnTextStyle:{fontFamily:'"Lucida Grande", sans-serif',fontSize:"13",fill:"#696969","line-height":"1","letter-spacing":"-0.04em"}}).attachEventHandlers({click:function(){p.setActivePeriod(p.startDataset,p.endDataset),e.dispose(),p.clickedId="ALL",p.toolbars.pop(),p.toolbars.push(p.createToolbar()),p.getLogicalSpace(),p.draw()},tooltext:"ALL"}),t.addSymbol(s),r=0;r<this.standardCalculatedPeriods.length;r++)for(l=this.standardCalculatedPeriods[r].multipliers.length-1;l>=0;l--)m.push(p.standardCalculatedPeriods[r].multipliers[l]*p.standardCalculatedPeriods[r].milliseconds);i=[];for(var g=function(a){o=a===p.startPointUnit?p.startPointMultiplier:p.standardCalculatedPeriods[a].multipliers.length-1;for(var s=function(s){d=a===p.noCalcButtons&&0===s?5:0,i[a]=new u.toolbox.Symbol(p.standardCalculatedPeriods[a].multipliers[s]+p.standardCalculatedPeriods[a].abbreviation,!0,{paper:u.graphics.paper,chart:u.chart,smartLabel:u.smartLabel,chartContainer:u.graphics.container},{fill:"#ffffff",labelFill:"#696969",symbolStrokeWidth:"2",stroke:"#ced5d4",strokeWidth:"1",hoverFill:"#ced5d4",height:22,radius:1,margin:{right:d},btnTextStyle:{fontFamily:'"Lucida Grande", sans-serif',fontSize:"13",fill:"#696969","line-height":"1","letter-spacing":"-0.04em"}}).attachEventHandlers({click:function(){n=p.standardCalculatedPeriods[a].multipliers[s]*p.standardCalculatedPeriods[a].milliseconds,p.clickedId=p.standardCalculatedPeriods[a].multipliers[s]+p.standardCalculatedPeriods[a].abbreviation,p.setActivePeriod(n),e.dispose(),p.toolbars.pop(),p.toolbars.push(p.createToolbar()),p.getLogicalSpace(),p.draw()},tooltext:p.standardCalculatedPeriods[a].multipliers[s]+" "+p.standardCalculatedPeriods[a].description}),t.addSymbol(i[a])},r=o;r>=0;r--)s(r)},b=p.startPointUnit;b>=0;b--)g(b);a=[];for(var f=function(i){a[i]=new u.toolbox.Symbol(u.standardContexualPeriods[i].abbreviation,!0,{paper:u.graphics.paper,chart:u.chart,smartLabel:u.smartLabel,chartContainer:u.graphics.container},{fill:"#ffffff",labelFill:"#696969",symbolStrokeWidth:"2",stroke:"#ced5d4",strokeWidth:"1",height:22,hoverFill:"#ced5d4",radius:1,margin:{right:0},btnTextStyle:{fontFamily:'"Lucida Grande", sans-serif',fontSize:"13",fill:"#696969","line-height":"1","letter-spacing":"-0.04em"}}).attachEventHandlers({click:function(){p.setActivePeriod(p.standardContexualPeriods[i].dateStart,p.standardContexualPeriods[i].dateEnd),p.clickedId=p.standardContexualPeriods[i].abbreviation,e.dispose(),p.toolbars.pop(),p.toolbars.push(p.createToolbar()),p.getLogicalSpace(),p.draw()},tooltext:u.standardContexualPeriods[i].description}),t.addSymbol(a[i])},v=0;v<this.standardContexualPeriods.length;v++)f(v);return this.SymbolStore.register("textBoxIcon",function(t,e,i,a,s,o,n){var r=t-a/2+o/2,l=t+a/2-o/2,d=e-s/2+n/2,c=e+s/2-n/2;return["M",r,d,"L",l,d,"L",l,c,"L",r,c,"Z"]}),e.addComponent(h),e.addComponent(t),this.toolbar=e,e}},{key:"getLogicalSpace",value:function(){var t,e,i,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._pWidth,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._pHeight,o=420,n=0;for(e=0,i=this.toolbars.length;e<i;e++)t=this.toolbars[e].getLogicalSpace(a,s),n+=t.height,this.toolbars[e].width=t.width,this.toolbars[e].height=t.height;return n+=this.padding,{width:o,height:n}}},{key:"getDefaultGroup",value:function(){return this.parentGroup}},{key:"placeInCanvas",value:function(){var t=this;t.padding=5,t.spaceManagerInstance.add([{name:function(){return"standard-period-selector-ext"},ref:function(t){return t[0]},self:function(){return t},priority:function(){return 2},layout:function(t){return t.inline},orientation:[{type:function(t){return t.horizontal},position:[{type:function(t){return t.top},alignment:[{type:function(t){return t.left},dimensions:[function(){var e=this.getParentComponentGroup();return t._ref=this,t.getLogicalSpace(t._pWidth=e.getWidth(),t._pHeight=e.getHeight())}]}]}]}]}])}},{key:"setDrawingConfiguration",value:function(t,e,i,a,s){var o=this.measurement;return o.x=t,o.y=e,o.width=i,o.height=a,this.parentGroup=s,this}},{key:"draw",value:function(t,e,i,a,s){var o,n,r,l,d,c,h,u,p,m=this.measurement,g=this.toolbars;this.globalReactiveModel;if(this.flag=!0,p=this.saveSelectLine||this.graphics.paper.path({stroke:"#c95a5a","stroke-width":"2px"}).toFront(),t=void 0===t?m.x:t,e=void 0===e?m.y:e,i=void 0===i?m.width:i,a=void 0===a?m.height:a,s=void 0===s?this.parentGroup:s,i&&a)for(n=0,o=g.length;n<o;n++)r=g[n],r.draw(t,e,s);this.saveSelectLine=p;for(var b=0,f=g[0].componentGroups[1].symbolList;b<f.length;b++)f[b].symbol===this.clickedId&&(l=f[b].getBoundElement(),d=l.getBBox(),c=d.x,h=d.x2,u=d.y2,p.attr({path:["M",c-.5,u-.5,"L",h+.5,u-.5]}))}}]),t}();return e}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3RhbmRhcmQtcGVyaW9kLXNlbGVjdG9yLWVzNS5taW4uanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svYm9vdHN0cmFwIDVhZTAxMDhiYjA4MjY2Y2M5YmRiIiwid2VicGFjazovLy8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL2J1aWxkaW4vbW9kdWxlLmpzIiwid2VicGFjazovLy8uL3NyYy9zdGFuZGFyZC1wZXJpb2Qtc2VsZWN0b3IuanMiXSwibmFtZXMiOlsibW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImluc3RhbGxlZE1vZHVsZXMiLCJleHBvcnRzIiwibW9kdWxlIiwiaWQiLCJsb2FkZWQiLCJjYWxsIiwibSIsImMiLCJwIiwiX3R5cGVvZiIsIlN5bWJvbCIsIml0ZXJhdG9yIiwib2JqIiwiY29uc3RydWN0b3IiLCJwcm90b3R5cGUiLCJTdGFuZGFyZFBlcmlvZFNlbGVjdG9yIiwid2luZG93Iiwic3RQUyIsImVudiIsImZhY3RvcnkiLCJkb2N1bWVudCIsIndpbiIsIkVycm9yIiwidW5kZWZpbmVkIiwiX3dpbmRvdyIsIndpbmRvd0V4aXN0cyIsIkZDIiwiRnVzaW9uQ2hhcnRzIiwicmVnaXN0ZXIiLCJyZWdpc3RlckNvbXBvbmVudCIsIndlYnBhY2tQb2x5ZmlsbCIsImRlcHJlY2F0ZSIsInBhdGhzIiwiY2hpbGRyZW4iLCJfY2xhc3NDYWxsQ2hlY2siLCJpbnN0YW5jZSIsIkNvbnN0cnVjdG9yIiwiVHlwZUVycm9yIiwiX2NyZWF0ZUNsYXNzIiwiZGVmaW5lUHJvcGVydGllcyIsInRhcmdldCIsInByb3BzIiwiaSIsImxlbmd0aCIsImRlc2NyaXB0b3IiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImtleSIsInByb3RvUHJvcHMiLCJzdGF0aWNQcm9wcyIsImRlcCIsInRoaXMiLCJyYXRpbyIsInRvb2xib3giLCJnZXRDb21wb25lbnQiLCJIb3Jpem9udGFsVG9vbGJhciIsIkNvbXBvbmVudEdyb3VwIiwiU3ltYm9sU3RvcmUiLCJhbGwiLCJjYWxjdWxhdGVkUGVyaW9kcyIsInN0YXJ0RGF0YXNldCIsInN0YXJ0QWN0aXZlV2luZG93IiwiZW5kQWN0aXZlV2luZG93Iiwic3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kcyIsInN0YW5kYXJkQ29udGV4dWFsUGVyaW9kcyIsInN0YXJ0UG9pbnRVbml0Iiwic3RhcnRQb2ludE11bHRpcGxpZXIiLCJjbGlja2VkSWQiLCJub0NhbGNCdXR0b25zIiwidGltZVBlcmlvZHMiLCJuYW1lIiwibWlsbGlzZWNvbmRzIiwic3RhcnRpbmdQb2ludCIsInRvdGFsIiwiYWJicmV2aWF0aW9uIiwiZGVzY3JpcHRpb24iLCJwYXJlbnQiLCJtdWx0aXBsaWVycyIsInRkQnV0dG9ucyIsIm11bHRpcGxpZXIiLCJjb25maWciLCJhbmNob3JQb3NpdGlvbnMiLCJjb250ZXh0dWFsIiwiY2FsY3VsYXRlZCIsInRlcnRpYXJ5VGltZVBlcmlvZHMiLCJ2YWx1ZSIsInRhcmdldEJsb2NrIiwiaiIsImFjdGl2ZVdpbmRvdyIsImNvdW50IiwiTWF0aCIsImZsb29yIiwicHVzaCIsIkluZmluaXR5IiwiYnV0dG9ucyIsImVuZFN0YW1wIiwiZ2xvYmFsUmVhY3RpdmVNb2RlbCIsIm1vZGVsIiwiZGF0ZVN0YXJ0IiwiZGF0ZUVuZCIsInJlbGF0aXZlVERCdXR0b24iLCJEYXRlIiwic2V0TW9udGgiLCJzZXREYXRlIiwic2V0SG91cnMiLCJzZXRNaW51dGVzIiwic2V0U2Vjb25kcyIsImdldE1vbnRoIiwiZ2V0RGF0ZSIsImdldERheSIsInZhbHVlT2YiLCJhYnMiLCJzdGFydCIsImVuZCIsInBlcmZvcm1hbmNlIiwibm93IiwiYXJndW1lbnRzIiwiZ2VuZXJhdGVDYWxjdWxhdGVkQnV0dG9ucyIsImdlbmVyYXRlQ29udGV4dHVhbEJ1dHRvbnMiLCJyZXF1aXJlIiwieEF4aXMiLCJ5QXhpcyIsImdyYXBoaWNzIiwiY2hhcnQiLCJkYXRhc2V0IiwicGxvdE1hbmFnZXIiLCJjYW52YXNDb25maWciLCJtYXJrZXJNYW5hZ2VyIiwicmVhY3RpdmVNb2RlbCIsInNwYWNlTWFuYWdlckluc3RhbmNlIiwic21hcnRMYWJlbCIsImV4dERhdGEiLCJjaGFydEluc3RhbmNlIiwiZW5kRGF0YXNldCIsInNldEFjdGl2ZVBlcmlvZCIsInRpbWVSdWxlcyIsImFwaUluc3RhbmNlIiwiZ2V0Q29tcG9uZW50U3RvcmUiLCJnZXRDYW52YXNCeUluZGV4IiwiY29tcG9zaXRpb24iLCJpbXBsIiwiZ2V0RGF0YUFnZ3JlZ2F0b3IiLCJnZXRBZ2dyZWdhdGlvblRpbWVSdWxlcyIsInRvb2xiYXJzIiwibWVhc3VyZW1lbnQiLCJmbGFnIiwiY3JlYXRlVG9vbGJhciIsIm9uUHJvcHNDaGFuZ2UiLCJ0ZW1wIiwidGVtcFRpbWUiLCJ0b29sYmFyIiwiZGlzcG9zZSIsInBvcCIsImdldExvZ2ljYWxTcGFjZSIsImRyYXciLCJ1bmlncm91cCIsImNhbGN1bGF0ZWRCdXR0b25zIiwiY29udGV4dHVhbEJ1dHRvbnMiLCJhbGxCdXR0b24iLCJzdGFydE11bHRpcGxpZXIiLCJkZWR1Y3RvciIsIm1hcmdpbiIsImZyb21EYXRlTGFiZWwiLCJncm91cCIsIl90aGlzIiwic2VsZiIsImRlZHVjdG9yQXIiLCJwYXBlciIsImNoYXJ0Q29udGFpbmVyIiwiY29udGFpbmVyIiwiVW5pU2VsZWN0Q29tcG9uZW50R3JvdXAiLCJzZXRDb25maWciLCJmaWxsIiwiYm9yZGVyVGhpY2tuZXNzIiwiTGFiZWwiLCJ0ZXh0Iiwic3R5bGUiLCJmb250LWZhbWlseSIsImZvbnQtc2l6ZSIsImZvbnQtd2VpZ2h0IiwiaGVpZ2h0IiwiYWRkU3ltYm9sIiwibGFiZWxGaWxsIiwic3ltYm9sU3Ryb2tlV2lkdGgiLCJzdHJva2UiLCJzdHJva2VXaWR0aCIsImhvdmVyRmlsbCIsInJhZGl1cyIsInJpZ2h0IiwiYnRuVGV4dFN0eWxlIiwiZm9udEZhbWlseSIsImZvbnRTaXplIiwibGluZS1oZWlnaHQiLCJsZXR0ZXItc3BhY2luZyIsImF0dGFjaEV2ZW50SGFuZGxlcnMiLCJjbGljayIsInRvb2x0ZXh0IiwiX2xvb3AiLCJfbG9vcDMiLCJfbG9vcDIiLCJ4IiwieSIsInJhZCIsInciLCJoIiwicGFkWCIsInBhZFkiLCJ4MSIsIngyIiwieTEiLCJ5MiIsImFkZENvbXBvbmVudCIsImxvZ2ljYWxTcGFjZSIsImxuIiwiYXZhaWxhYmxlV2lkdGgiLCJfcFdpZHRoIiwiYXZhaWxhYmxlSGVpZ2h0IiwiX3BIZWlnaHQiLCJ3aWR0aCIsInBhZGRpbmciLCJwYXJlbnRHcm91cCIsImFkZCIsInJlZiIsInByaW9yaXR5IiwibGF5b3V0IiwiaW5saW5lIiwib3JpZW50YXRpb24iLCJ0eXBlIiwiaG9yaXpvbnRhbCIsInBvc2l0aW9uIiwidG9wIiwiYWxpZ25tZW50IiwibGVmdCIsImRpbWVuc2lvbnMiLCJnZXRQYXJlbnRDb21wb25lbnRHcm91cCIsIl9yZWYiLCJnZXRXaWR0aCIsImdldEhlaWdodCIsIm1lcyIsImJvdW5kRWxlbWVudCIsImJCb3giLCJzZWxlY3RMaW5lIiwic2F2ZVNlbGVjdExpbmUiLCJwYXRoIiwic3Ryb2tlLXdpZHRoIiwidG9Gcm9udCIsImlpIiwiY29tcG9uZW50R3JvdXBzIiwic3ltYm9sTGlzdCIsInN5bWJvbCIsImdldEJvdW5kRWxlbWVudCIsImdldEJCb3giLCJhdHRyIl0sIm1hcHBpbmdzIjoiQ0FBUyxTQUFVQSxHQ0luQixRQUFBQyxHQUFBQyxHQUdBLEdBQUFDLEVBQUFELEdBQ0EsTUFBQUMsR0FBQUQsR0FBQUUsT0FHQSxJQUFBQyxHQUFBRixFQUFBRCxJQUNBRSxXQUNBRSxHQUFBSixFQUNBSyxRQUFBLEVBVUEsT0FOQVAsR0FBQUUsR0FBQU0sS0FBQUgsRUFBQUQsUUFBQUMsSUFBQUQsUUFBQUgsR0FHQUksRUFBQUUsUUFBQSxFQUdBRixFQUFBRCxRQXZCQSxHQUFBRCxLQXFDQSxPQVRBRixHQUFBUSxFQUFBVCxFQUdBQyxFQUFBUyxF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QUFzQjFFLEVBQVkwRSxNQUFRQSxFQUNsRHRDLEVBQW9CaEssU0FBWGdLLEVBQXVCcEMsRUFBWW9DLE9BQVNBLEVBQ3JEakIsRUFBa0IvSSxTQUFWK0ksRUFBc0JoSCxLQUFLeUssWUFBY3pELEVBQzdDdUQsR0FBU3RDLEVBQ1gsSUFBSzdJLEVBQUksRUFBRzhLLEVBQUt0RSxFQUFTdkcsT0FBUUQsRUFBSThLLEVBQUk5SyxJQUN4QytHLEVBQVVQLEVBQVN4RyxHQUNuQitHLEVBQVFJLEtBQUs4QyxFQUFHQyxFQUFHdEMsRUFHdkJoSCxNQUFLK0wsZUFBaUJELENBRXRCLEtBQUssR0FBSTFNLEdBQUksRUFBRytNLEVBQUt2RyxFQUFTLEdBQUd3RyxnQkFBZ0IsR0FBR0MsV0FBWWpOLEVBQUkrTSxFQUFHOU0sT0FBUUQsSUFDekUrTSxFQUFHL00sR0FBR2tOLFNBQVd0TSxLQUFLZ0IsWUFDeEI0SyxFQUFlTyxFQUFHL00sR0FBR21OLGtCQUNyQlYsRUFBT0QsRUFBYVksVUFDcEI1QyxFQUFLaUMsRUFBS3hDLEVBQ1ZRLEVBQUtnQyxFQUFLaEMsR0FDVkUsRUFBSzhCLEVBQUs5QixHQUVWK0IsRUFBV1csTUFDVFQsTUFBTyxJQUFLcEMsRUFBSyxHQUFLRyxFQUFLLEdBQUssSUFBS0YsRUFBSyxHQUFLRSxFQUFLLFdBdHVCaEN0TSxJQTR1QjlCLE9BQU9BIiwiZmlsZSI6InN0YW5kYXJkLXBlcmlvZC1zZWxlY3Rvci1lczUubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqKioqKi8gKGZ1bmN0aW9uKG1vZHVsZXMpIHsgLy8gd2VicGFja0Jvb3RzdHJhcFxuLyoqKioqKi8gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuLyoqKioqKi8gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuLyoqKioqKi8gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuLyoqKioqKi8gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4vKioqKioqLyBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuLyoqKioqKi8gXHRcdFx0ZXhwb3J0czoge30sXG4vKioqKioqLyBcdFx0XHRpZDogbW9kdWxlSWQsXG4vKioqKioqLyBcdFx0XHRsb2FkZWQ6IGZhbHNlXG4vKioqKioqLyBcdFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4vKioqKioqLyBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbi8qKioqKiovIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbi8qKioqKiovIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4vKioqKioqLyBcdH1cbi8qKioqKiovXG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8qKioqKiovIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMCk7XG4vKioqKioqLyB9KVxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKioqKiovIChbXG4vKiAwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24obW9kdWxlKSB7J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXHRcblx0dmFyIFN0YW5kYXJkUGVyaW9kU2VsZWN0b3IgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHRcblx0d2luZG93LnN0UFMgPSBuZXcgU3RhbmRhcmRQZXJpb2RTZWxlY3RvcigpO1xuXHRcblx0OyhmdW5jdGlvbiAoZW52LCBmYWN0b3J5KSB7XG5cdCAgaWYgKCggZmFsc2UgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YobW9kdWxlKSkgPT09ICdvYmplY3QnICYmIG1vZHVsZS5leHBvcnRzKSB7XG5cdCAgICBtb2R1bGUuZXhwb3J0cyA9IGVudi5kb2N1bWVudCA/IGZhY3RvcnkoZW52KSA6IGZ1bmN0aW9uICh3aW4pIHtcblx0ICAgICAgaWYgKCF3aW4uZG9jdW1lbnQpIHtcblx0ICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1dpbmRvdyB3aXRoIGRvY3VtZW50IG5vdCBwcmVzZW50Jyk7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIGZhY3Rvcnkod2luLCB0cnVlKTtcblx0ICAgIH07XG5cdCAgfSBlbHNlIHtcblx0ICAgIGVudi5TdGFuZGFyZFBlcmlvZFNlbGVjdG9yID0gZmFjdG9yeShlbnYsIHRydWUpO1xuXHQgIH1cblx0fSkodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cgOiB1bmRlZmluZWQsIGZ1bmN0aW9uIChfd2luZG93LCB3aW5kb3dFeGlzdHMpIHtcblx0ICB2YXIgRkMgPSBfd2luZG93LkZ1c2lvbkNoYXJ0cztcblx0ICBGQy5yZWdpc3RlcignZXh0ZW5zaW9uJywgWydwcml2YXRlJywgJ1N0YW5kYXJkUGVyaW9kU2VsZWN0b3InLCBmdW5jdGlvbiAoKSB7XG5cdCAgICBGQy5yZWdpc3RlckNvbXBvbmVudCgnZXh0ZW5zaW9ucycsICdTdGFuZGFyZFBlcmlvZFNlbGVjdG9yJywgU3RhbmRhcmRQZXJpb2RTZWxlY3Rvcih7IEZ1c2lvbkNoYXJ0czogRkMgfSkpO1xuXHQgIH1dKTtcblx0fSk7XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpKG1vZHVsZSkpKVxuXG4vKioqLyB9LFxuLyogMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihtb2R1bGUpIHtcblx0XHRpZighbW9kdWxlLndlYnBhY2tQb2x5ZmlsbCkge1xuXHRcdFx0bW9kdWxlLmRlcHJlY2F0ZSA9IGZ1bmN0aW9uKCkge307XG5cdFx0XHRtb2R1bGUucGF0aHMgPSBbXTtcblx0XHRcdC8vIG1vZHVsZS5wYXJlbnQgPSB1bmRlZmluZWQgYnkgZGVmYXVsdFxuXHRcdFx0bW9kdWxlLmNoaWxkcmVuID0gW107XG5cdFx0XHRtb2R1bGUud2VicGFja1BvbHlmaWxsID0gMTtcblx0XHR9XG5cdFx0cmV0dXJuIG1vZHVsZTtcblx0fVxuXG5cbi8qKiovIH0sXG4vKiAyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHQvKipcblx0ICogQ2xhc3MgZGVmaW5pdGlvbiBvZiBTdGFuZGFyZFBlcmlvZFNlbGVjdG9yXG5cdCAqL1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChkZXApIHtcblx0ICB2YXIgU3RhbmRhcmRQZXJpb2RTZWxlY3RvciA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIFN0YW5kYXJkUGVyaW9kU2VsZWN0b3IoKSB7XG5cdCAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTdGFuZGFyZFBlcmlvZFNlbGVjdG9yKTtcblx0XG5cdCAgICAgIC8qKlxuXHQgICAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICAgKi9cblx0ICAgICAgdGhpcy5yYXRpbyA9IDg7XG5cdCAgICAgIHRoaXMudG9vbGJveCA9IEZ1c2lvbkNoYXJ0cy5nZXRDb21wb25lbnQoJ2FwaScsICd0b29sYm94Jyk7XG5cdCAgICAgIHRoaXMuSG9yaXpvbnRhbFRvb2xiYXIgPSB0aGlzLnRvb2xib3guSG9yaXpvbnRhbFRvb2xiYXI7XG5cdCAgICAgIHRoaXMuQ29tcG9uZW50R3JvdXAgPSB0aGlzLnRvb2xib3guQ29tcG9uZW50R3JvdXA7XG5cdCAgICAgIHRoaXMuU3ltYm9sU3RvcmUgPSB0aGlzLnRvb2xib3guU3ltYm9sU3RvcmU7XG5cdCAgICAgIHRoaXMuYWxsID0gMTtcblx0ICAgICAgdGhpcy5jYWxjdWxhdGVkUGVyaW9kcyA9IFtdO1xuXHQgICAgICB0aGlzLnN0YXJ0RGF0YXNldCA9IDA7XG5cdCAgICAgIC8vIHRoaXMuZW5kRGF0YXNldCA9IHRoaXMuZ2xvYmFsUmVhY3RpdmVNb2RlbC5tb2RlbFsneC1heGlzLWFic29sdXRlLXJhbmdlLWVuZCddO1xuXHQgICAgICB0aGlzLnN0YXJ0QWN0aXZlV2luZG93ID0gMDtcblx0ICAgICAgdGhpcy5lbmRBY3RpdmVXaW5kb3cgPSAxO1xuXHQgICAgICB0aGlzLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHMgPSBbXTtcblx0ICAgICAgdGhpcy5zdGFuZGFyZENvbnRleHVhbFBlcmlvZHMgPSBbXTtcblx0ICAgICAgdGhpcy5zdGFydFBvaW50VW5pdCA9IDA7XG5cdCAgICAgIHRoaXMuc3RhcnRQb2ludE11bHRpcGxpZXIgPSAwO1xuXHQgICAgICB0aGlzLmNsaWNrZWRJZCA9ICdBTEwnO1xuXHQgICAgICB0aGlzLm5vQ2FsY0J1dHRvbnMgPSAwO1xuXHQgICAgICB0aGlzLnRpbWVQZXJpb2RzID0gW3tcblx0ICAgICAgICAnbmFtZSc6ICdzZWNvbmQnLFxuXHQgICAgICAgICdtaWxsaXNlY29uZHMnOiAxMDAwLFxuXHQgICAgICAgICdzdGFydGluZ1BvaW50JzogMCxcblx0ICAgICAgICAndG90YWwnOiA2MCxcblx0ICAgICAgICAnYWJicmV2aWF0aW9uJzogJ3MnLFxuXHQgICAgICAgICdkZXNjcmlwdGlvbic6ICdTRUNPTkQnLFxuXHQgICAgICAgICdwYXJlbnQnOiAnbWludXRlJyxcblx0ICAgICAgICAnbXVsdGlwbGllcnMnOiBbMSwgNSwgMTUsIDMwXVxuXHQgICAgICB9LCB7XG5cdCAgICAgICAgJ25hbWUnOiAnbWludXRlJyxcblx0ICAgICAgICAnbWlsbGlzZWNvbmRzJzogNjAwMDAsXG5cdCAgICAgICAgJ3N0YXJ0aW5nUG9pbnQnOiAwLFxuXHQgICAgICAgICd0b3RhbCc6IDYwLFxuXHQgICAgICAgICdhYmJyZXZpYXRpb24nOiAnbScsXG5cdCAgICAgICAgJ2Rlc2NyaXB0aW9uJzogJ01JTlVURScsXG5cdCAgICAgICAgJ3BhcmVudCc6ICdob3VyJyxcblx0ICAgICAgICAnbXVsdGlwbGllcnMnOiBbMSwgNSwgMTUsIDMwXVxuXHQgICAgICB9LCB7XG5cdCAgICAgICAgJ25hbWUnOiAnaG91cicsXG5cdCAgICAgICAgJ21pbGxpc2Vjb25kcyc6IDM2MDAwMDAsXG5cdCAgICAgICAgJ3N0YXJ0aW5nUG9pbnQnOiAwLFxuXHQgICAgICAgICd0b3RhbCc6IDI0LFxuXHQgICAgICAgICdhYmJyZXZpYXRpb24nOiAnaCcsXG5cdCAgICAgICAgJ2Rlc2NyaXB0aW9uJzogJ0hPVVInLFxuXHQgICAgICAgICdwYXJlbnQnOiAnZGF5Jyxcblx0ICAgICAgICAnbXVsdGlwbGllcnMnOiBbMSwgMywgNiwgMTJdXG5cdCAgICAgIH0sIHtcblx0ICAgICAgICAnbmFtZSc6ICdkYXknLFxuXHQgICAgICAgICdtaWxsaXNlY29uZHMnOiA4NjQwMDAwMCxcblx0ICAgICAgICAnc3RhcnRpbmdQb2ludCc6IDAsXG5cdCAgICAgICAgJ3RvdGFsJzogMzAsXG5cdCAgICAgICAgJ2FiYnJldmlhdGlvbic6ICdEJyxcblx0ICAgICAgICAnZGVzY3JpcHRpb24nOiAnREFZJyxcblx0ICAgICAgICAncGFyZW50JzogJ21vbnRoJyxcblx0ICAgICAgICAnbXVsdGlwbGllcnMnOiBbMSwgNywgMTVdXG5cdCAgICAgIH0sIHtcblx0ICAgICAgICAnbmFtZSc6ICdtb250aCcsXG5cdCAgICAgICAgJ21pbGxpc2Vjb25kcyc6IDI1OTIwMDAwMDAsXG5cdCAgICAgICAgJ3N0YXJ0aW5nUG9pbnQnOiAwLFxuXHQgICAgICAgICd0b3RhbCc6IDEyLFxuXHQgICAgICAgICdhYmJyZXZpYXRpb24nOiAnTScsXG5cdCAgICAgICAgJ2Rlc2NyaXB0aW9uJzogJ01PTlRIJyxcblx0ICAgICAgICAncGFyZW50JzogJ3llYXInLFxuXHQgICAgICAgICdtdWx0aXBsaWVycyc6IFsxLCAzLCA2XVxuXHQgICAgICB9LCB7XG5cdCAgICAgICAgJ25hbWUnOiAneWVhcicsXG5cdCAgICAgICAgJ21pbGxpc2Vjb25kcyc6IDMxMTA0MDAwMDAwLFxuXHQgICAgICAgICdzdGFydGluZ1BvaW50JzogMCxcblx0ICAgICAgICAnYWJicmV2aWF0aW9uJzogJ1knLFxuXHQgICAgICAgICdkZXNjcmlwdGlvbic6ICdZRUFSJyxcblx0ICAgICAgICAnbXVsdGlwbGllcnMnOiBbMV1cblx0ICAgICAgfV07XG5cdCAgICAgIHRoaXMudGRCdXR0b25zID0gW3tcblx0ICAgICAgICAnbmFtZSc6ICdZVEQnLFxuXHQgICAgICAgICdhYmJyZXZpYXRpb24nOiAnWVREJyxcblx0ICAgICAgICAncGFyZW50JzogJ3llYXInLFxuXHQgICAgICAgICdtaWxsaXNlY29uZHMnOiAzMTEwNDAwMDAwMCxcblx0ICAgICAgICAnZGVzY3JpcHRpb24nOiAnWWVhciB0byBEYXRlJ1xuXHQgICAgICB9LCB7XG5cdCAgICAgICAgJ25hbWUnOiAnUVREJyxcblx0ICAgICAgICAnYWJicmV2aWF0aW9uJzogJ1FURCcsXG5cdCAgICAgICAgJ3BhcmVudCc6ICdtb250aCcsXG5cdCAgICAgICAgJ211bHRpcGxpZXInOiAzLFxuXHQgICAgICAgICdtaWxsaXNlY29uZHMnOiA3Nzc2MDAwMDAwLFxuXHQgICAgICAgICdkZXNjcmlwdGlvbic6ICdRdWFydGVyIHRvIERhdGUnXG5cdCAgICAgIH0sIHtcblx0ICAgICAgICAnbmFtZSc6ICdNVEQnLFxuXHQgICAgICAgICdhYmJyZXZpYXRpb24nOiAnTVREJyxcblx0ICAgICAgICAncGFyZW50JzogJ21vbnRoJyxcblx0ICAgICAgICAnbWlsbGlzZWNvbmRzJzogMjU5MjAwMDAwMCxcblx0ICAgICAgICAnZGVzY3JpcHRpb24nOiAnTW9udGggdG8gRGF0ZSdcblx0ICAgICAgfSwge1xuXHQgICAgICAgICduYW1lJzogJ1dURCcsXG5cdCAgICAgICAgJ2FiYnJldmlhdGlvbic6ICdXVEQnLFxuXHQgICAgICAgICdwYXJlbnQnOiAnZGF5Jyxcblx0ICAgICAgICAnbXVsdGlwbGllcic6IDcsXG5cdCAgICAgICAgJ21pbGxpc2Vjb25kcyc6IDYwNDgwMDAwMCxcblx0ICAgICAgICAnZGVzY3JpcHRpb24nOiAnV2VlayB0byBEYXRlJ1xuXHQgICAgICB9LCB7XG5cdCAgICAgICAgJ25hbWUnOiAnWScsXG5cdCAgICAgICAgJ2FiYnJldmlhdGlvbic6ICdZJyxcblx0ICAgICAgICAncGFyZW50JzogJ2RheScsXG5cdCAgICAgICAgJ21pbGxpc2Vjb25kcyc6IDg2NDAwMDAwLFxuXHQgICAgICAgICdkZXNjcmlwdGlvbic6ICdZZXN0ZXJkYXknXG5cdCAgICAgIH0sIHtcblx0ICAgICAgICAnbmFtZSc6ICdUJyxcblx0ICAgICAgICAnYWJicmV2aWF0aW9uJzogJ1QnLFxuXHQgICAgICAgICdwYXJlbnQnOiAnZGF5Jyxcblx0ICAgICAgICAnbWlsbGlzZWNvbmRzJzogODY0MDAwMDAsXG5cdCAgICAgICAgJ2Rlc2NyaXB0aW9uJzogJ1RvZGF5J1xuXHQgICAgICB9XTtcblx0ICAgICAgdGhpcy5jb25maWcgPSB7XG5cdCAgICAgICAgYW5jaG9yUG9zaXRpb25zOiAncmlnaHQnLFxuXHQgICAgICAgIGFsbDogJzEnLFxuXHQgICAgICAgIGNvbnRleHR1YWw6ICcxJyxcblx0ICAgICAgICBjYWxjdWxhdGVkOiAnMScsXG5cdCAgICAgICAgdGVydGlhcnlUaW1lUGVyaW9kczoge31cblx0ICAgICAgfTtcblx0ICAgIH1cblx0XG5cdCAgICAvKipcblx0ICAgICAqIEEgZnVuY3Rpb24gdG8gZ2VuZXJhdGUgdGhlIGNhbGN1bGF0ZWQgYnV0dG9ucyB1c2luZ1xuXHQgICAgICogdGhlIGFjdGl2ZSByYW5nZSBhbmQgdGhlIGxvY2F0aW9uIG9mIHRoZSBhY3RpdmUgcmFuZ2Vcblx0ICAgICAqL1xuXHRcblx0XG5cdCAgICBfY3JlYXRlQ2xhc3MoU3RhbmRhcmRQZXJpb2RTZWxlY3RvciwgW3tcblx0ICAgICAga2V5OiAnZ2VuZXJhdGVDYWxjdWxhdGVkQnV0dG9ucycsXG5cdCAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZW5lcmF0ZUNhbGN1bGF0ZWRCdXR0b25zKCkge1xuXHQgICAgICAgIHZhciB0YXJnZXRCbG9jayA9IHRoaXMuZW5kQWN0aXZlV2luZG93IC0gdGhpcy5zdGFydERhdGFzZXQsXG5cdCAgICAgICAgICAgIGkgPSAwLFxuXHQgICAgICAgICAgICBqID0gMCxcblx0ICAgICAgICAgICAgYWN0aXZlV2luZG93ID0gdGhpcy5lbmRBY3RpdmVXaW5kb3cgLSB0aGlzLnN0YXJ0QWN0aXZlV2luZG93LFxuXHQgICAgICAgICAgICBjb3VudCA9IDA7XG5cdCAgICAgICAgdGhpcy5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzID0gW107XG5cdCAgICAgICAgZm9yIChpID0gMDsgaSA8IHRoaXMudGltZVBlcmlvZHMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICAgIC8vIGNoZWNraW5nIHdoZXRoZXIgdGhlIHVuaXQgaXMgYXBwbGljYWJsZSBmb3IgdGhlIGN1cnJlbnQgdGFyZ2V0IGJsb2NrXG5cdCAgICAgICAgICBpZiAodGFyZ2V0QmxvY2sgLyB0aGlzLnRpbWVQZXJpb2RzW2ldLm1pbGxpc2Vjb25kcyA+PSAxKSB7XG5cdCAgICAgICAgICAgIC8vIGNoZWNraW5nIHdoZXRoZXIgdGhlIHVuaXQgaXMgb2YgdGhlIGhpZ2hlciBvcmRlciBhbmQgb25seSBtdWx0aXBsaWVyIDEgaXMgYXBwbGljYWJsZVxuXHQgICAgICAgICAgICBpZiAoTWF0aC5mbG9vcihhY3RpdmVXaW5kb3cgLyB0aGlzLnRpbWVQZXJpb2RzW2ldLm1pbGxpc2Vjb25kcykgPCAxKSB7XG5cdCAgICAgICAgICAgICAgdGhpcy5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzLnB1c2goe1xuXHQgICAgICAgICAgICAgICAgJ2FiYnJldmlhdGlvbic6IHRoaXMudGltZVBlcmlvZHNbaV0uYWJicmV2aWF0aW9uLFxuXHQgICAgICAgICAgICAgICAgJ2Rlc2NyaXB0aW9uJzogdGhpcy50aW1lUGVyaW9kc1tpXS5kZXNjcmlwdGlvbixcblx0ICAgICAgICAgICAgICAgICdtaWxsaXNlY29uZHMnOiB0aGlzLnRpbWVQZXJpb2RzW2ldLm1pbGxpc2Vjb25kcyxcblx0ICAgICAgICAgICAgICAgICduYW1lJzogdGhpcy50aW1lUGVyaW9kc1tpXS5uYW1lLFxuXHQgICAgICAgICAgICAgICAgJ211bHRpcGxpZXJzJzogWzFdXG5cdCAgICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgLy8gaWYgdGhlIHVuaXQgaXMgb2YgdGhlIG9yZGVyIG9mIHRoZSB0YXJnZXQgYmxvY2sgYW5kIGNhbGN1bGF0aW5nIHRoZSBtdWx0aXBsaWVyc1xuXHQgICAgICAgICAgICAgIHRoaXMuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kcy5wdXNoKHtcblx0ICAgICAgICAgICAgICAgICdhYmJyZXZpYXRpb24nOiB0aGlzLnRpbWVQZXJpb2RzW2ldLmFiYnJldmlhdGlvbixcblx0ICAgICAgICAgICAgICAgICdkZXNjcmlwdGlvbic6IHRoaXMudGltZVBlcmlvZHNbaV0uZGVzY3JpcHRpb24sXG5cdCAgICAgICAgICAgICAgICAnbWlsbGlzZWNvbmRzJzogdGhpcy50aW1lUGVyaW9kc1tpXS5taWxsaXNlY29uZHMsXG5cdCAgICAgICAgICAgICAgICAnbmFtZSc6IHRoaXMudGltZVBlcmlvZHNbaV0ubmFtZSxcblx0ICAgICAgICAgICAgICAgICdtdWx0aXBsaWVycyc6IFtdXG5cdCAgICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgICAgLy8gY2FsY3VsYXRpbmcgYW5kIHBvcHVsYXRpbmcgdGhlIGFwcGxpY2FibGUgbXVsdHBsaWVycyBvZiBlYWNoIHVuaXRcblx0ICAgICAgICAgICAgICBmb3IgKGogPSAwOyBqIDwgdGhpcy50aW1lUGVyaW9kc1tpXS5tdWx0aXBsaWVycy5sZW5ndGg7IGorKykge1xuXHQgICAgICAgICAgICAgICAgaWYgKGFjdGl2ZVdpbmRvdyAvIHRoaXMucmF0aW8gPCB0aGlzLnRpbWVQZXJpb2RzW2ldLm11bHRpcGxpZXJzW2pdICogdGhpcy50aW1lUGVyaW9kc1tpXS5taWxsaXNlY29uZHMpIHtcblx0ICAgICAgICAgICAgICAgICAgdGhpcy5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW3RoaXMuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kcy5sZW5ndGggLSAxXS5tdWx0aXBsaWVycy5wdXNoKHRoaXMudGltZVBlcmlvZHNbaV0ubXVsdGlwbGllcnNbal0pO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLm5vQ2FsY0J1dHRvbnMgPSBJbmZpbml0eTtcblx0ICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgICBmb3IgKGogPSAwOyBqIDwgdGhpcy5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW2ldLm11bHRpcGxpZXJzLmxlbmd0aDsgaisrKSB7XG5cdCAgICAgICAgICAgICsrY291bnQ7XG5cdCAgICAgICAgICAgIGlmICh0aGlzLm5vQ2FsY0J1dHRvbnMgPiBpKSB7XG5cdCAgICAgICAgICAgICAgdGhpcy5ub0NhbGNCdXR0b25zID0gaTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBpZiAoY291bnQgPD0gNCkge1xuXHQgICAgICAgICAgICAgIHRoaXMuc3RhcnRQb2ludE11bHRpcGxpZXIgPSBqO1xuXHQgICAgICAgICAgICAgIHRoaXMuc3RhcnRQb2ludFVuaXQgPSBpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICAvLyB0aGlzLmRyYXdCdXR0b25zQ2FsY3VsYXRlZCh0aGlzLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHMpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICAvKipcblx0ICAgICAgICogQSBmdW5jdGlvbiB0byBnZW5lcmF0ZSB0aGUgY29udGV4dHVhbCBidXR0b25zIHVzaW5nXG5cdCAgICAgICAqIHRoZSBlbmQgcG9pbnQgb2YgdGhlIHRpbWUtc2NhbGVcblx0ICAgICAgICovXG5cdFxuXHQgICAgfSwge1xuXHQgICAgICBrZXk6ICdnZW5lcmF0ZUNvbnRleHR1YWxCdXR0b25zJyxcblx0ICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdlbmVyYXRlQ29udGV4dHVhbEJ1dHRvbnMoKSB7XG5cdCAgICAgICAgLy8gZ2VuZXJhdGluZyBhbiBhcnJheSB3aXRoIGFwcGxpY2FibGUgVEQgYnV0dG9uc1xuXHQgICAgICAgIHZhciBidXR0b25zID0gW10sXG5cdCAgICAgICAgICAgIGkgPSAwLFxuXHQgICAgICAgICAgICBlbmRTdGFtcCA9IHRoaXMuZ2xvYmFsUmVhY3RpdmVNb2RlbC5tb2RlbFsneC1heGlzLWFic29sdXRlLXJhbmdlLWVuZCddLFxuXHQgICAgICAgICAgICBkYXRlU3RhcnQgPSBlbmRTdGFtcCAtIDIsXG5cdCAgICAgICAgICAgIGRhdGVFbmQgPSBlbmRTdGFtcCxcblx0ICAgICAgICAgICAgcmVsYXRpdmVUREJ1dHRvbiA9IHt9O1xuXHQgICAgICAgIGZvciAoOyBpIDwgdGhpcy50ZEJ1dHRvbnMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICAgIGRhdGVTdGFydCA9IG5ldyBEYXRlKGVuZFN0YW1wKTtcblx0ICAgICAgICAgIGlmICh0aGlzLnRkQnV0dG9uc1tpXS5uYW1lID09PSAnWVREJykge1xuXHQgICAgICAgICAgICBkYXRlU3RhcnQuc2V0TW9udGgoMCk7XG5cdCAgICAgICAgICAgIGRhdGVTdGFydC5zZXREYXRlKDEpO1xuXHQgICAgICAgICAgICBkYXRlU3RhcnQuc2V0SG91cnMoMCk7XG5cdCAgICAgICAgICAgIGRhdGVTdGFydC5zZXRNaW51dGVzKDApO1xuXHQgICAgICAgICAgICBkYXRlU3RhcnQuc2V0U2Vjb25kcygwKTtcblx0ICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy50ZEJ1dHRvbnNbaV0ubmFtZSA9PT0gJ01URCcpIHtcblx0ICAgICAgICAgICAgZGF0ZVN0YXJ0LnNldERhdGUoMSk7XG5cdCAgICAgICAgICAgIGRhdGVTdGFydC5zZXRIb3VycygwKTtcblx0ICAgICAgICAgICAgZGF0ZVN0YXJ0LnNldE1pbnV0ZXMoMCk7XG5cdCAgICAgICAgICAgIGRhdGVTdGFydC5zZXRTZWNvbmRzKDApO1xuXHQgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnRkQnV0dG9uc1tpXS5uYW1lID09PSAnUVREJykge1xuXHQgICAgICAgICAgICBkYXRlU3RhcnQuc2V0TW9udGgoMTEgLSBkYXRlU3RhcnQuZ2V0TW9udGgoKSAlIDQpO1xuXHQgICAgICAgICAgICBkYXRlU3RhcnQuc2V0RGF0ZSgwKTtcblx0ICAgICAgICAgICAgZGF0ZVN0YXJ0LnNldEhvdXJzKDApO1xuXHQgICAgICAgICAgICBkYXRlU3RhcnQuc2V0TWludXRlcygwKTtcblx0ICAgICAgICAgICAgZGF0ZVN0YXJ0LnNldFNlY29uZHMoMCk7XG5cdCAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMudGRCdXR0b25zW2ldLm5hbWUgPT09ICdXVEQnKSB7XG5cdCAgICAgICAgICAgIGRhdGVTdGFydC5zZXREYXRlKGRhdGVTdGFydC5nZXREYXRlKCkgLSBkYXRlU3RhcnQuZ2V0RGF5KCkpO1xuXHQgICAgICAgICAgICBkYXRlU3RhcnQuc2V0SG91cnMoMCk7XG5cdCAgICAgICAgICAgIGRhdGVTdGFydC5zZXRNaW51dGVzKDApO1xuXHQgICAgICAgICAgICBkYXRlU3RhcnQuc2V0U2Vjb25kcygwKTtcblx0ICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy50ZEJ1dHRvbnNbaV0ubmFtZSA9PT0gJ1knKSB7XG5cdCAgICAgICAgICAgIGRhdGVTdGFydC5zZXRIb3VycygwKTtcblx0ICAgICAgICAgICAgZGF0ZVN0YXJ0LnNldE1pbnV0ZXMoMCk7XG5cdCAgICAgICAgICAgIGRhdGVTdGFydC5zZXRTZWNvbmRzKDApO1xuXHQgICAgICAgICAgICBkYXRlU3RhcnQgLT0gODY0MDAwMDA7XG5cdCAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMudGRCdXR0b25zW2ldLm5hbWUgPT09ICdUJykge1xuXHQgICAgICAgICAgICBkYXRlU3RhcnQuc2V0SG91cnMoMCk7XG5cdCAgICAgICAgICAgIGRhdGVTdGFydC5zZXRNaW51dGVzKDApO1xuXHQgICAgICAgICAgICBkYXRlU3RhcnQuc2V0U2Vjb25kcygwKTtcblx0ICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICBpZiAoZGF0ZUVuZCA8IGRhdGVTdGFydCkge1xuXHQgICAgICAgICAgICBjb250aW51ZTtcblx0ICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIHRoaXMudGRCdXR0b25zW2ldLmRhdGVTdGFydCA9IGRhdGVTdGFydC52YWx1ZU9mKCk7XG5cdCAgICAgICAgICAgIHRoaXMudGRCdXR0b25zW2ldLmRhdGVFbmQgPSBkYXRlRW5kLnZhbHVlT2YoKTtcblx0ICAgICAgICAgICAgYnV0dG9ucy5wdXNoKHRoaXMudGRCdXR0b25zW2ldKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgcmVsYXRpdmVUREJ1dHRvbi5taWxsaXNlY29uZHMgPSBJbmZpbml0eTtcblx0ICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy50ZEJ1dHRvbnMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICAgIGlmIChNYXRoLmFicyh0aGlzLnRkQnV0dG9uc1tpXS5taWxsaXNlY29uZHMgLSAodGhpcy5lbmRBY3RpdmVXaW5kb3cgLSB0aGlzLnN0YXJ0QWN0aXZlV2luZG93KSkgPCByZWxhdGl2ZVREQnV0dG9uLm1pbGxpc2Vjb25kcykge1xuXHQgICAgICAgICAgICByZWxhdGl2ZVREQnV0dG9uLm1pbGxpc2Vjb25kcyA9IHRoaXMudGRCdXR0b25zW2ldLm1pbGxpc2Vjb25kcztcblx0ICAgICAgICAgICAgcmVsYXRpdmVUREJ1dHRvbi5uYW1lID0gdGhpcy50ZEJ1dHRvbnNbaV0uYWJicmV2aWF0aW9uO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgdGhpcy5zdGFuZGFyZENvbnRleHVhbFBlcmlvZHMgPSBidXR0b25zO1xuXHQgICAgICAgIC8vIHRoaXMuZHJhd0J1dHRvbnNDb250ZXh0dWFsKHRoaXMuc3RhbmRhcmRDb250ZXh1YWxQZXJpb2RzKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgLyoqXG5cdCAgICAgICAqIEEgZnVuY3Rpb24gdG8gc2V0IHRoZSBhY3RpdmUgcGVyaW9kJ3Ncblx0ICAgICAgICogc3RhcnQgYW5kIGVuZCBwb2ludFxuXHQgICAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IGRhdGUgc3RhbXAgLSBBIFVOSVggdGltZXN0YW1wIHRvIGJlIHNldCBhcyB0aGUgc3RhcnQgcG9pbnQgb2YgYWN0aXZlIHBlcmlvZFxuXHQgICAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IGRhdGUgc3RhbXAgLSBBIFVOSVggdGltZXN0YW1wIHRvIGJlIHNldCBhcyB0aGUgZW5kIHBvaW50IG9mIGFjdGl2ZSBwZXJpb2Rcblx0ICAgICAgICovXG5cdFxuXHQgICAgfSwge1xuXHQgICAgICBrZXk6ICdzZXRBY3RpdmVQZXJpb2QnLFxuXHQgICAgICB2YWx1ZTogZnVuY3Rpb24gc2V0QWN0aXZlUGVyaW9kKCkge1xuXHQgICAgICAgIHZhciBzdGFydCxcblx0ICAgICAgICAgICAgZW5kLFxuXHQgICAgICAgICAgICB0ZW1wID0gd2luZG93LnBlcmZvcm1hbmNlLm5vdygpO1xuXHQgICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAxKSB7XG5cdCAgICAgICAgICBlbmQgPSB0aGlzLmdsb2JhbFJlYWN0aXZlTW9kZWwubW9kZWxbJ3gtYXhpcy12aXNpYmxlLXJhbmdlLWVuZCddO1xuXHQgICAgICAgICAgc3RhcnQgPSBlbmQgLSBhcmd1bWVudHNbMF07XG5cdCAgICAgICAgfSBlbHNlIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAyKSB7XG5cdCAgICAgICAgICBzdGFydCA9IGFyZ3VtZW50c1swXTtcblx0ICAgICAgICAgIGVuZCA9IGFyZ3VtZW50c1sxXTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdGhpcy5zdGFydEFjdGl2ZVdpbmRvdyA9IHN0YXJ0O1xuXHQgICAgICAgIHRoaXMuZW5kQWN0aXZlV2luZG93ID0gZW5kO1xuXHQgICAgICAgIHRoaXMuZ2VuZXJhdGVDYWxjdWxhdGVkQnV0dG9ucygpO1xuXHQgICAgICAgIHRoaXMuZ2xvYmFsUmVhY3RpdmVNb2RlbC5tb2RlbFsneC1heGlzLXZpc2libGUtcmFuZ2Utc3RhcnQnXSA9IHRoaXMuc3RhcnRBY3RpdmVXaW5kb3c7XG5cdCAgICAgICAgdGhpcy5nbG9iYWxSZWFjdGl2ZU1vZGVsLm1vZGVsWyd4LWF4aXMtdmlzaWJsZS1yYW5nZS1lbmQnXSA9IHRoaXMuZW5kQWN0aXZlV2luZG93O1xuXHQgICAgICAgIHRoaXMuZ2VuZXJhdGVDb250ZXh0dWFsQnV0dG9ucygpO1xuXHQgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgIGtleTogJ3NldEFjdGl2ZVBlcmlvZEZvckJ1dHRvbkNoYW5nZScsXG5cdCAgICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRBY3RpdmVQZXJpb2RGb3JCdXR0b25DaGFuZ2UoKSB7XG5cdCAgICAgICAgdmFyIHN0YXJ0LCBlbmQ7XG5cdCAgICAgICAgc3RhcnQgPSBhcmd1bWVudHNbMF07XG5cdCAgICAgICAgZW5kID0gYXJndW1lbnRzWzFdO1xuXHQgICAgICAgIHRoaXMuc3RhcnRBY3RpdmVXaW5kb3cgPSBzdGFydDtcblx0ICAgICAgICB0aGlzLmVuZEFjdGl2ZVdpbmRvdyA9IGVuZDtcblx0ICAgICAgICB0aGlzLmdlbmVyYXRlQ2FsY3VsYXRlZEJ1dHRvbnMoKTtcblx0ICAgICAgICB0aGlzLmdlbmVyYXRlQ29udGV4dHVhbEJ1dHRvbnMoKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgLyoqXG5cdCAgICAgICAqIEEgZnVuY3Rpb24gdG8gc2V0IHRoZSBzdGFydCBhbmQgZW5kIHBvaW50IG9mIHRoZVxuXHQgICAgICAgKiBlbnRpcmUgdGltZS1saW5lXG5cdCAgICAgICAqIEBwYXJhbSAge251bWJlcn0gZGF0ZSBzdGFtcCAtIEEgVU5JWCB0aW1lc3RhbXAgdG8gYmUgc2V0IGFzIHRoZSBzdGFydCBwb2ludCBvZiB0aW1lLWxpbmVcblx0ICAgICAgICogQHBhcmFtICB7bnVtYmVyfSBkYXRlIHN0YW1wIC0gQSBVTklYIHRpbWVzdGFtcCB0byBiZSBzZXQgYXMgdGhlIGVuZCBwb2ludCBvZiB0aW1lLWxpbmVcblx0ICAgICAgICovXG5cdFxuXHQgICAgICAvKipcblx0ICAgICAgICogQSBmdW5jdGlvbiB0byBzZXQgdGhlIG9iamVjdCB0byBzZXQgdGhlIHVzZXIgcHJlZmVyZW5jZXNcblx0ICAgICAgICovXG5cdFxuXHQgICAgfSwge1xuXHQgICAgICBrZXk6ICdjb25maWd1cmUnLFxuXHQgICAgICB2YWx1ZTogZnVuY3Rpb24gY29uZmlndXJlKGNvbmZpZykge1xuXHQgICAgICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICAvKipcblx0ICAgICAgICogRnVzaW9uY2hhcnRzIGxpZmUgY3ljbGUgbWV0aG9kIGZvciBleHRlbnNpb25cblx0ICAgICAgICovXG5cdFxuXHQgICAgfSwge1xuXHQgICAgICBrZXk6ICdpbml0Jyxcblx0ICAgICAgdmFsdWU6IGZ1bmN0aW9uIGluaXQocmVxdWlyZSkge1xuXHQgICAgICAgIHZhciBpbnN0YW5jZSA9IHRoaXM7XG5cdCAgICAgICAgcmVxdWlyZShbJ3hBeGlzJywgJ3lBeGlzJywgJ2dyYXBoaWNzJywgJ2NoYXJ0JywgJ2RhdGFzZXQnLCAnUGxvdE1hbmFnZXInLCAnY2FudmFzQ29uZmlnJywgJ01hcmtlck1hbmFnZXInLCAncmVhY3RpdmVNb2RlbCcsICdnbG9iYWxSZWFjdGl2ZU1vZGVsJywgJ3NwYWNlTWFuYWdlckluc3RhbmNlJywgJ3NtYXJ0TGFiZWwnLCAnZXh0RGF0YScsICdjaGFydEluc3RhbmNlJywgZnVuY3Rpb24gKHhBeGlzLCB5QXhpcywgZ3JhcGhpY3MsIGNoYXJ0LCBkYXRhc2V0LCBwbG90TWFuYWdlciwgY2FudmFzQ29uZmlnLCBtYXJrZXJNYW5hZ2VyLCByZWFjdGl2ZU1vZGVsLCBnbG9iYWxSZWFjdGl2ZU1vZGVsLCBzcGFjZU1hbmFnZXJJbnN0YW5jZSwgc21hcnRMYWJlbCwgZXh0RGF0YSwgY2hhcnRJbnN0YW5jZSkge1xuXHQgICAgICAgICAgaW5zdGFuY2UueEF4aXMgPSB4QXhpcztcblx0ICAgICAgICAgIGluc3RhbmNlLnlBeGlzID0geUF4aXM7XG5cdCAgICAgICAgICBpbnN0YW5jZS5ncmFwaGljcyA9IGdyYXBoaWNzO1xuXHQgICAgICAgICAgaW5zdGFuY2UuY2hhcnQgPSBjaGFydDtcblx0ICAgICAgICAgIGluc3RhbmNlLmRhdGFzZXQgPSBkYXRhc2V0O1xuXHQgICAgICAgICAgaW5zdGFuY2UucGxvdE1hbmFnZXIgPSBwbG90TWFuYWdlcjtcblx0ICAgICAgICAgIGluc3RhbmNlLm1hcmtlck1hbmFnZXIgPSBtYXJrZXJNYW5hZ2VyO1xuXHQgICAgICAgICAgaW5zdGFuY2UuY2FudmFzQ29uZmlnID0gY2FudmFzQ29uZmlnO1xuXHQgICAgICAgICAgaW5zdGFuY2UucmVhY3RpdmVNb2RlbCA9IHJlYWN0aXZlTW9kZWw7XG5cdCAgICAgICAgICBpbnN0YW5jZS5nbG9iYWxSZWFjdGl2ZU1vZGVsID0gZ2xvYmFsUmVhY3RpdmVNb2RlbDtcblx0ICAgICAgICAgIGluc3RhbmNlLnNwYWNlTWFuYWdlckluc3RhbmNlID0gc3BhY2VNYW5hZ2VySW5zdGFuY2U7XG5cdCAgICAgICAgICBpbnN0YW5jZS5zbWFydExhYmVsID0gc21hcnRMYWJlbDtcblx0ICAgICAgICAgIGluc3RhbmNlLmV4dERhdGEgPSBleHREYXRhO1xuXHQgICAgICAgICAgaW5zdGFuY2UuY2hhcnRJbnN0YW5jZSA9IGNoYXJ0SW5zdGFuY2U7XG5cdCAgICAgICAgfV0pO1xuXHQgICAgICAgIHRoaXMuc3BhY2VNYW5hZ2VySW5zdGFuY2UgPSBpbnN0YW5jZS5zcGFjZU1hbmFnZXJJbnN0YW5jZTtcblx0ICAgICAgICB0aGlzLmdsb2JhbFJlYWN0aXZlTW9kZWwgPSBpbnN0YW5jZS5nbG9iYWxSZWFjdGl2ZU1vZGVsO1xuXHQgICAgICAgIHRoaXMuZW5kQWN0aXZlV2luZG93ID0gaW5zdGFuY2UuZ2xvYmFsUmVhY3RpdmVNb2RlbC5tb2RlbFsneC1heGlzLXZpc2libGUtcmFuZ2UtZW5kJ107XG5cdCAgICAgICAgdGhpcy5zdGFydEFjdGl2ZVdpbmRvdyA9IGluc3RhbmNlLmdsb2JhbFJlYWN0aXZlTW9kZWwubW9kZWxbJ3gtYXhpcy12aXNpYmxlLXJhbmdlLXN0YXJ0J107XG5cdCAgICAgICAgdGhpcy5zdGFydERhdGFzZXQgPSBpbnN0YW5jZS5nbG9iYWxSZWFjdGl2ZU1vZGVsLm1vZGVsWyd4LWF4aXMtYWJzb2x1dGUtcmFuZ2Utc3RhcnQnXTtcblx0ICAgICAgICB0aGlzLmVuZERhdGFzZXQgPSBpbnN0YW5jZS5nbG9iYWxSZWFjdGl2ZU1vZGVsLm1vZGVsWyd4LWF4aXMtYWJzb2x1dGUtcmFuZ2UtZW5kJ107XG5cdCAgICAgICAgdGhpcy5zZXRBY3RpdmVQZXJpb2QodGhpcy5zdGFydEFjdGl2ZVdpbmRvdywgdGhpcy5lbmRBY3RpdmVXaW5kb3cpO1xuXHQgICAgICAgIC8vIGluc3RhbmNlLmdsb2JhbFJlYWN0aXZlTW9kZWwubW9kZWxbJ194LWF4aXMtdmlzaWJsZS1yYW5nZS1zdGFydCddICs9IDEyNDQxNjAwMDAwMDtcblx0ICAgICAgICB0aGlzLnNldEFjdGl2ZVBlcmlvZCh0aGlzLnN0YXJ0QWN0aXZlV2luZG93LCB0aGlzLmVuZEFjdGl2ZVdpbmRvdyk7XG5cdCAgICAgICAgdGhpcy50aW1lUnVsZXMgPSB0aGlzLmNoYXJ0SW5zdGFuY2UuYXBpSW5zdGFuY2UuZ2V0Q29tcG9uZW50U3RvcmUoKTtcblx0ICAgICAgICB0aGlzLnRpbWVSdWxlcyA9IHRoaXMudGltZVJ1bGVzLmdldENhbnZhc0J5SW5kZXgoMCkuY29tcG9zaXRpb24uaW1wbDtcblx0ICAgICAgICB0aGlzLnRpbWVSdWxlcyA9IHRoaXMudGltZVJ1bGVzLmdldERhdGFBZ2dyZWdhdG9yKCk7XG5cdCAgICAgICAgdGhpcy50aW1lUnVsZXMgPSB0aGlzLnRpbWVSdWxlcy5nZXRBZ2dyZWdhdGlvblRpbWVSdWxlcygpO1xuXHQgICAgICAgIHRoaXMudG9vbGJhcnMgPSBbXTtcblx0ICAgICAgICB0aGlzLm1lYXN1cmVtZW50ID0ge307XG5cdCAgICAgICAgdGhpcy5mbGFnID0gdHJ1ZTtcblx0XG5cdCAgICAgICAgdGhpcy50b29sYmFycy5wdXNoKHRoaXMuY3JlYXRlVG9vbGJhcigpKTtcblx0XG5cdCAgICAgICAgdGhpcy5nbG9iYWxSZWFjdGl2ZU1vZGVsLm9uUHJvcHNDaGFuZ2UoWyd4LWF4aXMtdmlzaWJsZS1yYW5nZS1zdGFydCcsICd4LWF4aXMtdmlzaWJsZS1yYW5nZS1lbmQnXSwgZnVuY3Rpb24gKHN0YXJ0LCBlbmQpIHtcblx0ICAgICAgICAgIHZhciB0ZW1wID0gd2luZG93LnBlcmZvcm1hbmNlLm5vdygpO1xuXHQgICAgICAgICAgLy8gY29uc29sZS5sb2coJ0dhcCcsIHRlbXAgLSAod2luZG93LnRlbXBUaW1lIHx8IDApKTtcblx0ICAgICAgICAgIHdpbmRvdy50ZW1wVGltZSA9IHRlbXA7XG5cdCAgICAgICAgICBpZiAoaW5zdGFuY2UuZmxhZykge1xuXHQgICAgICAgICAgICBpbnN0YW5jZS5mbGFnID0gZmFsc2U7XG5cdCAgICAgICAgICAgIGluc3RhbmNlLnNldEFjdGl2ZVBlcmlvZChzdGFydFsxXSwgZW5kWzFdKTtcblx0ICAgICAgICAgICAgaW5zdGFuY2UudG9vbGJhci5kaXNwb3NlKCk7XG5cdCAgICAgICAgICAgIGluc3RhbmNlLnRvb2xiYXJzLnBvcCgpO1xuXHQgICAgICAgICAgICBpbnN0YW5jZS50b29sYmFycy5wdXNoKGluc3RhbmNlLmNyZWF0ZVRvb2xiYXIoKSk7XG5cdCAgICAgICAgICAgIGluc3RhbmNlLmdldExvZ2ljYWxTcGFjZSgpO1xuXHQgICAgICAgICAgICBpbnN0YW5jZS5kcmF3KCk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cdCAgICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAga2V5OiAnY3JlYXRlVG9vbGJhcicsXG5cdCAgICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVUb29sYmFyKCkge1xuXHQgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cdFxuXHQgICAgICAgIHZhciB1bmlncm91cCxcblx0ICAgICAgICAgICAgdG9vbGJhcixcblx0ICAgICAgICAgICAgY2FsY3VsYXRlZEJ1dHRvbnMsXG5cdCAgICAgICAgICAgIGNvbnRleHR1YWxCdXR0b25zLFxuXHQgICAgICAgICAgICBhbGxCdXR0b24sXG5cdCAgICAgICAgICAgIHNlbGYgPSB0aGlzLFxuXHQgICAgICAgICAgICBkZWR1Y3RvckFyID0gW10sXG5cdCAgICAgICAgICAgIHN0YXJ0TXVsdGlwbGllcixcblx0ICAgICAgICAgICAgZGVkdWN0b3IsXG5cdCAgICAgICAgICAgIGksXG5cdCAgICAgICAgICAgIGosXG5cdCAgICAgICAgICAgIG1hcmdpbixcblx0ICAgICAgICAgICAgZnJvbURhdGVMYWJlbCxcblx0ICAgICAgICAgICAgZ3JvdXA7XG5cdFxuXHQgICAgICAgIGdyb3VwID0gbmV3IHRoaXMudG9vbGJveC5Db21wb25lbnRHcm91cCh7XG5cdCAgICAgICAgICBwYXBlcjogdGhpcy5ncmFwaGljcy5wYXBlcixcblx0ICAgICAgICAgIGNoYXJ0OiB0aGlzLmNoYXJ0LFxuXHQgICAgICAgICAgc21hcnRMYWJlbDogdGhpcy5zbWFydExhYmVsLFxuXHQgICAgICAgICAgY2hhcnRDb250YWluZXI6IHRoaXMuZ3JhcGhpY3MuY29udGFpbmVyXG5cdCAgICAgICAgfSk7XG5cdFxuXHQgICAgICAgIHVuaWdyb3VwID0gbmV3IHRoaXMudG9vbGJveC5VbmlTZWxlY3RDb21wb25lbnRHcm91cCh7XG5cdCAgICAgICAgICBwYXBlcjogdGhpcy5ncmFwaGljcy5wYXBlcixcblx0ICAgICAgICAgIGNoYXJ0OiB0aGlzLmNoYXJ0LFxuXHQgICAgICAgICAgc21hcnRMYWJlbDogdGhpcy5zbWFydExhYmVsLFxuXHQgICAgICAgICAgY2hhcnRDb250YWluZXI6IHRoaXMuZ3JhcGhpY3MuY29udGFpbmVyXG5cdCAgICAgICAgfSk7XG5cdCAgICAgICAgdW5pZ3JvdXAuc2V0Q29uZmlnKHtcblx0ICAgICAgICAgIGZpbGw6ICcjZmZmJyxcblx0ICAgICAgICAgIGJvcmRlclRoaWNrbmVzczogMFxuXHQgICAgICAgIH0pO1xuXHQgICAgICAgIGdyb3VwLnNldENvbmZpZyh7XG5cdCAgICAgICAgICBmaWxsOiAnI2ZmZicsXG5cdCAgICAgICAgICBib3JkZXJUaGlja25lc3M6IDBcblx0ICAgICAgICB9KTtcblx0ICAgICAgICB0b29sYmFyID0gbmV3IHRoaXMuSG9yaXpvbnRhbFRvb2xiYXIoe1xuXHQgICAgICAgICAgcGFwZXI6IHRoaXMuZ3JhcGhpY3MucGFwZXIsXG5cdCAgICAgICAgICBjaGFydDogdGhpcy5jaGFydCxcblx0ICAgICAgICAgIHNtYXJ0TGFiZWw6IHRoaXMuc21hcnRMYWJlbCxcblx0ICAgICAgICAgIGNoYXJ0Q29udGFpbmVyOiB0aGlzLmdyYXBoaWNzLmNvbnRhaW5lclxuXHQgICAgICAgIH0pO1xuXHQgICAgICAgIHRvb2xiYXIuc2V0Q29uZmlnKHtcblx0ICAgICAgICAgIGZpbGw6ICcjZmZmJyxcblx0ICAgICAgICAgIGJvcmRlclRoaWNrbmVzczogMFxuXHQgICAgICAgIH0pO1xuXHQgICAgICAgIGZyb21EYXRlTGFiZWwgPSBuZXcgdGhpcy50b29sYm94LkxhYmVsKCdab29tOicsIHtcblx0ICAgICAgICAgIHNtYXJ0TGFiZWw6IHRoaXMuc21hcnRMYWJlbCxcblx0ICAgICAgICAgIHBhcGVyOiB0aGlzLmdyYXBoaWNzLnBhcGVyXG5cdCAgICAgICAgfSwge1xuXHQgICAgICAgICAgdGV4dDoge1xuXHQgICAgICAgICAgICBzdHlsZToge1xuXHQgICAgICAgICAgICAgICdmb250LWZhbWlseSc6ICdcIkx1Y2lkYSBHcmFuZGVcIiwgc2Fucy1zZXJpZicsXG5cdCAgICAgICAgICAgICAgJ2ZvbnQtc2l6ZSc6ICcxMycsXG5cdCAgICAgICAgICAgICAgJ2ZpbGwnOiAnIzY5Njk2OScsXG5cdCAgICAgICAgICAgICAgJ2ZvbnQtd2VpZ2h0JzogJ2JvbGQnXG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgIH0sXG5cdCAgICAgICAgICBjb250YWluZXI6IHtcblx0ICAgICAgICAgICAgaGVpZ2h0OiAyMlxuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0pO1xuXHQgICAgICAgIGdyb3VwLmFkZFN5bWJvbChmcm9tRGF0ZUxhYmVsKTtcblx0ICAgICAgICBhbGxCdXR0b24gPSBuZXcgdGhpcy50b29sYm94LlN5bWJvbCgnQUxMJywgdHJ1ZSwge1xuXHQgICAgICAgICAgcGFwZXI6IHRoaXMuZ3JhcGhpY3MucGFwZXIsXG5cdCAgICAgICAgICBjaGFydDogdGhpcy5jaGFydCxcblx0ICAgICAgICAgIHNtYXJ0TGFiZWw6IHRoaXMuc21hcnRMYWJlbCxcblx0ICAgICAgICAgIGNoYXJ0Q29udGFpbmVyOiB0aGlzLmdyYXBoaWNzLmNvbnRhaW5lclxuXHQgICAgICAgIH0sIHtcblx0ICAgICAgICAgIGZpbGw6ICcjZmZmZmZmJyxcblx0ICAgICAgICAgIGxhYmVsRmlsbDogJyM2OTY5NjknLFxuXHQgICAgICAgICAgc3ltYm9sU3Ryb2tlV2lkdGg6ICcyJyxcblx0ICAgICAgICAgIHN0cm9rZTogJyNjZWQ1ZDQnLFxuXHQgICAgICAgICAgc3Ryb2tlV2lkdGg6ICcxJyxcblx0ICAgICAgICAgIGhvdmVyRmlsbDogJyNjZWQ1ZDQnLFxuXHQgICAgICAgICAgaGVpZ2h0OiAyMixcblx0ICAgICAgICAgIHJhZGl1czogMSxcblx0ICAgICAgICAgIG1hcmdpbjoge1xuXHQgICAgICAgICAgICByaWdodDogNVxuXHQgICAgICAgICAgfSxcblx0ICAgICAgICAgIGJ0blRleHRTdHlsZToge1xuXHQgICAgICAgICAgICAnZm9udEZhbWlseSc6ICdcIkx1Y2lkYSBHcmFuZGVcIiwgc2Fucy1zZXJpZicsXG5cdCAgICAgICAgICAgICdmb250U2l6ZSc6ICcxMycsXG5cdCAgICAgICAgICAgICdmaWxsJzogJyM2OTY5NjknLFxuXHQgICAgICAgICAgICAnbGluZS1oZWlnaHQnOiAnMScsXG5cdCAgICAgICAgICAgICdsZXR0ZXItc3BhY2luZyc6ICctMC4wNGVtJ1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0pLmF0dGFjaEV2ZW50SGFuZGxlcnMoe1xuXHQgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uIGNsaWNrKCkge1xuXHQgICAgICAgICAgICBzZWxmLnNldEFjdGl2ZVBlcmlvZChzZWxmLnN0YXJ0RGF0YXNldCwgc2VsZi5lbmREYXRhc2V0KTtcblx0ICAgICAgICAgICAgdG9vbGJhci5kaXNwb3NlKCk7XG5cdCAgICAgICAgICAgIHNlbGYuY2xpY2tlZElkID0gJ0FMTCc7XG5cdCAgICAgICAgICAgIHNlbGYudG9vbGJhcnMucG9wKCk7XG5cdCAgICAgICAgICAgIHNlbGYudG9vbGJhcnMucHVzaChzZWxmLmNyZWF0ZVRvb2xiYXIoKSk7XG5cdCAgICAgICAgICAgIHNlbGYuZ2V0TG9naWNhbFNwYWNlKCk7XG5cdCAgICAgICAgICAgIHNlbGYuZHJhdygpO1xuXHQgICAgICAgICAgICAvLyBzZWxmLl9yZWYucmVBbGxvY2F0ZShzZWxmLnBhcmVudEdyb3VwKTtcblx0ICAgICAgICAgIH0sXG5cdCAgICAgICAgICB0b29sdGV4dDogJ0FMTCdcblx0ICAgICAgICB9KTtcblx0XG5cdCAgICAgICAgdW5pZ3JvdXAuYWRkU3ltYm9sKGFsbEJ1dHRvbik7XG5cdCAgICAgICAgZm9yIChpID0gMDsgaSA8IHRoaXMuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kcy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgZm9yIChqID0gdGhpcy5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW2ldLm11bHRpcGxpZXJzLmxlbmd0aCAtIDE7IGogPj0gMDsgai0tKSB7XG5cdCAgICAgICAgICAgIGRlZHVjdG9yQXIucHVzaChzZWxmLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHNbaV0ubXVsdGlwbGllcnNbal0gKiBzZWxmLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHNbaV0ubWlsbGlzZWNvbmRzKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIGNhbGN1bGF0ZWRCdXR0b25zID0gW107XG5cdFxuXHQgICAgICAgIHZhciBfbG9vcCA9IGZ1bmN0aW9uIF9sb29wKF9pKSB7XG5cdCAgICAgICAgICBpZiAoX2kgPT09IHNlbGYuc3RhcnRQb2ludFVuaXQpIHtcblx0ICAgICAgICAgICAgc3RhcnRNdWx0aXBsaWVyID0gc2VsZi5zdGFydFBvaW50TXVsdGlwbGllcjtcblx0ICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIHN0YXJ0TXVsdGlwbGllciA9IHNlbGYuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kc1tfaV0ubXVsdGlwbGllcnMubGVuZ3RoIC0gMTtcblx0ICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICB2YXIgX2xvb3AzID0gZnVuY3Rpb24gX2xvb3AzKF9qKSB7XG5cdCAgICAgICAgICAgIG1hcmdpbiA9IF9pID09PSBzZWxmLm5vQ2FsY0J1dHRvbnMgJiYgX2ogPT09IDAgPyA1IDogMDtcblx0ICAgICAgICAgICAgY2FsY3VsYXRlZEJ1dHRvbnNbX2ldID0gbmV3IF90aGlzLnRvb2xib3guU3ltYm9sKHNlbGYuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kc1tfaV0ubXVsdGlwbGllcnNbX2pdICsgc2VsZi5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW19pXS5hYmJyZXZpYXRpb24sIHRydWUsIHtcblx0ICAgICAgICAgICAgICBwYXBlcjogX3RoaXMuZ3JhcGhpY3MucGFwZXIsXG5cdCAgICAgICAgICAgICAgY2hhcnQ6IF90aGlzLmNoYXJ0LFxuXHQgICAgICAgICAgICAgIHNtYXJ0TGFiZWw6IF90aGlzLnNtYXJ0TGFiZWwsXG5cdCAgICAgICAgICAgICAgY2hhcnRDb250YWluZXI6IF90aGlzLmdyYXBoaWNzLmNvbnRhaW5lclxuXHQgICAgICAgICAgICB9LCB7XG5cdCAgICAgICAgICAgICAgZmlsbDogJyNmZmZmZmYnLFxuXHQgICAgICAgICAgICAgIGxhYmVsRmlsbDogJyM2OTY5NjknLFxuXHQgICAgICAgICAgICAgIHN5bWJvbFN0cm9rZVdpZHRoOiAnMicsXG5cdCAgICAgICAgICAgICAgc3Ryb2tlOiAnI2NlZDVkNCcsXG5cdCAgICAgICAgICAgICAgc3Ryb2tlV2lkdGg6ICcxJyxcblx0ICAgICAgICAgICAgICBob3ZlckZpbGw6ICcjY2VkNWQ0Jyxcblx0ICAgICAgICAgICAgICBoZWlnaHQ6IDIyLFxuXHQgICAgICAgICAgICAgIHJhZGl1czogMSxcblx0ICAgICAgICAgICAgICBtYXJnaW46IHtcblx0ICAgICAgICAgICAgICAgIHJpZ2h0OiBtYXJnaW5cblx0ICAgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICAgIGJ0blRleHRTdHlsZToge1xuXHQgICAgICAgICAgICAgICAgJ2ZvbnRGYW1pbHknOiAnXCJMdWNpZGEgR3JhbmRlXCIsIHNhbnMtc2VyaWYnLFxuXHQgICAgICAgICAgICAgICAgJ2ZvbnRTaXplJzogJzEzJyxcblx0ICAgICAgICAgICAgICAgICdmaWxsJzogJyM2OTY5NjknLFxuXHQgICAgICAgICAgICAgICAgJ2xpbmUtaGVpZ2h0JzogJzEnLFxuXHQgICAgICAgICAgICAgICAgJ2xldHRlci1zcGFjaW5nJzogJy0wLjA0ZW0nXG5cdCAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9KS5hdHRhY2hFdmVudEhhbmRsZXJzKHtcblx0ICAgICAgICAgICAgICAnY2xpY2snOiBmdW5jdGlvbiBjbGljaygpIHtcblx0ICAgICAgICAgICAgICAgIGRlZHVjdG9yID0gc2VsZi5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW19pXS5tdWx0aXBsaWVyc1tfal0gKiBzZWxmLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHNbX2ldLm1pbGxpc2Vjb25kcztcblx0ICAgICAgICAgICAgICAgIHNlbGYuY2xpY2tlZElkID0gc2VsZi5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW19pXS5tdWx0aXBsaWVyc1tfal0gKyBzZWxmLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHNbX2ldLmFiYnJldmlhdGlvbjtcblx0ICAgICAgICAgICAgICAgIHNlbGYuc2V0QWN0aXZlUGVyaW9kKGRlZHVjdG9yKTtcblx0ICAgICAgICAgICAgICAgIHRvb2xiYXIuZGlzcG9zZSgpO1xuXHQgICAgICAgICAgICAgICAgc2VsZi50b29sYmFycy5wb3AoKTtcblx0ICAgICAgICAgICAgICAgIHNlbGYudG9vbGJhcnMucHVzaChzZWxmLmNyZWF0ZVRvb2xiYXIoKSk7XG5cdCAgICAgICAgICAgICAgICBzZWxmLmdldExvZ2ljYWxTcGFjZSgpO1xuXHQgICAgICAgICAgICAgICAgc2VsZi5kcmF3KCk7XG5cdCAgICAgICAgICAgICAgICAvLyBzZWxmLl9yZWYucmVBbGxvY2F0ZShzZWxmLnBhcmVudEdyb3VwKTtcblx0ICAgICAgICAgICAgICAgIC8vIHRoaXMudG9vbGJhcnNbdGhpcy50b29sYmFycy5sZW5ndGggLSAxXSA9IHRoaXMuY3JlYXRlVG9vbGJhcigpO1xuXHQgICAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgICAgdG9vbHRleHQ6IHNlbGYuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kc1tfaV0ubXVsdGlwbGllcnNbX2pdICsgJyAnICsgc2VsZi5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW19pXS5kZXNjcmlwdGlvblxuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgdW5pZ3JvdXAuYWRkU3ltYm9sKGNhbGN1bGF0ZWRCdXR0b25zW19pXSk7XG5cdCAgICAgICAgICB9O1xuXHRcblx0ICAgICAgICAgIGZvciAodmFyIF9qID0gc3RhcnRNdWx0aXBsaWVyOyBfaiA+PSAwOyBfai0tKSB7XG5cdCAgICAgICAgICAgIF9sb29wMyhfaik7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfTtcblx0XG5cdCAgICAgICAgZm9yICh2YXIgX2kgPSBzZWxmLnN0YXJ0UG9pbnRVbml0OyBfaSA+PSAwOyBfaS0tKSB7XG5cdCAgICAgICAgICBfbG9vcChfaSk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBjb250ZXh0dWFsQnV0dG9ucyA9IFtdO1xuXHRcblx0ICAgICAgICB2YXIgX2xvb3AyID0gZnVuY3Rpb24gX2xvb3AyKF9pMikge1xuXHQgICAgICAgICAgY29udGV4dHVhbEJ1dHRvbnNbX2kyXSA9IG5ldyBfdGhpcy50b29sYm94LlN5bWJvbChfdGhpcy5zdGFuZGFyZENvbnRleHVhbFBlcmlvZHNbX2kyXS5hYmJyZXZpYXRpb24sIHRydWUsIHtcblx0ICAgICAgICAgICAgcGFwZXI6IF90aGlzLmdyYXBoaWNzLnBhcGVyLFxuXHQgICAgICAgICAgICBjaGFydDogX3RoaXMuY2hhcnQsXG5cdCAgICAgICAgICAgIHNtYXJ0TGFiZWw6IF90aGlzLnNtYXJ0TGFiZWwsXG5cdCAgICAgICAgICAgIGNoYXJ0Q29udGFpbmVyOiBfdGhpcy5ncmFwaGljcy5jb250YWluZXJcblx0ICAgICAgICAgIH0sIHtcblx0ICAgICAgICAgICAgZmlsbDogJyNmZmZmZmYnLFxuXHQgICAgICAgICAgICBsYWJlbEZpbGw6ICcjNjk2OTY5Jyxcblx0ICAgICAgICAgICAgc3ltYm9sU3Ryb2tlV2lkdGg6ICcyJyxcblx0ICAgICAgICAgICAgc3Ryb2tlOiAnI2NlZDVkNCcsXG5cdCAgICAgICAgICAgIHN0cm9rZVdpZHRoOiAnMScsXG5cdCAgICAgICAgICAgIGhlaWdodDogMjIsXG5cdCAgICAgICAgICAgIGhvdmVyRmlsbDogJyNjZWQ1ZDQnLFxuXHQgICAgICAgICAgICByYWRpdXM6IDEsXG5cdCAgICAgICAgICAgIG1hcmdpbjoge1xuXHQgICAgICAgICAgICAgIHJpZ2h0OiAwXG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIGJ0blRleHRTdHlsZToge1xuXHQgICAgICAgICAgICAgICdmb250RmFtaWx5JzogJ1wiTHVjaWRhIEdyYW5kZVwiLCBzYW5zLXNlcmlmJyxcblx0ICAgICAgICAgICAgICAnZm9udFNpemUnOiAnMTMnLFxuXHQgICAgICAgICAgICAgICdmaWxsJzogJyM2OTY5NjknLFxuXHQgICAgICAgICAgICAgICdsaW5lLWhlaWdodCc6ICcxJyxcblx0ICAgICAgICAgICAgICAnbGV0dGVyLXNwYWNpbmcnOiAnLTAuMDRlbSdcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfSkuYXR0YWNoRXZlbnRIYW5kbGVycyh7XG5cdCAgICAgICAgICAgICdjbGljayc6IGZ1bmN0aW9uIGNsaWNrKCkge1xuXHQgICAgICAgICAgICAgIHNlbGYuc2V0QWN0aXZlUGVyaW9kKHNlbGYuc3RhbmRhcmRDb250ZXh1YWxQZXJpb2RzW19pMl0uZGF0ZVN0YXJ0LCBzZWxmLnN0YW5kYXJkQ29udGV4dWFsUGVyaW9kc1tfaTJdLmRhdGVFbmQpO1xuXHQgICAgICAgICAgICAgIHNlbGYuY2xpY2tlZElkID0gc2VsZi5zdGFuZGFyZENvbnRleHVhbFBlcmlvZHNbX2kyXS5hYmJyZXZpYXRpb247XG5cdCAgICAgICAgICAgICAgdG9vbGJhci5kaXNwb3NlKCk7XG5cdCAgICAgICAgICAgICAgc2VsZi50b29sYmFycy5wb3AoKTtcblx0ICAgICAgICAgICAgICBzZWxmLnRvb2xiYXJzLnB1c2goc2VsZi5jcmVhdGVUb29sYmFyKCkpO1xuXHQgICAgICAgICAgICAgIHNlbGYuZ2V0TG9naWNhbFNwYWNlKCk7XG5cdCAgICAgICAgICAgICAgc2VsZi5kcmF3KCk7XG5cdCAgICAgICAgICAgICAgLy8gc2VsZi5fcmVmLnJlQWxsb2NhdGUoc2VsZi5wYXJlbnRHcm91cCk7XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIHRvb2x0ZXh0OiBfdGhpcy5zdGFuZGFyZENvbnRleHVhbFBlcmlvZHNbX2kyXS5kZXNjcmlwdGlvblxuXHQgICAgICAgICAgfSk7XG5cdCAgICAgICAgICB1bmlncm91cC5hZGRTeW1ib2woY29udGV4dHVhbEJ1dHRvbnNbX2kyXSk7XG5cdCAgICAgICAgfTtcblx0XG5cdCAgICAgICAgZm9yICh2YXIgX2kyID0gMDsgX2kyIDwgdGhpcy5zdGFuZGFyZENvbnRleHVhbFBlcmlvZHMubGVuZ3RoOyBfaTIrKykge1xuXHQgICAgICAgICAgX2xvb3AyKF9pMik7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICAvLyBidG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdCVVRUT04nKTtcblx0ICAgICAgICAvLyBidG4uaWQgPSBzdGFuZGFyZFBlcmlvZHNbaV0uYWJicmV2aWF0aW9uO1xuXHQgICAgICAgIC8vIGJ0bi5pbm5lckhUTUwgPSBzdGFuZGFyZFBlcmlvZHNbaV0uYWJicmV2aWF0aW9uO1xuXHQgICAgICAgIC8vIGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGV2ZW50QnRuLmJpbmQodGhpcywgc3RhbmRhcmRQZXJpb2RzW2ldKSk7XG5cdCAgICAgICAgLy8gY29udGV4dHVhbEJ1dHRvbnMuYXBwZW5kQ2hpbGQoYnRuKTtcblx0XG5cdCAgICAgICAgdGhpcy5TeW1ib2xTdG9yZS5yZWdpc3RlcigndGV4dEJveEljb24nLCBmdW5jdGlvbiAoeCwgeSwgcmFkLCB3LCBoLCBwYWRYLCBwYWRZKSB7XG5cdCAgICAgICAgICB2YXIgeDEgPSB4IC0gdyAvIDIgKyBwYWRYIC8gMixcblx0ICAgICAgICAgICAgICB4MiA9IHggKyB3IC8gMiAtIHBhZFggLyAyLFxuXHQgICAgICAgICAgICAgIHkxID0geSAtIGggLyAyICsgcGFkWSAvIDIsXG5cdCAgICAgICAgICAgICAgeTIgPSB5ICsgaCAvIDIgLSBwYWRZIC8gMjtcblx0XG5cdCAgICAgICAgICByZXR1cm4gWydNJywgeDEsIHkxLCAnTCcsIHgyLCB5MSwgJ0wnLCB4MiwgeTIsICdMJywgeDEsIHkyLCAnWiddO1xuXHQgICAgICAgIH0pO1xuXHRcblx0ICAgICAgICB0b29sYmFyLmFkZENvbXBvbmVudChncm91cCk7XG5cdCAgICAgICAgdG9vbGJhci5hZGRDb21wb25lbnQodW5pZ3JvdXApO1xuXHQgICAgICAgIHRoaXMudG9vbGJhciA9IHRvb2xiYXI7XG5cdCAgICAgICAgcmV0dXJuIHRvb2xiYXI7XG5cdCAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAga2V5OiAnZ2V0TG9naWNhbFNwYWNlJyxcblx0ICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldExvZ2ljYWxTcGFjZSgpIHtcblx0ICAgICAgICB2YXIgYXZhaWxhYmxlV2lkdGggPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHRoaXMuX3BXaWR0aDtcblx0ICAgICAgICB2YXIgYXZhaWxhYmxlSGVpZ2h0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB0aGlzLl9wSGVpZ2h0O1xuXHRcblx0ICAgICAgICAvLyBhdmFpbGFibGVXaWR0aCAvPSAyO1xuXHQgICAgICAgIHZhciBsb2dpY2FsU3BhY2UsXG5cdCAgICAgICAgICAgIHdpZHRoID0gNDIwLFxuXHQgICAgICAgICAgICAvLyB3aWR0aCBoYXJkY29kZWQ7IFRPRE86IG1ha2UgaXQgZHluYW1pY1xuXHQgICAgICAgIGhlaWdodCA9IDAsXG5cdCAgICAgICAgICAgIGksXG5cdCAgICAgICAgICAgIGxuO1xuXHRcblx0ICAgICAgICBmb3IgKGkgPSAwLCBsbiA9IHRoaXMudG9vbGJhcnMubGVuZ3RoOyBpIDwgbG47IGkrKykge1xuXHQgICAgICAgICAgbG9naWNhbFNwYWNlID0gdGhpcy50b29sYmFyc1tpXS5nZXRMb2dpY2FsU3BhY2UoYXZhaWxhYmxlV2lkdGgsIGF2YWlsYWJsZUhlaWdodCk7XG5cdCAgICAgICAgICAvLyB3aWR0aCA9IE1hdGgubWF4KGxvZ2ljYWxTcGFjZS53aWR0aCwgd2lkdGgpO1xuXHQgICAgICAgICAgaGVpZ2h0ICs9IGxvZ2ljYWxTcGFjZS5oZWlnaHQ7XG5cdCAgICAgICAgICB0aGlzLnRvb2xiYXJzW2ldLndpZHRoID0gbG9naWNhbFNwYWNlLndpZHRoO1xuXHQgICAgICAgICAgdGhpcy50b29sYmFyc1tpXS5oZWlnaHQgPSBsb2dpY2FsU3BhY2UuaGVpZ2h0O1xuXHQgICAgICAgIH1cblx0ICAgICAgICBoZWlnaHQgKz0gdGhpcy5wYWRkaW5nO1xuXHQgICAgICAgIHJldHVybiB7XG5cdCAgICAgICAgICB3aWR0aDogd2lkdGgsXG5cdCAgICAgICAgICBoZWlnaHQ6IGhlaWdodFxuXHQgICAgICAgIH07XG5cdCAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAga2V5OiAnZ2V0RGVmYXVsdEdyb3VwJyxcblx0ICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldERlZmF1bHRHcm91cCgpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnRHcm91cDtcblx0ICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICBrZXk6ICdwbGFjZUluQ2FudmFzJyxcblx0ICAgICAgdmFsdWU6IGZ1bmN0aW9uIHBsYWNlSW5DYW52YXMoKSB7XG5cdCAgICAgICAgdmFyIF9zZWxmID0gdGhpcztcblx0ICAgICAgICBfc2VsZi5wYWRkaW5nID0gNTtcblx0ICAgICAgICBfc2VsZi5zcGFjZU1hbmFnZXJJbnN0YW5jZS5hZGQoW3tcblx0ICAgICAgICAgIG5hbWU6IGZ1bmN0aW9uIG5hbWUoKSB7XG5cdCAgICAgICAgICAgIHJldHVybiAnc3RhbmRhcmQtcGVyaW9kLXNlbGVjdG9yLWV4dCc7XG5cdCAgICAgICAgICB9LFxuXHQgICAgICAgICAgcmVmOiBmdW5jdGlvbiByZWYob2JqKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBvYmpbJzAnXTtcblx0ICAgICAgICAgIH0sXG5cdCAgICAgICAgICBzZWxmOiBmdW5jdGlvbiBzZWxmKCkge1xuXHQgICAgICAgICAgICByZXR1cm4gX3NlbGY7XG5cdCAgICAgICAgICB9LFxuXHQgICAgICAgICAgcHJpb3JpdHk6IGZ1bmN0aW9uIHByaW9yaXR5KCkge1xuXHQgICAgICAgICAgICByZXR1cm4gMjtcblx0ICAgICAgICAgIH0sXG5cdCAgICAgICAgICBsYXlvdXQ6IGZ1bmN0aW9uIGxheW91dChvYmopIHtcblx0ICAgICAgICAgICAgcmV0dXJuIG9iai5pbmxpbmU7XG5cdCAgICAgICAgICB9LFxuXHQgICAgICAgICAgb3JpZW50YXRpb246IFt7XG5cdCAgICAgICAgICAgIHR5cGU6IGZ1bmN0aW9uIHR5cGUob2JqKSB7XG5cdCAgICAgICAgICAgICAgcmV0dXJuIG9iai5ob3Jpem9udGFsO1xuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBwb3NpdGlvbjogW3tcblx0ICAgICAgICAgICAgICB0eXBlOiBmdW5jdGlvbiB0eXBlKG9iaikge1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuIG9iai50b3A7XG5cdCAgICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgICBhbGlnbm1lbnQ6IFt7XG5cdCAgICAgICAgICAgICAgICB0eXBlOiBmdW5jdGlvbiB0eXBlKG9iaikge1xuXHQgICAgICAgICAgICAgICAgICByZXR1cm4gb2JqLmxlZnQ7XG5cdCAgICAgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICAgICAgZGltZW5zaW9uczogW2Z1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgICAgICAgdmFyIHBhcmVudCA9IHRoaXMuZ2V0UGFyZW50Q29tcG9uZW50R3JvdXAoKTtcblx0ICAgICAgICAgICAgICAgICAgX3NlbGYuX3JlZiA9IHRoaXM7XG5cdCAgICAgICAgICAgICAgICAgIHJldHVybiBfc2VsZi5nZXRMb2dpY2FsU3BhY2UoX3NlbGYuX3BXaWR0aCA9IHBhcmVudC5nZXRXaWR0aCgpLCBfc2VsZi5fcEhlaWdodCA9IHBhcmVudC5nZXRIZWlnaHQoKSk7XG5cdCAgICAgICAgICAgICAgICB9XVxuXHQgICAgICAgICAgICAgIH1dXG5cdCAgICAgICAgICAgIH1dXG5cdCAgICAgICAgICB9XVxuXHQgICAgICAgIH1dKTtcblx0ICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICBrZXk6ICdzZXREcmF3aW5nQ29uZmlndXJhdGlvbicsXG5cdCAgICAgIHZhbHVlOiBmdW5jdGlvbiBzZXREcmF3aW5nQ29uZmlndXJhdGlvbih4LCB5LCB3aWR0aCwgaGVpZ2h0LCBncm91cCkge1xuXHQgICAgICAgIHZhciBtZXMgPSB0aGlzLm1lYXN1cmVtZW50O1xuXHQgICAgICAgIG1lcy54ID0geDtcblx0ICAgICAgICBtZXMueSA9IHk7XG5cdCAgICAgICAgbWVzLndpZHRoID0gd2lkdGg7XG5cdCAgICAgICAgbWVzLmhlaWdodCA9IGhlaWdodDtcblx0XG5cdCAgICAgICAgdGhpcy5wYXJlbnRHcm91cCA9IGdyb3VwO1xuXHRcblx0ICAgICAgICByZXR1cm4gdGhpcztcblx0ICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICBrZXk6ICdkcmF3Jyxcblx0ICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRyYXcoeCwgeSwgd2lkdGgsIGhlaWdodCwgZ3JvdXApIHtcblx0ICAgICAgICB2YXIgbWVhc3VyZW1lbnQgPSB0aGlzLm1lYXN1cmVtZW50LFxuXHQgICAgICAgICAgICB0b29sYmFycyA9IHRoaXMudG9vbGJhcnMsXG5cdCAgICAgICAgICAgIHNlbGYgPSB0aGlzLFxuXHQgICAgICAgICAgICBsbixcblx0ICAgICAgICAgICAgaSxcblx0ICAgICAgICAgICAgdG9vbGJhcixcblx0ICAgICAgICAgICAgYm91bmRFbGVtZW50LFxuXHQgICAgICAgICAgICBiQm94LFxuXHQgICAgICAgICAgICB4MSxcblx0ICAgICAgICAgICAgeDIsXG5cdCAgICAgICAgICAgIHkyLFxuXHQgICAgICAgICAgICBzZWxlY3RMaW5lLFxuXHQgICAgICAgICAgICBtb2RlbCA9IHRoaXMuZ2xvYmFsUmVhY3RpdmVNb2RlbDtcblx0XG5cdCAgICAgICAgdGhpcy5mbGFnID0gdHJ1ZTtcblx0ICAgICAgICBzZWxlY3RMaW5lID0gdGhpcy5zYXZlU2VsZWN0TGluZSB8fCB0aGlzLmdyYXBoaWNzLnBhcGVyLnBhdGgoe1xuXHQgICAgICAgICAgJ3N0cm9rZSc6ICcjYzk1YTVhJyxcblx0ICAgICAgICAgICdzdHJva2Utd2lkdGgnOiAnMnB4J1xuXHQgICAgICAgIH0pLnRvRnJvbnQoKTtcblx0ICAgICAgICB4ID0geCA9PT0gdW5kZWZpbmVkID8gbWVhc3VyZW1lbnQueCA6IHg7XG5cdCAgICAgICAgeSA9IHkgPT09IHVuZGVmaW5lZCA/IG1lYXN1cmVtZW50LnkgOiB5O1xuXHQgICAgICAgIHdpZHRoID0gd2lkdGggPT09IHVuZGVmaW5lZCA/IG1lYXN1cmVtZW50LndpZHRoIDogd2lkdGg7XG5cdCAgICAgICAgaGVpZ2h0ID0gaGVpZ2h0ID09PSB1bmRlZmluZWQgPyBtZWFzdXJlbWVudC5oZWlnaHQgOiBoZWlnaHQ7XG5cdCAgICAgICAgZ3JvdXAgPSBncm91cCA9PT0gdW5kZWZpbmVkID8gdGhpcy5wYXJlbnRHcm91cCA6IGdyb3VwO1xuXHQgICAgICAgIGlmICh3aWR0aCAmJiBoZWlnaHQpIHtcblx0ICAgICAgICAgIGZvciAoaSA9IDAsIGxuID0gdG9vbGJhcnMubGVuZ3RoOyBpIDwgbG47IGkrKykge1xuXHQgICAgICAgICAgICB0b29sYmFyID0gdG9vbGJhcnNbaV07XG5cdCAgICAgICAgICAgIHRvb2xiYXIuZHJhdyh4LCB5LCBncm91cCk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHRoaXMuc2F2ZVNlbGVjdExpbmUgPSBzZWxlY3RMaW5lO1xuXHRcblx0ICAgICAgICBmb3IgKHZhciBfaTMgPSAwLCBpaSA9IHRvb2xiYXJzWzBdLmNvbXBvbmVudEdyb3Vwc1sxXS5zeW1ib2xMaXN0OyBfaTMgPCBpaS5sZW5ndGg7IF9pMysrKSB7XG5cdCAgICAgICAgICBpZiAoaWlbX2kzXS5zeW1ib2wgPT09IHRoaXMuY2xpY2tlZElkKSB7XG5cdCAgICAgICAgICAgIGJvdW5kRWxlbWVudCA9IGlpW19pM10uZ2V0Qm91bmRFbGVtZW50KCk7XG5cdCAgICAgICAgICAgIGJCb3ggPSBib3VuZEVsZW1lbnQuZ2V0QkJveCgpO1xuXHQgICAgICAgICAgICB4MSA9IGJCb3gueDtcblx0ICAgICAgICAgICAgeDIgPSBiQm94LngyO1xuXHQgICAgICAgICAgICB5MiA9IGJCb3gueTI7XG5cdFxuXHQgICAgICAgICAgICBzZWxlY3RMaW5lLmF0dHIoe1xuXHQgICAgICAgICAgICAgIHBhdGg6IFsnTScsIHgxIC0gMC41LCB5MiAtIDAuNSwgJ0wnLCB4MiArIDAuNSwgeTIgLSAwLjVdXG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfV0pO1xuXHRcblx0ICAgIHJldHVybiBTdGFuZGFyZFBlcmlvZFNlbGVjdG9yO1xuXHQgIH0oKTtcblx0XG5cdCAgcmV0dXJuIFN0YW5kYXJkUGVyaW9kU2VsZWN0b3I7XG5cdH07XG5cbi8qKiovIH1cbi8qKioqKiovIF0pO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBzdGFuZGFyZC1wZXJpb2Qtc2VsZWN0b3ItZXM1Lm1pbi5qcyIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuXG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRleHBvcnRzOiB7fSxcbiBcdFx0XHRpZDogbW9kdWxlSWQsXG4gXHRcdFx0bG9hZGVkOiBmYWxzZVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2svYm9vdHN0cmFwIDVhZTAxMDhiYjA4MjY2Y2M5YmRiIiwiJ3VzZSBzdHJpY3QnO1xuY29uc3QgU3RhbmRhcmRQZXJpb2RTZWxlY3RvciA9IHJlcXVpcmUoJy4vc3RhbmRhcmQtcGVyaW9kLXNlbGVjdG9yJyk7XG5cbndpbmRvdy5zdFBTID0gbmV3IFN0YW5kYXJkUGVyaW9kU2VsZWN0b3IoKTtcblxuOyhmdW5jdGlvbiAoZW52LCBmYWN0b3J5KSB7XG4gIGlmICh0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0JyAmJiBtb2R1bGUuZXhwb3J0cykge1xuICAgIG1vZHVsZS5leHBvcnRzID0gZW52LmRvY3VtZW50XG4gICAgICAgPyBmYWN0b3J5KGVudikgOiBmdW5jdGlvbiAod2luKSB7XG4gICAgICAgICBpZiAoIXdpbi5kb2N1bWVudCkge1xuICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1dpbmRvdyB3aXRoIGRvY3VtZW50IG5vdCBwcmVzZW50Jyk7XG4gICAgICAgICB9XG4gICAgICAgICByZXR1cm4gZmFjdG9yeSh3aW4sIHRydWUpO1xuICAgICAgIH07XG4gIH0gZWxzZSB7XG4gICAgZW52LlN0YW5kYXJkUGVyaW9kU2VsZWN0b3IgPSBmYWN0b3J5KGVudiwgdHJ1ZSk7XG4gIH1cbn0pKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2luZG93IDogdGhpcywgZnVuY3Rpb24gKF93aW5kb3csIHdpbmRvd0V4aXN0cykge1xuICB2YXIgRkMgPSBfd2luZG93LkZ1c2lvbkNoYXJ0cztcbiAgRkMucmVnaXN0ZXIoJ2V4dGVuc2lvbicsIFsncHJpdmF0ZScsICdTdGFuZGFyZFBlcmlvZFNlbGVjdG9yJywgZnVuY3Rpb24gKCkge1xuICAgIEZDLnJlZ2lzdGVyQ29tcG9uZW50KCdleHRlbnNpb25zJywgJ1N0YW5kYXJkUGVyaW9kU2VsZWN0b3InLCBTdGFuZGFyZFBlcmlvZFNlbGVjdG9yKHtGdXNpb25DaGFydHM6IEZDfSkpO1xuICB9XSk7XG59KTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9pbmRleC5qcyIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24obW9kdWxlKSB7XG5cdGlmKCFtb2R1bGUud2VicGFja1BvbHlmaWxsKSB7XG5cdFx0bW9kdWxlLmRlcHJlY2F0ZSA9IGZ1bmN0aW9uKCkge307XG5cdFx0bW9kdWxlLnBhdGhzID0gW107XG5cdFx0Ly8gbW9kdWxlLnBhcmVudCA9IHVuZGVmaW5lZCBieSBkZWZhdWx0XG5cdFx0bW9kdWxlLmNoaWxkcmVuID0gW107XG5cdFx0bW9kdWxlLndlYnBhY2tQb2x5ZmlsbCA9IDE7XG5cdH1cblx0cmV0dXJuIG1vZHVsZTtcbn1cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vICh3ZWJwYWNrKS9idWlsZGluL21vZHVsZS5qc1xuLy8gbW9kdWxlIGlkID0gMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIndXNlIHN0cmljdCc7XG5cbi8qKlxuICogQ2xhc3MgZGVmaW5pdGlvbiBvZiBTdGFuZGFyZFBlcmlvZFNlbGVjdG9yXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoZGVwKSB7XG4gIGNsYXNzIFN0YW5kYXJkUGVyaW9kU2VsZWN0b3Ige1xuICAgIGNvbnN0cnVjdG9yICgpIHtcbiAgICAgIC8qKlxuICAgICAgICogQHByaXZhdGVcbiAgICAgICAqL1xuICAgICAgdGhpcy5yYXRpbyA9IDg7XG4gICAgICB0aGlzLnRvb2xib3ggPSBGdXNpb25DaGFydHMuZ2V0Q29tcG9uZW50KCdhcGknLCAndG9vbGJveCcpO1xuICAgICAgdGhpcy5Ib3Jpem9udGFsVG9vbGJhciA9IHRoaXMudG9vbGJveC5Ib3Jpem9udGFsVG9vbGJhcjtcbiAgICAgIHRoaXMuQ29tcG9uZW50R3JvdXAgPSB0aGlzLnRvb2xib3guQ29tcG9uZW50R3JvdXA7XG4gICAgICB0aGlzLlN5bWJvbFN0b3JlID0gdGhpcy50b29sYm94LlN5bWJvbFN0b3JlO1xuICAgICAgdGhpcy5hbGwgPSAxO1xuICAgICAgdGhpcy5jYWxjdWxhdGVkUGVyaW9kcyA9IFtdO1xuICAgICAgdGhpcy5zdGFydERhdGFzZXQgPSAwO1xuICAgICAgLy8gdGhpcy5lbmREYXRhc2V0ID0gdGhpcy5nbG9iYWxSZWFjdGl2ZU1vZGVsLm1vZGVsWyd4LWF4aXMtYWJzb2x1dGUtcmFuZ2UtZW5kJ107XG4gICAgICB0aGlzLnN0YXJ0QWN0aXZlV2luZG93ID0gMDtcbiAgICAgIHRoaXMuZW5kQWN0aXZlV2luZG93ID0gMTtcbiAgICAgIHRoaXMuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kcyA9IFtdO1xuICAgICAgdGhpcy5zdGFuZGFyZENvbnRleHVhbFBlcmlvZHMgPSBbXTtcbiAgICAgIHRoaXMuc3RhcnRQb2ludFVuaXQgPSAwO1xuICAgICAgdGhpcy5zdGFydFBvaW50TXVsdGlwbGllciA9IDA7XG4gICAgICB0aGlzLmNsaWNrZWRJZCA9ICdBTEwnO1xuICAgICAgdGhpcy5ub0NhbGNCdXR0b25zID0gMDtcbiAgICAgIHRoaXMudGltZVBlcmlvZHMgPSBbe1xuICAgICAgICAnbmFtZSc6ICdzZWNvbmQnLFxuICAgICAgICAnbWlsbGlzZWNvbmRzJzogMTAwMCxcbiAgICAgICAgJ3N0YXJ0aW5nUG9pbnQnOiAwLFxuICAgICAgICAndG90YWwnOiA2MCxcbiAgICAgICAgJ2FiYnJldmlhdGlvbic6ICdzJyxcbiAgICAgICAgJ2Rlc2NyaXB0aW9uJzogJ1NFQ09ORCcsXG4gICAgICAgICdwYXJlbnQnOiAnbWludXRlJyxcbiAgICAgICAgJ211bHRpcGxpZXJzJzogWzEsIDUsIDE1LCAzMF1cbiAgICAgIH0sIHtcbiAgICAgICAgJ25hbWUnOiAnbWludXRlJyxcbiAgICAgICAgJ21pbGxpc2Vjb25kcyc6IDYwMDAwLFxuICAgICAgICAnc3RhcnRpbmdQb2ludCc6IDAsXG4gICAgICAgICd0b3RhbCc6IDYwLFxuICAgICAgICAnYWJicmV2aWF0aW9uJzogJ20nLFxuICAgICAgICAnZGVzY3JpcHRpb24nOiAnTUlOVVRFJyxcbiAgICAgICAgJ3BhcmVudCc6ICdob3VyJyxcbiAgICAgICAgJ211bHRpcGxpZXJzJzogWzEsIDUsIDE1LCAzMF1cbiAgICAgIH0sIHtcbiAgICAgICAgJ25hbWUnOiAnaG91cicsXG4gICAgICAgICdtaWxsaXNlY29uZHMnOiAzNjAwMDAwLFxuICAgICAgICAnc3RhcnRpbmdQb2ludCc6IDAsXG4gICAgICAgICd0b3RhbCc6IDI0LFxuICAgICAgICAnYWJicmV2aWF0aW9uJzogJ2gnLFxuICAgICAgICAnZGVzY3JpcHRpb24nOiAnSE9VUicsXG4gICAgICAgICdwYXJlbnQnOiAnZGF5JyxcbiAgICAgICAgJ211bHRpcGxpZXJzJzogWzEsIDMsIDYsIDEyXVxuICAgICAgfSwge1xuICAgICAgICAnbmFtZSc6ICdkYXknLFxuICAgICAgICAnbWlsbGlzZWNvbmRzJzogODY0MDAwMDAsXG4gICAgICAgICdzdGFydGluZ1BvaW50JzogMCxcbiAgICAgICAgJ3RvdGFsJzogMzAsXG4gICAgICAgICdhYmJyZXZpYXRpb24nOiAnRCcsXG4gICAgICAgICdkZXNjcmlwdGlvbic6ICdEQVknLFxuICAgICAgICAncGFyZW50JzogJ21vbnRoJyxcbiAgICAgICAgJ211bHRpcGxpZXJzJzogWzEsIDcsIDE1XVxuICAgICAgfSwge1xuICAgICAgICAnbmFtZSc6ICdtb250aCcsXG4gICAgICAgICdtaWxsaXNlY29uZHMnOiAyNTkyMDAwMDAwLFxuICAgICAgICAnc3RhcnRpbmdQb2ludCc6IDAsXG4gICAgICAgICd0b3RhbCc6IDEyLFxuICAgICAgICAnYWJicmV2aWF0aW9uJzogJ00nLFxuICAgICAgICAnZGVzY3JpcHRpb24nOiAnTU9OVEgnLFxuICAgICAgICAncGFyZW50JzogJ3llYXInLFxuICAgICAgICAnbXVsdGlwbGllcnMnOiBbMSwgMywgNl1cbiAgICAgIH0sIHtcbiAgICAgICAgJ25hbWUnOiAneWVhcicsXG4gICAgICAgICdtaWxsaXNlY29uZHMnOiAzMTEwNDAwMDAwMCxcbiAgICAgICAgJ3N0YXJ0aW5nUG9pbnQnOiAwLFxuICAgICAgICAnYWJicmV2aWF0aW9uJzogJ1knLFxuICAgICAgICAnZGVzY3JpcHRpb24nOiAnWUVBUicsXG4gICAgICAgICdtdWx0aXBsaWVycyc6IFsxXVxuICAgICAgfV07XG4gICAgICB0aGlzLnRkQnV0dG9ucyA9IFtcbiAgICAgICAge1xuICAgICAgICAgICduYW1lJzogJ1lURCcsXG4gICAgICAgICAgJ2FiYnJldmlhdGlvbic6ICdZVEQnLFxuICAgICAgICAgICdwYXJlbnQnOiAneWVhcicsXG4gICAgICAgICAgJ21pbGxpc2Vjb25kcyc6IDMxMTA0MDAwMDAwLFxuICAgICAgICAgICdkZXNjcmlwdGlvbic6ICdZZWFyIHRvIERhdGUnXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAnbmFtZSc6ICdRVEQnLFxuICAgICAgICAgICdhYmJyZXZpYXRpb24nOiAnUVREJyxcbiAgICAgICAgICAncGFyZW50JzogJ21vbnRoJyxcbiAgICAgICAgICAnbXVsdGlwbGllcic6IDMsXG4gICAgICAgICAgJ21pbGxpc2Vjb25kcyc6IDc3NzYwMDAwMDAsXG4gICAgICAgICAgJ2Rlc2NyaXB0aW9uJzogJ1F1YXJ0ZXIgdG8gRGF0ZSdcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICduYW1lJzogJ01URCcsXG4gICAgICAgICAgJ2FiYnJldmlhdGlvbic6ICdNVEQnLFxuICAgICAgICAgICdwYXJlbnQnOiAnbW9udGgnLFxuICAgICAgICAgICdtaWxsaXNlY29uZHMnOiAyNTkyMDAwMDAwLFxuICAgICAgICAgICdkZXNjcmlwdGlvbic6ICdNb250aCB0byBEYXRlJ1xuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgJ25hbWUnOiAnV1REJyxcbiAgICAgICAgICAnYWJicmV2aWF0aW9uJzogJ1dURCcsXG4gICAgICAgICAgJ3BhcmVudCc6ICdkYXknLFxuICAgICAgICAgICdtdWx0aXBsaWVyJzogNyxcbiAgICAgICAgICAnbWlsbGlzZWNvbmRzJzogNjA0ODAwMDAwLFxuICAgICAgICAgICdkZXNjcmlwdGlvbic6ICdXZWVrIHRvIERhdGUnXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAnbmFtZSc6ICdZJyxcbiAgICAgICAgICAnYWJicmV2aWF0aW9uJzogJ1knLFxuICAgICAgICAgICdwYXJlbnQnOiAnZGF5JyxcbiAgICAgICAgICAnbWlsbGlzZWNvbmRzJzogODY0MDAwMDAsXG4gICAgICAgICAgJ2Rlc2NyaXB0aW9uJzogJ1llc3RlcmRheSdcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICduYW1lJzogJ1QnLFxuICAgICAgICAgICdhYmJyZXZpYXRpb24nOiAnVCcsXG4gICAgICAgICAgJ3BhcmVudCc6ICdkYXknLFxuICAgICAgICAgICdtaWxsaXNlY29uZHMnOiA4NjQwMDAwMCxcbiAgICAgICAgICAnZGVzY3JpcHRpb24nOiAnVG9kYXknXG4gICAgICAgIH1cbiAgICAgIF07XG4gICAgICB0aGlzLmNvbmZpZyA9IHtcbiAgICAgICAgYW5jaG9yUG9zaXRpb25zOiAncmlnaHQnLFxuICAgICAgICBhbGw6ICcxJyxcbiAgICAgICAgY29udGV4dHVhbDogJzEnLFxuICAgICAgICBjYWxjdWxhdGVkOiAnMScsXG4gICAgICAgIHRlcnRpYXJ5VGltZVBlcmlvZHM6IHt9XG4gICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEEgZnVuY3Rpb24gdG8gZ2VuZXJhdGUgdGhlIGNhbGN1bGF0ZWQgYnV0dG9ucyB1c2luZ1xuICAgICAqIHRoZSBhY3RpdmUgcmFuZ2UgYW5kIHRoZSBsb2NhdGlvbiBvZiB0aGUgYWN0aXZlIHJhbmdlXG4gICAgICovXG4gICAgZ2VuZXJhdGVDYWxjdWxhdGVkQnV0dG9ucyAoKSB7XG4gICAgICB2YXIgdGFyZ2V0QmxvY2sgPSB0aGlzLmVuZEFjdGl2ZVdpbmRvdyAtIHRoaXMuc3RhcnREYXRhc2V0LFxuICAgICAgICBpID0gMCxcbiAgICAgICAgaiA9IDAsXG4gICAgICAgIGFjdGl2ZVdpbmRvdyA9IHRoaXMuZW5kQWN0aXZlV2luZG93IC0gdGhpcy5zdGFydEFjdGl2ZVdpbmRvdyxcbiAgICAgICAgY291bnQgPSAwO1xuICAgICAgdGhpcy5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzID0gW107XG4gICAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy50aW1lUGVyaW9kcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAvLyBjaGVja2luZyB3aGV0aGVyIHRoZSB1bml0IGlzIGFwcGxpY2FibGUgZm9yIHRoZSBjdXJyZW50IHRhcmdldCBibG9ja1xuICAgICAgICBpZiAodGFyZ2V0QmxvY2sgLyB0aGlzLnRpbWVQZXJpb2RzW2ldLm1pbGxpc2Vjb25kcyA+PSAxKSB7XG4gICAgICAgICAgLy8gY2hlY2tpbmcgd2hldGhlciB0aGUgdW5pdCBpcyBvZiB0aGUgaGlnaGVyIG9yZGVyIGFuZCBvbmx5IG11bHRpcGxpZXIgMSBpcyBhcHBsaWNhYmxlXG4gICAgICAgICAgaWYgKE1hdGguZmxvb3IoKGFjdGl2ZVdpbmRvdykgLyB0aGlzLnRpbWVQZXJpb2RzW2ldLm1pbGxpc2Vjb25kcykgPCAxKSB7XG4gICAgICAgICAgICB0aGlzLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHMucHVzaCh7XG4gICAgICAgICAgICAgICdhYmJyZXZpYXRpb24nOiB0aGlzLnRpbWVQZXJpb2RzW2ldLmFiYnJldmlhdGlvbixcbiAgICAgICAgICAgICAgJ2Rlc2NyaXB0aW9uJzogdGhpcy50aW1lUGVyaW9kc1tpXS5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgICAgJ21pbGxpc2Vjb25kcyc6IHRoaXMudGltZVBlcmlvZHNbaV0ubWlsbGlzZWNvbmRzLFxuICAgICAgICAgICAgICAnbmFtZSc6IHRoaXMudGltZVBlcmlvZHNbaV0ubmFtZSxcbiAgICAgICAgICAgICAgJ211bHRpcGxpZXJzJzogWzFdXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2UgeyAvLyBpZiB0aGUgdW5pdCBpcyBvZiB0aGUgb3JkZXIgb2YgdGhlIHRhcmdldCBibG9jayBhbmQgY2FsY3VsYXRpbmcgdGhlIG11bHRpcGxpZXJzXG4gICAgICAgICAgICB0aGlzLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHMucHVzaCh7XG4gICAgICAgICAgICAgICdhYmJyZXZpYXRpb24nOiB0aGlzLnRpbWVQZXJpb2RzW2ldLmFiYnJldmlhdGlvbixcbiAgICAgICAgICAgICAgJ2Rlc2NyaXB0aW9uJzogdGhpcy50aW1lUGVyaW9kc1tpXS5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgICAgJ21pbGxpc2Vjb25kcyc6IHRoaXMudGltZVBlcmlvZHNbaV0ubWlsbGlzZWNvbmRzLFxuICAgICAgICAgICAgICAnbmFtZSc6IHRoaXMudGltZVBlcmlvZHNbaV0ubmFtZSxcbiAgICAgICAgICAgICAgJ211bHRpcGxpZXJzJzogW11cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gY2FsY3VsYXRpbmcgYW5kIHBvcHVsYXRpbmcgdGhlIGFwcGxpY2FibGUgbXVsdHBsaWVycyBvZiBlYWNoIHVuaXRcbiAgICAgICAgICAgIGZvciAoaiA9IDA7IGogPCB0aGlzLnRpbWVQZXJpb2RzW2ldLm11bHRpcGxpZXJzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgIGlmIChhY3RpdmVXaW5kb3cgLyB0aGlzLnJhdGlvIDwgdGhpcy50aW1lUGVyaW9kc1tpXS5tdWx0aXBsaWVyc1tqXSAqIHRoaXMudGltZVBlcmlvZHNbaV0ubWlsbGlzZWNvbmRzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW3RoaXMuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kcy5sZW5ndGggLSAxXS5tdWx0aXBsaWVycy5wdXNoKFxuICAgICAgICAgICAgICAgICAgdGhpcy50aW1lUGVyaW9kc1tpXS5tdWx0aXBsaWVyc1tqXVxuICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy5ub0NhbGNCdXR0b25zID0gSW5maW5pdHk7XG4gICAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGZvciAoaiA9IDA7IGogPCB0aGlzLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHNbaV0ubXVsdGlwbGllcnMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICArK2NvdW50O1xuICAgICAgICAgIGlmICh0aGlzLm5vQ2FsY0J1dHRvbnMgPiBpKSB7XG4gICAgICAgICAgICB0aGlzLm5vQ2FsY0J1dHRvbnMgPSBpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoY291bnQgPD0gNCkge1xuICAgICAgICAgICAgdGhpcy5zdGFydFBvaW50TXVsdGlwbGllciA9IGo7XG4gICAgICAgICAgICB0aGlzLnN0YXJ0UG9pbnRVbml0ID0gaTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gdGhpcy5kcmF3QnV0dG9uc0NhbGN1bGF0ZWQodGhpcy5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBIGZ1bmN0aW9uIHRvIGdlbmVyYXRlIHRoZSBjb250ZXh0dWFsIGJ1dHRvbnMgdXNpbmdcbiAgICAgKiB0aGUgZW5kIHBvaW50IG9mIHRoZSB0aW1lLXNjYWxlXG4gICAgICovXG4gICAgZ2VuZXJhdGVDb250ZXh0dWFsQnV0dG9ucyAoKSB7XG4gICAgICAvLyBnZW5lcmF0aW5nIGFuIGFycmF5IHdpdGggYXBwbGljYWJsZSBURCBidXR0b25zXG4gICAgICB2YXIgYnV0dG9ucyA9IFtdLFxuICAgICAgICBpID0gMCxcbiAgICAgICAgZW5kU3RhbXAgPSB0aGlzLmdsb2JhbFJlYWN0aXZlTW9kZWwubW9kZWxbJ3gtYXhpcy1hYnNvbHV0ZS1yYW5nZS1lbmQnXSxcbiAgICAgICAgZGF0ZVN0YXJ0ID0gZW5kU3RhbXAgLSAyLFxuICAgICAgICBkYXRlRW5kID0gZW5kU3RhbXAsXG4gICAgICAgIHJlbGF0aXZlVERCdXR0b24gPSB7fTtcbiAgICAgIGZvciAoOyBpIDwgdGhpcy50ZEJ1dHRvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZGF0ZVN0YXJ0ID0gbmV3IERhdGUoZW5kU3RhbXApO1xuICAgICAgICBpZiAodGhpcy50ZEJ1dHRvbnNbaV0ubmFtZSA9PT0gJ1lURCcpIHtcbiAgICAgICAgICBkYXRlU3RhcnQuc2V0TW9udGgoMCk7XG4gICAgICAgICAgZGF0ZVN0YXJ0LnNldERhdGUoMSk7XG4gICAgICAgICAgZGF0ZVN0YXJ0LnNldEhvdXJzKDApO1xuICAgICAgICAgIGRhdGVTdGFydC5zZXRNaW51dGVzKDApO1xuICAgICAgICAgIGRhdGVTdGFydC5zZXRTZWNvbmRzKDApO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMudGRCdXR0b25zW2ldLm5hbWUgPT09ICdNVEQnKSB7XG4gICAgICAgICAgZGF0ZVN0YXJ0LnNldERhdGUoMSk7XG4gICAgICAgICAgZGF0ZVN0YXJ0LnNldEhvdXJzKDApO1xuICAgICAgICAgIGRhdGVTdGFydC5zZXRNaW51dGVzKDApO1xuICAgICAgICAgIGRhdGVTdGFydC5zZXRTZWNvbmRzKDApO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMudGRCdXR0b25zW2ldLm5hbWUgPT09ICdRVEQnKSB7XG4gICAgICAgICAgZGF0ZVN0YXJ0LnNldE1vbnRoKDExIC0gKGRhdGVTdGFydC5nZXRNb250aCgpICUgNCkpO1xuICAgICAgICAgIGRhdGVTdGFydC5zZXREYXRlKDApO1xuICAgICAgICAgIGRhdGVTdGFydC5zZXRIb3VycygwKTtcbiAgICAgICAgICBkYXRlU3RhcnQuc2V0TWludXRlcygwKTtcbiAgICAgICAgICBkYXRlU3RhcnQuc2V0U2Vjb25kcygwKTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnRkQnV0dG9uc1tpXS5uYW1lID09PSAnV1REJykge1xuICAgICAgICAgIGRhdGVTdGFydC5zZXREYXRlKGRhdGVTdGFydC5nZXREYXRlKCkgLSBkYXRlU3RhcnQuZ2V0RGF5KCkpO1xuICAgICAgICAgIGRhdGVTdGFydC5zZXRIb3VycygwKTtcbiAgICAgICAgICBkYXRlU3RhcnQuc2V0TWludXRlcygwKTtcbiAgICAgICAgICBkYXRlU3RhcnQuc2V0U2Vjb25kcygwKTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnRkQnV0dG9uc1tpXS5uYW1lID09PSAnWScpIHtcbiAgICAgICAgICBkYXRlU3RhcnQuc2V0SG91cnMoMCk7XG4gICAgICAgICAgZGF0ZVN0YXJ0LnNldE1pbnV0ZXMoMCk7XG4gICAgICAgICAgZGF0ZVN0YXJ0LnNldFNlY29uZHMoMCk7XG4gICAgICAgICAgZGF0ZVN0YXJ0IC09IDg2NDAwMDAwO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMudGRCdXR0b25zW2ldLm5hbWUgPT09ICdUJykge1xuICAgICAgICAgIGRhdGVTdGFydC5zZXRIb3VycygwKTtcbiAgICAgICAgICBkYXRlU3RhcnQuc2V0TWludXRlcygwKTtcbiAgICAgICAgICBkYXRlU3RhcnQuc2V0U2Vjb25kcygwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChkYXRlRW5kIDwgZGF0ZVN0YXJ0KSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy50ZEJ1dHRvbnNbaV0uZGF0ZVN0YXJ0ID0gZGF0ZVN0YXJ0LnZhbHVlT2YoKTtcbiAgICAgICAgICB0aGlzLnRkQnV0dG9uc1tpXS5kYXRlRW5kID0gZGF0ZUVuZC52YWx1ZU9mKCk7XG4gICAgICAgICAgYnV0dG9ucy5wdXNoKHRoaXMudGRCdXR0b25zW2ldKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmVsYXRpdmVUREJ1dHRvbi5taWxsaXNlY29uZHMgPSBJbmZpbml0eTtcbiAgICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLnRkQnV0dG9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoTWF0aC5hYnModGhpcy50ZEJ1dHRvbnNbaV0ubWlsbGlzZWNvbmRzIC0gKHRoaXMuZW5kQWN0aXZlV2luZG93IC0gdGhpcy5zdGFydEFjdGl2ZVdpbmRvdykpIDwgcmVsYXRpdmVUREJ1dHRvbi5taWxsaXNlY29uZHMpIHtcbiAgICAgICAgICByZWxhdGl2ZVREQnV0dG9uLm1pbGxpc2Vjb25kcyA9IHRoaXMudGRCdXR0b25zW2ldLm1pbGxpc2Vjb25kcztcbiAgICAgICAgICByZWxhdGl2ZVREQnV0dG9uLm5hbWUgPSB0aGlzLnRkQnV0dG9uc1tpXS5hYmJyZXZpYXRpb247XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdGhpcy5zdGFuZGFyZENvbnRleHVhbFBlcmlvZHMgPSBidXR0b25zO1xuICAgICAgLy8gdGhpcy5kcmF3QnV0dG9uc0NvbnRleHR1YWwodGhpcy5zdGFuZGFyZENvbnRleHVhbFBlcmlvZHMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEEgZnVuY3Rpb24gdG8gc2V0IHRoZSBhY3RpdmUgcGVyaW9kJ3NcbiAgICAgKiBzdGFydCBhbmQgZW5kIHBvaW50XG4gICAgICogQHBhcmFtICB7bnVtYmVyfSBkYXRlIHN0YW1wIC0gQSBVTklYIHRpbWVzdGFtcCB0byBiZSBzZXQgYXMgdGhlIHN0YXJ0IHBvaW50IG9mIGFjdGl2ZSBwZXJpb2RcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IGRhdGUgc3RhbXAgLSBBIFVOSVggdGltZXN0YW1wIHRvIGJlIHNldCBhcyB0aGUgZW5kIHBvaW50IG9mIGFjdGl2ZSBwZXJpb2RcbiAgICAgKi9cbiAgICBzZXRBY3RpdmVQZXJpb2QgKCkge1xuICAgICAgdmFyIHN0YXJ0LFxuICAgICAgICBlbmQsXG4gICAgICAgIHRlbXAgPSB3aW5kb3cucGVyZm9ybWFuY2Uubm93KCk7XG4gICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBlbmQgPSB0aGlzLmdsb2JhbFJlYWN0aXZlTW9kZWwubW9kZWxbJ3gtYXhpcy12aXNpYmxlLXJhbmdlLWVuZCddO1xuICAgICAgICBzdGFydCA9IGVuZCAtIGFyZ3VtZW50c1swXTtcbiAgICAgIH0gZWxzZSBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMikge1xuICAgICAgICBzdGFydCA9IGFyZ3VtZW50c1swXTtcbiAgICAgICAgZW5kID0gYXJndW1lbnRzWzFdO1xuICAgICAgfVxuICAgICAgdGhpcy5zdGFydEFjdGl2ZVdpbmRvdyA9IHN0YXJ0O1xuICAgICAgdGhpcy5lbmRBY3RpdmVXaW5kb3cgPSBlbmQ7XG4gICAgICB0aGlzLmdlbmVyYXRlQ2FsY3VsYXRlZEJ1dHRvbnMoKTtcbiAgICAgIHRoaXMuZ2xvYmFsUmVhY3RpdmVNb2RlbC5tb2RlbFsneC1heGlzLXZpc2libGUtcmFuZ2Utc3RhcnQnXSA9IHRoaXMuc3RhcnRBY3RpdmVXaW5kb3c7XG4gICAgICB0aGlzLmdsb2JhbFJlYWN0aXZlTW9kZWwubW9kZWxbJ3gtYXhpcy12aXNpYmxlLXJhbmdlLWVuZCddID0gdGhpcy5lbmRBY3RpdmVXaW5kb3c7XG4gICAgICB0aGlzLmdlbmVyYXRlQ29udGV4dHVhbEJ1dHRvbnMoKTtcbiAgICB9XG5cbiAgICBzZXRBY3RpdmVQZXJpb2RGb3JCdXR0b25DaGFuZ2UgKCkge1xuICAgICAgdmFyIHN0YXJ0LFxuICAgICAgICBlbmQ7XG4gICAgICBzdGFydCA9IGFyZ3VtZW50c1swXTtcbiAgICAgIGVuZCA9IGFyZ3VtZW50c1sxXTtcbiAgICAgIHRoaXMuc3RhcnRBY3RpdmVXaW5kb3cgPSBzdGFydDtcbiAgICAgIHRoaXMuZW5kQWN0aXZlV2luZG93ID0gZW5kO1xuICAgICAgdGhpcy5nZW5lcmF0ZUNhbGN1bGF0ZWRCdXR0b25zKCk7XG4gICAgICB0aGlzLmdlbmVyYXRlQ29udGV4dHVhbEJ1dHRvbnMoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBIGZ1bmN0aW9uIHRvIHNldCB0aGUgc3RhcnQgYW5kIGVuZCBwb2ludCBvZiB0aGVcbiAgICAgKiBlbnRpcmUgdGltZS1saW5lXG4gICAgICogQHBhcmFtICB7bnVtYmVyfSBkYXRlIHN0YW1wIC0gQSBVTklYIHRpbWVzdGFtcCB0byBiZSBzZXQgYXMgdGhlIHN0YXJ0IHBvaW50IG9mIHRpbWUtbGluZVxuICAgICAqIEBwYXJhbSAge251bWJlcn0gZGF0ZSBzdGFtcCAtIEEgVU5JWCB0aW1lc3RhbXAgdG8gYmUgc2V0IGFzIHRoZSBlbmQgcG9pbnQgb2YgdGltZS1saW5lXG4gICAgICovXG5cbiAgICAvKipcbiAgICAgKiBBIGZ1bmN0aW9uIHRvIHNldCB0aGUgb2JqZWN0IHRvIHNldCB0aGUgdXNlciBwcmVmZXJlbmNlc1xuICAgICAqL1xuICAgIGNvbmZpZ3VyZSAoY29uZmlnKSB7XG4gICAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGdXNpb25jaGFydHMgbGlmZSBjeWNsZSBtZXRob2QgZm9yIGV4dGVuc2lvblxuICAgICAqL1xuICAgIGluaXQgKHJlcXVpcmUpIHtcbiAgICAgIHZhciBpbnN0YW5jZSA9IHRoaXM7XG4gICAgICByZXF1aXJlKFtcbiAgICAgICAgJ3hBeGlzJyxcbiAgICAgICAgJ3lBeGlzJyxcbiAgICAgICAgJ2dyYXBoaWNzJyxcbiAgICAgICAgJ2NoYXJ0JyxcbiAgICAgICAgJ2RhdGFzZXQnLFxuICAgICAgICAnUGxvdE1hbmFnZXInLFxuICAgICAgICAnY2FudmFzQ29uZmlnJyxcbiAgICAgICAgJ01hcmtlck1hbmFnZXInLFxuICAgICAgICAncmVhY3RpdmVNb2RlbCcsXG4gICAgICAgICdnbG9iYWxSZWFjdGl2ZU1vZGVsJyxcbiAgICAgICAgJ3NwYWNlTWFuYWdlckluc3RhbmNlJyxcbiAgICAgICAgJ3NtYXJ0TGFiZWwnLFxuICAgICAgICAnZXh0RGF0YScsXG4gICAgICAgICdjaGFydEluc3RhbmNlJyxcbiAgICAgICAgZnVuY3Rpb24gKFxuICAgICAgICAgICAgICB4QXhpcyxcbiAgICAgICAgICAgICAgeUF4aXMsXG4gICAgICAgICAgICAgIGdyYXBoaWNzLFxuICAgICAgICAgICAgICBjaGFydCxcbiAgICAgICAgICAgICAgZGF0YXNldCxcbiAgICAgICAgICAgICAgcGxvdE1hbmFnZXIsXG4gICAgICAgICAgICAgIGNhbnZhc0NvbmZpZyxcbiAgICAgICAgICAgICAgbWFya2VyTWFuYWdlcixcbiAgICAgICAgICAgICAgcmVhY3RpdmVNb2RlbCxcbiAgICAgICAgICAgICAgZ2xvYmFsUmVhY3RpdmVNb2RlbCxcbiAgICAgICAgICAgICAgc3BhY2VNYW5hZ2VySW5zdGFuY2UsXG4gICAgICAgICAgICAgIHNtYXJ0TGFiZWwsXG4gICAgICAgICAgICAgIGV4dERhdGEsXG4gICAgICAgICAgICAgIGNoYXJ0SW5zdGFuY2UpIHtcbiAgICAgICAgICBpbnN0YW5jZS54QXhpcyA9IHhBeGlzO1xuICAgICAgICAgIGluc3RhbmNlLnlBeGlzID0geUF4aXM7XG4gICAgICAgICAgaW5zdGFuY2UuZ3JhcGhpY3MgPSBncmFwaGljcztcbiAgICAgICAgICBpbnN0YW5jZS5jaGFydCA9IGNoYXJ0O1xuICAgICAgICAgIGluc3RhbmNlLmRhdGFzZXQgPSBkYXRhc2V0O1xuICAgICAgICAgIGluc3RhbmNlLnBsb3RNYW5hZ2VyID0gcGxvdE1hbmFnZXI7XG4gICAgICAgICAgaW5zdGFuY2UubWFya2VyTWFuYWdlciA9IG1hcmtlck1hbmFnZXI7XG4gICAgICAgICAgaW5zdGFuY2UuY2FudmFzQ29uZmlnID0gY2FudmFzQ29uZmlnO1xuICAgICAgICAgIGluc3RhbmNlLnJlYWN0aXZlTW9kZWwgPSByZWFjdGl2ZU1vZGVsO1xuICAgICAgICAgIGluc3RhbmNlLmdsb2JhbFJlYWN0aXZlTW9kZWwgPSBnbG9iYWxSZWFjdGl2ZU1vZGVsO1xuICAgICAgICAgIGluc3RhbmNlLnNwYWNlTWFuYWdlckluc3RhbmNlID0gc3BhY2VNYW5hZ2VySW5zdGFuY2U7XG4gICAgICAgICAgaW5zdGFuY2Uuc21hcnRMYWJlbCA9IHNtYXJ0TGFiZWw7XG4gICAgICAgICAgaW5zdGFuY2UuZXh0RGF0YSA9IGV4dERhdGE7XG4gICAgICAgICAgaW5zdGFuY2UuY2hhcnRJbnN0YW5jZSA9IGNoYXJ0SW5zdGFuY2U7XG4gICAgICAgIH1cbiAgICAgIF0pO1xuICAgICAgdGhpcy5zcGFjZU1hbmFnZXJJbnN0YW5jZSA9IGluc3RhbmNlLnNwYWNlTWFuYWdlckluc3RhbmNlO1xuICAgICAgdGhpcy5nbG9iYWxSZWFjdGl2ZU1vZGVsID0gaW5zdGFuY2UuZ2xvYmFsUmVhY3RpdmVNb2RlbDtcbiAgICAgIHRoaXMuZW5kQWN0aXZlV2luZG93ID0gaW5zdGFuY2UuZ2xvYmFsUmVhY3RpdmVNb2RlbC5tb2RlbFsneC1heGlzLXZpc2libGUtcmFuZ2UtZW5kJ107XG4gICAgICB0aGlzLnN0YXJ0QWN0aXZlV2luZG93ID0gaW5zdGFuY2UuZ2xvYmFsUmVhY3RpdmVNb2RlbC5tb2RlbFsneC1heGlzLXZpc2libGUtcmFuZ2Utc3RhcnQnXTtcbiAgICAgIHRoaXMuc3RhcnREYXRhc2V0ID0gaW5zdGFuY2UuZ2xvYmFsUmVhY3RpdmVNb2RlbC5tb2RlbFsneC1heGlzLWFic29sdXRlLXJhbmdlLXN0YXJ0J107XG4gICAgICB0aGlzLmVuZERhdGFzZXQgPSBpbnN0YW5jZS5nbG9iYWxSZWFjdGl2ZU1vZGVsLm1vZGVsWyd4LWF4aXMtYWJzb2x1dGUtcmFuZ2UtZW5kJ107XG4gICAgICB0aGlzLnNldEFjdGl2ZVBlcmlvZCh0aGlzLnN0YXJ0QWN0aXZlV2luZG93LCB0aGlzLmVuZEFjdGl2ZVdpbmRvdyk7XG4gICAgICAvLyBpbnN0YW5jZS5nbG9iYWxSZWFjdGl2ZU1vZGVsLm1vZGVsWydfeC1heGlzLXZpc2libGUtcmFuZ2Utc3RhcnQnXSArPSAxMjQ0MTYwMDAwMDA7XG4gICAgICB0aGlzLnNldEFjdGl2ZVBlcmlvZCh0aGlzLnN0YXJ0QWN0aXZlV2luZG93LCB0aGlzLmVuZEFjdGl2ZVdpbmRvdyk7XG4gICAgICB0aGlzLnRpbWVSdWxlcyA9IHRoaXMuY2hhcnRJbnN0YW5jZS5hcGlJbnN0YW5jZS5nZXRDb21wb25lbnRTdG9yZSgpO1xuICAgICAgdGhpcy50aW1lUnVsZXMgPSB0aGlzLnRpbWVSdWxlcy5nZXRDYW52YXNCeUluZGV4KDApLmNvbXBvc2l0aW9uLmltcGw7XG4gICAgICB0aGlzLnRpbWVSdWxlcyA9IHRoaXMudGltZVJ1bGVzLmdldERhdGFBZ2dyZWdhdG9yKCk7XG4gICAgICB0aGlzLnRpbWVSdWxlcyA9IHRoaXMudGltZVJ1bGVzLmdldEFnZ3JlZ2F0aW9uVGltZVJ1bGVzKCk7XG4gICAgICB0aGlzLnRvb2xiYXJzID0gW107XG4gICAgICB0aGlzLm1lYXN1cmVtZW50ID0ge307XG4gICAgICB0aGlzLmZsYWcgPSB0cnVlO1xuXG4gICAgICB0aGlzLnRvb2xiYXJzLnB1c2godGhpcy5jcmVhdGVUb29sYmFyKCkpO1xuXG4gICAgICB0aGlzLmdsb2JhbFJlYWN0aXZlTW9kZWwub25Qcm9wc0NoYW5nZShbJ3gtYXhpcy12aXNpYmxlLXJhbmdlLXN0YXJ0JywgJ3gtYXhpcy12aXNpYmxlLXJhbmdlLWVuZCddLFxuICAgICAgICBmdW5jdGlvbiAoc3RhcnQsIGVuZCkge1xuICAgICAgICAgIHZhciB0ZW1wID0gd2luZG93LnBlcmZvcm1hbmNlLm5vdygpO1xuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdHYXAnLCB0ZW1wIC0gKHdpbmRvdy50ZW1wVGltZSB8fCAwKSk7XG4gICAgICAgICAgd2luZG93LnRlbXBUaW1lID0gdGVtcDtcbiAgICAgICAgICBpZiAoaW5zdGFuY2UuZmxhZykge1xuICAgICAgICAgICAgaW5zdGFuY2UuZmxhZyA9IGZhbHNlO1xuICAgICAgICAgICAgaW5zdGFuY2Uuc2V0QWN0aXZlUGVyaW9kKHN0YXJ0WzFdLCBlbmRbMV0pO1xuICAgICAgICAgICAgaW5zdGFuY2UudG9vbGJhci5kaXNwb3NlKCk7XG4gICAgICAgICAgICBpbnN0YW5jZS50b29sYmFycy5wb3AoKTtcbiAgICAgICAgICAgIGluc3RhbmNlLnRvb2xiYXJzLnB1c2goaW5zdGFuY2UuY3JlYXRlVG9vbGJhcigpKTtcbiAgICAgICAgICAgIGluc3RhbmNlLmdldExvZ2ljYWxTcGFjZSgpO1xuICAgICAgICAgICAgaW5zdGFuY2UuZHJhdygpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgY3JlYXRlVG9vbGJhciAoKSB7XG4gICAgICB2YXIgdW5pZ3JvdXAsXG4gICAgICAgIHRvb2xiYXIsXG4gICAgICAgIGNhbGN1bGF0ZWRCdXR0b25zLFxuICAgICAgICBjb250ZXh0dWFsQnV0dG9ucyxcbiAgICAgICAgYWxsQnV0dG9uLFxuICAgICAgICBzZWxmID0gdGhpcyxcbiAgICAgICAgZGVkdWN0b3JBciA9IFtdLFxuICAgICAgICBzdGFydE11bHRpcGxpZXIsXG4gICAgICAgIGRlZHVjdG9yLFxuICAgICAgICBpLFxuICAgICAgICBqLFxuICAgICAgICBtYXJnaW4sXG4gICAgICAgIGZyb21EYXRlTGFiZWwsXG4gICAgICAgIGdyb3VwO1xuXG4gICAgICBncm91cCA9IG5ldyB0aGlzLnRvb2xib3guQ29tcG9uZW50R3JvdXAoe1xuICAgICAgICBwYXBlcjogdGhpcy5ncmFwaGljcy5wYXBlcixcbiAgICAgICAgY2hhcnQ6IHRoaXMuY2hhcnQsXG4gICAgICAgIHNtYXJ0TGFiZWw6IHRoaXMuc21hcnRMYWJlbCxcbiAgICAgICAgY2hhcnRDb250YWluZXI6IHRoaXMuZ3JhcGhpY3MuY29udGFpbmVyXG4gICAgICB9KTtcblxuICAgICAgdW5pZ3JvdXAgPSBuZXcgdGhpcy50b29sYm94LlVuaVNlbGVjdENvbXBvbmVudEdyb3VwKHtcbiAgICAgICAgcGFwZXI6IHRoaXMuZ3JhcGhpY3MucGFwZXIsXG4gICAgICAgIGNoYXJ0OiB0aGlzLmNoYXJ0LFxuICAgICAgICBzbWFydExhYmVsOiB0aGlzLnNtYXJ0TGFiZWwsXG4gICAgICAgIGNoYXJ0Q29udGFpbmVyOiB0aGlzLmdyYXBoaWNzLmNvbnRhaW5lclxuICAgICAgfSk7XG4gICAgICB1bmlncm91cC5zZXRDb25maWcoe1xuICAgICAgICBmaWxsOiAnI2ZmZicsXG4gICAgICAgIGJvcmRlclRoaWNrbmVzczogMFxuICAgICAgfSk7XG4gICAgICBncm91cC5zZXRDb25maWcoe1xuICAgICAgICBmaWxsOiAnI2ZmZicsXG4gICAgICAgIGJvcmRlclRoaWNrbmVzczogMFxuICAgICAgfSk7XG4gICAgICB0b29sYmFyID0gbmV3IHRoaXMuSG9yaXpvbnRhbFRvb2xiYXIoe1xuICAgICAgICBwYXBlcjogdGhpcy5ncmFwaGljcy5wYXBlcixcbiAgICAgICAgY2hhcnQ6IHRoaXMuY2hhcnQsXG4gICAgICAgIHNtYXJ0TGFiZWw6IHRoaXMuc21hcnRMYWJlbCxcbiAgICAgICAgY2hhcnRDb250YWluZXI6IHRoaXMuZ3JhcGhpY3MuY29udGFpbmVyXG4gICAgICB9KTtcbiAgICAgIHRvb2xiYXIuc2V0Q29uZmlnKHtcbiAgICAgICAgZmlsbDogJyNmZmYnLFxuICAgICAgICBib3JkZXJUaGlja25lc3M6IDBcbiAgICAgIH0pO1xuICAgICAgZnJvbURhdGVMYWJlbCA9IG5ldyB0aGlzLnRvb2xib3guTGFiZWwoJ1pvb206Jywge1xuICAgICAgICBzbWFydExhYmVsOiB0aGlzLnNtYXJ0TGFiZWwsXG4gICAgICAgIHBhcGVyOiB0aGlzLmdyYXBoaWNzLnBhcGVyXG4gICAgICB9LCB7XG4gICAgICAgIHRleHQ6IHtcbiAgICAgICAgICBzdHlsZToge1xuICAgICAgICAgICAgJ2ZvbnQtZmFtaWx5JzogJ1wiTHVjaWRhIEdyYW5kZVwiLCBzYW5zLXNlcmlmJyxcbiAgICAgICAgICAgICdmb250LXNpemUnOiAnMTMnLFxuICAgICAgICAgICAgJ2ZpbGwnOiAnIzY5Njk2OScsXG4gICAgICAgICAgICAnZm9udC13ZWlnaHQnOiAnYm9sZCdcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGNvbnRhaW5lcjoge1xuICAgICAgICAgIGhlaWdodDogMjJcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBncm91cC5hZGRTeW1ib2woZnJvbURhdGVMYWJlbCk7XG4gICAgICBhbGxCdXR0b24gPSBuZXcgdGhpcy50b29sYm94LlN5bWJvbCgnQUxMJywgdHJ1ZSwge1xuICAgICAgICBwYXBlcjogdGhpcy5ncmFwaGljcy5wYXBlcixcbiAgICAgICAgY2hhcnQ6IHRoaXMuY2hhcnQsXG4gICAgICAgIHNtYXJ0TGFiZWw6IHRoaXMuc21hcnRMYWJlbCxcbiAgICAgICAgY2hhcnRDb250YWluZXI6IHRoaXMuZ3JhcGhpY3MuY29udGFpbmVyXG4gICAgICB9LCB7XG4gICAgICAgIGZpbGw6ICcjZmZmZmZmJyxcbiAgICAgICAgbGFiZWxGaWxsOiAnIzY5Njk2OScsXG4gICAgICAgIHN5bWJvbFN0cm9rZVdpZHRoOiAnMicsXG4gICAgICAgIHN0cm9rZTogJyNjZWQ1ZDQnLFxuICAgICAgICBzdHJva2VXaWR0aDogJzEnLFxuICAgICAgICBob3ZlckZpbGw6ICcjY2VkNWQ0JyxcbiAgICAgICAgaGVpZ2h0OiAyMixcbiAgICAgICAgcmFkaXVzOiAxLFxuICAgICAgICBtYXJnaW46IHtcbiAgICAgICAgICByaWdodDogNVxuICAgICAgICB9LFxuICAgICAgICBidG5UZXh0U3R5bGU6IHtcbiAgICAgICAgICAnZm9udEZhbWlseSc6ICdcIkx1Y2lkYSBHcmFuZGVcIiwgc2Fucy1zZXJpZicsXG4gICAgICAgICAgJ2ZvbnRTaXplJzogJzEzJyxcbiAgICAgICAgICAnZmlsbCc6ICcjNjk2OTY5JyxcbiAgICAgICAgICAnbGluZS1oZWlnaHQnOiAnMScsXG4gICAgICAgICAgJ2xldHRlci1zcGFjaW5nJzogJy0wLjA0ZW0nXG4gICAgICAgIH1cbiAgICAgIH0pLmF0dGFjaEV2ZW50SGFuZGxlcnMoe1xuICAgICAgICBjbGljazogZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHNlbGYuc2V0QWN0aXZlUGVyaW9kKHNlbGYuc3RhcnREYXRhc2V0LCBzZWxmLmVuZERhdGFzZXQpO1xuICAgICAgICAgIHRvb2xiYXIuZGlzcG9zZSgpO1xuICAgICAgICAgIHNlbGYuY2xpY2tlZElkID0gJ0FMTCc7XG4gICAgICAgICAgc2VsZi50b29sYmFycy5wb3AoKTtcbiAgICAgICAgICBzZWxmLnRvb2xiYXJzLnB1c2goc2VsZi5jcmVhdGVUb29sYmFyKCkpO1xuICAgICAgICAgIHNlbGYuZ2V0TG9naWNhbFNwYWNlKCk7XG4gICAgICAgICAgc2VsZi5kcmF3KCk7XG4gICAgICAgICAgLy8gc2VsZi5fcmVmLnJlQWxsb2NhdGUoc2VsZi5wYXJlbnRHcm91cCk7XG4gICAgICAgIH0sXG4gICAgICAgIHRvb2x0ZXh0OiAnQUxMJ1xuICAgICAgfSk7XG5cbiAgICAgIHVuaWdyb3VwLmFkZFN5bWJvbChhbGxCdXR0b24pO1xuICAgICAgZm9yIChpID0gMDsgaSA8IHRoaXMuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBmb3IgKGogPSB0aGlzLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHNbaV0ubXVsdGlwbGllcnMubGVuZ3RoIC0gMTsgaiA+PSAwOyBqLS0pIHtcbiAgICAgICAgICBkZWR1Y3RvckFyLnB1c2goc2VsZi5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW2ldLm11bHRpcGxpZXJzW2pdICogc2VsZi5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW2ldLm1pbGxpc2Vjb25kcyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY2FsY3VsYXRlZEJ1dHRvbnMgPSBbXTtcbiAgICAgIGZvciAobGV0IGkgPSBzZWxmLnN0YXJ0UG9pbnRVbml0OyBpID49IDA7IGktLSkge1xuICAgICAgICBpZiAoaSA9PT0gc2VsZi5zdGFydFBvaW50VW5pdCkge1xuICAgICAgICAgIHN0YXJ0TXVsdGlwbGllciA9IHNlbGYuc3RhcnRQb2ludE11bHRpcGxpZXI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3RhcnRNdWx0aXBsaWVyID0gc2VsZi5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW2ldLm11bHRpcGxpZXJzLmxlbmd0aCAtIDE7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgaiA9IHN0YXJ0TXVsdGlwbGllcjsgaiA+PSAwOyBqLS0pIHtcbiAgICAgICAgICBtYXJnaW4gPSAoaSA9PT0gc2VsZi5ub0NhbGNCdXR0b25zICYmIGogPT09IDApID8gNSA6IDA7XG4gICAgICAgICAgY2FsY3VsYXRlZEJ1dHRvbnNbaV0gPSBuZXcgdGhpcy50b29sYm94LlN5bWJvbChzZWxmLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHNbaV0ubXVsdGlwbGllcnNbal0gKyBzZWxmLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHNbaV0uYWJicmV2aWF0aW9uLCB0cnVlLCB7XG4gICAgICAgICAgICBwYXBlcjogdGhpcy5ncmFwaGljcy5wYXBlcixcbiAgICAgICAgICAgIGNoYXJ0OiB0aGlzLmNoYXJ0LFxuICAgICAgICAgICAgc21hcnRMYWJlbDogdGhpcy5zbWFydExhYmVsLFxuICAgICAgICAgICAgY2hhcnRDb250YWluZXI6IHRoaXMuZ3JhcGhpY3MuY29udGFpbmVyXG4gICAgICAgICAgfSwge1xuICAgICAgICAgICAgZmlsbDogJyNmZmZmZmYnLFxuICAgICAgICAgICAgbGFiZWxGaWxsOiAnIzY5Njk2OScsXG4gICAgICAgICAgICBzeW1ib2xTdHJva2VXaWR0aDogJzInLFxuICAgICAgICAgICAgc3Ryb2tlOiAnI2NlZDVkNCcsXG4gICAgICAgICAgICBzdHJva2VXaWR0aDogJzEnLFxuICAgICAgICAgICAgaG92ZXJGaWxsOiAnI2NlZDVkNCcsXG4gICAgICAgICAgICBoZWlnaHQ6IDIyLFxuICAgICAgICAgICAgcmFkaXVzOiAxLFxuICAgICAgICAgICAgbWFyZ2luOiB7XG4gICAgICAgICAgICAgIHJpZ2h0OiBtYXJnaW5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBidG5UZXh0U3R5bGU6IHtcbiAgICAgICAgICAgICAgJ2ZvbnRGYW1pbHknOiAnXCJMdWNpZGEgR3JhbmRlXCIsIHNhbnMtc2VyaWYnLFxuICAgICAgICAgICAgICAnZm9udFNpemUnOiAnMTMnLFxuICAgICAgICAgICAgICAnZmlsbCc6ICcjNjk2OTY5JyxcbiAgICAgICAgICAgICAgJ2xpbmUtaGVpZ2h0JzogJzEnLFxuICAgICAgICAgICAgICAnbGV0dGVyLXNwYWNpbmcnOiAnLTAuMDRlbSdcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KS5hdHRhY2hFdmVudEhhbmRsZXJzKHtcbiAgICAgICAgICAgICdjbGljayc6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgZGVkdWN0b3IgPSAoc2VsZi5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW2ldLm11bHRpcGxpZXJzW2pdICogc2VsZi5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW2ldLm1pbGxpc2Vjb25kcyk7XG4gICAgICAgICAgICAgIHNlbGYuY2xpY2tlZElkID0gc2VsZi5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW2ldLm11bHRpcGxpZXJzW2pdICsgc2VsZi5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW2ldLmFiYnJldmlhdGlvbjtcbiAgICAgICAgICAgICAgc2VsZi5zZXRBY3RpdmVQZXJpb2QoZGVkdWN0b3IpO1xuICAgICAgICAgICAgICB0b29sYmFyLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgICAgc2VsZi50b29sYmFycy5wb3AoKTtcbiAgICAgICAgICAgICAgc2VsZi50b29sYmFycy5wdXNoKHNlbGYuY3JlYXRlVG9vbGJhcigpKTtcbiAgICAgICAgICAgICAgc2VsZi5nZXRMb2dpY2FsU3BhY2UoKTtcbiAgICAgICAgICAgICAgc2VsZi5kcmF3KCk7XG4gICAgICAgICAgICAgIC8vIHNlbGYuX3JlZi5yZUFsbG9jYXRlKHNlbGYucGFyZW50R3JvdXApO1xuICAgICAgICAgICAgICAvLyB0aGlzLnRvb2xiYXJzW3RoaXMudG9vbGJhcnMubGVuZ3RoIC0gMV0gPSB0aGlzLmNyZWF0ZVRvb2xiYXIoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0b29sdGV4dDogc2VsZi5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW2ldLm11bHRpcGxpZXJzW2pdICsgJyAnICsgc2VsZi5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW2ldLmRlc2NyaXB0aW9uXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdW5pZ3JvdXAuYWRkU3ltYm9sKGNhbGN1bGF0ZWRCdXR0b25zW2ldKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb250ZXh0dWFsQnV0dG9ucyA9IFtdO1xuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc3RhbmRhcmRDb250ZXh1YWxQZXJpb2RzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnRleHR1YWxCdXR0b25zW2ldID0gbmV3IHRoaXMudG9vbGJveC5TeW1ib2wodGhpcy5zdGFuZGFyZENvbnRleHVhbFBlcmlvZHNbaV0uYWJicmV2aWF0aW9uLCB0cnVlLCB7XG4gICAgICAgICAgcGFwZXI6IHRoaXMuZ3JhcGhpY3MucGFwZXIsXG4gICAgICAgICAgY2hhcnQ6IHRoaXMuY2hhcnQsXG4gICAgICAgICAgc21hcnRMYWJlbDogdGhpcy5zbWFydExhYmVsLFxuICAgICAgICAgIGNoYXJ0Q29udGFpbmVyOiB0aGlzLmdyYXBoaWNzLmNvbnRhaW5lclxuICAgICAgICB9LCB7XG4gICAgICAgICAgZmlsbDogJyNmZmZmZmYnLFxuICAgICAgICAgIGxhYmVsRmlsbDogJyM2OTY5NjknLFxuICAgICAgICAgIHN5bWJvbFN0cm9rZVdpZHRoOiAnMicsXG4gICAgICAgICAgc3Ryb2tlOiAnI2NlZDVkNCcsXG4gICAgICAgICAgc3Ryb2tlV2lkdGg6ICcxJyxcbiAgICAgICAgICBoZWlnaHQ6IDIyLFxuICAgICAgICAgIGhvdmVyRmlsbDogJyNjZWQ1ZDQnLFxuICAgICAgICAgIHJhZGl1czogMSxcbiAgICAgICAgICBtYXJnaW46IHtcbiAgICAgICAgICAgIHJpZ2h0OiAwXG4gICAgICAgICAgfSxcbiAgICAgICAgICBidG5UZXh0U3R5bGU6IHtcbiAgICAgICAgICAgICdmb250RmFtaWx5JzogJ1wiTHVjaWRhIEdyYW5kZVwiLCBzYW5zLXNlcmlmJyxcbiAgICAgICAgICAgICdmb250U2l6ZSc6ICcxMycsXG4gICAgICAgICAgICAnZmlsbCc6ICcjNjk2OTY5JyxcbiAgICAgICAgICAgICdsaW5lLWhlaWdodCc6ICcxJyxcbiAgICAgICAgICAgICdsZXR0ZXItc3BhY2luZyc6ICctMC4wNGVtJ1xuICAgICAgICAgIH1cbiAgICAgICAgfSkuYXR0YWNoRXZlbnRIYW5kbGVycyh7XG4gICAgICAgICAgJ2NsaWNrJzogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgc2VsZi5zZXRBY3RpdmVQZXJpb2Qoc2VsZi5zdGFuZGFyZENvbnRleHVhbFBlcmlvZHNbaV0uZGF0ZVN0YXJ0LCBzZWxmLnN0YW5kYXJkQ29udGV4dWFsUGVyaW9kc1tpXS5kYXRlRW5kKTtcbiAgICAgICAgICAgIHNlbGYuY2xpY2tlZElkID0gc2VsZi5zdGFuZGFyZENvbnRleHVhbFBlcmlvZHNbaV0uYWJicmV2aWF0aW9uO1xuICAgICAgICAgICAgdG9vbGJhci5kaXNwb3NlKCk7XG4gICAgICAgICAgICBzZWxmLnRvb2xiYXJzLnBvcCgpO1xuICAgICAgICAgICAgc2VsZi50b29sYmFycy5wdXNoKHNlbGYuY3JlYXRlVG9vbGJhcigpKTtcbiAgICAgICAgICAgIHNlbGYuZ2V0TG9naWNhbFNwYWNlKCk7XG4gICAgICAgICAgICBzZWxmLmRyYXcoKTtcbiAgICAgICAgICAgIC8vIHNlbGYuX3JlZi5yZUFsbG9jYXRlKHNlbGYucGFyZW50R3JvdXApO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgdG9vbHRleHQ6IHRoaXMuc3RhbmRhcmRDb250ZXh1YWxQZXJpb2RzW2ldLmRlc2NyaXB0aW9uXG4gICAgICAgIH0pO1xuICAgICAgICB1bmlncm91cC5hZGRTeW1ib2woY29udGV4dHVhbEJ1dHRvbnNbaV0pO1xuICAgICAgfVxuXG4gICAgICAgIC8vIGJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ0JVVFRPTicpO1xuICAgICAgICAvLyBidG4uaWQgPSBzdGFuZGFyZFBlcmlvZHNbaV0uYWJicmV2aWF0aW9uO1xuICAgICAgICAvLyBidG4uaW5uZXJIVE1MID0gc3RhbmRhcmRQZXJpb2RzW2ldLmFiYnJldmlhdGlvbjtcbiAgICAgICAgLy8gYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZXZlbnRCdG4uYmluZCh0aGlzLCBzdGFuZGFyZFBlcmlvZHNbaV0pKTtcbiAgICAgICAgLy8gY29udGV4dHVhbEJ1dHRvbnMuYXBwZW5kQ2hpbGQoYnRuKTtcblxuICAgICAgdGhpcy5TeW1ib2xTdG9yZS5yZWdpc3RlcigndGV4dEJveEljb24nLCBmdW5jdGlvbiAoeCwgeSwgcmFkLCB3LCBoLCBwYWRYLCBwYWRZKSB7XG4gICAgICAgIHZhciB4MSA9IHggLSB3IC8gMiArIHBhZFggLyAyLFxuICAgICAgICAgIHgyID0geCArIHcgLyAyIC0gcGFkWCAvIDIsXG4gICAgICAgICAgeTEgPSB5IC0gaCAvIDIgKyBwYWRZIC8gMixcbiAgICAgICAgICB5MiA9IHkgKyBoIC8gMiAtIHBhZFkgLyAyO1xuXG4gICAgICAgIHJldHVybiBbJ00nLCB4MSwgeTEsICdMJywgeDIsIHkxLCAnTCcsIHgyLCB5MiwgJ0wnLCB4MSwgeTIsICdaJ107XG4gICAgICB9KTtcblxuICAgICAgdG9vbGJhci5hZGRDb21wb25lbnQoZ3JvdXApO1xuICAgICAgdG9vbGJhci5hZGRDb21wb25lbnQodW5pZ3JvdXApO1xuICAgICAgdGhpcy50b29sYmFyID0gdG9vbGJhcjtcbiAgICAgIHJldHVybiB0b29sYmFyO1xuICAgIH07XG5cbiAgICBnZXRMb2dpY2FsU3BhY2UgKGF2YWlsYWJsZVdpZHRoID0gdGhpcy5fcFdpZHRoLCBhdmFpbGFibGVIZWlnaHQgPSB0aGlzLl9wSGVpZ2h0KSB7XG4gICAgICAvLyBhdmFpbGFibGVXaWR0aCAvPSAyO1xuICAgICAgdmFyIGxvZ2ljYWxTcGFjZSxcbiAgICAgICAgd2lkdGggPSA0MjAsIC8vIHdpZHRoIGhhcmRjb2RlZDsgVE9ETzogbWFrZSBpdCBkeW5hbWljXG4gICAgICAgIGhlaWdodCA9IDAsXG4gICAgICAgIGksXG4gICAgICAgIGxuO1xuXG4gICAgICBmb3IgKGkgPSAwLCBsbiA9IHRoaXMudG9vbGJhcnMubGVuZ3RoOyBpIDwgbG47IGkrKykge1xuICAgICAgICBsb2dpY2FsU3BhY2UgPSB0aGlzLnRvb2xiYXJzW2ldLmdldExvZ2ljYWxTcGFjZShhdmFpbGFibGVXaWR0aCwgYXZhaWxhYmxlSGVpZ2h0KTtcbiAgICAgICAgLy8gd2lkdGggPSBNYXRoLm1heChsb2dpY2FsU3BhY2Uud2lkdGgsIHdpZHRoKTtcbiAgICAgICAgaGVpZ2h0ICs9IGxvZ2ljYWxTcGFjZS5oZWlnaHQ7XG4gICAgICAgIHRoaXMudG9vbGJhcnNbaV0ud2lkdGggPSBsb2dpY2FsU3BhY2Uud2lkdGg7XG4gICAgICAgIHRoaXMudG9vbGJhcnNbaV0uaGVpZ2h0ID0gbG9naWNhbFNwYWNlLmhlaWdodDtcbiAgICAgIH1cbiAgICAgIGhlaWdodCArPSB0aGlzLnBhZGRpbmc7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB3aWR0aDogd2lkdGgsXG4gICAgICAgIGhlaWdodDogaGVpZ2h0XG4gICAgICB9O1xuICAgIH07XG5cbiAgICBnZXREZWZhdWx0R3JvdXAgKCkge1xuICAgICAgcmV0dXJuIHRoaXMucGFyZW50R3JvdXA7XG4gICAgfVxuXG4gICAgcGxhY2VJbkNhbnZhcyAoKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICBzZWxmLnBhZGRpbmcgPSA1O1xuICAgICAgc2VsZi5zcGFjZU1hbmFnZXJJbnN0YW5jZS5hZGQoW3tcbiAgICAgICAgbmFtZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJldHVybiAnc3RhbmRhcmQtcGVyaW9kLXNlbGVjdG9yLWV4dCc7XG4gICAgICAgIH0sXG4gICAgICAgIHJlZjogZnVuY3Rpb24gKG9iaikge1xuICAgICAgICAgIHJldHVybiBvYmpbJzAnXTtcbiAgICAgICAgfSxcbiAgICAgICAgc2VsZjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJldHVybiBzZWxmO1xuICAgICAgICB9LFxuICAgICAgICBwcmlvcml0eTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJldHVybiAyO1xuICAgICAgICB9LFxuICAgICAgICBsYXlvdXQ6IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgICByZXR1cm4gb2JqLmlubGluZTtcbiAgICAgICAgfSxcbiAgICAgICAgb3JpZW50YXRpb246IFt7XG4gICAgICAgICAgdHlwZTogZnVuY3Rpb24gKG9iaikge1xuICAgICAgICAgICAgcmV0dXJuIG9iai5ob3Jpem9udGFsO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgcG9zaXRpb246IFt7XG4gICAgICAgICAgICB0eXBlOiBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgICAgICAgIHJldHVybiBvYmoudG9wO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGFsaWdubWVudDogW3tcbiAgICAgICAgICAgICAgdHlwZTogZnVuY3Rpb24gKG9iaikge1xuICAgICAgICAgICAgICAgIHJldHVybiBvYmoubGVmdDtcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgZGltZW5zaW9uczogW2Z1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgcGFyZW50ID0gdGhpcy5nZXRQYXJlbnRDb21wb25lbnRHcm91cCgpO1xuICAgICAgICAgICAgICAgIHNlbGYuX3JlZiA9IHRoaXM7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYuZ2V0TG9naWNhbFNwYWNlKChzZWxmLl9wV2lkdGggPSBwYXJlbnQuZ2V0V2lkdGgoKSksIChzZWxmLl9wSGVpZ2h0ID0gcGFyZW50LmdldEhlaWdodCgpKSk7XG4gICAgICAgICAgICAgIH1dXG4gICAgICAgICAgICB9XVxuICAgICAgICAgIH1dXG4gICAgICAgIH1dXG4gICAgICB9XSk7XG4gICAgfTtcblxuICAgIHNldERyYXdpbmdDb25maWd1cmF0aW9uICh4LCB5LCB3aWR0aCwgaGVpZ2h0LCBncm91cCkge1xuICAgICAgdmFyIG1lcyA9IHRoaXMubWVhc3VyZW1lbnQ7XG4gICAgICBtZXMueCA9IHg7XG4gICAgICBtZXMueSA9IHk7XG4gICAgICBtZXMud2lkdGggPSB3aWR0aDtcbiAgICAgIG1lcy5oZWlnaHQgPSBoZWlnaHQ7XG5cbiAgICAgIHRoaXMucGFyZW50R3JvdXAgPSBncm91cDtcblxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIGRyYXcgKHgsIHksIHdpZHRoLCBoZWlnaHQsIGdyb3VwKSB7XG4gICAgICB2YXIgbWVhc3VyZW1lbnQgPSB0aGlzLm1lYXN1cmVtZW50LFxuICAgICAgICB0b29sYmFycyA9IHRoaXMudG9vbGJhcnMsXG4gICAgICAgIHNlbGYgPSB0aGlzLFxuICAgICAgICBsbixcbiAgICAgICAgaSxcbiAgICAgICAgdG9vbGJhcixcbiAgICAgICAgYm91bmRFbGVtZW50LFxuICAgICAgICBiQm94LFxuICAgICAgICB4MSxcbiAgICAgICAgeDIsXG4gICAgICAgIHkyLFxuICAgICAgICBzZWxlY3RMaW5lLFxuICAgICAgICBtb2RlbCA9IHRoaXMuZ2xvYmFsUmVhY3RpdmVNb2RlbDtcblxuICAgICAgdGhpcy5mbGFnID0gdHJ1ZTtcbiAgICAgIHNlbGVjdExpbmUgPSB0aGlzLnNhdmVTZWxlY3RMaW5lIHx8IHRoaXMuZ3JhcGhpY3MucGFwZXIucGF0aCh7XG4gICAgICAgICdzdHJva2UnOiAnI2M5NWE1YScsXG4gICAgICAgICdzdHJva2Utd2lkdGgnOiAnMnB4J1xuICAgICAgfSkudG9Gcm9udCgpO1xuICAgICAgeCA9IHggPT09IHVuZGVmaW5lZCA/IG1lYXN1cmVtZW50LnggOiB4O1xuICAgICAgeSA9IHkgPT09IHVuZGVmaW5lZCA/IG1lYXN1cmVtZW50LnkgOiB5O1xuICAgICAgd2lkdGggPSB3aWR0aCA9PT0gdW5kZWZpbmVkID8gbWVhc3VyZW1lbnQud2lkdGggOiB3aWR0aDtcbiAgICAgIGhlaWdodCA9IGhlaWdodCA9PT0gdW5kZWZpbmVkID8gbWVhc3VyZW1lbnQuaGVpZ2h0IDogaGVpZ2h0O1xuICAgICAgZ3JvdXAgPSBncm91cCA9PT0gdW5kZWZpbmVkID8gdGhpcy5wYXJlbnRHcm91cCA6IGdyb3VwO1xuICAgICAgaWYgKHdpZHRoICYmIGhlaWdodCkge1xuICAgICAgICBmb3IgKGkgPSAwLCBsbiA9IHRvb2xiYXJzLmxlbmd0aDsgaSA8IGxuOyBpKyspIHtcbiAgICAgICAgICB0b29sYmFyID0gdG9vbGJhcnNbaV07XG4gICAgICAgICAgdG9vbGJhci5kcmF3KHgsIHksIGdyb3VwKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy5zYXZlU2VsZWN0TGluZSA9IHNlbGVjdExpbmU7XG5cbiAgICAgIGZvciAobGV0IGkgPSAwLCBpaSA9IHRvb2xiYXJzWzBdLmNvbXBvbmVudEdyb3Vwc1sxXS5zeW1ib2xMaXN0OyBpIDwgaWkubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGlpW2ldLnN5bWJvbCA9PT0gdGhpcy5jbGlja2VkSWQpIHtcbiAgICAgICAgICBib3VuZEVsZW1lbnQgPSBpaVtpXS5nZXRCb3VuZEVsZW1lbnQoKTtcbiAgICAgICAgICBiQm94ID0gYm91bmRFbGVtZW50LmdldEJCb3goKTtcbiAgICAgICAgICB4MSA9IGJCb3gueDtcbiAgICAgICAgICB4MiA9IGJCb3gueDI7XG4gICAgICAgICAgeTIgPSBiQm94LnkyO1xuXG4gICAgICAgICAgc2VsZWN0TGluZS5hdHRyKHtcbiAgICAgICAgICAgIHBhdGg6IFsnTScsIHgxIC0gMC41LCB5MiAtIDAuNSwgJ0wnLCB4MiArIDAuNSwgeTIgLSAwLjVdXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICB9XG4gIHJldHVybiBTdGFuZGFyZFBlcmlvZFNlbGVjdG9yO1xufTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9zdGFuZGFyZC1wZXJpb2Qtc2VsZWN0b3IuanMiXSwic291cmNlUm9vdCI6IiJ9