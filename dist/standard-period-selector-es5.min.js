!function(t){function e(a){if(i[a])return i[a].exports;var s=i[a]={exports:{},id:a,loaded:!1};return t[a].call(s.exports,s,s.exports,e),s.loaded=!0,s.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){(function(t){"use strict";var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=i(2);!function(i,a){"object"===e(t)&&t.exports?t.exports=i.document?a(i):function(t){if(!t.document)throw new Error("Window with document not present");return a(t,!0)}:i.StandardPeriodSelector=a(i,!0)}("undefined"!=typeof window?window:void 0,function(t,e){var i=t.FusionCharts;i.register("extension",["private","standard-period-selector",function(){i.registerComponent("extensions","standard-period-selector",a({FusionCharts:i}))}])})}).call(e,i(1)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}();t.exports=function(t){var e=function(){function t(){i(this,t),this.ratio=8,this.toolbox=FusionCharts.getComponent("api","toolbox"),this.HorizontalToolbar=this.toolbox.HorizontalToolbar,this.ComponentGroup=this.toolbox.ComponentGroup,this.SymbolStore=this.toolbox.SymbolStore,this.all=1,this.calculatedPeriods=[],this.startDataset=0,this.startActiveWindow=0,this.endActiveWindow=1,this.standardCalculatedPeriods=[],this.standardContexualPeriods=[],this.startPointUnit=0,this.startPointMultiplier=0,this.clickedId="ALL",this.noCalcButtons=0,this.calculatedButtonObj={},this.minimumBucket=2592e7,this.tdButtons=[{name:"YTD",abbreviation:"YTD",parent:"year",milliseconds:31104e6,description:"Year to Date"},{name:"QTD",abbreviation:"QTD",parent:"month",multiplier:3,milliseconds:7776e6,description:"Quarter to Date"},{name:"MTD",abbreviation:"MTD",parent:"month",milliseconds:2592e6,description:"Month to Date"},{name:"WTD",abbreviation:"WTD",parent:"day",multiplier:7,milliseconds:6048e5,description:"Week to Date"},{name:"Y",abbreviation:"Y",parent:"day",milliseconds:864e5,description:"Yesterday"},{name:"T",abbreviation:"T",parent:"day",milliseconds:864e5,description:"Today"}],this.config={anchorPositions:"right",all:"1",contextual:"1",calculated:"1",tertiaryTimePeriods:{}}}return a(t,[{key:"generateCalculatedButtons",value:function(){var t=this.endActiveWindow-this.startDataset,e=0,i=0,a=this.endActiveWindow-this.startActiveWindow,s=0,o=this;for(o.standardCalculatedPeriods=[],e=0;e<o.timePeriods.length;e++)if(t/o.timePeriods[e].interval>=1)if(Math.floor(a/o.timePeriods[e].interval)<1)o.standardCalculatedPeriods.push({abbreviation:o.timePeriods[e].abbreviation.single,description:o.timePeriods[e].description,milliseconds:o.timePeriods[e].interval,name:o.timePeriods[e].name,multipliers:[1]});else for(o.standardCalculatedPeriods.push({abbreviation:o.timePeriods[e].abbreviation.single,description:o.timePeriods[e].description,milliseconds:o.timePeriods[e].interval,name:o.timePeriods[e].name,multipliers:[]}),i=0;i<o.timePeriods[e].multipliers.length;i++)a/o.ratio<o.timePeriods[e].multipliers[i]*o.timePeriods[e].interval&&o.timePeriods[e].multipliers[i]*o.timePeriods[e].interval>o.minimumBucket&&o.standardCalculatedPeriods[o.standardCalculatedPeriods.length-1].multipliers.push(o.timePeriods[e].multipliers[i]);for(this.noCalcButtons=1/0,e=0;e<this.standardCalculatedPeriods.length;e++)for(i=0;i<this.standardCalculatedPeriods[e].multipliers.length;i++)++s,this.noCalcButtons>e&&(this.noCalcButtons=e),s<=4&&(this.startPointMultiplier=i,this.startPointUnit=e)}},{key:"generateContextualButtons",value:function(){for(var t=[],e=0,i=this.globalReactiveModel.model["x-axis-absolute-range-end"],a=i-2,s=i,o={};e<this.tdButtons.length;e++)a=new Date(i),"YTD"===this.tdButtons[e].name?(a.setMonth(0),a.setDate(1),a.setHours(0),a.setMinutes(0),a.setSeconds(0)):"MTD"===this.tdButtons[e].name?(a.setDate(1),a.setHours(0),a.setMinutes(0),a.setSeconds(0)):"QTD"===this.tdButtons[e].name?(a.setMonth(11-a.getMonth()%4),a.setDate(0),a.setHours(0),a.setMinutes(0),a.setSeconds(0)):"WTD"===this.tdButtons[e].name?(a.setDate(a.getDate()-a.getDay()),a.setHours(0),a.setMinutes(0),a.setSeconds(0)):"Y"===this.tdButtons[e].name?(a.setHours(0),a.setMinutes(0),a.setSeconds(0),a-=864e5):"T"===this.tdButtons[e].name&&(a.setHours(0),a.setMinutes(0),a.setSeconds(0),+this.endDataset===+a&&(a=+a-864e5)),s<a&&s-a<this.minimumBucket||(this.tdButtons[e].dateStart=a.valueOf(),this.tdButtons[e].dateEnd=s.valueOf(),t.push(this.tdButtons[e]));for(o.milliseconds=1/0,e=0;e<this.tdButtons.length;e++)Math.abs(this.tdButtons[e].milliseconds-(this.endActiveWindow-this.startActiveWindow))<o.milliseconds&&(o.milliseconds=this.tdButtons[e].milliseconds,o.name=this.tdButtons[e].abbreviation);this.standardContexualPeriods=t}},{key:"processMultipliers",value:function(t){for(var e=this,i=0;i<t.length;i++){var a=t[i].possibleFactors.length,s=t[i]&&t[i].name,o=t&&t[i],n=e&&e.customMultipliers||{};o.multipliers=[],n[s]?o.multipliers=n[s]:1===a?o.multipliers.push(o.possibleFactors[0]):2===a?(o.multipliers.push(o.possibleFactors[0]),o.multipliers.push(o.possibleFactors[a-1])):(o.multipliers.push(o.possibleFactors[0]),o.multipliers.push(Math.floor(o.possibleFactors[a-1]/2)),o.multipliers.push(o.possibleFactors[a-1]))}return t}},{key:"setActivePeriod",value:function(t,e){var i,a;1===arguments.length&&this.periodButtonClicked?(a=this.endActiveWindow,i=a-arguments[0],this.startActiveWindow=i,this.globalReactiveModel.lock().prop("x-axis-visible-range-start",this.startActiveWindow).unlock()):2===arguments.length&&this.periodButtonClicked&&(i=arguments[0],a=arguments[1],this.startActiveWindow=i,this.endActiveWindow=a,this.globalReactiveModel.lock().prop("x-axis-visible-range-start",this.startActiveWindow).prop("x-axis-visible-range-end",this.endActiveWindow).unlock()),this.generateCalculatedButtons(),this.generateContextualButtons()}},{key:"configure",value:function(t){this.config=t}},{key:"init",value:function(t){function e(t,a,s){if("contextual"===i.currentCategory)if(i.endActiveWindow===i.endDataset)for(var o=0;o<i.standardContexualPeriods.length;o++)i.standardContexualPeriods[o].dateEnd-i.standardContexualPeriods[o].dateStart>=a[1]-t[1]&&(i.clickedId=i.standardContexualPeriods[o].abbreviation);else for(var n=0;n<i.standardCalculatedPeriods.length;n++)for(var r=0;r<i.standardCalculatedPeriods[n].multipliers.length;r++)a[1]-t[1]>=i.standardCalculatedPeriods[n].multipliers[r]*i.standardCalculatedPeriods[n].milliseconds&&(i.clickedId=i.standardCalculatedPeriods[n].multipliers[r]+i.standardCalculatedPeriods[n].abbreviation);else if("calculated"===i.currentCategory)for(var l=0;l<i.standardCalculatedPeriods.length;l++)for(var d=0;d<i.standardCalculatedPeriods[l].multipliers.length;d++)a[1]-t[1]>=i.standardCalculatedPeriods[l].multipliers[d]*i.standardCalculatedPeriods[l].milliseconds&&(i.clickedId=i.standardCalculatedPeriods[l].multipliers[d]+i.standardCalculatedPeriods[l].abbreviation);return i.lastDisposed=i.lastDisposed||0,s&&(i.launchedPropsHandler=!1,t=i.propsStart,a=i.propsEnd),i.propsStart=t,i.propsEnd=a,+new Date-i.lastDisposed<400?void(i.launchedPropsHandler||(i.launchedPropsHandler=!0,setTimeout(e.bind(null,0,0,!0)))):void(i.flagDrawn<3?(i.flagDrawn++,i.cantDispose=!0,i.lastDisposed=+new Date,i.setActivePeriod(t[1],a[1]),i.toolbar.dispose(),i.toolbars.pop(),i.toolbars.push(i.createToolbar()),i.getLogicalSpace(),i.draw()):i.flagDrawn=0)}var i=this;return t(["graphics","chart","canvasConfig","MarkerManager","reactiveModel","globalReactiveModel","spaceManagerInstance","smartLabel","extData","chartInstance",function(t,e,a,s,o,n,r,l,d,c){i.graphics=t,i.chart=e,i.markerManager=s,i.canvasConfig=a,i.reactiveModel=o,i.globalReactiveModel=n,i.spaceManagerInstance=r,i.smartLabel=l,i.extDataUser=d,i.chartInstance=c}]),i.endActiveWindow=i.globalReactiveModel.model["x-axis-visible-range-end"],i.startActiveWindow=i.globalReactiveModel.model["x-axis-visible-range-start"],i.startDataset=i.globalReactiveModel.model["x-axis-absolute-range-start"],i.endDataset=i.globalReactiveModel.model["x-axis-absolute-range-end"],i.timeRules=i.chartInstance.apiInstance.getComponentStore(),i.timeRules=i.timeRules.getCanvasByIndex(0).composition.impl,i.timeRules=i.timeRules.getDataAggregator(),i.timeRules=i.timeRules.getAggregationTimeRules(),i.timePeriods=i.processMultipliers(i.timeRules),i.extData={disabled:"false","default-select":"ALL",posWrtCanvas:"top",layout:"inline",alignment:"left",orientation:"horizontal",customMultipliers:{millisecond:[1,500],second:[1,5,15,30],minute:[1,5,15,30],hour:[1,3,6,12],day:[1,7,15],month:[1,3,6],year:[1,3,5]},style:{"label-config":{text:{style:{"font-family":'"Lucida Grande", sans-serif',"font-size":"13",fill:"#4b4b4b"}},container:{height:22}},"all-config":{fill:"#ffffff",labelFill:"#4b4b4b",symbolStrokeWidth:"2",stroke:"#ced5d4",strokeWidth:"1",hoverFill:"#f7f7f7",height:22,radius:1,margin:{right:5},btnTextStyle:{fontFamily:'"Lucida Grande", sans-serif',fontSize:"13",fill:"#4b4b4b","line-height":"1","letter-spacing":"-0.04em"}},"calculated-config":{fill:"#ffffff",labelFill:"#4b4b4b",symbolStrokeWidth:"2",stroke:"#ced5d4",strokeWidth:"1",hoverFill:"#f7f7f7",height:22,radius:1,margin:{right:0},btnTextStyle:{fontFamily:'"Lucida Grande", sans-serif',fontSize:"13",fill:"#4b4b4b","line-height":"1","letter-spacing":"-0.04em"}},"contextual-config-first":{fill:"#ffffff",labelFill:"#4b4b4b",symbolStrokeWidth:"2",stroke:"#ced5d4",strokeWidth:"1",height:22,hoverFill:"#f7f7f7",radius:1,margin:{right:0,left:5},btnTextStyle:{fontFamily:'"Lucida Grande", sans-serif',fontSize:"13",fill:"#696969","line-height":"1","letter-spacing":"-0.04em"}},"contextual-config":{fill:"#ffffff",labelFill:"#4b4b4b",symbolStrokeWidth:"2",stroke:"#ced5d4",strokeWidth:"1",height:22,hoverFill:"#f7f7f7",radius:1,margin:{right:0,left:0},btnTextStyle:{fontFamily:'"Lucida Grande", sans-serif',fontSize:"13",fill:"#4b4b4b","line-height":"1","letter-spacing":"-0.04em"}}}},Object.assign(i.extData,i.extDataUser),i.customMultipliers=i.extData.customMultipliers||{millisecond:[1,500],second:[1,5,15,30],minute:[1,5,15,30],hour:[1,3,6,12],day:[1,7,15],month:[1,3,6],year:[1,3]},i.clickedId=i.extData["default-select"]||"ALL",i.setActivePeriod(i.startActiveWindow,i.endActiveWindow),i.toolbars=[],i.measurement={},i.flag=!0,i.toolbars.push(i.createToolbar()),i.globalReactiveModel.onPropsChange(["x-axis-visible-range-start","x-axis-visible-range-end"],e),i}},{key:"createToolbar",value:function(){var t,e,i,a,s,o,n,r,l,d,c,u=this,h=this,f=[];for(c=new this.toolbox.ComponentGroup({paper:this.graphics.paper,chart:this.chart,smartLabel:this.smartLabel,chartContainer:this.graphics.container}),t=new this.toolbox.UniSelectComponentGroup({paper:this.graphics.paper,chart:this.chart,smartLabel:this.smartLabel,chartContainer:this.graphics.container}),t.setConfig({fill:"#fff",borderThickness:0}),c.setConfig({fill:"#fff",borderThickness:0}),e=new this.HorizontalToolbar({paper:this.graphics.paper,chart:this.chart,smartLabel:this.smartLabel,chartContainer:this.graphics.container}),e.setConfig({fill:"#fff",borderThickness:0}),d=new this.toolbox.Label("Zoom:",{smartLabel:this.smartLabel,paper:this.graphics.paper},h.extData.style["label-config"]),c.addSymbol(d),s=new this.toolbox.Symbol("ALL",!0,{paper:this.graphics.paper,chart:this.chart,smartLabel:this.smartLabel,chartContainer:this.graphics.container},h.extData.style["all-config"]||{fill:"#ffffff",labelFill:"#696969",symbolStrokeWidth:"2",stroke:"#ced5d4",strokeWidth:"1",hoverFill:"#ced5d4",height:22,radius:1,margin:{right:5},btnTextStyle:{fontFamily:'"Lucida Grande", sans-serif',fontSize:"13",fill:"#696969","line-height":"1","letter-spacing":"-0.04em"}}).attachEventHandlers({click:function(){h.periodButtonClicked=!0,h.currentCategory="ALL",h.clickedId="ALL",h.flagDrawn=2,h.setActivePeriod(h.startDataset,h.endDataset)},tooltext:"ALL"}),t.addSymbol(s),n=0;n<this.standardCalculatedPeriods.length;n++)for(r=this.standardCalculatedPeriods[n].multipliers.length-1;r>=0;r--)f.push(h.standardCalculatedPeriods[n].multipliers[r]*h.standardCalculatedPeriods[n].milliseconds);i={};for(var p in this.calculatedButtonObj)this.calculatedButtonObj[p].hide();for(var m=function(e){for(var a=function(a){var s=h.standardCalculatedPeriods[e].multipliers[a]+h.standardCalculatedPeriods[e].abbreviation;i=new u.toolbox.Symbol(s,!0,{paper:u.graphics.paper,chart:u.chart,smartLabel:u.smartLabel,chartContainer:u.graphics.container},h.extData.style["calculated-config"]).attachEventHandlers({click:function(){h.periodButtonClicked=!0,h.clickedId=s,h.currentCategory="calculated",o=h.standardCalculatedPeriods[e].multipliers[a]*h.standardCalculatedPeriods[e].milliseconds,h.setActivePeriod(h.endActiveWindow-o,h.endActiveWindow)},tooltext:h.standardCalculatedPeriods[e].multipliers[a]+" "+h.standardCalculatedPeriods[e].description}),u.calculatedButtonObj[s]=i,u.calculatedButtonObj[s].show(),t.addSymbol(u.calculatedButtonObj[s])},s=h.standardCalculatedPeriods[e].multipliers.length-1;s>=0;s--)a(s)},b=h.standardCalculatedPeriods.length-1;b>=0;b--)m(b);a=[];for(var g=function(e){l=0===e?h.extData.style["contextual-config-first"]||{fill:"#ffffff",labelFill:"#696969",symbolStrokeWidth:"2",stroke:"#ced5d4",strokeWidth:"1",height:22,hoverFill:"#ced5d4",radius:1,margin:{right:0,left:5},btnTextStyle:{fontFamily:'"Lucida Grande", sans-serif',fontSize:"13",fill:"#696969","line-height":"1","letter-spacing":"-0.04em"}}:h.extData.style["contextual-config"]||{fill:"#ffffff",labelFill:"#696969",symbolStrokeWidth:"2",stroke:"#ced5d4",strokeWidth:"1",height:22,hoverFill:"#ced5d4",radius:1,margin:{right:0,left:0},btnTextStyle:{fontFamily:'"Lucida Grande", sans-serif',fontSize:"13",fill:"#696969","line-height":"1","letter-spacing":"-0.04em"}},a[e]=new u.toolbox.Symbol(u.standardContexualPeriods[e].abbreviation,!0,{paper:u.graphics.paper,chart:u.chart,smartLabel:u.smartLabel,chartContainer:u.graphics.container},l).attachEventHandlers({click:function(){h.periodButtonClicked=!0,h.flagDrawn=1,h.currentCategory="contextual",h.clickedId=h.standardContexualPeriods[e].abbreviation,h.setActivePeriod(h.standardContexualPeriods[e].dateStart,h.standardContexualPeriods[e].dateEnd)},tooltext:u.standardContexualPeriods[e].description}),a.minViable=h.standardContexualPeriods[e].dateEnd-h.standardContexualPeriods[e].dateStart<h.minimumBucket,h.standardContexualPeriods[e].dateEnd-h.standardContexualPeriods[e].dateStart>=h.minimumBucket&&t.addSymbol(a[e])},v=0;v<this.standardContexualPeriods.length;v++)g(v);return this.SymbolStore.register("textBoxIcon",function(t,e,i,a,s,o,n){var r=t-a/2+o/2,l=t+a/2-o/2,d=e-s/2+n/2,c=e+s/2-n/2;return["M",r,d,"L",l,d,"L",l,c,"L",r,c,"Z"]}),e.addComponent(c),e.addComponent(t),this.toolbar=e,e}},{key:"getLogicalSpace",value:function(){var t,e,i,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._pWidth,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._pHeight,o=420,n=0;for(e=0,i=this.toolbars.length;e<i;e++)t=this.toolbars[e].getLogicalSpace(a,s),n+=t.height,this.toolbars[e].width=t.width,this.toolbars[e].height=t.height;return n+=this.padding,{width:o,height:n}}},{key:"getDefaultGroup",value:function(){return this.parentGroup}},{key:"placeInCanvas",value:function(){var t=this;t.padding=5,t.spaceManagerInstance.add([{name:function(){return"standard-period-selector-ext"},ref:function(t){return t[0]},self:function(){return t},priority:function(){return 2},layout:function(e){return e[t.extData.layout]||"inline"},orientation:[{type:function(e){return e[t.extData.orientation]||"horizontal"},position:[{type:function(e){return e[t.extData.posWrtCanvas]||"top"},alignment:[{type:function(e){return e[t.extData.alignment]||"left"},dimensions:[function(){var e=this.getParentComponentGroup();return t._ref=this,t.getLogicalSpace(t._pWidth=e.getWidth(),t._pHeight=e.getHeight())}]}]}]}]}])}},{key:"setDrawingConfiguration",value:function(t,e,i,a,s){var o=this.measurement;return o.x=t,o.y=e,o.width=i,o.height=a,this.parentGroup=s,this}},{key:"draw",value:function(t,e,i,a,s){var o,n,r,l,d,c,u,h,f,p,m=this.measurement,b=this.toolbars;if(this.flag=!0,p=this.saveSelectLine||this.graphics.paper.path({stroke:"#c95a5a","stroke-width":"2px"}).toFront(),t=void 0===t?m.x:t,e=void 0===e?m.y:e,i=void 0===i?m.width:i,a=void 0===a?m.height:a,s=void 0===s?this.parentGroup:s,i&&a)for(n=0,o=b.length;n<o;n++)r=b[n],r.draw(t,e,s);this.saveSelectLine=p,l=b[0].componentGroups[1].symbolList;for(var g=0,v=l.length;g<v;g++)l[g].symbol===this.clickedId&&(d=l[g].getBoundElement(),c=d.getBBox(),u=c.x,h=c.x2,f=c.y2,p.attr({path:["M",u-.5,f-.5,"L",h+.5,f-.5]}),this.flagDrawn=2);this.minimumBucket=this.globalReactiveModel.model["minimum-consecutive-datestamp-diff"]*this.globalReactiveModel.model["x-axis-maximum-allowed-ticks"]}}]),t}();return e}}]);
//# sourceMappingURL=standard-period-selector-es5.min.js.map