!function(t){function e(a){if(i[a])return i[a].exports;var o=i[a]={exports:{},id:a,loaded:!1};return t[a].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){(function(t){"use strict";var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=i(2);window.stPS=new a,function(i,a){"object"===e(t)&&t.exports?t.exports=i.document?a(i):function(t){if(!t.document)throw new Error("Window with document not present");return a(t,!0)}:i.StandardPeriodSelector=a(i,!0)}("undefined"!=typeof window?window:void 0,function(t,e){var i=t.FusionCharts;i.register("extension",["private","StandardPeriodSelector",function(){i.registerComponent("extensions","StandardPeriodSelector",a({FusionCharts:i}))}])})}).call(e,i(1)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}();t.exports=function(t){var e=function(){function t(){i(this,t),this.ratio=8,this.toolbox=FusionCharts.getComponent("api","toolbox"),this.HorizontalToolbar=this.toolbox.HorizontalToolbar,this.ComponentGroup=this.toolbox.ComponentGroup,this.SymbolStore=this.toolbox.SymbolStore,this.all=1,this.calculatedPeriods=[],this.startDataset=0,this.startActiveWindow=0,this.endActiveWindow=1,this.standardCalculatedPeriods=[],this.standardContexualPeriods=[],this.startPointUnit=0,this.startPointMultiplier=0,this.clickedId,this.noCalcButtons=0,this.timePeriods=[{name:"second",milliseconds:1e3,startingPoint:0,total:60,abbreviation:"sec",description:"SECOND",parent:"minute",multipliers:[1,5,15,30]},{name:"minute",milliseconds:6e4,startingPoint:0,total:60,abbreviation:"min",description:"MINUTE",parent:"hour",multipliers:[1,5,15,30]},{name:"hour",milliseconds:36e5,startingPoint:0,total:24,abbreviation:"hr",description:"HOUR",parent:"day",multipliers:[1,3,6,12]},{name:"day",milliseconds:864e5,startingPoint:0,total:30,abbreviation:"D",description:"DAY",parent:"month",multipliers:[1,7,15]},{name:"month",milliseconds:2592e6,startingPoint:0,total:12,abbreviation:"M",description:"MONTH",parent:"year",multipliers:[1,3,6]},{name:"year",milliseconds:31104e6,startingPoint:0,abbreviation:"Y",description:"YEAR",multipliers:[1,3,5]}],this.tdButtons=[{name:"YTD",abbreviation:"YTD",parent:"year",milliseconds:31104e6,description:"Year to Date"},{name:"QTD",abbreviation:"QTD",parent:"month",multiplier:3,milliseconds:7776e6,description:"Quarter to Date"},{name:"MTD",abbreviation:"MTD",parent:"month",milliseconds:2592e6,description:"Month to Date"},{name:"WTD",abbreviation:"WTD",parent:"day",multiplier:7,milliseconds:6048e5,description:"Week to Date"},{name:"Y",abbreviation:"Y",parent:"day",milliseconds:864e5,description:"Yesterday"},{name:"T",abbreviation:"T",parent:"day",milliseconds:864e5,description:"Today"}],this.config={anchorPositions:"right",all:"1",contextual:"1",calculated:"1",tertiaryTimePeriods:{}}}return a(t,[{key:"generateCalculatedButtons",value:function(){var t=this.endActiveWindow-this.startDataset,e=0,i=0,a=this.endActiveWindow-this.startActiveWindow,o=0;for(this.standardCalculatedPeriods=[],e=0;e<this.timePeriods.length;e++)if(t/this.timePeriods[e].milliseconds>=1)if(Math.floor(a/this.timePeriods[e].milliseconds)<1)this.standardCalculatedPeriods.push({abbreviation:this.timePeriods[e].abbreviation,description:this.timePeriods[e].description,milliseconds:this.timePeriods[e].milliseconds,multipliers:[1]});else for(this.standardCalculatedPeriods.push({abbreviation:this.timePeriods[e].abbreviation,description:this.timePeriods[e].description,milliseconds:this.timePeriods[e].milliseconds,multipliers:[]}),i=0;i<this.timePeriods[e].multipliers.length;i++)a/this.ratio<this.timePeriods[e].multipliers[i]*this.timePeriods[e].milliseconds&&this.standardCalculatedPeriods[this.standardCalculatedPeriods.length-1].multipliers.push(this.timePeriods[e].multipliers[i]);for(this.noCalcButtons=1/0,e=0;e<this.standardCalculatedPeriods.length;e++)for(i=0;i<this.standardCalculatedPeriods[e].multipliers.length;i++)++o,this.noCalcButtons>e&&(this.noCalcButtons=e),o<=4&&(this.startPointMultiplier=i,this.startPointUnit=e)}},{key:"generateContextualButtons",value:function(){for(var t=[],e=0,i=this.globalReactiveModel.model["x-axis-absolute-range-end"],a=i-2,o=i,s={};e<this.tdButtons.length;e++)a=new Date(i),"YTD"===this.tdButtons[e].name?(a.setMonth(0),a.setDate(1),a.setHours(0),a.setMinutes(0),a.setSeconds(0)):"MTD"===this.tdButtons[e].name?(a.setDate(1),a.setHours(0),a.setMinutes(0),a.setSeconds(0)):"QTD"===this.tdButtons[e].name?(a.setMonth(11-a.getMonth()%4),a.setDate(0),a.setHours(0),a.setMinutes(0),a.setSeconds(0)):"WTD"===this.tdButtons[e].name?(a.setDate(a.getDate()-a.getDay()),a.setHours(0),a.setMinutes(0),a.setSeconds(0)):"Y"===this.tdButtons[e].name?(a.setHours(0),a.setMinutes(0),a.setSeconds(0),a-=864e5):"T"===this.tdButtons[e].name&&(a.setHours(0),a.setMinutes(0),a.setSeconds(0)),o<a||(this.tdButtons[e].dateStart=a.valueOf(),this.tdButtons[e].dateEnd=o.valueOf(),t.push(this.tdButtons[e]));for(s.milliseconds=1/0,e=0;e<this.tdButtons.length;e++)Math.abs(this.tdButtons[e].milliseconds-(this.endActiveWindow-this.startActiveWindow))<s.milliseconds&&(s.milliseconds=this.tdButtons[e].milliseconds,s.name=this.tdButtons[e].abbreviation);this.standardContexualPeriods=t}},{key:"setActivePeriod",value:function(){var t,e;1===arguments.length?(e=this.globalReactiveModel.model["x-axis-visible-range-end"],t=e-arguments[0]):2===arguments.length&&(t=arguments[0],e=arguments[1]),this.startActiveWindow=t,this.endActiveWindow=e,this.generateCalculatedButtons(),this.globalReactiveModel.model["x-axis-visible-range-start"]=this.startActiveWindow,this.globalReactiveModel.model["x-axis-visible-range-end"]=this.endActiveWindow,this.generateContextualButtons()}},{key:"setTimeline",value:function(t,e){this.startDataset=t,this.endDataset=e,document.getElementById("startActiveRange").innerHTML=new Date(this.startDataset),document.getElementById("endActiveRange").innerHTML=new Date(this.endDataset),this.generateCalculatedButtons()}},{key:"configure",value:function(t){this.config=t}},{key:"init",value:function(t){var e=this;return t(["xAxis","yAxis","graphics","chart","dataset","PlotManager","canvasConfig","MarkerManager","reactiveModel","globalReactiveModel","spaceManagerInstance","smartLabel",function(t,i,a,o,s,n,r,l,d,c,h,u){e.xAxis=t,e.yAxis=i,e.graphics=a,e.chart=o,e.dataset=s,e.plotManager=n,e.markerManager=l,e.canvasConfig=r,e.reactiveModel=d,e.globalReactiveModel=c,e.spaceManagerInstance=h,e.smartLabel=u}]),this.spaceManagerInstance=e.spaceManagerInstance,this.globalReactiveModel=e.globalReactiveModel,this.endActiveWindow=e.globalReactiveModel.model["x-axis-visible-range-end"],this.startActiveWindow=e.globalReactiveModel.model["x-axis-visible-range-start"],this.startDataset=e.globalReactiveModel.model["x-axis-absolute-range-start"],this.endDataset=e.globalReactiveModel.model["x-axis-absolute-range-end"],this.setActivePeriod(this.startActiveWindow,this.endActiveWindow),this.setActivePeriod(this.startActiveWindow,this.endActiveWindow),this.toolbars=[],this.measurement={},this.toolbars.push(this.createToolbar()),this}},{key:"createToolbar",value:function(){var t,e,i,a,o,s,n,r,l,d,c,h,u=this,p=this,m=(this.globalReactiveModel.model["x-axis-visible-range-end"],[]);for(h=new this.toolbox.ComponentGroup({paper:this.graphics.paper,chart:this.chart,smartLabel:this.smartLabel,chartContainer:this.graphics.container}),t=new this.toolbox.UniSelectComponentGroup({paper:this.graphics.paper,chart:this.chart,smartLabel:this.smartLabel,chartContainer:this.graphics.container}),t.setConfig({fill:"#fff",borderThickness:0}),h.setConfig({fill:"#fff",borderThickness:0}),e=new this.HorizontalToolbar({paper:this.graphics.paper,chart:this.chart,smartLabel:this.smartLabel,chartContainer:this.graphics.container}),e.setConfig({fill:"#fff",borderThickness:0}),c=new this.toolbox.Label("Zoom:",{smartLabel:this.smartLabel,paper:this.graphics.paper},{text:{style:{"font-size":"15",fontFamily:"MyriadPro"}}}),h.addSymbol(c),o=new this.toolbox.Symbol("ALL",!0,{paper:this.graphics.paper,chart:this.chart,smartLabel:this.smartLabel,chartContainer:this.graphics.container},{fill:"#ffffff",labelFill:"#696969",symbolStrokeWidth:"2",symbolStroke:"#000000",strokeWidth:"1",hoverFill:"#7f7f7f",radius:1,margin:{right:5}}).attachEventHandlers({click:function(){p.setActivePeriod(p.startDataset,p.endDataset),e.dispose(),p.clickedId="ALL",p.toolbars.pop(),p.toolbars.push(p.createToolbar()),p._ref.reAllocate(p.parentGroup)}}),t.addSymbol(o),r=0;r<this.standardCalculatedPeriods.length;r++)for(l=this.standardCalculatedPeriods[r].multipliers.length-1;l>=0;l--)m.push(p.standardCalculatedPeriods[r].multipliers[l]*p.standardCalculatedPeriods[r].milliseconds);i=[];for(var b=function(a){s=a===p.startPointUnit?p.startPointMultiplier:p.standardCalculatedPeriods[a].multipliers.length-1;for(var o=function(o){d=a===p.noCalcButtons&&0===o?5:0,i[a]=new u.toolbox.Symbol(p.standardCalculatedPeriods[a].multipliers[o]+p.standardCalculatedPeriods[a].abbreviation,!0,{paper:u.graphics.paper,chart:u.chart,smartLabel:u.smartLabel,chartContainer:u.graphics.container},{fill:"#ffffff",labelFill:"#696969",symbolStrokeWidth:"2",symbolStroke:"#000000",strokeWidth:"1",hoverFill:"#7f7f7f",radius:1,margin:{right:d}}).attachEventHandlers({click:function(){n=p.standardCalculatedPeriods[a].multipliers[o]*p.standardCalculatedPeriods[a].milliseconds,p.clickedId=p.standardCalculatedPeriods[a].multipliers[o]+p.standardCalculatedPeriods[a].abbreviation,p.setActivePeriod(n),e.dispose(),p.toolbars.pop(),p.toolbars.push(p.createToolbar()),p._ref.reAllocate(p.parentGroup)}}),t.addSymbol(i[a])},r=s;r>=0;r--)o(r)},f=p.startPointUnit;f>=0;f--)b(f);a=[];for(var g=function(i){a[i]=new u.toolbox.Symbol(u.standardContexualPeriods[i].abbreviation,!0,{paper:u.graphics.paper,chart:u.chart,smartLabel:u.smartLabel,chartContainer:u.graphics.container},{fill:"#ffffff",labelFill:"#696969",symbolStrokeWidth:"2",symbolStroke:"#000000",strokeWidth:"1",hoverFill:"#7f7f7f",radius:1,margin:{right:0}}).attachEventHandlers({click:function(){p.setActivePeriod(p.standardContexualPeriods[i].dateStart,p.standardContexualPeriods[i].dateEnd),p.clickedId=p.standardContexualPeriods[i].abbreviation,e.dispose(),p.toolbars.pop(),p.toolbars.push(p.createToolbar()),p._ref.reAllocate(p.parentGroup)}}),t.addSymbol(a[i])},v=0;v<this.standardContexualPeriods.length;v++)g(v);return this.SymbolStore.register("textBoxIcon",function(t,e,i,a,o,s,n){var r=t-a/2+s/2,l=t+a/2-s/2,d=e-o/2+n/2,c=e+o/2-n/2;return["M",r,d,"L",l,d,"L",l,c,"L",r,c,"Z"]}),e.addComponent(h),e.addComponent(t),e}},{key:"getLogicalSpace",value:function(t,e){var i,a,o,s=0,n=0;for(a=0,o=this.toolbars.length;a<o;a++)i=this.toolbars[a].getLogicalSpace(t,e),s=Math.max(i.width,s),n+=i.height,this.toolbars[a].width=i.width,this.toolbars[a].height=i.height;return n+=this.padding,{width:s,height:n}}},{key:"getDefaultGroup",value:function(){return this.parentGroup}},{key:"placeInCanvas",value:function(){var t=this;t.padding=5,t.spaceManagerInstance.add([{name:function(){return"standard-period-selector-ext"},ref:function(t){return t[0]},self:function(){return t},priority:function(){return 2},layout:function(t){return t.inline},orientation:[{type:function(t){return t.horizontal},position:[{type:function(t){return t.top},alignment:[{type:function(t){return t.left},dimensions:[function(){var e=this.getParentComponentGroup();return t._ref=this,t.getLogicalSpace(t._pWidth=e.getWidth(),t._pHeight=e.getHeight())}]}]}]}]}])}},{key:"setDrawingConfiguration",value:function(t,e,i,a,o){var s=this.measurement;return s.x=t,s.y=e,s.width=i,s.height=a,this.parentGroup=o,this}},{key:"draw",value:function(t,e,i,a,o){var s,n,r,l,d,c,h,u,p,m=this.measurement,b=this.toolbars;if(p=this.saveSelectLine||this.graphics.paper.path({stroke:"#ff0000"}).toFront(),t=void 0===t?m.x:t,e=void 0===e?m.y:e,i=void 0===i?m.width:i,a=void 0===a?m.height:a,o=void 0===o?this.parentGroup:o,i&&a)for(n=0,s=b.length;n<s;n++)r=b[n],r.draw(t,e,o);this.saveSelectLine=p;for(var f=0,g=b[0].componentGroups[1].symbolList;f<g.length;f++)g[f].symbol===this.clickedId&&(l=g[f].getBoundElement(),d=l.getBBox(),c=d.x,h=d.x2,u=d.y2,p.attr({path:["M",c,u-1,"L",h,u-1]}))}}]),t}();return e}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3RhbmRhcmQtcGVyaW9kLXNlbGVjdG9yLWVzNS5taW4uanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svYm9vdHN0cmFwIDMzMzYyNGYzNTgzYTc4ZmQxNjQ4Iiwid2VicGFjazovLy8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL2J1aWxkaW4vbW9kdWxlLmpzIiwid2VicGFjazovLy8uL3NyYy9zdGFuZGFyZC1wZXJpb2Qtc2VsZWN0b3IuanMiXSwibmFtZXMiOlsibW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImluc3RhbGxlZE1vZHVsZXMiLCJleHBvcnRzIiwibW9kdWxlIiwiaWQiLCJsb2FkZWQiLCJjYWxsIiwibSIsImMiLCJwIiwiX3R5cGVvZiIsIlN5bWJvbCIsIml0ZXJhdG9yIiwib2JqIiwiY29uc3RydWN0b3IiLCJwcm90b3R5cGUiLCJTdGFuZGFyZFBlcmlvZFNlbGVjdG9yIiwid2luZG93Iiwic3RQUyIsImVudiIsImZhY3RvcnkiLCJkb2N1bWVudCIsIndpbiIsIkVycm9yIiwidW5kZWZpbmVkIiwiX3dpbmRvdyIsIndpbmRvd0V4aXN0cyIsIkZDIiwiRnVzaW9uQ2hhcnRzIiwicmVnaXN0ZXIiLCJyZWdpc3RlckNvbXBvbmVudCIsIndlYnBhY2tQb2x5ZmlsbCIsImRlcHJlY2F0ZSIsInBhdGhzIiwiY2hpbGRyZW4iLCJfY2xhc3NDYWxsQ2hlY2siLCJpbnN0YW5jZSIsIkNvbnN0cnVjdG9yIiwiVHlwZUVycm9yIiwiX2NyZWF0ZUNsYXNzIiwiZGVmaW5lUHJvcGVydGllcyIsInRhcmdldCIsInByb3BzIiwiaSIsImxlbmd0aCIsImRlc2NyaXB0b3IiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImtleSIsInByb3RvUHJvcHMiLCJzdGF0aWNQcm9wcyIsImRlcCIsInRoaXMiLCJyYXRpbyIsInRvb2xib3giLCJnZXRDb21wb25lbnQiLCJIb3Jpem9udGFsVG9vbGJhciIsIkNvbXBvbmVudEdyb3VwIiwiU3ltYm9sU3RvcmUiLCJhbGwiLCJjYWxjdWxhdGVkUGVyaW9kcyIsInN0YXJ0RGF0YXNldCIsInN0YXJ0QWN0aXZlV2luZG93IiwiZW5kQWN0aXZlV2luZG93Iiwic3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kcyIsInN0YW5kYXJkQ29udGV4dWFsUGVyaW9kcyIsInN0YXJ0UG9pbnRVbml0Iiwic3RhcnRQb2ludE11bHRpcGxpZXIiLCJjbGlja2VkSWQiLCJub0NhbGNCdXR0b25zIiwidGltZVBlcmlvZHMiLCJuYW1lIiwibWlsbGlzZWNvbmRzIiwic3RhcnRpbmdQb2ludCIsInRvdGFsIiwiYWJicmV2aWF0aW9uIiwiZGVzY3JpcHRpb24iLCJwYXJlbnQiLCJtdWx0aXBsaWVycyIsInRkQnV0dG9ucyIsIm11bHRpcGxpZXIiLCJjb25maWciLCJhbmNob3JQb3NpdGlvbnMiLCJjb250ZXh0dWFsIiwiY2FsY3VsYXRlZCIsInRlcnRpYXJ5VGltZVBlcmlvZHMiLCJ2YWx1ZSIsInRhcmdldEJsb2NrIiwiaiIsImFjdGl2ZVdpbmRvdyIsImNvdW50IiwiTWF0aCIsImZsb29yIiwicHVzaCIsIkluZmluaXR5IiwiYnV0dG9ucyIsImVuZFN0YW1wIiwiZ2xvYmFsUmVhY3RpdmVNb2RlbCIsIm1vZGVsIiwiZGF0ZVN0YXJ0IiwiZGF0ZUVuZCIsInJlbGF0aXZlVERCdXR0b24iLCJEYXRlIiwic2V0TW9udGgiLCJzZXREYXRlIiwic2V0SG91cnMiLCJzZXRNaW51dGVzIiwic2V0U2Vjb25kcyIsImdldE1vbnRoIiwiZ2V0RGF0ZSIsImdldERheSIsInZhbHVlT2YiLCJhYnMiLCJzdGFydCIsImVuZCIsImFyZ3VtZW50cyIsImdlbmVyYXRlQ2FsY3VsYXRlZEJ1dHRvbnMiLCJnZW5lcmF0ZUNvbnRleHR1YWxCdXR0b25zIiwiZW5kRGF0YXNldCIsImdldEVsZW1lbnRCeUlkIiwiaW5uZXJIVE1MIiwicmVxdWlyZSIsInhBeGlzIiwieUF4aXMiLCJncmFwaGljcyIsImNoYXJ0IiwiZGF0YXNldCIsInBsb3RNYW5hZ2VyIiwiY2FudmFzQ29uZmlnIiwibWFya2VyTWFuYWdlciIsInJlYWN0aXZlTW9kZWwiLCJzcGFjZU1hbmFnZXJJbnN0YW5jZSIsInNtYXJ0TGFiZWwiLCJzZXRBY3RpdmVQZXJpb2QiLCJ0b29sYmFycyIsIm1lYXN1cmVtZW50IiwiY3JlYXRlVG9vbGJhciIsInVuaWdyb3VwIiwidG9vbGJhciIsImNhbGN1bGF0ZWRCdXR0b25zIiwiY29udGV4dHVhbEJ1dHRvbnMiLCJhbGxCdXR0b24iLCJzdGFydE11bHRpcGxpZXIiLCJkZWR1Y3RvciIsIm1hcmdpbiIsImZyb21EYXRlTGFiZWwiLCJncm91cCIsIl90aGlzIiwic2VsZiIsImRlZHVjdG9yQXIiLCJwYXBlciIsImNoYXJ0Q29udGFpbmVyIiwiY29udGFpbmVyIiwiVW5pU2VsZWN0Q29tcG9uZW50R3JvdXAiLCJzZXRDb25maWciLCJmaWxsIiwiYm9yZGVyVGhpY2tuZXNzIiwiTGFiZWwiLCJ0ZXh0Iiwic3R5bGUiLCJmb250LXNpemUiLCJmb250RmFtaWx5IiwiYWRkU3ltYm9sIiwibGFiZWxGaWxsIiwic3ltYm9sU3Ryb2tlV2lkdGgiLCJzeW1ib2xTdHJva2UiLCJzdHJva2VXaWR0aCIsImhvdmVyRmlsbCIsInJhZGl1cyIsInJpZ2h0IiwiYXR0YWNoRXZlbnRIYW5kbGVycyIsImNsaWNrIiwiZGlzcG9zZSIsInBvcCIsIl9yZWYiLCJyZUFsbG9jYXRlIiwicGFyZW50R3JvdXAiLCJfbG9vcCIsIl9sb29wMyIsIl9sb29wMiIsIngiLCJ5IiwicmFkIiwidyIsImgiLCJwYWRYIiwicGFkWSIsIngxIiwieDIiLCJ5MSIsInkyIiwiYWRkQ29tcG9uZW50IiwiYXZhaWxhYmxlV2lkdGgiLCJhdmFpbGFibGVIZWlnaHQiLCJsb2dpY2FsU3BhY2UiLCJsbiIsIndpZHRoIiwiaGVpZ2h0IiwiZ2V0TG9naWNhbFNwYWNlIiwibWF4IiwicGFkZGluZyIsImFkZCIsInJlZiIsInByaW9yaXR5IiwibGF5b3V0IiwiaW5saW5lIiwib3JpZW50YXRpb24iLCJ0eXBlIiwiaG9yaXpvbnRhbCIsInBvc2l0aW9uIiwidG9wIiwiYWxpZ25tZW50IiwibGVmdCIsImRpbWVuc2lvbnMiLCJnZXRQYXJlbnRDb21wb25lbnRHcm91cCIsIl9wV2lkdGgiLCJnZXRXaWR0aCIsIl9wSGVpZ2h0IiwiZ2V0SGVpZ2h0IiwibWVzIiwiYm91bmRFbGVtZW50IiwiYkJveCIsInNlbGVjdExpbmUiLCJzYXZlU2VsZWN0TGluZSIsInBhdGgiLCJzdHJva2UiLCJ0b0Zyb250IiwiZHJhdyIsImlpIiwiY29tcG9uZW50R3JvdXBzIiwic3ltYm9sTGlzdCIsInN5bWJvbCIsImdldEJvdW5kRWxlbWVudCIsImdldEJCb3giLCJhdHRyIl0sIm1hcHBpbmdzIjoiQ0FBUyxTQUFVQSxHQ0luQixRQUFBQyxHQUFBQyxHQUdBLEdBQUFDLEVBQUFELEdBQ0EsTUFBQUMsR0FBQUQsR0FBQUUsT0FHQSxJQUFBQyxHQUFBRixFQUFBRCxJQUNBRSxXQUNBRSxHQUFBSixFQUNBSyxRQUFBLEVBVUEsT0FOQVAsR0FBQUUsR0FBQU0sS0FBQUgsRUFBQUQsUUFBQUMsSUFBQUQsUUFBQUgsR0FHQUksRUFBQUUsUUFBQSxFQUdBRixFQUFBRCxRQXZCQSxHQUFBRCxLQXFDQSxPQVRBRixHQUFBUSxFQUFBVCxFQUdBQyxFQUFBUyxFQUFBUCxFQUdBRixFQUFBVSxFQUFBLEdBR0FWLEVBQUEsS0RNTSxTQUFTSSxFQUFRRCxFQUFTSCxJRTVDaEMsU0FBQUksR0FBQSxZRmdEQyxJQUFJTyxHQUE0QixrQkFBWEMsU0FBb0QsZ0JBQXBCQSxRQUFPQyxTQUF3QixTQUFVQyxHQUFPLGFBQWNBLElBQVMsU0FBVUEsR0FBTyxNQUFPQSxJQUF5QixrQkFBWEYsU0FBeUJFLEVBQUlDLGNBQWdCSCxRQUFVRSxJQUFRRixPQUFPSSxVQUFZLGVBQWtCRixJRS9DalFHLEVBQXlCakIsRUFBUSxFQUV2Q2tCLFFBQU9DLEtBQU8s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LEdBQ1ZFLEVBQUsrQixFQUFLL0IsR0FFVmdDLEVBQVdZLE1BQ1RWLE1BQU8sSUFBS3JDLEVBQUlHLEVBQUssRUFBTyxJQUFLRixFQUFJRSxFQUFLLFVBN3BCdEJqTCxJQW1xQjlCLE9BQU9BIiwiZmlsZSI6InN0YW5kYXJkLXBlcmlvZC1zZWxlY3Rvci1lczUubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqKioqKi8gKGZ1bmN0aW9uKG1vZHVsZXMpIHsgLy8gd2VicGFja0Jvb3RzdHJhcFxuLyoqKioqKi8gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuLyoqKioqKi8gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuLyoqKioqKi8gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuLyoqKioqKi8gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4vKioqKioqLyBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuLyoqKioqKi8gXHRcdFx0ZXhwb3J0czoge30sXG4vKioqKioqLyBcdFx0XHRpZDogbW9kdWxlSWQsXG4vKioqKioqLyBcdFx0XHRsb2FkZWQ6IGZhbHNlXG4vKioqKioqLyBcdFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4vKioqKioqLyBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbi8qKioqKiovIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbi8qKioqKiovIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4vKioqKioqLyBcdH1cbi8qKioqKiovXG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8qKioqKiovIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMCk7XG4vKioqKioqLyB9KVxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKioqKiovIChbXG4vKiAwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24obW9kdWxlKSB7J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXHRcblx0dmFyIFN0YW5kYXJkUGVyaW9kU2VsZWN0b3IgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHRcblx0d2luZG93LnN0UFMgPSBuZXcgU3RhbmRhcmRQZXJpb2RTZWxlY3RvcigpO1xuXHRcblx0OyhmdW5jdGlvbiAoZW52LCBmYWN0b3J5KSB7XG5cdCAgaWYgKCggZmFsc2UgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YobW9kdWxlKSkgPT09ICdvYmplY3QnICYmIG1vZHVsZS5leHBvcnRzKSB7XG5cdCAgICBtb2R1bGUuZXhwb3J0cyA9IGVudi5kb2N1bWVudCA/IGZhY3RvcnkoZW52KSA6IGZ1bmN0aW9uICh3aW4pIHtcblx0ICAgICAgaWYgKCF3aW4uZG9jdW1lbnQpIHtcblx0ICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1dpbmRvdyB3aXRoIGRvY3VtZW50IG5vdCBwcmVzZW50Jyk7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIGZhY3Rvcnkod2luLCB0cnVlKTtcblx0ICAgIH07XG5cdCAgfSBlbHNlIHtcblx0ICAgIGVudi5TdGFuZGFyZFBlcmlvZFNlbGVjdG9yID0gZmFjdG9yeShlbnYsIHRydWUpO1xuXHQgIH1cblx0fSkodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cgOiB1bmRlZmluZWQsIGZ1bmN0aW9uIChfd2luZG93LCB3aW5kb3dFeGlzdHMpIHtcblx0ICB2YXIgRkMgPSBfd2luZG93LkZ1c2lvbkNoYXJ0cztcblx0ICBGQy5yZWdpc3RlcignZXh0ZW5zaW9uJywgWydwcml2YXRlJywgJ1N0YW5kYXJkUGVyaW9kU2VsZWN0b3InLCBmdW5jdGlvbiAoKSB7XG5cdCAgICBGQy5yZWdpc3RlckNvbXBvbmVudCgnZXh0ZW5zaW9ucycsICdTdGFuZGFyZFBlcmlvZFNlbGVjdG9yJywgU3RhbmRhcmRQZXJpb2RTZWxlY3Rvcih7IEZ1c2lvbkNoYXJ0czogRkMgfSkpO1xuXHQgIH1dKTtcblx0fSk7XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpKG1vZHVsZSkpKVxuXG4vKioqLyB9LFxuLyogMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihtb2R1bGUpIHtcblx0XHRpZighbW9kdWxlLndlYnBhY2tQb2x5ZmlsbCkge1xuXHRcdFx0bW9kdWxlLmRlcHJlY2F0ZSA9IGZ1bmN0aW9uKCkge307XG5cdFx0XHRtb2R1bGUucGF0aHMgPSBbXTtcblx0XHRcdC8vIG1vZHVsZS5wYXJlbnQgPSB1bmRlZmluZWQgYnkgZGVmYXVsdFxuXHRcdFx0bW9kdWxlLmNoaWxkcmVuID0gW107XG5cdFx0XHRtb2R1bGUud2VicGFja1BvbHlmaWxsID0gMTtcblx0XHR9XG5cdFx0cmV0dXJuIG1vZHVsZTtcblx0fVxuXG5cbi8qKiovIH0sXG4vKiAyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHQvKipcblx0ICogQ2xhc3MgZGVmaW5pdGlvbiBvZiBTdGFuZGFyZFBlcmlvZFNlbGVjdG9yXG5cdCAqL1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChkZXApIHtcblx0ICB2YXIgU3RhbmRhcmRQZXJpb2RTZWxlY3RvciA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIFN0YW5kYXJkUGVyaW9kU2VsZWN0b3IoKSB7XG5cdCAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTdGFuZGFyZFBlcmlvZFNlbGVjdG9yKTtcblx0XG5cdCAgICAgIC8qKlxuXHQgICAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICAgKi9cblx0ICAgICAgdGhpcy5yYXRpbyA9IDg7XG5cdCAgICAgIHRoaXMudG9vbGJveCA9IEZ1c2lvbkNoYXJ0cy5nZXRDb21wb25lbnQoJ2FwaScsICd0b29sYm94Jyk7XG5cdCAgICAgIHRoaXMuSG9yaXpvbnRhbFRvb2xiYXIgPSB0aGlzLnRvb2xib3guSG9yaXpvbnRhbFRvb2xiYXI7XG5cdCAgICAgIHRoaXMuQ29tcG9uZW50R3JvdXAgPSB0aGlzLnRvb2xib3guQ29tcG9uZW50R3JvdXA7XG5cdCAgICAgIHRoaXMuU3ltYm9sU3RvcmUgPSB0aGlzLnRvb2xib3guU3ltYm9sU3RvcmU7XG5cdCAgICAgIHRoaXMuYWxsID0gMTtcblx0ICAgICAgdGhpcy5jYWxjdWxhdGVkUGVyaW9kcyA9IFtdO1xuXHQgICAgICB0aGlzLnN0YXJ0RGF0YXNldCA9IDA7XG5cdCAgICAgIC8vIHRoaXMuZW5kRGF0YXNldCA9IHRoaXMuZ2xvYmFsUmVhY3RpdmVNb2RlbC5tb2RlbFsneC1heGlzLWFic29sdXRlLXJhbmdlLWVuZCddO1xuXHQgICAgICB0aGlzLnN0YXJ0QWN0aXZlV2luZG93ID0gMDtcblx0ICAgICAgdGhpcy5lbmRBY3RpdmVXaW5kb3cgPSAxO1xuXHQgICAgICB0aGlzLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHMgPSBbXTtcblx0ICAgICAgdGhpcy5zdGFuZGFyZENvbnRleHVhbFBlcmlvZHMgPSBbXTtcblx0ICAgICAgdGhpcy5zdGFydFBvaW50VW5pdCA9IDA7XG5cdCAgICAgIHRoaXMuc3RhcnRQb2ludE11bHRpcGxpZXIgPSAwO1xuXHQgICAgICB0aGlzLmNsaWNrZWRJZDtcblx0ICAgICAgdGhpcy5ub0NhbGNCdXR0b25zID0gMDtcblx0ICAgICAgdGhpcy50aW1lUGVyaW9kcyA9IFt7XG5cdCAgICAgICAgJ25hbWUnOiAnc2Vjb25kJyxcblx0ICAgICAgICAnbWlsbGlzZWNvbmRzJzogMTAwMCxcblx0ICAgICAgICAnc3RhcnRpbmdQb2ludCc6IDAsXG5cdCAgICAgICAgJ3RvdGFsJzogNjAsXG5cdCAgICAgICAgJ2FiYnJldmlhdGlvbic6ICdzZWMnLFxuXHQgICAgICAgICdkZXNjcmlwdGlvbic6ICdTRUNPTkQnLFxuXHQgICAgICAgICdwYXJlbnQnOiAnbWludXRlJyxcblx0ICAgICAgICAnbXVsdGlwbGllcnMnOiBbMSwgNSwgMTUsIDMwXVxuXHQgICAgICB9LCB7XG5cdCAgICAgICAgJ25hbWUnOiAnbWludXRlJyxcblx0ICAgICAgICAnbWlsbGlzZWNvbmRzJzogNjAwMDAsXG5cdCAgICAgICAgJ3N0YXJ0aW5nUG9pbnQnOiAwLFxuXHQgICAgICAgICd0b3RhbCc6IDYwLFxuXHQgICAgICAgICdhYmJyZXZpYXRpb24nOiAnbWluJyxcblx0ICAgICAgICAnZGVzY3JpcHRpb24nOiAnTUlOVVRFJyxcblx0ICAgICAgICAncGFyZW50JzogJ2hvdXInLFxuXHQgICAgICAgICdtdWx0aXBsaWVycyc6IFsxLCA1LCAxNSwgMzBdXG5cdCAgICAgIH0sIHtcblx0ICAgICAgICAnbmFtZSc6ICdob3VyJyxcblx0ICAgICAgICAnbWlsbGlzZWNvbmRzJzogMzYwMDAwMCxcblx0ICAgICAgICAnc3RhcnRpbmdQb2ludCc6IDAsXG5cdCAgICAgICAgJ3RvdGFsJzogMjQsXG5cdCAgICAgICAgJ2FiYnJldmlhdGlvbic6ICdocicsXG5cdCAgICAgICAgJ2Rlc2NyaXB0aW9uJzogJ0hPVVInLFxuXHQgICAgICAgICdwYXJlbnQnOiAnZGF5Jyxcblx0ICAgICAgICAnbXVsdGlwbGllcnMnOiBbMSwgMywgNiwgMTJdXG5cdCAgICAgIH0sIHtcblx0ICAgICAgICAnbmFtZSc6ICdkYXknLFxuXHQgICAgICAgICdtaWxsaXNlY29uZHMnOiA4NjQwMDAwMCxcblx0ICAgICAgICAnc3RhcnRpbmdQb2ludCc6IDAsXG5cdCAgICAgICAgJ3RvdGFsJzogMzAsXG5cdCAgICAgICAgJ2FiYnJldmlhdGlvbic6ICdEJyxcblx0ICAgICAgICAnZGVzY3JpcHRpb24nOiAnREFZJyxcblx0ICAgICAgICAncGFyZW50JzogJ21vbnRoJyxcblx0ICAgICAgICAnbXVsdGlwbGllcnMnOiBbMSwgNywgMTVdXG5cdCAgICAgIH0sIHtcblx0ICAgICAgICAnbmFtZSc6ICdtb250aCcsXG5cdCAgICAgICAgJ21pbGxpc2Vjb25kcyc6IDI1OTIwMDAwMDAsXG5cdCAgICAgICAgJ3N0YXJ0aW5nUG9pbnQnOiAwLFxuXHQgICAgICAgICd0b3RhbCc6IDEyLFxuXHQgICAgICAgICdhYmJyZXZpYXRpb24nOiAnTScsXG5cdCAgICAgICAgJ2Rlc2NyaXB0aW9uJzogJ01PTlRIJyxcblx0ICAgICAgICAncGFyZW50JzogJ3llYXInLFxuXHQgICAgICAgICdtdWx0aXBsaWVycyc6IFsxLCAzLCA2XVxuXHQgICAgICB9LCB7XG5cdCAgICAgICAgJ25hbWUnOiAneWVhcicsXG5cdCAgICAgICAgJ21pbGxpc2Vjb25kcyc6IDMxMTA0MDAwMDAwLFxuXHQgICAgICAgICdzdGFydGluZ1BvaW50JzogMCxcblx0ICAgICAgICAnYWJicmV2aWF0aW9uJzogJ1knLFxuXHQgICAgICAgICdkZXNjcmlwdGlvbic6ICdZRUFSJyxcblx0ICAgICAgICAnbXVsdGlwbGllcnMnOiBbMSwgMywgNV1cblx0ICAgICAgfV07XG5cdCAgICAgIHRoaXMudGRCdXR0b25zID0gW3tcblx0ICAgICAgICAnbmFtZSc6ICdZVEQnLFxuXHQgICAgICAgICdhYmJyZXZpYXRpb24nOiAnWVREJyxcblx0ICAgICAgICAncGFyZW50JzogJ3llYXInLFxuXHQgICAgICAgICdtaWxsaXNlY29uZHMnOiAzMTEwNDAwMDAwMCxcblx0ICAgICAgICAnZGVzY3JpcHRpb24nOiAnWWVhciB0byBEYXRlJ1xuXHQgICAgICB9LCB7XG5cdCAgICAgICAgJ25hbWUnOiAnUVREJyxcblx0ICAgICAgICAnYWJicmV2aWF0aW9uJzogJ1FURCcsXG5cdCAgICAgICAgJ3BhcmVudCc6ICdtb250aCcsXG5cdCAgICAgICAgJ211bHRpcGxpZXInOiAzLFxuXHQgICAgICAgICdtaWxsaXNlY29uZHMnOiA3Nzc2MDAwMDAwLFxuXHQgICAgICAgICdkZXNjcmlwdGlvbic6ICdRdWFydGVyIHRvIERhdGUnXG5cdCAgICAgIH0sIHtcblx0ICAgICAgICAnbmFtZSc6ICdNVEQnLFxuXHQgICAgICAgICdhYmJyZXZpYXRpb24nOiAnTVREJyxcblx0ICAgICAgICAncGFyZW50JzogJ21vbnRoJyxcblx0ICAgICAgICAnbWlsbGlzZWNvbmRzJzogMjU5MjAwMDAwMCxcblx0ICAgICAgICAnZGVzY3JpcHRpb24nOiAnTW9udGggdG8gRGF0ZSdcblx0ICAgICAgfSwge1xuXHQgICAgICAgICduYW1lJzogJ1dURCcsXG5cdCAgICAgICAgJ2FiYnJldmlhdGlvbic6ICdXVEQnLFxuXHQgICAgICAgICdwYXJlbnQnOiAnZGF5Jyxcblx0ICAgICAgICAnbXVsdGlwbGllcic6IDcsXG5cdCAgICAgICAgJ21pbGxpc2Vjb25kcyc6IDYwNDgwMDAwMCxcblx0ICAgICAgICAnZGVzY3JpcHRpb24nOiAnV2VlayB0byBEYXRlJ1xuXHQgICAgICB9LCB7XG5cdCAgICAgICAgJ25hbWUnOiAnWScsXG5cdCAgICAgICAgJ2FiYnJldmlhdGlvbic6ICdZJyxcblx0ICAgICAgICAncGFyZW50JzogJ2RheScsXG5cdCAgICAgICAgJ21pbGxpc2Vjb25kcyc6IDg2NDAwMDAwLFxuXHQgICAgICAgICdkZXNjcmlwdGlvbic6ICdZZXN0ZXJkYXknXG5cdCAgICAgIH0sIHtcblx0ICAgICAgICAnbmFtZSc6ICdUJyxcblx0ICAgICAgICAnYWJicmV2aWF0aW9uJzogJ1QnLFxuXHQgICAgICAgICdwYXJlbnQnOiAnZGF5Jyxcblx0ICAgICAgICAnbWlsbGlzZWNvbmRzJzogODY0MDAwMDAsXG5cdCAgICAgICAgJ2Rlc2NyaXB0aW9uJzogJ1RvZGF5J1xuXHQgICAgICB9XTtcblx0ICAgICAgdGhpcy5jb25maWcgPSB7XG5cdCAgICAgICAgYW5jaG9yUG9zaXRpb25zOiAncmlnaHQnLFxuXHQgICAgICAgIGFsbDogJzEnLFxuXHQgICAgICAgIGNvbnRleHR1YWw6ICcxJyxcblx0ICAgICAgICBjYWxjdWxhdGVkOiAnMScsXG5cdCAgICAgICAgdGVydGlhcnlUaW1lUGVyaW9kczoge31cblx0ICAgICAgfTtcblx0ICAgIH1cblx0XG5cdCAgICAvKipcblx0ICAgICAqIEEgZnVuY3Rpb24gdG8gZ2VuZXJhdGUgdGhlIGNhbGN1bGF0ZWQgYnV0dG9ucyB1c2luZ1xuXHQgICAgICogdGhlIGFjdGl2ZSByYW5nZSBhbmQgdGhlIGxvY2F0aW9uIG9mIHRoZSBhY3RpdmUgcmFuZ2Vcblx0ICAgICAqL1xuXHRcblx0XG5cdCAgICBfY3JlYXRlQ2xhc3MoU3RhbmRhcmRQZXJpb2RTZWxlY3RvciwgW3tcblx0ICAgICAga2V5OiAnZ2VuZXJhdGVDYWxjdWxhdGVkQnV0dG9ucycsXG5cdCAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZW5lcmF0ZUNhbGN1bGF0ZWRCdXR0b25zKCkge1xuXHQgICAgICAgIHZhciB0YXJnZXRCbG9jayA9IHRoaXMuZW5kQWN0aXZlV2luZG93IC0gdGhpcy5zdGFydERhdGFzZXQsXG5cdCAgICAgICAgICAgIGkgPSAwLFxuXHQgICAgICAgICAgICBqID0gMCxcblx0ICAgICAgICAgICAgYWN0aXZlV2luZG93ID0gdGhpcy5lbmRBY3RpdmVXaW5kb3cgLSB0aGlzLnN0YXJ0QWN0aXZlV2luZG93LFxuXHQgICAgICAgICAgICBjb3VudCA9IDA7XG5cdCAgICAgICAgdGhpcy5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzID0gW107XG5cdCAgICAgICAgZm9yIChpID0gMDsgaSA8IHRoaXMudGltZVBlcmlvZHMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICAgIC8vIGNoZWNraW5nIHdoZXRoZXIgdGhlIHVuaXQgaXMgYXBwbGljYWJsZSBmb3IgdGhlIGN1cnJlbnQgdGFyZ2V0IGJsb2NrXG5cdCAgICAgICAgICBpZiAodGFyZ2V0QmxvY2sgLyB0aGlzLnRpbWVQZXJpb2RzW2ldLm1pbGxpc2Vjb25kcyA+PSAxKSB7XG5cdCAgICAgICAgICAgIC8vIGNoZWNraW5nIHdoZXRoZXIgdGhlIHVuaXQgaXMgb2YgdGhlIGhpZ2hlciBvcmRlciBhbmQgb25seSBtdWx0aXBsaWVyIDEgaXMgYXBwbGljYWJsZVxuXHQgICAgICAgICAgICBpZiAoTWF0aC5mbG9vcihhY3RpdmVXaW5kb3cgLyB0aGlzLnRpbWVQZXJpb2RzW2ldLm1pbGxpc2Vjb25kcykgPCAxKSB7XG5cdCAgICAgICAgICAgICAgdGhpcy5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzLnB1c2goe1xuXHQgICAgICAgICAgICAgICAgJ2FiYnJldmlhdGlvbic6IHRoaXMudGltZVBlcmlvZHNbaV0uYWJicmV2aWF0aW9uLFxuXHQgICAgICAgICAgICAgICAgJ2Rlc2NyaXB0aW9uJzogdGhpcy50aW1lUGVyaW9kc1tpXS5kZXNjcmlwdGlvbixcblx0ICAgICAgICAgICAgICAgICdtaWxsaXNlY29uZHMnOiB0aGlzLnRpbWVQZXJpb2RzW2ldLm1pbGxpc2Vjb25kcyxcblx0ICAgICAgICAgICAgICAgICdtdWx0aXBsaWVycyc6IFsxXVxuXHQgICAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgIC8vIGlmIHRoZSB1bml0IGlzIG9mIHRoZSBvcmRlciBvZiB0aGUgdGFyZ2V0IGJsb2NrIGFuZCBjYWxjdWxhdGluZyB0aGUgbXVsdGlwbGllcnNcblx0ICAgICAgICAgICAgICB0aGlzLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHMucHVzaCh7XG5cdCAgICAgICAgICAgICAgICAnYWJicmV2aWF0aW9uJzogdGhpcy50aW1lUGVyaW9kc1tpXS5hYmJyZXZpYXRpb24sXG5cdCAgICAgICAgICAgICAgICAnZGVzY3JpcHRpb24nOiB0aGlzLnRpbWVQZXJpb2RzW2ldLmRlc2NyaXB0aW9uLFxuXHQgICAgICAgICAgICAgICAgJ21pbGxpc2Vjb25kcyc6IHRoaXMudGltZVBlcmlvZHNbaV0ubWlsbGlzZWNvbmRzLFxuXHQgICAgICAgICAgICAgICAgJ211bHRpcGxpZXJzJzogW11cblx0ICAgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgICAvLyBjYWxjdWxhdGluZyBhbmQgcG9wdWxhdGluZyB0aGUgYXBwbGljYWJsZSBtdWx0cGxpZXJzIG9mIGVhY2ggdW5pdFxuXHQgICAgICAgICAgICAgIGZvciAoaiA9IDA7IGogPCB0aGlzLnRpbWVQZXJpb2RzW2ldLm11bHRpcGxpZXJzLmxlbmd0aDsgaisrKSB7XG5cdCAgICAgICAgICAgICAgICBpZiAoYWN0aXZlV2luZG93IC8gdGhpcy5yYXRpbyA8IHRoaXMudGltZVBlcmlvZHNbaV0ubXVsdGlwbGllcnNbal0gKiB0aGlzLnRpbWVQZXJpb2RzW2ldLm1pbGxpc2Vjb25kcykge1xuXHQgICAgICAgICAgICAgICAgICB0aGlzLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHNbdGhpcy5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzLmxlbmd0aCAtIDFdLm11bHRpcGxpZXJzLnB1c2godGhpcy50aW1lUGVyaW9kc1tpXS5tdWx0aXBsaWVyc1tqXSk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHRoaXMubm9DYWxjQnV0dG9ucyA9IEluZmluaXR5O1xuXHQgICAgICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICAgIGZvciAoaiA9IDA7IGogPCB0aGlzLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHNbaV0ubXVsdGlwbGllcnMubGVuZ3RoOyBqKyspIHtcblx0ICAgICAgICAgICAgKytjb3VudDtcblx0ICAgICAgICAgICAgaWYgKHRoaXMubm9DYWxjQnV0dG9ucyA+IGkpIHtcblx0ICAgICAgICAgICAgICB0aGlzLm5vQ2FsY0J1dHRvbnMgPSBpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGlmIChjb3VudCA8PSA0KSB7XG5cdCAgICAgICAgICAgICAgdGhpcy5zdGFydFBvaW50TXVsdGlwbGllciA9IGo7XG5cdCAgICAgICAgICAgICAgdGhpcy5zdGFydFBvaW50VW5pdCA9IGk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIC8vIHRoaXMuZHJhd0J1dHRvbnNDYWxjdWxhdGVkKHRoaXMuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kcyk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8qKlxuXHQgICAgICAgKiBBIGZ1bmN0aW9uIHRvIGdlbmVyYXRlIHRoZSBjb250ZXh0dWFsIGJ1dHRvbnMgdXNpbmdcblx0ICAgICAgICogdGhlIGVuZCBwb2ludCBvZiB0aGUgdGltZS1zY2FsZVxuXHQgICAgICAgKi9cblx0XG5cdCAgICB9LCB7XG5cdCAgICAgIGtleTogJ2dlbmVyYXRlQ29udGV4dHVhbEJ1dHRvbnMnLFxuXHQgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2VuZXJhdGVDb250ZXh0dWFsQnV0dG9ucygpIHtcblx0ICAgICAgICAvLyBnZW5lcmF0aW5nIGFuIGFycmF5IHdpdGggYXBwbGljYWJsZSBURCBidXR0b25zXG5cdCAgICAgICAgdmFyIGJ1dHRvbnMgPSBbXSxcblx0ICAgICAgICAgICAgaSA9IDAsXG5cdCAgICAgICAgICAgIGVuZFN0YW1wID0gdGhpcy5nbG9iYWxSZWFjdGl2ZU1vZGVsLm1vZGVsWyd4LWF4aXMtYWJzb2x1dGUtcmFuZ2UtZW5kJ10sXG5cdCAgICAgICAgICAgIGRhdGVTdGFydCA9IGVuZFN0YW1wIC0gMixcblx0ICAgICAgICAgICAgZGF0ZUVuZCA9IGVuZFN0YW1wLFxuXHQgICAgICAgICAgICByZWxhdGl2ZVREQnV0dG9uID0ge307XG5cdCAgICAgICAgZm9yICg7IGkgPCB0aGlzLnRkQnV0dG9ucy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgZGF0ZVN0YXJ0ID0gbmV3IERhdGUoZW5kU3RhbXApO1xuXHQgICAgICAgICAgaWYgKHRoaXMudGRCdXR0b25zW2ldLm5hbWUgPT09ICdZVEQnKSB7XG5cdCAgICAgICAgICAgIGRhdGVTdGFydC5zZXRNb250aCgwKTtcblx0ICAgICAgICAgICAgZGF0ZVN0YXJ0LnNldERhdGUoMSk7XG5cdCAgICAgICAgICAgIGRhdGVTdGFydC5zZXRIb3VycygwKTtcblx0ICAgICAgICAgICAgZGF0ZVN0YXJ0LnNldE1pbnV0ZXMoMCk7XG5cdCAgICAgICAgICAgIGRhdGVTdGFydC5zZXRTZWNvbmRzKDApO1xuXHQgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnRkQnV0dG9uc1tpXS5uYW1lID09PSAnTVREJykge1xuXHQgICAgICAgICAgICBkYXRlU3RhcnQuc2V0RGF0ZSgxKTtcblx0ICAgICAgICAgICAgZGF0ZVN0YXJ0LnNldEhvdXJzKDApO1xuXHQgICAgICAgICAgICBkYXRlU3RhcnQuc2V0TWludXRlcygwKTtcblx0ICAgICAgICAgICAgZGF0ZVN0YXJ0LnNldFNlY29uZHMoMCk7XG5cdCAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMudGRCdXR0b25zW2ldLm5hbWUgPT09ICdRVEQnKSB7XG5cdCAgICAgICAgICAgIGRhdGVTdGFydC5zZXRNb250aCgxMSAtIGRhdGVTdGFydC5nZXRNb250aCgpICUgNCk7XG5cdCAgICAgICAgICAgIGRhdGVTdGFydC5zZXREYXRlKDApO1xuXHQgICAgICAgICAgICBkYXRlU3RhcnQuc2V0SG91cnMoMCk7XG5cdCAgICAgICAgICAgIGRhdGVTdGFydC5zZXRNaW51dGVzKDApO1xuXHQgICAgICAgICAgICBkYXRlU3RhcnQuc2V0U2Vjb25kcygwKTtcblx0ICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy50ZEJ1dHRvbnNbaV0ubmFtZSA9PT0gJ1dURCcpIHtcblx0ICAgICAgICAgICAgZGF0ZVN0YXJ0LnNldERhdGUoZGF0ZVN0YXJ0LmdldERhdGUoKSAtIGRhdGVTdGFydC5nZXREYXkoKSk7XG5cdCAgICAgICAgICAgIGRhdGVTdGFydC5zZXRIb3VycygwKTtcblx0ICAgICAgICAgICAgZGF0ZVN0YXJ0LnNldE1pbnV0ZXMoMCk7XG5cdCAgICAgICAgICAgIGRhdGVTdGFydC5zZXRTZWNvbmRzKDApO1xuXHQgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnRkQnV0dG9uc1tpXS5uYW1lID09PSAnWScpIHtcblx0ICAgICAgICAgICAgZGF0ZVN0YXJ0LnNldEhvdXJzKDApO1xuXHQgICAgICAgICAgICBkYXRlU3RhcnQuc2V0TWludXRlcygwKTtcblx0ICAgICAgICAgICAgZGF0ZVN0YXJ0LnNldFNlY29uZHMoMCk7XG5cdCAgICAgICAgICAgIGRhdGVTdGFydCAtPSA4NjQwMDAwMDtcblx0ICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy50ZEJ1dHRvbnNbaV0ubmFtZSA9PT0gJ1QnKSB7XG5cdCAgICAgICAgICAgIGRhdGVTdGFydC5zZXRIb3VycygwKTtcblx0ICAgICAgICAgICAgZGF0ZVN0YXJ0LnNldE1pbnV0ZXMoMCk7XG5cdCAgICAgICAgICAgIGRhdGVTdGFydC5zZXRTZWNvbmRzKDApO1xuXHQgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgIGlmIChkYXRlRW5kIDwgZGF0ZVN0YXJ0KSB7XG5cdCAgICAgICAgICAgIGNvbnRpbnVlO1xuXHQgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgdGhpcy50ZEJ1dHRvbnNbaV0uZGF0ZVN0YXJ0ID0gZGF0ZVN0YXJ0LnZhbHVlT2YoKTtcblx0ICAgICAgICAgICAgdGhpcy50ZEJ1dHRvbnNbaV0uZGF0ZUVuZCA9IGRhdGVFbmQudmFsdWVPZigpO1xuXHQgICAgICAgICAgICBidXR0b25zLnB1c2godGhpcy50ZEJ1dHRvbnNbaV0pO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICByZWxhdGl2ZVREQnV0dG9uLm1pbGxpc2Vjb25kcyA9IEluZmluaXR5O1xuXHQgICAgICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLnRkQnV0dG9ucy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgaWYgKE1hdGguYWJzKHRoaXMudGRCdXR0b25zW2ldLm1pbGxpc2Vjb25kcyAtICh0aGlzLmVuZEFjdGl2ZVdpbmRvdyAtIHRoaXMuc3RhcnRBY3RpdmVXaW5kb3cpKSA8IHJlbGF0aXZlVERCdXR0b24ubWlsbGlzZWNvbmRzKSB7XG5cdCAgICAgICAgICAgIHJlbGF0aXZlVERCdXR0b24ubWlsbGlzZWNvbmRzID0gdGhpcy50ZEJ1dHRvbnNbaV0ubWlsbGlzZWNvbmRzO1xuXHQgICAgICAgICAgICByZWxhdGl2ZVREQnV0dG9uLm5hbWUgPSB0aGlzLnRkQnV0dG9uc1tpXS5hYmJyZXZpYXRpb247XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICB0aGlzLnN0YW5kYXJkQ29udGV4dWFsUGVyaW9kcyA9IGJ1dHRvbnM7XG5cdCAgICAgICAgLy8gdGhpcy5kcmF3QnV0dG9uc0NvbnRleHR1YWwodGhpcy5zdGFuZGFyZENvbnRleHVhbFBlcmlvZHMpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICAvKipcblx0ICAgICAgICogQSBmdW5jdGlvbiB0byBzZXQgdGhlIGFjdGl2ZSBwZXJpb2Qnc1xuXHQgICAgICAgKiBzdGFydCBhbmQgZW5kIHBvaW50XG5cdCAgICAgICAqIEBwYXJhbSAge251bWJlcn0gZGF0ZSBzdGFtcCAtIEEgVU5JWCB0aW1lc3RhbXAgdG8gYmUgc2V0IGFzIHRoZSBzdGFydCBwb2ludCBvZiBhY3RpdmUgcGVyaW9kXG5cdCAgICAgICAqIEBwYXJhbSAge251bWJlcn0gZGF0ZSBzdGFtcCAtIEEgVU5JWCB0aW1lc3RhbXAgdG8gYmUgc2V0IGFzIHRoZSBlbmQgcG9pbnQgb2YgYWN0aXZlIHBlcmlvZFxuXHQgICAgICAgKi9cblx0XG5cdCAgICB9LCB7XG5cdCAgICAgIGtleTogJ3NldEFjdGl2ZVBlcmlvZCcsXG5cdCAgICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRBY3RpdmVQZXJpb2QoKSB7XG5cdCAgICAgICAgdmFyIHN0YXJ0LCBlbmQ7XG5cdCAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEpIHtcblx0ICAgICAgICAgIGVuZCA9IHRoaXMuZ2xvYmFsUmVhY3RpdmVNb2RlbC5tb2RlbFsneC1heGlzLXZpc2libGUtcmFuZ2UtZW5kJ107XG5cdCAgICAgICAgICBzdGFydCA9IGVuZCAtIGFyZ3VtZW50c1swXTtcblx0ICAgICAgICB9IGVsc2UgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDIpIHtcblx0ICAgICAgICAgIHN0YXJ0ID0gYXJndW1lbnRzWzBdO1xuXHQgICAgICAgICAgZW5kID0gYXJndW1lbnRzWzFdO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgdGhpcy5zdGFydEFjdGl2ZVdpbmRvdyA9IHN0YXJ0O1xuXHQgICAgICAgIHRoaXMuZW5kQWN0aXZlV2luZG93ID0gZW5kO1xuXHQgICAgICAgIHRoaXMuZ2VuZXJhdGVDYWxjdWxhdGVkQnV0dG9ucygpO1xuXHQgICAgICAgIHRoaXMuZ2xvYmFsUmVhY3RpdmVNb2RlbC5tb2RlbFsneC1heGlzLXZpc2libGUtcmFuZ2Utc3RhcnQnXSA9IHRoaXMuc3RhcnRBY3RpdmVXaW5kb3c7XG5cdCAgICAgICAgdGhpcy5nbG9iYWxSZWFjdGl2ZU1vZGVsLm1vZGVsWyd4LWF4aXMtdmlzaWJsZS1yYW5nZS1lbmQnXSA9IHRoaXMuZW5kQWN0aXZlV2luZG93O1xuXHQgICAgICAgIHRoaXMuZ2VuZXJhdGVDb250ZXh0dWFsQnV0dG9ucygpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICAvKipcblx0ICAgICAgICogQSBmdW5jdGlvbiB0byBzZXQgdGhlIHN0YXJ0IGFuZCBlbmQgcG9pbnQgb2YgdGhlXG5cdCAgICAgICAqIGVudGlyZSB0aW1lLWxpbmVcblx0ICAgICAgICogQHBhcmFtICB7bnVtYmVyfSBkYXRlIHN0YW1wIC0gQSBVTklYIHRpbWVzdGFtcCB0byBiZSBzZXQgYXMgdGhlIHN0YXJ0IHBvaW50IG9mIHRpbWUtbGluZVxuXHQgICAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IGRhdGUgc3RhbXAgLSBBIFVOSVggdGltZXN0YW1wIHRvIGJlIHNldCBhcyB0aGUgZW5kIHBvaW50IG9mIHRpbWUtbGluZVxuXHQgICAgICAgKi9cblx0XG5cdCAgICB9LCB7XG5cdCAgICAgIGtleTogJ3NldFRpbWVsaW5lJyxcblx0ICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNldFRpbWVsaW5lKHN0YXJ0LCBlbmQpIHtcblx0ICAgICAgICB0aGlzLnN0YXJ0RGF0YXNldCA9IHN0YXJ0O1xuXHQgICAgICAgIHRoaXMuZW5kRGF0YXNldCA9IGVuZDtcblx0ICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3RhcnRBY3RpdmVSYW5nZScpLmlubmVySFRNTCA9IG5ldyBEYXRlKHRoaXMuc3RhcnREYXRhc2V0KTtcblx0ICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZW5kQWN0aXZlUmFuZ2UnKS5pbm5lckhUTUwgPSBuZXcgRGF0ZSh0aGlzLmVuZERhdGFzZXQpO1xuXHQgICAgICAgIHRoaXMuZ2VuZXJhdGVDYWxjdWxhdGVkQnV0dG9ucygpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICAvKipcblx0ICAgICAgICogQSBmdW5jdGlvbiB0byBzZXQgdGhlIG9iamVjdCB0byBzZXQgdGhlIHVzZXIgcHJlZmVyZW5jZXNcblx0ICAgICAgICovXG5cdFxuXHQgICAgfSwge1xuXHQgICAgICBrZXk6ICdjb25maWd1cmUnLFxuXHQgICAgICB2YWx1ZTogZnVuY3Rpb24gY29uZmlndXJlKGNvbmZpZykge1xuXHQgICAgICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICAvKipcblx0ICAgICAgICogRnVzaW9uY2hhcnRzIGxpZmUgY3ljbGUgbWV0aG9kIGZvciBleHRlbnNpb25cblx0ICAgICAgICovXG5cdFxuXHQgICAgfSwge1xuXHQgICAgICBrZXk6ICdpbml0Jyxcblx0ICAgICAgdmFsdWU6IGZ1bmN0aW9uIGluaXQocmVxdWlyZSkge1xuXHQgICAgICAgIHZhciBpbnN0YW5jZSA9IHRoaXM7XG5cdCAgICAgICAgcmVxdWlyZShbJ3hBeGlzJywgJ3lBeGlzJywgJ2dyYXBoaWNzJywgJ2NoYXJ0JywgJ2RhdGFzZXQnLCAnUGxvdE1hbmFnZXInLCAnY2FudmFzQ29uZmlnJywgJ01hcmtlck1hbmFnZXInLCAncmVhY3RpdmVNb2RlbCcsICdnbG9iYWxSZWFjdGl2ZU1vZGVsJywgJ3NwYWNlTWFuYWdlckluc3RhbmNlJywgJ3NtYXJ0TGFiZWwnLCBmdW5jdGlvbiAoeEF4aXMsIHlBeGlzLCBncmFwaGljcywgY2hhcnQsIGRhdGFzZXQsIHBsb3RNYW5hZ2VyLCBjYW52YXNDb25maWcsIG1hcmtlck1hbmFnZXIsIHJlYWN0aXZlTW9kZWwsIGdsb2JhbFJlYWN0aXZlTW9kZWwsIHNwYWNlTWFuYWdlckluc3RhbmNlLCBzbWFydExhYmVsKSB7XG5cdCAgICAgICAgICBpbnN0YW5jZS54QXhpcyA9IHhBeGlzO1xuXHQgICAgICAgICAgaW5zdGFuY2UueUF4aXMgPSB5QXhpcztcblx0ICAgICAgICAgIGluc3RhbmNlLmdyYXBoaWNzID0gZ3JhcGhpY3M7XG5cdCAgICAgICAgICBpbnN0YW5jZS5jaGFydCA9IGNoYXJ0O1xuXHQgICAgICAgICAgaW5zdGFuY2UuZGF0YXNldCA9IGRhdGFzZXQ7XG5cdCAgICAgICAgICBpbnN0YW5jZS5wbG90TWFuYWdlciA9IHBsb3RNYW5hZ2VyO1xuXHQgICAgICAgICAgaW5zdGFuY2UubWFya2VyTWFuYWdlciA9IG1hcmtlck1hbmFnZXI7XG5cdCAgICAgICAgICBpbnN0YW5jZS5jYW52YXNDb25maWcgPSBjYW52YXNDb25maWc7XG5cdCAgICAgICAgICBpbnN0YW5jZS5yZWFjdGl2ZU1vZGVsID0gcmVhY3RpdmVNb2RlbDtcblx0ICAgICAgICAgIGluc3RhbmNlLmdsb2JhbFJlYWN0aXZlTW9kZWwgPSBnbG9iYWxSZWFjdGl2ZU1vZGVsO1xuXHQgICAgICAgICAgaW5zdGFuY2Uuc3BhY2VNYW5hZ2VySW5zdGFuY2UgPSBzcGFjZU1hbmFnZXJJbnN0YW5jZTtcblx0ICAgICAgICAgIGluc3RhbmNlLnNtYXJ0TGFiZWwgPSBzbWFydExhYmVsO1xuXHQgICAgICAgIH1dKTtcblx0ICAgICAgICB0aGlzLnNwYWNlTWFuYWdlckluc3RhbmNlID0gaW5zdGFuY2Uuc3BhY2VNYW5hZ2VySW5zdGFuY2U7XG5cdCAgICAgICAgdGhpcy5nbG9iYWxSZWFjdGl2ZU1vZGVsID0gaW5zdGFuY2UuZ2xvYmFsUmVhY3RpdmVNb2RlbDtcblx0ICAgICAgICB0aGlzLmVuZEFjdGl2ZVdpbmRvdyA9IGluc3RhbmNlLmdsb2JhbFJlYWN0aXZlTW9kZWwubW9kZWxbJ3gtYXhpcy12aXNpYmxlLXJhbmdlLWVuZCddO1xuXHQgICAgICAgIHRoaXMuc3RhcnRBY3RpdmVXaW5kb3cgPSBpbnN0YW5jZS5nbG9iYWxSZWFjdGl2ZU1vZGVsLm1vZGVsWyd4LWF4aXMtdmlzaWJsZS1yYW5nZS1zdGFydCddO1xuXHQgICAgICAgIHRoaXMuc3RhcnREYXRhc2V0ID0gaW5zdGFuY2UuZ2xvYmFsUmVhY3RpdmVNb2RlbC5tb2RlbFsneC1heGlzLWFic29sdXRlLXJhbmdlLXN0YXJ0J107XG5cdCAgICAgICAgdGhpcy5lbmREYXRhc2V0ID0gaW5zdGFuY2UuZ2xvYmFsUmVhY3RpdmVNb2RlbC5tb2RlbFsneC1heGlzLWFic29sdXRlLXJhbmdlLWVuZCddO1xuXHQgICAgICAgIHRoaXMuc2V0QWN0aXZlUGVyaW9kKHRoaXMuc3RhcnRBY3RpdmVXaW5kb3csIHRoaXMuZW5kQWN0aXZlV2luZG93KTtcblx0ICAgICAgICAvLyBpbnN0YW5jZS5nbG9iYWxSZWFjdGl2ZU1vZGVsLm1vZGVsWydfeC1heGlzLXZpc2libGUtcmFuZ2Utc3RhcnQnXSArPSAxMjQ0MTYwMDAwMDA7XG5cdCAgICAgICAgdGhpcy5zZXRBY3RpdmVQZXJpb2QodGhpcy5zdGFydEFjdGl2ZVdpbmRvdywgdGhpcy5lbmRBY3RpdmVXaW5kb3cpO1xuXHRcblx0ICAgICAgICB0aGlzLnRvb2xiYXJzID0gW107XG5cdFxuXHQgICAgICAgIHRoaXMubWVhc3VyZW1lbnQgPSB7fTtcblx0XG5cdCAgICAgICAgdGhpcy50b29sYmFycy5wdXNoKHRoaXMuY3JlYXRlVG9vbGJhcigpKTtcblx0ICAgICAgICByZXR1cm4gdGhpcztcblx0ICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICBrZXk6ICdjcmVhdGVUb29sYmFyJyxcblx0ICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZVRvb2xiYXIoKSB7XG5cdCAgICAgICAgdmFyIF90aGlzID0gdGhpcztcblx0XG5cdCAgICAgICAgdmFyIHVuaWdyb3VwLFxuXHQgICAgICAgICAgICB0b29sYmFyLFxuXHQgICAgICAgICAgICBjYWxjdWxhdGVkQnV0dG9ucyxcblx0ICAgICAgICAgICAgY29udGV4dHVhbEJ1dHRvbnMsXG5cdCAgICAgICAgICAgIGFsbEJ1dHRvbixcblx0ICAgICAgICAgICAgc2VsZiA9IHRoaXMsXG5cdCAgICAgICAgICAgIGVuZEFjdGl2ZSA9IHRoaXMuZ2xvYmFsUmVhY3RpdmVNb2RlbC5tb2RlbFsneC1heGlzLXZpc2libGUtcmFuZ2UtZW5kJ10sXG5cdCAgICAgICAgICAgIGRlZHVjdG9yQXIgPSBbXSxcblx0ICAgICAgICAgICAgc3RhcnRNdWx0aXBsaWVyLFxuXHQgICAgICAgICAgICBkZWR1Y3Rvcixcblx0ICAgICAgICAgICAgaSxcblx0ICAgICAgICAgICAgaixcblx0ICAgICAgICAgICAgbWFyZ2luLFxuXHQgICAgICAgICAgICBmcm9tRGF0ZUxhYmVsLFxuXHQgICAgICAgICAgICBncm91cDtcblx0XG5cdCAgICAgICAgZ3JvdXAgPSBuZXcgdGhpcy50b29sYm94LkNvbXBvbmVudEdyb3VwKHtcblx0ICAgICAgICAgIHBhcGVyOiB0aGlzLmdyYXBoaWNzLnBhcGVyLFxuXHQgICAgICAgICAgY2hhcnQ6IHRoaXMuY2hhcnQsXG5cdCAgICAgICAgICBzbWFydExhYmVsOiB0aGlzLnNtYXJ0TGFiZWwsXG5cdCAgICAgICAgICBjaGFydENvbnRhaW5lcjogdGhpcy5ncmFwaGljcy5jb250YWluZXJcblx0ICAgICAgICB9KTtcblx0XG5cdCAgICAgICAgdW5pZ3JvdXAgPSBuZXcgdGhpcy50b29sYm94LlVuaVNlbGVjdENvbXBvbmVudEdyb3VwKHtcblx0ICAgICAgICAgIHBhcGVyOiB0aGlzLmdyYXBoaWNzLnBhcGVyLFxuXHQgICAgICAgICAgY2hhcnQ6IHRoaXMuY2hhcnQsXG5cdCAgICAgICAgICBzbWFydExhYmVsOiB0aGlzLnNtYXJ0TGFiZWwsXG5cdCAgICAgICAgICBjaGFydENvbnRhaW5lcjogdGhpcy5ncmFwaGljcy5jb250YWluZXJcblx0ICAgICAgICB9KTtcblx0ICAgICAgICB1bmlncm91cC5zZXRDb25maWcoe1xuXHQgICAgICAgICAgZmlsbDogJyNmZmYnLFxuXHQgICAgICAgICAgYm9yZGVyVGhpY2tuZXNzOiAwXG5cdCAgICAgICAgfSk7XG5cdCAgICAgICAgZ3JvdXAuc2V0Q29uZmlnKHtcblx0ICAgICAgICAgIGZpbGw6ICcjZmZmJyxcblx0ICAgICAgICAgIGJvcmRlclRoaWNrbmVzczogMFxuXHQgICAgICAgIH0pO1xuXHQgICAgICAgIHRvb2xiYXIgPSBuZXcgdGhpcy5Ib3Jpem9udGFsVG9vbGJhcih7XG5cdCAgICAgICAgICBwYXBlcjogdGhpcy5ncmFwaGljcy5wYXBlcixcblx0ICAgICAgICAgIGNoYXJ0OiB0aGlzLmNoYXJ0LFxuXHQgICAgICAgICAgc21hcnRMYWJlbDogdGhpcy5zbWFydExhYmVsLFxuXHQgICAgICAgICAgY2hhcnRDb250YWluZXI6IHRoaXMuZ3JhcGhpY3MuY29udGFpbmVyXG5cdCAgICAgICAgfSk7XG5cdCAgICAgICAgdG9vbGJhci5zZXRDb25maWcoe1xuXHQgICAgICAgICAgZmlsbDogJyNmZmYnLFxuXHQgICAgICAgICAgYm9yZGVyVGhpY2tuZXNzOiAwXG5cdCAgICAgICAgfSk7XG5cdCAgICAgICAgZnJvbURhdGVMYWJlbCA9IG5ldyB0aGlzLnRvb2xib3guTGFiZWwoJ1pvb206Jywge1xuXHQgICAgICAgICAgc21hcnRMYWJlbDogdGhpcy5zbWFydExhYmVsLFxuXHQgICAgICAgICAgcGFwZXI6IHRoaXMuZ3JhcGhpY3MucGFwZXJcblx0ICAgICAgICB9LCB7XG5cdCAgICAgICAgICB0ZXh0OiB7XG5cdCAgICAgICAgICAgIHN0eWxlOiB7XG5cdCAgICAgICAgICAgICAgJ2ZvbnQtc2l6ZSc6ICcxNScsXG5cdCAgICAgICAgICAgICAgJ2ZvbnRGYW1pbHknOiAnTXlyaWFkUHJvJ1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cdCAgICAgICAgZ3JvdXAuYWRkU3ltYm9sKGZyb21EYXRlTGFiZWwpO1xuXHQgICAgICAgIGFsbEJ1dHRvbiA9IG5ldyB0aGlzLnRvb2xib3guU3ltYm9sKCdBTEwnLCB0cnVlLCB7XG5cdCAgICAgICAgICBwYXBlcjogdGhpcy5ncmFwaGljcy5wYXBlcixcblx0ICAgICAgICAgIGNoYXJ0OiB0aGlzLmNoYXJ0LFxuXHQgICAgICAgICAgc21hcnRMYWJlbDogdGhpcy5zbWFydExhYmVsLFxuXHQgICAgICAgICAgY2hhcnRDb250YWluZXI6IHRoaXMuZ3JhcGhpY3MuY29udGFpbmVyXG5cdCAgICAgICAgfSwge1xuXHQgICAgICAgICAgZmlsbDogJyNmZmZmZmYnLFxuXHQgICAgICAgICAgbGFiZWxGaWxsOiAnIzY5Njk2OScsXG5cdCAgICAgICAgICBzeW1ib2xTdHJva2VXaWR0aDogJzInLFxuXHQgICAgICAgICAgc3ltYm9sU3Ryb2tlOiAnIzAwMDAwMCcsXG5cdCAgICAgICAgICBzdHJva2VXaWR0aDogJzEnLFxuXHQgICAgICAgICAgaG92ZXJGaWxsOiAnIzdmN2Y3ZicsXG5cdCAgICAgICAgICByYWRpdXM6IDEsXG5cdCAgICAgICAgICBtYXJnaW46IHtcblx0ICAgICAgICAgICAgcmlnaHQ6IDVcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9KS5hdHRhY2hFdmVudEhhbmRsZXJzKHtcblx0ICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbiBjbGljaygpIHtcblx0ICAgICAgICAgICAgc2VsZi5zZXRBY3RpdmVQZXJpb2Qoc2VsZi5zdGFydERhdGFzZXQsIHNlbGYuZW5kRGF0YXNldCk7XG5cdCAgICAgICAgICAgIHRvb2xiYXIuZGlzcG9zZSgpO1xuXHQgICAgICAgICAgICBzZWxmLmNsaWNrZWRJZCA9ICdBTEwnO1xuXHQgICAgICAgICAgICBzZWxmLnRvb2xiYXJzLnBvcCgpO1xuXHQgICAgICAgICAgICBzZWxmLnRvb2xiYXJzLnB1c2goc2VsZi5jcmVhdGVUb29sYmFyKCkpO1xuXHQgICAgICAgICAgICBzZWxmLl9yZWYucmVBbGxvY2F0ZShzZWxmLnBhcmVudEdyb3VwKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9KTtcblx0XG5cdCAgICAgICAgdW5pZ3JvdXAuYWRkU3ltYm9sKGFsbEJ1dHRvbik7XG5cdCAgICAgICAgZm9yIChpID0gMDsgaSA8IHRoaXMuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kcy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgZm9yIChqID0gdGhpcy5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW2ldLm11bHRpcGxpZXJzLmxlbmd0aCAtIDE7IGogPj0gMDsgai0tKSB7XG5cdCAgICAgICAgICAgIGRlZHVjdG9yQXIucHVzaChzZWxmLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHNbaV0ubXVsdGlwbGllcnNbal0gKiBzZWxmLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHNbaV0ubWlsbGlzZWNvbmRzKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIGNhbGN1bGF0ZWRCdXR0b25zID0gW107XG5cdFxuXHQgICAgICAgIHZhciBfbG9vcCA9IGZ1bmN0aW9uIF9sb29wKF9pKSB7XG5cdCAgICAgICAgICBpZiAoX2kgPT09IHNlbGYuc3RhcnRQb2ludFVuaXQpIHtcblx0ICAgICAgICAgICAgc3RhcnRNdWx0aXBsaWVyID0gc2VsZi5zdGFydFBvaW50TXVsdGlwbGllcjtcblx0ICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIHN0YXJ0TXVsdGlwbGllciA9IHNlbGYuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kc1tfaV0ubXVsdGlwbGllcnMubGVuZ3RoIC0gMTtcblx0ICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICB2YXIgX2xvb3AzID0gZnVuY3Rpb24gX2xvb3AzKF9qKSB7XG5cdCAgICAgICAgICAgIG1hcmdpbiA9IF9pID09PSBzZWxmLm5vQ2FsY0J1dHRvbnMgJiYgX2ogPT09IDAgPyA1IDogMDtcblx0ICAgICAgICAgICAgY2FsY3VsYXRlZEJ1dHRvbnNbX2ldID0gbmV3IF90aGlzLnRvb2xib3guU3ltYm9sKHNlbGYuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kc1tfaV0ubXVsdGlwbGllcnNbX2pdICsgc2VsZi5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW19pXS5hYmJyZXZpYXRpb24sIHRydWUsIHtcblx0ICAgICAgICAgICAgICBwYXBlcjogX3RoaXMuZ3JhcGhpY3MucGFwZXIsXG5cdCAgICAgICAgICAgICAgY2hhcnQ6IF90aGlzLmNoYXJ0LFxuXHQgICAgICAgICAgICAgIHNtYXJ0TGFiZWw6IF90aGlzLnNtYXJ0TGFiZWwsXG5cdCAgICAgICAgICAgICAgY2hhcnRDb250YWluZXI6IF90aGlzLmdyYXBoaWNzLmNvbnRhaW5lclxuXHQgICAgICAgICAgICB9LCB7XG5cdCAgICAgICAgICAgICAgZmlsbDogJyNmZmZmZmYnLFxuXHQgICAgICAgICAgICAgIGxhYmVsRmlsbDogJyM2OTY5NjknLFxuXHQgICAgICAgICAgICAgIHN5bWJvbFN0cm9rZVdpZHRoOiAnMicsXG5cdCAgICAgICAgICAgICAgc3ltYm9sU3Ryb2tlOiAnIzAwMDAwMCcsXG5cdCAgICAgICAgICAgICAgc3Ryb2tlV2lkdGg6ICcxJyxcblx0ICAgICAgICAgICAgICBob3ZlckZpbGw6ICcjN2Y3ZjdmJyxcblx0ICAgICAgICAgICAgICByYWRpdXM6IDEsXG5cdCAgICAgICAgICAgICAgbWFyZ2luOiB7XG5cdCAgICAgICAgICAgICAgICByaWdodDogbWFyZ2luXG5cdCAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9KS5hdHRhY2hFdmVudEhhbmRsZXJzKHtcblx0ICAgICAgICAgICAgICAnY2xpY2snOiBmdW5jdGlvbiBjbGljaygpIHtcblx0ICAgICAgICAgICAgICAgIGRlZHVjdG9yID0gc2VsZi5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW19pXS5tdWx0aXBsaWVyc1tfal0gKiBzZWxmLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHNbX2ldLm1pbGxpc2Vjb25kcztcblx0ICAgICAgICAgICAgICAgIHNlbGYuY2xpY2tlZElkID0gc2VsZi5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW19pXS5tdWx0aXBsaWVyc1tfal0gKyBzZWxmLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHNbX2ldLmFiYnJldmlhdGlvbjtcblx0ICAgICAgICAgICAgICAgIHNlbGYuc2V0QWN0aXZlUGVyaW9kKGRlZHVjdG9yKTtcblx0ICAgICAgICAgICAgICAgIHRvb2xiYXIuZGlzcG9zZSgpO1xuXHQgICAgICAgICAgICAgICAgc2VsZi50b29sYmFycy5wb3AoKTtcblx0ICAgICAgICAgICAgICAgIHNlbGYudG9vbGJhcnMucHVzaChzZWxmLmNyZWF0ZVRvb2xiYXIoKSk7XG5cdCAgICAgICAgICAgICAgICBzZWxmLl9yZWYucmVBbGxvY2F0ZShzZWxmLnBhcmVudEdyb3VwKTtcblx0ICAgICAgICAgICAgICAgIC8vIHRoaXMudG9vbGJhcnNbdGhpcy50b29sYmFycy5sZW5ndGggLSAxXSA9IHRoaXMuY3JlYXRlVG9vbGJhcigpO1xuXHQgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgIHVuaWdyb3VwLmFkZFN5bWJvbChjYWxjdWxhdGVkQnV0dG9uc1tfaV0pO1xuXHQgICAgICAgICAgfTtcblx0XG5cdCAgICAgICAgICBmb3IgKHZhciBfaiA9IHN0YXJ0TXVsdGlwbGllcjsgX2ogPj0gMDsgX2otLSkge1xuXHQgICAgICAgICAgICBfbG9vcDMoX2opO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH07XG5cdFxuXHQgICAgICAgIGZvciAodmFyIF9pID0gc2VsZi5zdGFydFBvaW50VW5pdDsgX2kgPj0gMDsgX2ktLSkge1xuXHQgICAgICAgICAgX2xvb3AoX2kpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgY29udGV4dHVhbEJ1dHRvbnMgPSBbXTtcblx0XG5cdCAgICAgICAgdmFyIF9sb29wMiA9IGZ1bmN0aW9uIF9sb29wMihfaTIpIHtcblx0ICAgICAgICAgIGNvbnRleHR1YWxCdXR0b25zW19pMl0gPSBuZXcgX3RoaXMudG9vbGJveC5TeW1ib2woX3RoaXMuc3RhbmRhcmRDb250ZXh1YWxQZXJpb2RzW19pMl0uYWJicmV2aWF0aW9uLCB0cnVlLCB7XG5cdCAgICAgICAgICAgIHBhcGVyOiBfdGhpcy5ncmFwaGljcy5wYXBlcixcblx0ICAgICAgICAgICAgY2hhcnQ6IF90aGlzLmNoYXJ0LFxuXHQgICAgICAgICAgICBzbWFydExhYmVsOiBfdGhpcy5zbWFydExhYmVsLFxuXHQgICAgICAgICAgICBjaGFydENvbnRhaW5lcjogX3RoaXMuZ3JhcGhpY3MuY29udGFpbmVyXG5cdCAgICAgICAgICB9LCB7XG5cdCAgICAgICAgICAgIGZpbGw6ICcjZmZmZmZmJyxcblx0ICAgICAgICAgICAgbGFiZWxGaWxsOiAnIzY5Njk2OScsXG5cdCAgICAgICAgICAgIHN5bWJvbFN0cm9rZVdpZHRoOiAnMicsXG5cdCAgICAgICAgICAgIHN5bWJvbFN0cm9rZTogJyMwMDAwMDAnLFxuXHQgICAgICAgICAgICBzdHJva2VXaWR0aDogJzEnLFxuXHQgICAgICAgICAgICBob3ZlckZpbGw6ICcjN2Y3ZjdmJyxcblx0ICAgICAgICAgICAgcmFkaXVzOiAxLFxuXHQgICAgICAgICAgICBtYXJnaW46IHtcblx0ICAgICAgICAgICAgICByaWdodDogMFxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9KS5hdHRhY2hFdmVudEhhbmRsZXJzKHtcblx0ICAgICAgICAgICAgJ2NsaWNrJzogZnVuY3Rpb24gY2xpY2soKSB7XG5cdCAgICAgICAgICAgICAgc2VsZi5zZXRBY3RpdmVQZXJpb2Qoc2VsZi5zdGFuZGFyZENvbnRleHVhbFBlcmlvZHNbX2kyXS5kYXRlU3RhcnQsIHNlbGYuc3RhbmRhcmRDb250ZXh1YWxQZXJpb2RzW19pMl0uZGF0ZUVuZCk7XG5cdCAgICAgICAgICAgICAgc2VsZi5jbGlja2VkSWQgPSBzZWxmLnN0YW5kYXJkQ29udGV4dWFsUGVyaW9kc1tfaTJdLmFiYnJldmlhdGlvbjtcblx0ICAgICAgICAgICAgICB0b29sYmFyLmRpc3Bvc2UoKTtcblx0ICAgICAgICAgICAgICBzZWxmLnRvb2xiYXJzLnBvcCgpO1xuXHQgICAgICAgICAgICAgIHNlbGYudG9vbGJhcnMucHVzaChzZWxmLmNyZWF0ZVRvb2xiYXIoKSk7XG5cdCAgICAgICAgICAgICAgc2VsZi5fcmVmLnJlQWxsb2NhdGUoc2VsZi5wYXJlbnRHcm91cCk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgdW5pZ3JvdXAuYWRkU3ltYm9sKGNvbnRleHR1YWxCdXR0b25zW19pMl0pO1xuXHQgICAgICAgIH07XG5cdFxuXHQgICAgICAgIGZvciAodmFyIF9pMiA9IDA7IF9pMiA8IHRoaXMuc3RhbmRhcmRDb250ZXh1YWxQZXJpb2RzLmxlbmd0aDsgX2kyKyspIHtcblx0ICAgICAgICAgIF9sb29wMihfaTIpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgLy8gYnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnQlVUVE9OJyk7XG5cdCAgICAgICAgLy8gYnRuLmlkID0gc3RhbmRhcmRQZXJpb2RzW2ldLmFiYnJldmlhdGlvbjtcblx0ICAgICAgICAvLyBidG4uaW5uZXJIVE1MID0gc3RhbmRhcmRQZXJpb2RzW2ldLmFiYnJldmlhdGlvbjtcblx0ICAgICAgICAvLyBidG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBldmVudEJ0bi5iaW5kKHRoaXMsIHN0YW5kYXJkUGVyaW9kc1tpXSkpO1xuXHQgICAgICAgIC8vIGNvbnRleHR1YWxCdXR0b25zLmFwcGVuZENoaWxkKGJ0bik7XG5cdFxuXHQgICAgICAgIHRoaXMuU3ltYm9sU3RvcmUucmVnaXN0ZXIoJ3RleHRCb3hJY29uJywgZnVuY3Rpb24gKHgsIHksIHJhZCwgdywgaCwgcGFkWCwgcGFkWSkge1xuXHQgICAgICAgICAgdmFyIHgxID0geCAtIHcgLyAyICsgcGFkWCAvIDIsXG5cdCAgICAgICAgICAgICAgeDIgPSB4ICsgdyAvIDIgLSBwYWRYIC8gMixcblx0ICAgICAgICAgICAgICB5MSA9IHkgLSBoIC8gMiArIHBhZFkgLyAyLFxuXHQgICAgICAgICAgICAgIHkyID0geSArIGggLyAyIC0gcGFkWSAvIDI7XG5cdFxuXHQgICAgICAgICAgcmV0dXJuIFsnTScsIHgxLCB5MSwgJ0wnLCB4MiwgeTEsICdMJywgeDIsIHkyLCAnTCcsIHgxLCB5MiwgJ1onXTtcblx0ICAgICAgICB9KTtcblx0XG5cdCAgICAgICAgdG9vbGJhci5hZGRDb21wb25lbnQoZ3JvdXApO1xuXHQgICAgICAgIHRvb2xiYXIuYWRkQ29tcG9uZW50KHVuaWdyb3VwKTtcblx0ICAgICAgICByZXR1cm4gdG9vbGJhcjtcblx0ICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICBrZXk6ICdnZXRMb2dpY2FsU3BhY2UnLFxuXHQgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0TG9naWNhbFNwYWNlKGF2YWlsYWJsZVdpZHRoLCBhdmFpbGFibGVIZWlnaHQpIHtcblx0ICAgICAgICAvLyBhdmFpbGFibGVXaWR0aCAvPSAyO1xuXHQgICAgICAgIHZhciBsb2dpY2FsU3BhY2UsXG5cdCAgICAgICAgICAgIHdpZHRoID0gMCxcblx0ICAgICAgICAgICAgaGVpZ2h0ID0gMCxcblx0ICAgICAgICAgICAgaSxcblx0ICAgICAgICAgICAgbG47XG5cdFxuXHQgICAgICAgIGZvciAoaSA9IDAsIGxuID0gdGhpcy50b29sYmFycy5sZW5ndGg7IGkgPCBsbjsgaSsrKSB7XG5cdCAgICAgICAgICBsb2dpY2FsU3BhY2UgPSB0aGlzLnRvb2xiYXJzW2ldLmdldExvZ2ljYWxTcGFjZShhdmFpbGFibGVXaWR0aCwgYXZhaWxhYmxlSGVpZ2h0KTtcblx0ICAgICAgICAgIHdpZHRoID0gTWF0aC5tYXgobG9naWNhbFNwYWNlLndpZHRoLCB3aWR0aCk7XG5cdCAgICAgICAgICBoZWlnaHQgKz0gbG9naWNhbFNwYWNlLmhlaWdodDtcblx0ICAgICAgICAgIHRoaXMudG9vbGJhcnNbaV0ud2lkdGggPSBsb2dpY2FsU3BhY2Uud2lkdGg7XG5cdCAgICAgICAgICB0aGlzLnRvb2xiYXJzW2ldLmhlaWdodCA9IGxvZ2ljYWxTcGFjZS5oZWlnaHQ7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGhlaWdodCArPSB0aGlzLnBhZGRpbmc7XG5cdCAgICAgICAgcmV0dXJuIHtcblx0ICAgICAgICAgIHdpZHRoOiB3aWR0aCxcblx0ICAgICAgICAgIGhlaWdodDogaGVpZ2h0XG5cdCAgICAgICAgfTtcblx0ICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICBrZXk6ICdnZXREZWZhdWx0R3JvdXAnLFxuXHQgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0RGVmYXVsdEdyb3VwKCkge1xuXHQgICAgICAgIHJldHVybiB0aGlzLnBhcmVudEdyb3VwO1xuXHQgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgIGtleTogJ3BsYWNlSW5DYW52YXMnLFxuXHQgICAgICB2YWx1ZTogZnVuY3Rpb24gcGxhY2VJbkNhbnZhcygpIHtcblx0ICAgICAgICB2YXIgX3NlbGYgPSB0aGlzO1xuXHQgICAgICAgIF9zZWxmLnBhZGRpbmcgPSA1O1xuXHQgICAgICAgIF9zZWxmLnNwYWNlTWFuYWdlckluc3RhbmNlLmFkZChbe1xuXHQgICAgICAgICAgbmFtZTogZnVuY3Rpb24gbmFtZSgpIHtcblx0ICAgICAgICAgICAgcmV0dXJuICdzdGFuZGFyZC1wZXJpb2Qtc2VsZWN0b3ItZXh0Jztcblx0ICAgICAgICAgIH0sXG5cdCAgICAgICAgICByZWY6IGZ1bmN0aW9uIHJlZihvYmopIHtcblx0ICAgICAgICAgICAgcmV0dXJuIG9ialsnMCddO1xuXHQgICAgICAgICAgfSxcblx0ICAgICAgICAgIHNlbGY6IGZ1bmN0aW9uIHNlbGYoKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBfc2VsZjtcblx0ICAgICAgICAgIH0sXG5cdCAgICAgICAgICBwcmlvcml0eTogZnVuY3Rpb24gcHJpb3JpdHkoKSB7XG5cdCAgICAgICAgICAgIHJldHVybiAyO1xuXHQgICAgICAgICAgfSxcblx0ICAgICAgICAgIGxheW91dDogZnVuY3Rpb24gbGF5b3V0KG9iaikge1xuXHQgICAgICAgICAgICByZXR1cm4gb2JqLmlubGluZTtcblx0ICAgICAgICAgIH0sXG5cdCAgICAgICAgICBvcmllbnRhdGlvbjogW3tcblx0ICAgICAgICAgICAgdHlwZTogZnVuY3Rpb24gdHlwZShvYmopIHtcblx0ICAgICAgICAgICAgICByZXR1cm4gb2JqLmhvcml6b250YWw7XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIHBvc2l0aW9uOiBbe1xuXHQgICAgICAgICAgICAgIHR5cGU6IGZ1bmN0aW9uIHR5cGUob2JqKSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gb2JqLnRvcDtcblx0ICAgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICAgIGFsaWdubWVudDogW3tcblx0ICAgICAgICAgICAgICAgIHR5cGU6IGZ1bmN0aW9uIHR5cGUob2JqKSB7XG5cdCAgICAgICAgICAgICAgICAgIHJldHVybiBvYmoubGVmdDtcblx0ICAgICAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgICAgICBkaW1lbnNpb25zOiBbZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgICAgICB2YXIgcGFyZW50ID0gdGhpcy5nZXRQYXJlbnRDb21wb25lbnRHcm91cCgpO1xuXHQgICAgICAgICAgICAgICAgICBfc2VsZi5fcmVmID0gdGhpcztcblx0ICAgICAgICAgICAgICAgICAgcmV0dXJuIF9zZWxmLmdldExvZ2ljYWxTcGFjZShfc2VsZi5fcFdpZHRoID0gcGFyZW50LmdldFdpZHRoKCksIF9zZWxmLl9wSGVpZ2h0ID0gcGFyZW50LmdldEhlaWdodCgpKTtcblx0ICAgICAgICAgICAgICAgIH1dXG5cdCAgICAgICAgICAgICAgfV1cblx0ICAgICAgICAgICAgfV1cblx0ICAgICAgICAgIH1dXG5cdCAgICAgICAgfV0pO1xuXHQgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgIGtleTogJ3NldERyYXdpbmdDb25maWd1cmF0aW9uJyxcblx0ICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNldERyYXdpbmdDb25maWd1cmF0aW9uKHgsIHksIHdpZHRoLCBoZWlnaHQsIGdyb3VwKSB7XG5cdCAgICAgICAgdmFyIG1lcyA9IHRoaXMubWVhc3VyZW1lbnQ7XG5cdCAgICAgICAgbWVzLnggPSB4O1xuXHQgICAgICAgIG1lcy55ID0geTtcblx0ICAgICAgICBtZXMud2lkdGggPSB3aWR0aDtcblx0ICAgICAgICBtZXMuaGVpZ2h0ID0gaGVpZ2h0O1xuXHRcblx0ICAgICAgICB0aGlzLnBhcmVudEdyb3VwID0gZ3JvdXA7XG5cdFxuXHQgICAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgIGtleTogJ2RyYXcnLFxuXHQgICAgICB2YWx1ZTogZnVuY3Rpb24gZHJhdyh4LCB5LCB3aWR0aCwgaGVpZ2h0LCBncm91cCkge1xuXHQgICAgICAgIHZhciBtZWFzdXJlbWVudCA9IHRoaXMubWVhc3VyZW1lbnQsXG5cdCAgICAgICAgICAgIHRvb2xiYXJzID0gdGhpcy50b29sYmFycyxcblx0ICAgICAgICAgICAgbG4sXG5cdCAgICAgICAgICAgIGksXG5cdCAgICAgICAgICAgIHRvb2xiYXIsXG5cdCAgICAgICAgICAgIGJvdW5kRWxlbWVudCxcblx0ICAgICAgICAgICAgYkJveCxcblx0ICAgICAgICAgICAgeDEsXG5cdCAgICAgICAgICAgIHgyLFxuXHQgICAgICAgICAgICB5Mixcblx0ICAgICAgICAgICAgc2VsZWN0TGluZTtcblx0XG5cdCAgICAgICAgc2VsZWN0TGluZSA9IHRoaXMuc2F2ZVNlbGVjdExpbmUgfHwgdGhpcy5ncmFwaGljcy5wYXBlci5wYXRoKHtcblx0ICAgICAgICAgICdzdHJva2UnOiAnI2ZmMDAwMCdcblx0ICAgICAgICB9KS50b0Zyb250KCk7XG5cdCAgICAgICAgeCA9IHggPT09IHVuZGVmaW5lZCA/IG1lYXN1cmVtZW50LnggOiB4O1xuXHQgICAgICAgIHkgPSB5ID09PSB1bmRlZmluZWQgPyBtZWFzdXJlbWVudC55IDogeTtcblx0ICAgICAgICB3aWR0aCA9IHdpZHRoID09PSB1bmRlZmluZWQgPyBtZWFzdXJlbWVudC53aWR0aCA6IHdpZHRoO1xuXHQgICAgICAgIGhlaWdodCA9IGhlaWdodCA9PT0gdW5kZWZpbmVkID8gbWVhc3VyZW1lbnQuaGVpZ2h0IDogaGVpZ2h0O1xuXHQgICAgICAgIGdyb3VwID0gZ3JvdXAgPT09IHVuZGVmaW5lZCA/IHRoaXMucGFyZW50R3JvdXAgOiBncm91cDtcblx0ICAgICAgICBpZiAod2lkdGggJiYgaGVpZ2h0KSB7XG5cdCAgICAgICAgICBmb3IgKGkgPSAwLCBsbiA9IHRvb2xiYXJzLmxlbmd0aDsgaSA8IGxuOyBpKyspIHtcblx0ICAgICAgICAgICAgdG9vbGJhciA9IHRvb2xiYXJzW2ldO1xuXHQgICAgICAgICAgICB0b29sYmFyLmRyYXcoeCwgeSwgZ3JvdXApO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLnNhdmVTZWxlY3RMaW5lID0gc2VsZWN0TGluZTtcblx0XG5cdCAgICAgICAgZm9yICh2YXIgX2kzID0gMCwgaWkgPSB0b29sYmFyc1swXS5jb21wb25lbnRHcm91cHNbMV0uc3ltYm9sTGlzdDsgX2kzIDwgaWkubGVuZ3RoOyBfaTMrKykge1xuXHQgICAgICAgICAgaWYgKGlpW19pM10uc3ltYm9sID09PSB0aGlzLmNsaWNrZWRJZCkge1xuXHQgICAgICAgICAgICBib3VuZEVsZW1lbnQgPSBpaVtfaTNdLmdldEJvdW5kRWxlbWVudCgpO1xuXHQgICAgICAgICAgICBiQm94ID0gYm91bmRFbGVtZW50LmdldEJCb3goKTtcblx0ICAgICAgICAgICAgeDEgPSBiQm94Lng7XG5cdCAgICAgICAgICAgIHgyID0gYkJveC54Mjtcblx0ICAgICAgICAgICAgeTIgPSBiQm94LnkyO1xuXHRcblx0ICAgICAgICAgICAgc2VsZWN0TGluZS5hdHRyKHtcblx0ICAgICAgICAgICAgICBwYXRoOiBbJ00nLCB4MSwgeTIgLSAyIC8gMiwgJ0wnLCB4MiwgeTIgLSAyIC8gMl1cblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XSk7XG5cdFxuXHQgICAgcmV0dXJuIFN0YW5kYXJkUGVyaW9kU2VsZWN0b3I7XG5cdCAgfSgpO1xuXHRcblx0ICByZXR1cm4gU3RhbmRhcmRQZXJpb2RTZWxlY3Rvcjtcblx0fTtcblxuLyoqKi8gfVxuLyoqKioqKi8gXSk7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHN0YW5kYXJkLXBlcmlvZC1zZWxlY3Rvci1lczUubWluLmpzIiwiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pXG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG5cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGV4cG9ydHM6IHt9LFxuIFx0XHRcdGlkOiBtb2R1bGVJZCxcbiBcdFx0XHRsb2FkZWQ6IGZhbHNlXG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjay9ib290c3RyYXAgMzMzNjI0ZjM1ODNhNzhmZDE2NDgiLCIndXNlIHN0cmljdCc7XG5jb25zdCBTdGFuZGFyZFBlcmlvZFNlbGVjdG9yID0gcmVxdWlyZSgnLi9zdGFuZGFyZC1wZXJpb2Qtc2VsZWN0b3InKTtcblxud2luZG93LnN0UFMgPSBuZXcgU3RhbmRhcmRQZXJpb2RTZWxlY3RvcigpO1xuXG47KGZ1bmN0aW9uIChlbnYsIGZhY3RvcnkpIHtcbiAgaWYgKHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnICYmIG1vZHVsZS5leHBvcnRzKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBlbnYuZG9jdW1lbnRcbiAgICAgICA/IGZhY3RvcnkoZW52KSA6IGZ1bmN0aW9uICh3aW4pIHtcbiAgICAgICAgIGlmICghd2luLmRvY3VtZW50KSB7XG4gICAgICAgICAgIHRocm93IG5ldyBFcnJvcignV2luZG93IHdpdGggZG9jdW1lbnQgbm90IHByZXNlbnQnKTtcbiAgICAgICAgIH1cbiAgICAgICAgIHJldHVybiBmYWN0b3J5KHdpbiwgdHJ1ZSk7XG4gICAgICAgfTtcbiAgfSBlbHNlIHtcbiAgICBlbnYuU3RhbmRhcmRQZXJpb2RTZWxlY3RvciA9IGZhY3RvcnkoZW52LCB0cnVlKTtcbiAgfVxufSkodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cgOiB0aGlzLCBmdW5jdGlvbiAoX3dpbmRvdywgd2luZG93RXhpc3RzKSB7XG4gIHZhciBGQyA9IF93aW5kb3cuRnVzaW9uQ2hhcnRzO1xuICBGQy5yZWdpc3RlcignZXh0ZW5zaW9uJywgWydwcml2YXRlJywgJ1N0YW5kYXJkUGVyaW9kU2VsZWN0b3InLCBmdW5jdGlvbiAoKSB7XG4gICAgRkMucmVnaXN0ZXJDb21wb25lbnQoJ2V4dGVuc2lvbnMnLCAnU3RhbmRhcmRQZXJpb2RTZWxlY3RvcicsIFN0YW5kYXJkUGVyaW9kU2VsZWN0b3Ioe0Z1c2lvbkNoYXJ0czogRkN9KSk7XG4gIH1dKTtcbn0pO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2luZGV4LmpzIiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihtb2R1bGUpIHtcblx0aWYoIW1vZHVsZS53ZWJwYWNrUG9seWZpbGwpIHtcblx0XHRtb2R1bGUuZGVwcmVjYXRlID0gZnVuY3Rpb24oKSB7fTtcblx0XHRtb2R1bGUucGF0aHMgPSBbXTtcblx0XHQvLyBtb2R1bGUucGFyZW50ID0gdW5kZWZpbmVkIGJ5IGRlZmF1bHRcblx0XHRtb2R1bGUuY2hpbGRyZW4gPSBbXTtcblx0XHRtb2R1bGUud2VicGFja1BvbHlmaWxsID0gMTtcblx0fVxuXHRyZXR1cm4gbW9kdWxlO1xufVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gKHdlYnBhY2spL2J1aWxkaW4vbW9kdWxlLmpzXG4vLyBtb2R1bGUgaWQgPSAxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBDbGFzcyBkZWZpbml0aW9uIG9mIFN0YW5kYXJkUGVyaW9kU2VsZWN0b3JcbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChkZXApIHtcbiAgY2xhc3MgU3RhbmRhcmRQZXJpb2RTZWxlY3RvciB7XG4gICAgY29uc3RydWN0b3IgKCkge1xuICAgICAgLyoqXG4gICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICovXG4gICAgICB0aGlzLnJhdGlvID0gODtcbiAgICAgIHRoaXMudG9vbGJveCA9IEZ1c2lvbkNoYXJ0cy5nZXRDb21wb25lbnQoJ2FwaScsICd0b29sYm94Jyk7XG4gICAgICB0aGlzLkhvcml6b250YWxUb29sYmFyID0gdGhpcy50b29sYm94Lkhvcml6b250YWxUb29sYmFyO1xuICAgICAgdGhpcy5Db21wb25lbnRHcm91cCA9IHRoaXMudG9vbGJveC5Db21wb25lbnRHcm91cDtcbiAgICAgIHRoaXMuU3ltYm9sU3RvcmUgPSB0aGlzLnRvb2xib3guU3ltYm9sU3RvcmU7XG4gICAgICB0aGlzLmFsbCA9IDE7XG4gICAgICB0aGlzLmNhbGN1bGF0ZWRQZXJpb2RzID0gW107XG4gICAgICB0aGlzLnN0YXJ0RGF0YXNldCA9IDA7XG4gICAgICAvLyB0aGlzLmVuZERhdGFzZXQgPSB0aGlzLmdsb2JhbFJlYWN0aXZlTW9kZWwubW9kZWxbJ3gtYXhpcy1hYnNvbHV0ZS1yYW5nZS1lbmQnXTtcbiAgICAgIHRoaXMuc3RhcnRBY3RpdmVXaW5kb3cgPSAwO1xuICAgICAgdGhpcy5lbmRBY3RpdmVXaW5kb3cgPSAxO1xuICAgICAgdGhpcy5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzID0gW107XG4gICAgICB0aGlzLnN0YW5kYXJkQ29udGV4dWFsUGVyaW9kcyA9IFtdO1xuICAgICAgdGhpcy5zdGFydFBvaW50VW5pdCA9IDA7XG4gICAgICB0aGlzLnN0YXJ0UG9pbnRNdWx0aXBsaWVyID0gMDtcbiAgICAgIHRoaXMuY2xpY2tlZElkO1xuICAgICAgdGhpcy5ub0NhbGNCdXR0b25zID0gMDtcbiAgICAgIHRoaXMudGltZVBlcmlvZHMgPSBbe1xuICAgICAgICAnbmFtZSc6ICdzZWNvbmQnLFxuICAgICAgICAnbWlsbGlzZWNvbmRzJzogMTAwMCxcbiAgICAgICAgJ3N0YXJ0aW5nUG9pbnQnOiAwLFxuICAgICAgICAndG90YWwnOiA2MCxcbiAgICAgICAgJ2FiYnJldmlhdGlvbic6ICdzZWMnLFxuICAgICAgICAnZGVzY3JpcHRpb24nOiAnU0VDT05EJyxcbiAgICAgICAgJ3BhcmVudCc6ICdtaW51dGUnLFxuICAgICAgICAnbXVsdGlwbGllcnMnOiBbMSwgNSwgMTUsIDMwXVxuICAgICAgfSwge1xuICAgICAgICAnbmFtZSc6ICdtaW51dGUnLFxuICAgICAgICAnbWlsbGlzZWNvbmRzJzogNjAwMDAsXG4gICAgICAgICdzdGFydGluZ1BvaW50JzogMCxcbiAgICAgICAgJ3RvdGFsJzogNjAsXG4gICAgICAgICdhYmJyZXZpYXRpb24nOiAnbWluJyxcbiAgICAgICAgJ2Rlc2NyaXB0aW9uJzogJ01JTlVURScsXG4gICAgICAgICdwYXJlbnQnOiAnaG91cicsXG4gICAgICAgICdtdWx0aXBsaWVycyc6IFsxLCA1LCAxNSwgMzBdXG4gICAgICB9LCB7XG4gICAgICAgICduYW1lJzogJ2hvdXInLFxuICAgICAgICAnbWlsbGlzZWNvbmRzJzogMzYwMDAwMCxcbiAgICAgICAgJ3N0YXJ0aW5nUG9pbnQnOiAwLFxuICAgICAgICAndG90YWwnOiAyNCxcbiAgICAgICAgJ2FiYnJldmlhdGlvbic6ICdocicsXG4gICAgICAgICdkZXNjcmlwdGlvbic6ICdIT1VSJyxcbiAgICAgICAgJ3BhcmVudCc6ICdkYXknLFxuICAgICAgICAnbXVsdGlwbGllcnMnOiBbMSwgMywgNiwgMTJdXG4gICAgICB9LCB7XG4gICAgICAgICduYW1lJzogJ2RheScsXG4gICAgICAgICdtaWxsaXNlY29uZHMnOiA4NjQwMDAwMCxcbiAgICAgICAgJ3N0YXJ0aW5nUG9pbnQnOiAwLFxuICAgICAgICAndG90YWwnOiAzMCxcbiAgICAgICAgJ2FiYnJldmlhdGlvbic6ICdEJyxcbiAgICAgICAgJ2Rlc2NyaXB0aW9uJzogJ0RBWScsXG4gICAgICAgICdwYXJlbnQnOiAnbW9udGgnLFxuICAgICAgICAnbXVsdGlwbGllcnMnOiBbMSwgNywgMTVdXG4gICAgICB9LCB7XG4gICAgICAgICduYW1lJzogJ21vbnRoJyxcbiAgICAgICAgJ21pbGxpc2Vjb25kcyc6IDI1OTIwMDAwMDAsXG4gICAgICAgICdzdGFydGluZ1BvaW50JzogMCxcbiAgICAgICAgJ3RvdGFsJzogMTIsXG4gICAgICAgICdhYmJyZXZpYXRpb24nOiAnTScsXG4gICAgICAgICdkZXNjcmlwdGlvbic6ICdNT05USCcsXG4gICAgICAgICdwYXJlbnQnOiAneWVhcicsXG4gICAgICAgICdtdWx0aXBsaWVycyc6IFsxLCAzLCA2XVxuICAgICAgfSwge1xuICAgICAgICAnbmFtZSc6ICd5ZWFyJyxcbiAgICAgICAgJ21pbGxpc2Vjb25kcyc6IDMxMTA0MDAwMDAwLFxuICAgICAgICAnc3RhcnRpbmdQb2ludCc6IDAsXG4gICAgICAgICdhYmJyZXZpYXRpb24nOiAnWScsXG4gICAgICAgICdkZXNjcmlwdGlvbic6ICdZRUFSJyxcbiAgICAgICAgJ211bHRpcGxpZXJzJzogWzEsIDMsIDVdXG4gICAgICB9XTtcbiAgICAgIHRoaXMudGRCdXR0b25zID0gW1xuICAgICAgICB7XG4gICAgICAgICAgJ25hbWUnOiAnWVREJyxcbiAgICAgICAgICAnYWJicmV2aWF0aW9uJzogJ1lURCcsXG4gICAgICAgICAgJ3BhcmVudCc6ICd5ZWFyJyxcbiAgICAgICAgICAnbWlsbGlzZWNvbmRzJzogMzExMDQwMDAwMDAsXG4gICAgICAgICAgJ2Rlc2NyaXB0aW9uJzogJ1llYXIgdG8gRGF0ZSdcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICduYW1lJzogJ1FURCcsXG4gICAgICAgICAgJ2FiYnJldmlhdGlvbic6ICdRVEQnLFxuICAgICAgICAgICdwYXJlbnQnOiAnbW9udGgnLFxuICAgICAgICAgICdtdWx0aXBsaWVyJzogMyxcbiAgICAgICAgICAnbWlsbGlzZWNvbmRzJzogNzc3NjAwMDAwMCxcbiAgICAgICAgICAnZGVzY3JpcHRpb24nOiAnUXVhcnRlciB0byBEYXRlJ1xuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgJ25hbWUnOiAnTVREJyxcbiAgICAgICAgICAnYWJicmV2aWF0aW9uJzogJ01URCcsXG4gICAgICAgICAgJ3BhcmVudCc6ICdtb250aCcsXG4gICAgICAgICAgJ21pbGxpc2Vjb25kcyc6IDI1OTIwMDAwMDAsXG4gICAgICAgICAgJ2Rlc2NyaXB0aW9uJzogJ01vbnRoIHRvIERhdGUnXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAnbmFtZSc6ICdXVEQnLFxuICAgICAgICAgICdhYmJyZXZpYXRpb24nOiAnV1REJyxcbiAgICAgICAgICAncGFyZW50JzogJ2RheScsXG4gICAgICAgICAgJ211bHRpcGxpZXInOiA3LFxuICAgICAgICAgICdtaWxsaXNlY29uZHMnOiA2MDQ4MDAwMDAsXG4gICAgICAgICAgJ2Rlc2NyaXB0aW9uJzogJ1dlZWsgdG8gRGF0ZSdcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICduYW1lJzogJ1knLFxuICAgICAgICAgICdhYmJyZXZpYXRpb24nOiAnWScsXG4gICAgICAgICAgJ3BhcmVudCc6ICdkYXknLFxuICAgICAgICAgICdtaWxsaXNlY29uZHMnOiA4NjQwMDAwMCxcbiAgICAgICAgICAnZGVzY3JpcHRpb24nOiAnWWVzdGVyZGF5J1xuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgJ25hbWUnOiAnVCcsXG4gICAgICAgICAgJ2FiYnJldmlhdGlvbic6ICdUJyxcbiAgICAgICAgICAncGFyZW50JzogJ2RheScsXG4gICAgICAgICAgJ21pbGxpc2Vjb25kcyc6IDg2NDAwMDAwLFxuICAgICAgICAgICdkZXNjcmlwdGlvbic6ICdUb2RheSdcbiAgICAgICAgfVxuICAgICAgXTtcbiAgICAgIHRoaXMuY29uZmlnID0ge1xuICAgICAgICBhbmNob3JQb3NpdGlvbnM6ICdyaWdodCcsXG4gICAgICAgIGFsbDogJzEnLFxuICAgICAgICBjb250ZXh0dWFsOiAnMScsXG4gICAgICAgIGNhbGN1bGF0ZWQ6ICcxJyxcbiAgICAgICAgdGVydGlhcnlUaW1lUGVyaW9kczoge31cbiAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQSBmdW5jdGlvbiB0byBnZW5lcmF0ZSB0aGUgY2FsY3VsYXRlZCBidXR0b25zIHVzaW5nXG4gICAgICogdGhlIGFjdGl2ZSByYW5nZSBhbmQgdGhlIGxvY2F0aW9uIG9mIHRoZSBhY3RpdmUgcmFuZ2VcbiAgICAgKi9cbiAgICBnZW5lcmF0ZUNhbGN1bGF0ZWRCdXR0b25zICgpIHtcbiAgICAgIHZhciB0YXJnZXRCbG9jayA9IHRoaXMuZW5kQWN0aXZlV2luZG93IC0gdGhpcy5zdGFydERhdGFzZXQsXG4gICAgICAgIGkgPSAwLFxuICAgICAgICBqID0gMCxcbiAgICAgICAgYWN0aXZlV2luZG93ID0gdGhpcy5lbmRBY3RpdmVXaW5kb3cgLSB0aGlzLnN0YXJ0QWN0aXZlV2luZG93LFxuICAgICAgICBjb3VudCA9IDA7XG4gICAgICB0aGlzLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHMgPSBbXTtcbiAgICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLnRpbWVQZXJpb2RzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIC8vIGNoZWNraW5nIHdoZXRoZXIgdGhlIHVuaXQgaXMgYXBwbGljYWJsZSBmb3IgdGhlIGN1cnJlbnQgdGFyZ2V0IGJsb2NrXG4gICAgICAgIGlmICh0YXJnZXRCbG9jayAvIHRoaXMudGltZVBlcmlvZHNbaV0ubWlsbGlzZWNvbmRzID49IDEpIHtcbiAgICAgICAgICAvLyBjaGVja2luZyB3aGV0aGVyIHRoZSB1bml0IGlzIG9mIHRoZSBoaWdoZXIgb3JkZXIgYW5kIG9ubHkgbXVsdGlwbGllciAxIGlzIGFwcGxpY2FibGVcbiAgICAgICAgICBpZiAoTWF0aC5mbG9vcigoYWN0aXZlV2luZG93KSAvIHRoaXMudGltZVBlcmlvZHNbaV0ubWlsbGlzZWNvbmRzKSA8IDEpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kcy5wdXNoKHtcbiAgICAgICAgICAgICAgJ2FiYnJldmlhdGlvbic6IHRoaXMudGltZVBlcmlvZHNbaV0uYWJicmV2aWF0aW9uLFxuICAgICAgICAgICAgICAnZGVzY3JpcHRpb24nOiB0aGlzLnRpbWVQZXJpb2RzW2ldLmRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgICAnbWlsbGlzZWNvbmRzJzogdGhpcy50aW1lUGVyaW9kc1tpXS5taWxsaXNlY29uZHMsXG4gICAgICAgICAgICAgICdtdWx0aXBsaWVycyc6IFsxXVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIHsgLy8gaWYgdGhlIHVuaXQgaXMgb2YgdGhlIG9yZGVyIG9mIHRoZSB0YXJnZXQgYmxvY2sgYW5kIGNhbGN1bGF0aW5nIHRoZSBtdWx0aXBsaWVyc1xuICAgICAgICAgICAgdGhpcy5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzLnB1c2goe1xuICAgICAgICAgICAgICAnYWJicmV2aWF0aW9uJzogdGhpcy50aW1lUGVyaW9kc1tpXS5hYmJyZXZpYXRpb24sXG4gICAgICAgICAgICAgICdkZXNjcmlwdGlvbic6IHRoaXMudGltZVBlcmlvZHNbaV0uZGVzY3JpcHRpb24sXG4gICAgICAgICAgICAgICdtaWxsaXNlY29uZHMnOiB0aGlzLnRpbWVQZXJpb2RzW2ldLm1pbGxpc2Vjb25kcyxcbiAgICAgICAgICAgICAgJ211bHRpcGxpZXJzJzogW11cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gY2FsY3VsYXRpbmcgYW5kIHBvcHVsYXRpbmcgdGhlIGFwcGxpY2FibGUgbXVsdHBsaWVycyBvZiBlYWNoIHVuaXRcbiAgICAgICAgICAgIGZvciAoaiA9IDA7IGogPCB0aGlzLnRpbWVQZXJpb2RzW2ldLm11bHRpcGxpZXJzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgIGlmIChhY3RpdmVXaW5kb3cgLyB0aGlzLnJhdGlvIDwgdGhpcy50aW1lUGVyaW9kc1tpXS5tdWx0aXBsaWVyc1tqXSAqIHRoaXMudGltZVBlcmlvZHNbaV0ubWlsbGlzZWNvbmRzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW3RoaXMuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kcy5sZW5ndGggLSAxXS5tdWx0aXBsaWVycy5wdXNoKFxuICAgICAgICAgICAgICAgICAgdGhpcy50aW1lUGVyaW9kc1tpXS5tdWx0aXBsaWVyc1tqXVxuICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy5ub0NhbGNCdXR0b25zID0gSW5maW5pdHk7XG4gICAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGZvciAoaiA9IDA7IGogPCB0aGlzLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHNbaV0ubXVsdGlwbGllcnMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICArK2NvdW50O1xuICAgICAgICAgIGlmICh0aGlzLm5vQ2FsY0J1dHRvbnMgPiBpKSB7XG4gICAgICAgICAgICB0aGlzLm5vQ2FsY0J1dHRvbnMgPSBpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoY291bnQgPD0gNCkge1xuICAgICAgICAgICAgdGhpcy5zdGFydFBvaW50TXVsdGlwbGllciA9IGo7XG4gICAgICAgICAgICB0aGlzLnN0YXJ0UG9pbnRVbml0ID0gaTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gdGhpcy5kcmF3QnV0dG9uc0NhbGN1bGF0ZWQodGhpcy5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBIGZ1bmN0aW9uIHRvIGdlbmVyYXRlIHRoZSBjb250ZXh0dWFsIGJ1dHRvbnMgdXNpbmdcbiAgICAgKiB0aGUgZW5kIHBvaW50IG9mIHRoZSB0aW1lLXNjYWxlXG4gICAgICovXG4gICAgZ2VuZXJhdGVDb250ZXh0dWFsQnV0dG9ucyAoKSB7XG4gICAgICAvLyBnZW5lcmF0aW5nIGFuIGFycmF5IHdpdGggYXBwbGljYWJsZSBURCBidXR0b25zXG4gICAgICB2YXIgYnV0dG9ucyA9IFtdLFxuICAgICAgICBpID0gMCxcbiAgICAgICAgZW5kU3RhbXAgPSB0aGlzLmdsb2JhbFJlYWN0aXZlTW9kZWwubW9kZWxbJ3gtYXhpcy1hYnNvbHV0ZS1yYW5nZS1lbmQnXSxcbiAgICAgICAgZGF0ZVN0YXJ0ID0gZW5kU3RhbXAgLSAyLFxuICAgICAgICBkYXRlRW5kID0gZW5kU3RhbXAsXG4gICAgICAgIHJlbGF0aXZlVERCdXR0b24gPSB7fTtcbiAgICAgIGZvciAoOyBpIDwgdGhpcy50ZEJ1dHRvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZGF0ZVN0YXJ0ID0gbmV3IERhdGUoZW5kU3RhbXApO1xuICAgICAgICBpZiAodGhpcy50ZEJ1dHRvbnNbaV0ubmFtZSA9PT0gJ1lURCcpIHtcbiAgICAgICAgICBkYXRlU3RhcnQuc2V0TW9udGgoMCk7XG4gICAgICAgICAgZGF0ZVN0YXJ0LnNldERhdGUoMSk7XG4gICAgICAgICAgZGF0ZVN0YXJ0LnNldEhvdXJzKDApO1xuICAgICAgICAgIGRhdGVTdGFydC5zZXRNaW51dGVzKDApO1xuICAgICAgICAgIGRhdGVTdGFydC5zZXRTZWNvbmRzKDApO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMudGRCdXR0b25zW2ldLm5hbWUgPT09ICdNVEQnKSB7XG4gICAgICAgICAgZGF0ZVN0YXJ0LnNldERhdGUoMSk7XG4gICAgICAgICAgZGF0ZVN0YXJ0LnNldEhvdXJzKDApO1xuICAgICAgICAgIGRhdGVTdGFydC5zZXRNaW51dGVzKDApO1xuICAgICAgICAgIGRhdGVTdGFydC5zZXRTZWNvbmRzKDApO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMudGRCdXR0b25zW2ldLm5hbWUgPT09ICdRVEQnKSB7XG4gICAgICAgICAgZGF0ZVN0YXJ0LnNldE1vbnRoKDExIC0gKGRhdGVTdGFydC5nZXRNb250aCgpICUgNCkpO1xuICAgICAgICAgIGRhdGVTdGFydC5zZXREYXRlKDApO1xuICAgICAgICAgIGRhdGVTdGFydC5zZXRIb3VycygwKTtcbiAgICAgICAgICBkYXRlU3RhcnQuc2V0TWludXRlcygwKTtcbiAgICAgICAgICBkYXRlU3RhcnQuc2V0U2Vjb25kcygwKTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnRkQnV0dG9uc1tpXS5uYW1lID09PSAnV1REJykge1xuICAgICAgICAgIGRhdGVTdGFydC5zZXREYXRlKGRhdGVTdGFydC5nZXREYXRlKCkgLSBkYXRlU3RhcnQuZ2V0RGF5KCkpO1xuICAgICAgICAgIGRhdGVTdGFydC5zZXRIb3VycygwKTtcbiAgICAgICAgICBkYXRlU3RhcnQuc2V0TWludXRlcygwKTtcbiAgICAgICAgICBkYXRlU3RhcnQuc2V0U2Vjb25kcygwKTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnRkQnV0dG9uc1tpXS5uYW1lID09PSAnWScpIHtcbiAgICAgICAgICBkYXRlU3RhcnQuc2V0SG91cnMoMCk7XG4gICAgICAgICAgZGF0ZVN0YXJ0LnNldE1pbnV0ZXMoMCk7XG4gICAgICAgICAgZGF0ZVN0YXJ0LnNldFNlY29uZHMoMCk7XG4gICAgICAgICAgZGF0ZVN0YXJ0IC09IDg2NDAwMDAwO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMudGRCdXR0b25zW2ldLm5hbWUgPT09ICdUJykge1xuICAgICAgICAgIGRhdGVTdGFydC5zZXRIb3VycygwKTtcbiAgICAgICAgICBkYXRlU3RhcnQuc2V0TWludXRlcygwKTtcbiAgICAgICAgICBkYXRlU3RhcnQuc2V0U2Vjb25kcygwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChkYXRlRW5kIDwgZGF0ZVN0YXJ0KSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy50ZEJ1dHRvbnNbaV0uZGF0ZVN0YXJ0ID0gZGF0ZVN0YXJ0LnZhbHVlT2YoKTtcbiAgICAgICAgICB0aGlzLnRkQnV0dG9uc1tpXS5kYXRlRW5kID0gZGF0ZUVuZC52YWx1ZU9mKCk7XG4gICAgICAgICAgYnV0dG9ucy5wdXNoKHRoaXMudGRCdXR0b25zW2ldKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmVsYXRpdmVUREJ1dHRvbi5taWxsaXNlY29uZHMgPSBJbmZpbml0eTtcbiAgICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLnRkQnV0dG9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoTWF0aC5hYnModGhpcy50ZEJ1dHRvbnNbaV0ubWlsbGlzZWNvbmRzIC0gKHRoaXMuZW5kQWN0aXZlV2luZG93IC0gdGhpcy5zdGFydEFjdGl2ZVdpbmRvdykpIDwgcmVsYXRpdmVUREJ1dHRvbi5taWxsaXNlY29uZHMpIHtcbiAgICAgICAgICByZWxhdGl2ZVREQnV0dG9uLm1pbGxpc2Vjb25kcyA9IHRoaXMudGRCdXR0b25zW2ldLm1pbGxpc2Vjb25kcztcbiAgICAgICAgICByZWxhdGl2ZVREQnV0dG9uLm5hbWUgPSB0aGlzLnRkQnV0dG9uc1tpXS5hYmJyZXZpYXRpb247XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdGhpcy5zdGFuZGFyZENvbnRleHVhbFBlcmlvZHMgPSBidXR0b25zO1xuICAgICAgLy8gdGhpcy5kcmF3QnV0dG9uc0NvbnRleHR1YWwodGhpcy5zdGFuZGFyZENvbnRleHVhbFBlcmlvZHMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEEgZnVuY3Rpb24gdG8gc2V0IHRoZSBhY3RpdmUgcGVyaW9kJ3NcbiAgICAgKiBzdGFydCBhbmQgZW5kIHBvaW50XG4gICAgICogQHBhcmFtICB7bnVtYmVyfSBkYXRlIHN0YW1wIC0gQSBVTklYIHRpbWVzdGFtcCB0byBiZSBzZXQgYXMgdGhlIHN0YXJ0IHBvaW50IG9mIGFjdGl2ZSBwZXJpb2RcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IGRhdGUgc3RhbXAgLSBBIFVOSVggdGltZXN0YW1wIHRvIGJlIHNldCBhcyB0aGUgZW5kIHBvaW50IG9mIGFjdGl2ZSBwZXJpb2RcbiAgICAgKi9cbiAgICBzZXRBY3RpdmVQZXJpb2QgKCkge1xuICAgICAgdmFyIHN0YXJ0LFxuICAgICAgICBlbmQ7XG4gICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBlbmQgPSB0aGlzLmdsb2JhbFJlYWN0aXZlTW9kZWwubW9kZWxbJ3gtYXhpcy12aXNpYmxlLXJhbmdlLWVuZCddO1xuICAgICAgICBzdGFydCA9IGVuZCAtIGFyZ3VtZW50c1swXTtcbiAgICAgIH0gZWxzZSBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMikge1xuICAgICAgICBzdGFydCA9IGFyZ3VtZW50c1swXTtcbiAgICAgICAgZW5kID0gYXJndW1lbnRzWzFdO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnN0YXJ0QWN0aXZlV2luZG93ID0gc3RhcnQ7XG4gICAgICB0aGlzLmVuZEFjdGl2ZVdpbmRvdyA9IGVuZDtcbiAgICAgIHRoaXMuZ2VuZXJhdGVDYWxjdWxhdGVkQnV0dG9ucygpO1xuICAgICAgdGhpcy5nbG9iYWxSZWFjdGl2ZU1vZGVsLm1vZGVsWyd4LWF4aXMtdmlzaWJsZS1yYW5nZS1zdGFydCddID0gdGhpcy5zdGFydEFjdGl2ZVdpbmRvdztcbiAgICAgIHRoaXMuZ2xvYmFsUmVhY3RpdmVNb2RlbC5tb2RlbFsneC1heGlzLXZpc2libGUtcmFuZ2UtZW5kJ10gPSB0aGlzLmVuZEFjdGl2ZVdpbmRvdztcbiAgICAgIHRoaXMuZ2VuZXJhdGVDb250ZXh0dWFsQnV0dG9ucygpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEEgZnVuY3Rpb24gdG8gc2V0IHRoZSBzdGFydCBhbmQgZW5kIHBvaW50IG9mIHRoZVxuICAgICAqIGVudGlyZSB0aW1lLWxpbmVcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IGRhdGUgc3RhbXAgLSBBIFVOSVggdGltZXN0YW1wIHRvIGJlIHNldCBhcyB0aGUgc3RhcnQgcG9pbnQgb2YgdGltZS1saW5lXG4gICAgICogQHBhcmFtICB7bnVtYmVyfSBkYXRlIHN0YW1wIC0gQSBVTklYIHRpbWVzdGFtcCB0byBiZSBzZXQgYXMgdGhlIGVuZCBwb2ludCBvZiB0aW1lLWxpbmVcbiAgICAgKi9cbiAgICBzZXRUaW1lbGluZSAoc3RhcnQsIGVuZCkge1xuICAgICAgdGhpcy5zdGFydERhdGFzZXQgPSBzdGFydDtcbiAgICAgIHRoaXMuZW5kRGF0YXNldCA9IGVuZDtcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdGFydEFjdGl2ZVJhbmdlJykuaW5uZXJIVE1MID0gbmV3IERhdGUodGhpcy5zdGFydERhdGFzZXQpO1xuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VuZEFjdGl2ZVJhbmdlJykuaW5uZXJIVE1MID0gbmV3IERhdGUodGhpcy5lbmREYXRhc2V0KTtcbiAgICAgIHRoaXMuZ2VuZXJhdGVDYWxjdWxhdGVkQnV0dG9ucygpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEEgZnVuY3Rpb24gdG8gc2V0IHRoZSBvYmplY3QgdG8gc2V0IHRoZSB1c2VyIHByZWZlcmVuY2VzXG4gICAgICovXG4gICAgY29uZmlndXJlIChjb25maWcpIHtcbiAgICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZ1c2lvbmNoYXJ0cyBsaWZlIGN5Y2xlIG1ldGhvZCBmb3IgZXh0ZW5zaW9uXG4gICAgICovXG4gICAgaW5pdCAocmVxdWlyZSkge1xuICAgICAgdmFyIGluc3RhbmNlID0gdGhpcztcbiAgICAgIHJlcXVpcmUoW1xuICAgICAgICAneEF4aXMnLFxuICAgICAgICAneUF4aXMnLFxuICAgICAgICAnZ3JhcGhpY3MnLFxuICAgICAgICAnY2hhcnQnLFxuICAgICAgICAnZGF0YXNldCcsXG4gICAgICAgICdQbG90TWFuYWdlcicsXG4gICAgICAgICdjYW52YXNDb25maWcnLFxuICAgICAgICAnTWFya2VyTWFuYWdlcicsXG4gICAgICAgICdyZWFjdGl2ZU1vZGVsJyxcbiAgICAgICAgJ2dsb2JhbFJlYWN0aXZlTW9kZWwnLFxuICAgICAgICAnc3BhY2VNYW5hZ2VySW5zdGFuY2UnLFxuICAgICAgICAnc21hcnRMYWJlbCcsXG4gICAgICAgIGZ1bmN0aW9uIChcbiAgICAgICAgICAgICAgeEF4aXMsXG4gICAgICAgICAgICAgIHlBeGlzLFxuICAgICAgICAgICAgICBncmFwaGljcyxcbiAgICAgICAgICAgICAgY2hhcnQsXG4gICAgICAgICAgICAgIGRhdGFzZXQsXG4gICAgICAgICAgICAgIHBsb3RNYW5hZ2VyLFxuICAgICAgICAgICAgICBjYW52YXNDb25maWcsXG4gICAgICAgICAgICAgIG1hcmtlck1hbmFnZXIsXG4gICAgICAgICAgICAgIHJlYWN0aXZlTW9kZWwsXG4gICAgICAgICAgICAgIGdsb2JhbFJlYWN0aXZlTW9kZWwsXG4gICAgICAgICAgICAgIHNwYWNlTWFuYWdlckluc3RhbmNlLFxuICAgICAgICAgICAgICBzbWFydExhYmVsKSB7XG4gICAgICAgICAgaW5zdGFuY2UueEF4aXMgPSB4QXhpcztcbiAgICAgICAgICBpbnN0YW5jZS55QXhpcyA9IHlBeGlzO1xuICAgICAgICAgIGluc3RhbmNlLmdyYXBoaWNzID0gZ3JhcGhpY3M7XG4gICAgICAgICAgaW5zdGFuY2UuY2hhcnQgPSBjaGFydDtcbiAgICAgICAgICBpbnN0YW5jZS5kYXRhc2V0ID0gZGF0YXNldDtcbiAgICAgICAgICBpbnN0YW5jZS5wbG90TWFuYWdlciA9IHBsb3RNYW5hZ2VyO1xuICAgICAgICAgIGluc3RhbmNlLm1hcmtlck1hbmFnZXIgPSBtYXJrZXJNYW5hZ2VyO1xuICAgICAgICAgIGluc3RhbmNlLmNhbnZhc0NvbmZpZyA9IGNhbnZhc0NvbmZpZztcbiAgICAgICAgICBpbnN0YW5jZS5yZWFjdGl2ZU1vZGVsID0gcmVhY3RpdmVNb2RlbDtcbiAgICAgICAgICBpbnN0YW5jZS5nbG9iYWxSZWFjdGl2ZU1vZGVsID0gZ2xvYmFsUmVhY3RpdmVNb2RlbDtcbiAgICAgICAgICBpbnN0YW5jZS5zcGFjZU1hbmFnZXJJbnN0YW5jZSA9IHNwYWNlTWFuYWdlckluc3RhbmNlO1xuICAgICAgICAgIGluc3RhbmNlLnNtYXJ0TGFiZWwgPSBzbWFydExhYmVsO1xuICAgICAgICB9XG4gICAgICBdKTtcbiAgICAgIHRoaXMuc3BhY2VNYW5hZ2VySW5zdGFuY2UgPSBpbnN0YW5jZS5zcGFjZU1hbmFnZXJJbnN0YW5jZTtcbiAgICAgIHRoaXMuZ2xvYmFsUmVhY3RpdmVNb2RlbCA9IGluc3RhbmNlLmdsb2JhbFJlYWN0aXZlTW9kZWw7XG4gICAgICB0aGlzLmVuZEFjdGl2ZVdpbmRvdyA9IGluc3RhbmNlLmdsb2JhbFJlYWN0aXZlTW9kZWwubW9kZWxbJ3gtYXhpcy12aXNpYmxlLXJhbmdlLWVuZCddO1xuICAgICAgdGhpcy5zdGFydEFjdGl2ZVdpbmRvdyA9IGluc3RhbmNlLmdsb2JhbFJlYWN0aXZlTW9kZWwubW9kZWxbJ3gtYXhpcy12aXNpYmxlLXJhbmdlLXN0YXJ0J107XG4gICAgICB0aGlzLnN0YXJ0RGF0YXNldCA9IGluc3RhbmNlLmdsb2JhbFJlYWN0aXZlTW9kZWwubW9kZWxbJ3gtYXhpcy1hYnNvbHV0ZS1yYW5nZS1zdGFydCddO1xuICAgICAgdGhpcy5lbmREYXRhc2V0ID0gaW5zdGFuY2UuZ2xvYmFsUmVhY3RpdmVNb2RlbC5tb2RlbFsneC1heGlzLWFic29sdXRlLXJhbmdlLWVuZCddO1xuICAgICAgdGhpcy5zZXRBY3RpdmVQZXJpb2QodGhpcy5zdGFydEFjdGl2ZVdpbmRvdywgdGhpcy5lbmRBY3RpdmVXaW5kb3cpO1xuICAgICAgLy8gaW5zdGFuY2UuZ2xvYmFsUmVhY3RpdmVNb2RlbC5tb2RlbFsnX3gtYXhpcy12aXNpYmxlLXJhbmdlLXN0YXJ0J10gKz0gMTI0NDE2MDAwMDAwO1xuICAgICAgdGhpcy5zZXRBY3RpdmVQZXJpb2QodGhpcy5zdGFydEFjdGl2ZVdpbmRvdywgdGhpcy5lbmRBY3RpdmVXaW5kb3cpO1xuXG4gICAgICB0aGlzLnRvb2xiYXJzID0gW107XG5cbiAgICAgIHRoaXMubWVhc3VyZW1lbnQgPSB7fTtcblxuICAgICAgdGhpcy50b29sYmFycy5wdXNoKHRoaXMuY3JlYXRlVG9vbGJhcigpKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBjcmVhdGVUb29sYmFyICgpIHtcbiAgICAgIHZhciB1bmlncm91cCxcbiAgICAgICAgdG9vbGJhcixcbiAgICAgICAgY2FsY3VsYXRlZEJ1dHRvbnMsXG4gICAgICAgIGNvbnRleHR1YWxCdXR0b25zLFxuICAgICAgICBhbGxCdXR0b24sXG4gICAgICAgIHNlbGYgPSB0aGlzLFxuICAgICAgICBlbmRBY3RpdmUgPSB0aGlzLmdsb2JhbFJlYWN0aXZlTW9kZWwubW9kZWxbJ3gtYXhpcy12aXNpYmxlLXJhbmdlLWVuZCddLFxuICAgICAgICBkZWR1Y3RvckFyID0gW10sXG4gICAgICAgIHN0YXJ0TXVsdGlwbGllcixcbiAgICAgICAgZGVkdWN0b3IsXG4gICAgICAgIGksXG4gICAgICAgIGosXG4gICAgICAgIG1hcmdpbixcbiAgICAgICAgZnJvbURhdGVMYWJlbCxcbiAgICAgICAgZ3JvdXA7XG5cbiAgICAgIGdyb3VwID0gbmV3IHRoaXMudG9vbGJveC5Db21wb25lbnRHcm91cCh7XG4gICAgICAgIHBhcGVyOiB0aGlzLmdyYXBoaWNzLnBhcGVyLFxuICAgICAgICBjaGFydDogdGhpcy5jaGFydCxcbiAgICAgICAgc21hcnRMYWJlbDogdGhpcy5zbWFydExhYmVsLFxuICAgICAgICBjaGFydENvbnRhaW5lcjogdGhpcy5ncmFwaGljcy5jb250YWluZXJcbiAgICAgIH0pO1xuXG4gICAgICB1bmlncm91cCA9IG5ldyB0aGlzLnRvb2xib3guVW5pU2VsZWN0Q29tcG9uZW50R3JvdXAoe1xuICAgICAgICBwYXBlcjogdGhpcy5ncmFwaGljcy5wYXBlcixcbiAgICAgICAgY2hhcnQ6IHRoaXMuY2hhcnQsXG4gICAgICAgIHNtYXJ0TGFiZWw6IHRoaXMuc21hcnRMYWJlbCxcbiAgICAgICAgY2hhcnRDb250YWluZXI6IHRoaXMuZ3JhcGhpY3MuY29udGFpbmVyXG4gICAgICB9KTtcbiAgICAgIHVuaWdyb3VwLnNldENvbmZpZyh7XG4gICAgICAgIGZpbGw6ICcjZmZmJyxcbiAgICAgICAgYm9yZGVyVGhpY2tuZXNzOiAwXG4gICAgICB9KTtcbiAgICAgIGdyb3VwLnNldENvbmZpZyh7XG4gICAgICAgIGZpbGw6ICcjZmZmJyxcbiAgICAgICAgYm9yZGVyVGhpY2tuZXNzOiAwXG4gICAgICB9KTtcbiAgICAgIHRvb2xiYXIgPSBuZXcgdGhpcy5Ib3Jpem9udGFsVG9vbGJhcih7XG4gICAgICAgIHBhcGVyOiB0aGlzLmdyYXBoaWNzLnBhcGVyLFxuICAgICAgICBjaGFydDogdGhpcy5jaGFydCxcbiAgICAgICAgc21hcnRMYWJlbDogdGhpcy5zbWFydExhYmVsLFxuICAgICAgICBjaGFydENvbnRhaW5lcjogdGhpcy5ncmFwaGljcy5jb250YWluZXJcbiAgICAgIH0pO1xuICAgICAgdG9vbGJhci5zZXRDb25maWcoe1xuICAgICAgICBmaWxsOiAnI2ZmZicsXG4gICAgICAgIGJvcmRlclRoaWNrbmVzczogMFxuICAgICAgfSk7XG4gICAgICBmcm9tRGF0ZUxhYmVsID0gbmV3IHRoaXMudG9vbGJveC5MYWJlbCgnWm9vbTonLCB7XG4gICAgICAgIHNtYXJ0TGFiZWw6IHRoaXMuc21hcnRMYWJlbCxcbiAgICAgICAgcGFwZXI6IHRoaXMuZ3JhcGhpY3MucGFwZXJcbiAgICAgIH0sIHtcbiAgICAgICAgdGV4dDoge1xuICAgICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgICAnZm9udC1zaXplJzogJzE1JyxcbiAgICAgICAgICAgICdmb250RmFtaWx5JzogJ015cmlhZFBybydcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgZ3JvdXAuYWRkU3ltYm9sKGZyb21EYXRlTGFiZWwpO1xuICAgICAgYWxsQnV0dG9uID0gbmV3IHRoaXMudG9vbGJveC5TeW1ib2woJ0FMTCcsIHRydWUsIHtcbiAgICAgICAgcGFwZXI6IHRoaXMuZ3JhcGhpY3MucGFwZXIsXG4gICAgICAgIGNoYXJ0OiB0aGlzLmNoYXJ0LFxuICAgICAgICBzbWFydExhYmVsOiB0aGlzLnNtYXJ0TGFiZWwsXG4gICAgICAgIGNoYXJ0Q29udGFpbmVyOiB0aGlzLmdyYXBoaWNzLmNvbnRhaW5lclxuICAgICAgfSwge1xuICAgICAgICBmaWxsOiAnI2ZmZmZmZicsXG4gICAgICAgIGxhYmVsRmlsbDogJyM2OTY5NjknLFxuICAgICAgICBzeW1ib2xTdHJva2VXaWR0aDogJzInLFxuICAgICAgICBzeW1ib2xTdHJva2U6ICcjMDAwMDAwJyxcbiAgICAgICAgc3Ryb2tlV2lkdGg6ICcxJyxcbiAgICAgICAgaG92ZXJGaWxsOiAnIzdmN2Y3ZicsXG4gICAgICAgIHJhZGl1czogMSxcbiAgICAgICAgbWFyZ2luOiB7XG4gICAgICAgICAgcmlnaHQ6IDVcbiAgICAgICAgfVxuICAgICAgfSkuYXR0YWNoRXZlbnRIYW5kbGVycyh7XG4gICAgICAgIGNsaWNrOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgc2VsZi5zZXRBY3RpdmVQZXJpb2Qoc2VsZi5zdGFydERhdGFzZXQsIHNlbGYuZW5kRGF0YXNldCk7XG4gICAgICAgICAgdG9vbGJhci5kaXNwb3NlKCk7XG4gICAgICAgICAgc2VsZi5jbGlja2VkSWQgPSAnQUxMJztcbiAgICAgICAgICBzZWxmLnRvb2xiYXJzLnBvcCgpO1xuICAgICAgICAgIHNlbGYudG9vbGJhcnMucHVzaChzZWxmLmNyZWF0ZVRvb2xiYXIoKSk7XG4gICAgICAgICAgc2VsZi5fcmVmLnJlQWxsb2NhdGUoc2VsZi5wYXJlbnRHcm91cCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICB1bmlncm91cC5hZGRTeW1ib2woYWxsQnV0dG9uKTtcbiAgICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLnN0YW5kYXJkQ2FsY3VsYXRlZFBlcmlvZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZm9yIChqID0gdGhpcy5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW2ldLm11bHRpcGxpZXJzLmxlbmd0aCAtIDE7IGogPj0gMDsgai0tKSB7XG4gICAgICAgICAgZGVkdWN0b3JBci5wdXNoKHNlbGYuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kc1tpXS5tdWx0aXBsaWVyc1tqXSAqIHNlbGYuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kc1tpXS5taWxsaXNlY29uZHMpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGNhbGN1bGF0ZWRCdXR0b25zID0gW107XG4gICAgICBmb3IgKGxldCBpID0gc2VsZi5zdGFydFBvaW50VW5pdDsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgaWYgKGkgPT09IHNlbGYuc3RhcnRQb2ludFVuaXQpIHtcbiAgICAgICAgICBzdGFydE11bHRpcGxpZXIgPSBzZWxmLnN0YXJ0UG9pbnRNdWx0aXBsaWVyO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN0YXJ0TXVsdGlwbGllciA9IHNlbGYuc3RhbmRhcmRDYWxjdWxhdGVkUGVyaW9kc1tpXS5tdWx0aXBsaWVycy5sZW5ndGggLSAxO1xuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IGogPSBzdGFydE11bHRpcGxpZXI7IGogPj0gMDsgai0tKSB7XG4gICAgICAgICAgbWFyZ2luID0gKGkgPT09IHNlbGYubm9DYWxjQnV0dG9ucyAmJiBqID09PSAwKSA/IDUgOiAwO1xuICAgICAgICAgIGNhbGN1bGF0ZWRCdXR0b25zW2ldID0gbmV3IHRoaXMudG9vbGJveC5TeW1ib2woc2VsZi5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW2ldLm11bHRpcGxpZXJzW2pdICsgc2VsZi5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW2ldLmFiYnJldmlhdGlvbiwgdHJ1ZSwge1xuICAgICAgICAgICAgcGFwZXI6IHRoaXMuZ3JhcGhpY3MucGFwZXIsXG4gICAgICAgICAgICBjaGFydDogdGhpcy5jaGFydCxcbiAgICAgICAgICAgIHNtYXJ0TGFiZWw6IHRoaXMuc21hcnRMYWJlbCxcbiAgICAgICAgICAgIGNoYXJ0Q29udGFpbmVyOiB0aGlzLmdyYXBoaWNzLmNvbnRhaW5lclxuICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgIGZpbGw6ICcjZmZmZmZmJyxcbiAgICAgICAgICAgIGxhYmVsRmlsbDogJyM2OTY5NjknLFxuICAgICAgICAgICAgc3ltYm9sU3Ryb2tlV2lkdGg6ICcyJyxcbiAgICAgICAgICAgIHN5bWJvbFN0cm9rZTogJyMwMDAwMDAnLFxuICAgICAgICAgICAgc3Ryb2tlV2lkdGg6ICcxJyxcbiAgICAgICAgICAgIGhvdmVyRmlsbDogJyM3ZjdmN2YnLFxuICAgICAgICAgICAgcmFkaXVzOiAxLFxuICAgICAgICAgICAgbWFyZ2luOiB7XG4gICAgICAgICAgICAgIHJpZ2h0OiBtYXJnaW5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KS5hdHRhY2hFdmVudEhhbmRsZXJzKHtcbiAgICAgICAgICAgICdjbGljayc6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgZGVkdWN0b3IgPSAoc2VsZi5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW2ldLm11bHRpcGxpZXJzW2pdICogc2VsZi5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW2ldLm1pbGxpc2Vjb25kcyk7XG4gICAgICAgICAgICAgIHNlbGYuY2xpY2tlZElkID0gc2VsZi5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW2ldLm11bHRpcGxpZXJzW2pdICsgc2VsZi5zdGFuZGFyZENhbGN1bGF0ZWRQZXJpb2RzW2ldLmFiYnJldmlhdGlvbjtcbiAgICAgICAgICAgICAgc2VsZi5zZXRBY3RpdmVQZXJpb2QoZGVkdWN0b3IpO1xuICAgICAgICAgICAgICB0b29sYmFyLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgICAgc2VsZi50b29sYmFycy5wb3AoKTtcbiAgICAgICAgICAgICAgc2VsZi50b29sYmFycy5wdXNoKHNlbGYuY3JlYXRlVG9vbGJhcigpKTtcbiAgICAgICAgICAgICAgc2VsZi5fcmVmLnJlQWxsb2NhdGUoc2VsZi5wYXJlbnRHcm91cCk7XG4gICAgICAgICAgICAgIC8vIHRoaXMudG9vbGJhcnNbdGhpcy50b29sYmFycy5sZW5ndGggLSAxXSA9IHRoaXMuY3JlYXRlVG9vbGJhcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHVuaWdyb3VwLmFkZFN5bWJvbChjYWxjdWxhdGVkQnV0dG9uc1tpXSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29udGV4dHVhbEJ1dHRvbnMgPSBbXTtcblxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnN0YW5kYXJkQ29udGV4dWFsUGVyaW9kcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb250ZXh0dWFsQnV0dG9uc1tpXSA9IG5ldyB0aGlzLnRvb2xib3guU3ltYm9sKHRoaXMuc3RhbmRhcmRDb250ZXh1YWxQZXJpb2RzW2ldLmFiYnJldmlhdGlvbiwgdHJ1ZSwge1xuICAgICAgICAgIHBhcGVyOiB0aGlzLmdyYXBoaWNzLnBhcGVyLFxuICAgICAgICAgIGNoYXJ0OiB0aGlzLmNoYXJ0LFxuICAgICAgICAgIHNtYXJ0TGFiZWw6IHRoaXMuc21hcnRMYWJlbCxcbiAgICAgICAgICBjaGFydENvbnRhaW5lcjogdGhpcy5ncmFwaGljcy5jb250YWluZXJcbiAgICAgICAgfSwge1xuICAgICAgICAgIGZpbGw6ICcjZmZmZmZmJyxcbiAgICAgICAgICBsYWJlbEZpbGw6ICcjNjk2OTY5JyxcbiAgICAgICAgICBzeW1ib2xTdHJva2VXaWR0aDogJzInLFxuICAgICAgICAgIHN5bWJvbFN0cm9rZTogJyMwMDAwMDAnLFxuICAgICAgICAgIHN0cm9rZVdpZHRoOiAnMScsXG4gICAgICAgICAgaG92ZXJGaWxsOiAnIzdmN2Y3ZicsXG4gICAgICAgICAgcmFkaXVzOiAxLFxuICAgICAgICAgIG1hcmdpbjoge1xuICAgICAgICAgICAgcmlnaHQ6IDBcbiAgICAgICAgICB9XG4gICAgICAgIH0pLmF0dGFjaEV2ZW50SGFuZGxlcnMoe1xuICAgICAgICAgICdjbGljayc6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHNlbGYuc2V0QWN0aXZlUGVyaW9kKHNlbGYuc3RhbmRhcmRDb250ZXh1YWxQZXJpb2RzW2ldLmRhdGVTdGFydCwgc2VsZi5zdGFuZGFyZENvbnRleHVhbFBlcmlvZHNbaV0uZGF0ZUVuZCk7XG4gICAgICAgICAgICBzZWxmLmNsaWNrZWRJZCA9IHNlbGYuc3RhbmRhcmRDb250ZXh1YWxQZXJpb2RzW2ldLmFiYnJldmlhdGlvbjtcbiAgICAgICAgICAgIHRvb2xiYXIuZGlzcG9zZSgpO1xuICAgICAgICAgICAgc2VsZi50b29sYmFycy5wb3AoKTtcbiAgICAgICAgICAgIHNlbGYudG9vbGJhcnMucHVzaChzZWxmLmNyZWF0ZVRvb2xiYXIoKSk7XG4gICAgICAgICAgICBzZWxmLl9yZWYucmVBbGxvY2F0ZShzZWxmLnBhcmVudEdyb3VwKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB1bmlncm91cC5hZGRTeW1ib2woY29udGV4dHVhbEJ1dHRvbnNbaV0pO1xuICAgICAgfVxuXG4gICAgICAgIC8vIGJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ0JVVFRPTicpO1xuICAgICAgICAvLyBidG4uaWQgPSBzdGFuZGFyZFBlcmlvZHNbaV0uYWJicmV2aWF0aW9uO1xuICAgICAgICAvLyBidG4uaW5uZXJIVE1MID0gc3RhbmRhcmRQZXJpb2RzW2ldLmFiYnJldmlhdGlvbjtcbiAgICAgICAgLy8gYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZXZlbnRCdG4uYmluZCh0aGlzLCBzdGFuZGFyZFBlcmlvZHNbaV0pKTtcbiAgICAgICAgLy8gY29udGV4dHVhbEJ1dHRvbnMuYXBwZW5kQ2hpbGQoYnRuKTtcblxuICAgICAgdGhpcy5TeW1ib2xTdG9yZS5yZWdpc3RlcigndGV4dEJveEljb24nLCBmdW5jdGlvbiAoeCwgeSwgcmFkLCB3LCBoLCBwYWRYLCBwYWRZKSB7XG4gICAgICAgIHZhciB4MSA9IHggLSB3IC8gMiArIHBhZFggLyAyLFxuICAgICAgICAgIHgyID0geCArIHcgLyAyIC0gcGFkWCAvIDIsXG4gICAgICAgICAgeTEgPSB5IC0gaCAvIDIgKyBwYWRZIC8gMixcbiAgICAgICAgICB5MiA9IHkgKyBoIC8gMiAtIHBhZFkgLyAyO1xuXG4gICAgICAgIHJldHVybiBbJ00nLCB4MSwgeTEsICdMJywgeDIsIHkxLCAnTCcsIHgyLCB5MiwgJ0wnLCB4MSwgeTIsICdaJ107XG4gICAgICB9KTtcblxuICAgICAgdG9vbGJhci5hZGRDb21wb25lbnQoZ3JvdXApO1xuICAgICAgdG9vbGJhci5hZGRDb21wb25lbnQodW5pZ3JvdXApO1xuICAgICAgcmV0dXJuIHRvb2xiYXI7XG4gICAgfTtcblxuICAgIGdldExvZ2ljYWxTcGFjZSAoYXZhaWxhYmxlV2lkdGgsIGF2YWlsYWJsZUhlaWdodCkge1xuICAgICAgLy8gYXZhaWxhYmxlV2lkdGggLz0gMjtcbiAgICAgIHZhciBsb2dpY2FsU3BhY2UsXG4gICAgICAgIHdpZHRoID0gMCxcbiAgICAgICAgaGVpZ2h0ID0gMCxcbiAgICAgICAgaSxcbiAgICAgICAgbG47XG5cbiAgICAgIGZvciAoaSA9IDAsIGxuID0gdGhpcy50b29sYmFycy5sZW5ndGg7IGkgPCBsbjsgaSsrKSB7XG4gICAgICAgIGxvZ2ljYWxTcGFjZSA9IHRoaXMudG9vbGJhcnNbaV0uZ2V0TG9naWNhbFNwYWNlKGF2YWlsYWJsZVdpZHRoLCBhdmFpbGFibGVIZWlnaHQpO1xuICAgICAgICB3aWR0aCA9IE1hdGgubWF4KGxvZ2ljYWxTcGFjZS53aWR0aCwgd2lkdGgpO1xuICAgICAgICBoZWlnaHQgKz0gbG9naWNhbFNwYWNlLmhlaWdodDtcbiAgICAgICAgdGhpcy50b29sYmFyc1tpXS53aWR0aCA9IGxvZ2ljYWxTcGFjZS53aWR0aDtcbiAgICAgICAgdGhpcy50b29sYmFyc1tpXS5oZWlnaHQgPSBsb2dpY2FsU3BhY2UuaGVpZ2h0O1xuICAgICAgfVxuICAgICAgaGVpZ2h0ICs9IHRoaXMucGFkZGluZztcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHdpZHRoOiB3aWR0aCxcbiAgICAgICAgaGVpZ2h0OiBoZWlnaHRcbiAgICAgIH07XG4gICAgfTtcblxuICAgIGdldERlZmF1bHRHcm91cCAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5wYXJlbnRHcm91cDtcbiAgICB9XG5cbiAgICBwbGFjZUluQ2FudmFzICgpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHNlbGYucGFkZGluZyA9IDU7XG4gICAgICBzZWxmLnNwYWNlTWFuYWdlckluc3RhbmNlLmFkZChbe1xuICAgICAgICBuYW1lOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmV0dXJuICdzdGFuZGFyZC1wZXJpb2Qtc2VsZWN0b3ItZXh0JztcbiAgICAgICAgfSxcbiAgICAgICAgcmVmOiBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgICAgcmV0dXJuIG9ialsnMCddO1xuICAgICAgICB9LFxuICAgICAgICBzZWxmOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgICAgIH0sXG4gICAgICAgIHByaW9yaXR5OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmV0dXJuIDI7XG4gICAgICAgIH0sXG4gICAgICAgIGxheW91dDogZnVuY3Rpb24gKG9iaikge1xuICAgICAgICAgIHJldHVybiBvYmouaW5saW5lO1xuICAgICAgICB9LFxuICAgICAgICBvcmllbnRhdGlvbjogW3tcbiAgICAgICAgICB0eXBlOiBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgICAgICByZXR1cm4gb2JqLmhvcml6b250YWw7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBwb3NpdGlvbjogW3tcbiAgICAgICAgICAgIHR5cGU6IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgICAgICAgcmV0dXJuIG9iai50b3A7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYWxpZ25tZW50OiBbe1xuICAgICAgICAgICAgICB0eXBlOiBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG9iai5sZWZ0O1xuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBkaW1lbnNpb25zOiBbZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBwYXJlbnQgPSB0aGlzLmdldFBhcmVudENvbXBvbmVudEdyb3VwKCk7XG4gICAgICAgICAgICAgICAgc2VsZi5fcmVmID0gdGhpcztcbiAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi5nZXRMb2dpY2FsU3BhY2UoKHNlbGYuX3BXaWR0aCA9IHBhcmVudC5nZXRXaWR0aCgpKSwgKHNlbGYuX3BIZWlnaHQgPSBwYXJlbnQuZ2V0SGVpZ2h0KCkpKTtcbiAgICAgICAgICAgICAgfV1cbiAgICAgICAgICAgIH1dXG4gICAgICAgICAgfV1cbiAgICAgICAgfV1cbiAgICAgIH1dKTtcbiAgICB9O1xuXG4gICAgc2V0RHJhd2luZ0NvbmZpZ3VyYXRpb24gKHgsIHksIHdpZHRoLCBoZWlnaHQsIGdyb3VwKSB7XG4gICAgICB2YXIgbWVzID0gdGhpcy5tZWFzdXJlbWVudDtcbiAgICAgIG1lcy54ID0geDtcbiAgICAgIG1lcy55ID0geTtcbiAgICAgIG1lcy53aWR0aCA9IHdpZHRoO1xuICAgICAgbWVzLmhlaWdodCA9IGhlaWdodDtcblxuICAgICAgdGhpcy5wYXJlbnRHcm91cCA9IGdyb3VwO1xuXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgZHJhdyAoeCwgeSwgd2lkdGgsIGhlaWdodCwgZ3JvdXApIHtcbiAgICAgIHZhciBtZWFzdXJlbWVudCA9IHRoaXMubWVhc3VyZW1lbnQsXG4gICAgICAgIHRvb2xiYXJzID0gdGhpcy50b29sYmFycyxcbiAgICAgICAgbG4sXG4gICAgICAgIGksXG4gICAgICAgIHRvb2xiYXIsXG4gICAgICAgIGJvdW5kRWxlbWVudCxcbiAgICAgICAgYkJveCxcbiAgICAgICAgeDEsXG4gICAgICAgIHgyLFxuICAgICAgICB5MixcbiAgICAgICAgc2VsZWN0TGluZTtcblxuICAgICAgc2VsZWN0TGluZSA9IHRoaXMuc2F2ZVNlbGVjdExpbmUgfHwgdGhpcy5ncmFwaGljcy5wYXBlci5wYXRoKHtcbiAgICAgICAgJ3N0cm9rZSc6ICcjZmYwMDAwJ1xuICAgICAgfSkudG9Gcm9udCgpO1xuICAgICAgeCA9IHggPT09IHVuZGVmaW5lZCA/IG1lYXN1cmVtZW50LnggOiB4O1xuICAgICAgeSA9IHkgPT09IHVuZGVmaW5lZCA/IG1lYXN1cmVtZW50LnkgOiB5O1xuICAgICAgd2lkdGggPSB3aWR0aCA9PT0gdW5kZWZpbmVkID8gbWVhc3VyZW1lbnQud2lkdGggOiB3aWR0aDtcbiAgICAgIGhlaWdodCA9IGhlaWdodCA9PT0gdW5kZWZpbmVkID8gbWVhc3VyZW1lbnQuaGVpZ2h0IDogaGVpZ2h0O1xuICAgICAgZ3JvdXAgPSBncm91cCA9PT0gdW5kZWZpbmVkID8gdGhpcy5wYXJlbnRHcm91cCA6IGdyb3VwO1xuICAgICAgaWYgKHdpZHRoICYmIGhlaWdodCkge1xuICAgICAgICBmb3IgKGkgPSAwLCBsbiA9IHRvb2xiYXJzLmxlbmd0aDsgaSA8IGxuOyBpKyspIHtcbiAgICAgICAgICB0b29sYmFyID0gdG9vbGJhcnNbaV07XG4gICAgICAgICAgdG9vbGJhci5kcmF3KHgsIHksIGdyb3VwKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy5zYXZlU2VsZWN0TGluZSA9IHNlbGVjdExpbmU7XG5cbiAgICAgIGZvciAobGV0IGkgPSAwLCBpaSA9IHRvb2xiYXJzWzBdLmNvbXBvbmVudEdyb3Vwc1sxXS5zeW1ib2xMaXN0OyBpIDwgaWkubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGlpW2ldLnN5bWJvbCA9PT0gdGhpcy5jbGlja2VkSWQpIHtcbiAgICAgICAgICBib3VuZEVsZW1lbnQgPSBpaVtpXS5nZXRCb3VuZEVsZW1lbnQoKTtcbiAgICAgICAgICBiQm94ID0gYm91bmRFbGVtZW50LmdldEJCb3goKTtcbiAgICAgICAgICB4MSA9IGJCb3gueDtcbiAgICAgICAgICB4MiA9IGJCb3gueDI7XG4gICAgICAgICAgeTIgPSBiQm94LnkyO1xuXG4gICAgICAgICAgc2VsZWN0TGluZS5hdHRyKHtcbiAgICAgICAgICAgIHBhdGg6IFsnTScsIHgxLCB5MiAtIDIgLyAyLCAnTCcsIHgyLCB5MiAtIDIgLyAyXVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgfVxuICByZXR1cm4gU3RhbmRhcmRQZXJpb2RTZWxlY3Rvcjtcbn07XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvc3RhbmRhcmQtcGVyaW9kLXNlbGVjdG9yLmpzIl0sInNvdXJjZVJvb3QiOiIifQ==