(function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports}var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:false };modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.loaded=true;return module.exports;}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.p="";return __webpack_require__(0);})([function(module,exports,__webpack_require__){module.exports=__webpack_require__(1);},function(module,exports,__webpack_require__){'use strict';const StandardPeriodSelector=__webpack_require__(2);window.stPS=new StandardPeriodSelector();window.timePeriods=[{'name':'minute','milliseconds':60000,'startingPoint':0,'abbreviation':'min','description':'MINUTE','parent':'hour','multipliers':[1,15,30]},{'name':'hour','milliseconds':3600000,'startingPoint':0,'abbreviation':'hr','description':'HOUR','parent':'day','multipliers':[1,3,6,12]},{'name':'day','milliseconds':86400000,'startingPoint':0,'abbreviation':'D','description':'DAY','parent':'month','multipliers':[1,7,15]},{'name':'month','milliseconds':2592000000,'startingPoint':0,'abbreviation':'M','description':'MONTH','parent':'year','multipliers':[1,3,6]},{'name':'year','milliseconds':31104000000,'startingPoint':0,'abbreviation':'Y','description':'YEAR','multipliers':[1,3,5]}];},function(module,exports){'use strict';class StandardPeriodSelector{constructor(){this.all=1;this.calculatedPeriods=[];this.startDataset=0;this.endDataset=7999999999999;this.startActiveWindow=55000000;this.endActiveWindow=60000000;this.standardPeriods=[];this.config={}}calculateApplicableUnitPeriods(){var targetBlock=this.endActiveWindow-this.startDataset;var applicableStandardUnitPeriod=[];var i=0;var j=0;var activeWindow=this.endActiveWindow-this.startActiveWindow;console.log('activeWindow',activeWindow);for(i=0;i<window.timePeriods.length;i+=1){if(targetBlock/window.timePeriods[i].milliseconds>=1){console.log(window.timePeriods[i].description);if(Math.floor((activeWindow)/window.timePeriods[i].milliseconds)<1){window.timePeriods[i].applicableMultipliers=window.timePeriods[i].multipliers[0];this.standardPeriods.push({'multipliers':[window.timePeriods[i].multipliers[0]],'milliseconds':window.timePeriods[i].milliseconds,'abbreviation':window.timePeriods[i].abbreviation,'description':window.timePeriods[i].description});console.log(window.timePeriods[i].multipliers[0]+window.timePeriods[i].abbreviation)}else{for(j=0;j<window.timePeriods[i].multipliers.length;j+=1){if(activeWindow/5<window.timePeriods[i].multipliers[j]*window.timePeriods[i].milliseconds){if(window.timePeriods[i].applicableMultipliers===undefined){window.timePeriods[i].applicableMultipliers=[]}if(this.standardPeriods[this.standardPeriods.length-1]===undefined){this.standardPeriods.push({'multipliers':[],'milliseconds':window.timePeriods[i].milliseconds,'abbreviation':window.timePeriods[i].abbreviation,'description':window.timePeriods[i].description})}this.standardPeriods[this.standardPeriods.length-1].multipliers.push(window.timePeriods[i].multipliers[j]);console.log(window.timePeriods[i].multipliers[j]+window.timePeriods[i].abbreviation)}}}applicableStandardUnitPeriod.push(window.timePeriods[i]);console.log('================')}}return applicableStandardUnitPeriod}calculateApplicableStandardPeriods(){var applicableStandardUnitPeriod=this.calculateApplicableStandardPeriods();return applicableStandardUnitPeriod}setActivePeriod(start,end){console.log(start,end);this.startActiveWindow=start;this.endActiveWindow=end;document.getElementById('startActiveRange').innerHTML=this.startActiveWindow;document.getElementById('endActiveRange').innerHTML=this.endActiveWindow;this.calculateApplicableUnitPeriods()}setActivePeriodStart(start){this.startActiveWindow=this.endActiveWindow-start;this.calculateApplicableUnitPeriods()}setActivePeriodEnd(end){this.endActiveWindow=this.startActiveWindow+end;this.calculateApplicableUnitPeriods()}drawButtons(){var calculatedButtons=document.getElementById('calculated');var btn;var i=0;var j=0;var multiplierValue=0;var self=this;calculatedButtons.innerHTML='';console.clear();for(i=this.standardPeriods.length-1;i>=0;i-=1){for(j=this.standardPeriods[i].multipliers.length-1;j>=0;j-=1){console.log(this.standardPeriods[i].multipliers[j]+this.standardPeriods[i].abbreviation);btn=document.createElement('BUTTON');btn.id=this.standardPeriods[i].multipliers[j]+this.standardPeriods[i].abbreviation;btn.innerHTML=this.standardPeriods[i].multipliers[j]+this.standardPeriods[i].abbreviation;multiplierValue=self.standardPeriods[i].multipliers[j]*this.standardPeriods[i].milliseconds;btn.multiplierValue=multiplierValue;console.log(multiplierValue);btn.addEventListener('click',function(event){console.log(event.srcElement.multiplierValue);self.setActivePeriod(self.endActiveWindow-event.srcElement.multiplierValue,self.endActiveWindow);self.drawButtons()});calculatedButtons.appendChild(btn)}}this.standardPeriods=[]}setChartRangeObButtonClick(){}configure(config){this.config=config}init(require){require('X-Axis','Y-Axis','graphics','chart','extensionData','dateFormatter',function(x,y,graphics,chart,extData,dateFormatter){})}placeInCanvas(){}draw(){}dispose(){}}if(typeof module!=='undefined'&&typeof module.exports!=='undefined'){module.exports=StandardPeriodSelector}else{window.StandardPeriod=StandardPeriodSelector}}]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAgNmE2NmExYjQyZmUwOGQzYTY4YzgiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LmpzIiwid2VicGFjazovLy8uL3NyYy9zdGFuZGFyZC1wZXJpb2Qtc2VsZWN0b3IuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHVCQUFlO0FBQ2Y7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7O0FDdENBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUM7O0FBRUQ7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEVBQUMsR0FBRzs7Ozs7OztBQ3hESjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWUsK0JBQStCO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXFDO0FBQ3JDO0FBQ0E7QUFDQSw4REFBNkQ7QUFDN0Q7QUFDQTtBQUNBLFVBQVM7QUFDVCxzQkFBcUIsOENBQThDO0FBQ25FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBMkM7QUFDM0M7QUFDQTtBQUNBLG9FQUFtRTtBQUNuRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBNkMsUUFBUTtBQUNyRCwrREFBOEQsUUFBUTtBQUN0RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxRQUFPO0FBQ1A7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEVBQUM7QUFDRDtBQUNBIiwiZmlsZSI6InN0YW5kYXJkLXBlcmlvZC1zZWxlY3Rvci1lczYubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pXG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG5cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGV4cG9ydHM6IHt9LFxuIFx0XHRcdGlkOiBtb2R1bGVJZCxcbiBcdFx0XHRsb2FkZWQ6IGZhbHNlXG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjay9ib290c3RyYXAgNmE2NmExYjQyZmUwOGQzYTY4YzgiLCIndXNlIHN0cmljdCc7XG5jb25zdCBTdGFuZGFyZFBlcmlvZFNlbGVjdG9yID0gcmVxdWlyZSgnLi9zdGFuZGFyZC1wZXJpb2Qtc2VsZWN0b3InKTtcblxud2luZG93LnN0UFMgPSBuZXcgU3RhbmRhcmRQZXJpb2RTZWxlY3RvcigpO1xud2luZG93LnRpbWVQZXJpb2RzID0gW3tcbiAgJ25hbWUnOiAnbWludXRlJyxcbiAgJ21pbGxpc2Vjb25kcyc6IDYwMDAwLFxuICAnc3RhcnRpbmdQb2ludCc6IDAsXG4gICdhYmJyZXZpYXRpb24nOiAnbWluJyxcbiAgJ2Rlc2NyaXB0aW9uJzogJ01JTlVURScsXG4gICdwYXJlbnQnOiAnaG91cicsXG4gICdtdWx0aXBsaWVycyc6IFsxLCAxNSwgMzBdXG59LCB7XG4gICduYW1lJzogJ2hvdXInLFxuICAnbWlsbGlzZWNvbmRzJzogMzYwMDAwMCxcbiAgJ3N0YXJ0aW5nUG9pbnQnOiAwLFxuICAnYWJicmV2aWF0aW9uJzogJ2hyJyxcbiAgJ2Rlc2NyaXB0aW9uJzogJ0hPVVInLFxuICAncGFyZW50JzogJ2RheScsXG4gICdtdWx0aXBsaWVycyc6IFsxLCAzLCA2LCAxMl1cbn0sIHtcbiAgJ25hbWUnOiAnZGF5JyxcbiAgJ21pbGxpc2Vjb25kcyc6IDg2NDAwMDAwLFxuICAnc3RhcnRpbmdQb2ludCc6IDAsXG4gICdhYmJyZXZpYXRpb24nOiAnRCcsXG4gICdkZXNjcmlwdGlvbic6ICdEQVknLFxuICAncGFyZW50JzogJ21vbnRoJyxcbiAgJ211bHRpcGxpZXJzJzogWzEsIDcsIDE1XVxufSwge1xuICAnbmFtZSc6ICdtb250aCcsXG4gICdtaWxsaXNlY29uZHMnOiAyNTkyMDAwMDAwLFxuICAnc3RhcnRpbmdQb2ludCc6IDAsXG4gICdhYmJyZXZpYXRpb24nOiAnTScsXG4gICdkZXNjcmlwdGlvbic6ICdNT05USCcsXG4gICdwYXJlbnQnOiAneWVhcicsXG4gICdtdWx0aXBsaWVycyc6IFsxLCAzLCA2XVxufSwge1xuICAnbmFtZSc6ICd5ZWFyJyxcbiAgJ21pbGxpc2Vjb25kcyc6IDMxMTA0MDAwMDAwLFxuICAnc3RhcnRpbmdQb2ludCc6IDAsXG4gICdhYmJyZXZpYXRpb24nOiAnWScsXG4gICdkZXNjcmlwdGlvbic6ICdZRUFSJyxcbiAgJ211bHRpcGxpZXJzJzogWzEsIDMsIDVdXG59XTtcblxuLy8gdmFyIGZjID0gbmV3IEZ1c2lvbkNoYXJ0cygpO1xuXG4vKiBGdXNpb25DaGFydHMucmVnaXN0ZXIoJ2V4dGVuc2lvbicsIFsnc3RhbmRhcmQtcGVyaW9kLXNlbGVjdG9yJywgZnVuY3Rpb24gKGlkKSB7XG4gIHZhciBnbG9iYWwgPSB0aGlzO1xuICB2YXIgZXh0QVBJID0gZ2xvYmFsLmV4dEFQSTtcblxuICAvLyB2YXIgb3RoZXJBUEkgPSBGdXNpb25DaGFydHMuZ2V0RXh0Q29tcG9uZW50KGlkLCAnYXBpJywgJ2xlZ2FjeWV4dGFwaScpO1xuICAvLyB2YXIgdG9vbEJveEFwaSA9IEZ1c2lvbkNoYXJ0cy5nZXRDb21wb25lbnQoJ2FwaScsICd0b29sYm94Jyk7XG5cbiAgd2luZG93LnN0UFMgPSBuZXcgU3RhbmRhcmRQZXJpb2RTZWxlY3RvcigpO1xuICBleHRBUEkod2luZG93LnN0UFMpO1xufV0pOyAqL1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG5jbGFzcyBTdGFuZGFyZFBlcmlvZFNlbGVjdG9yIHtcbiAgY29uc3RydWN0b3IgKCkge1xuICAgIHRoaXMuYWxsID0gMTtcbiAgICB0aGlzLmNhbGN1bGF0ZWRQZXJpb2RzID0gW107XG4gICAgdGhpcy5zdGFydERhdGFzZXQgPSAwO1xuICAgIHRoaXMuZW5kRGF0YXNldCA9IDc5OTk5OTk5OTk5OTk7XG4gICAgdGhpcy5zdGFydEFjdGl2ZVdpbmRvdyA9IDU1MDAwMDAwO1xuICAgIHRoaXMuZW5kQWN0aXZlV2luZG93ID0gNjAwMDAwMDA7XG4gICAgdGhpcy5zdGFuZGFyZFBlcmlvZHMgPSBbXTtcbiAgICB0aGlzLmNvbmZpZyA9IHt9O1xuICB9XG5cbiAgY2FsY3VsYXRlQXBwbGljYWJsZVVuaXRQZXJpb2RzICgpIHtcbiAgICB2YXIgdGFyZ2V0QmxvY2sgPSB0aGlzLmVuZEFjdGl2ZVdpbmRvdyAtIHRoaXMuc3RhcnREYXRhc2V0O1xuICAgIHZhciBhcHBsaWNhYmxlU3RhbmRhcmRVbml0UGVyaW9kID0gW107XG4gICAgdmFyIGkgPSAwO1xuICAgIHZhciBqID0gMDtcbiAgICAvLyB2YXIgY291bnRlciA9IDA7XG4gICAgdmFyIGFjdGl2ZVdpbmRvdyA9IHRoaXMuZW5kQWN0aXZlV2luZG93IC0gdGhpcy5zdGFydEFjdGl2ZVdpbmRvdztcbiAgICAvLyBjb3VudGVyID0gLTE7XG4gICAgLy8gdGhpcy5zdGFuZGFyZFBlcmlvZHMgPSBbXTtcbiAgICBjb25zb2xlLmxvZygnYWN0aXZlV2luZG93JywgYWN0aXZlV2luZG93KTtcbiAgICBmb3IgKGkgPSAwOyBpIDwgd2luZG93LnRpbWVQZXJpb2RzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAvLyBjb25zb2xlLmxvZygnd2luZG93LnRpbWVQZXJpb2RzW2ldLm1pbGxpc2Vjb25kcycsIHdpbmRvdy50aW1lUGVyaW9kc1tpXS5taWxsaXNlY29uZHMpO1xuICAgICAgLy8gY29uc29sZS5sb2coTWF0aC5yb3VuZCgoYWN0aXZlV2luZG93KSAvIHdpbmRvdy50aW1lUGVyaW9kc1tpXS5taWxsaXNlY29uZHMpKTtcbiAgICAgIC8vIGNvbnNvbGUubG9nKCd3aW5kb3cudGltZVBlcmlvZHNbaV0ubWlsbGlzZWNvbmRzJywgd2luZG93LnRpbWVQZXJpb2RzW2ldLm11bHRpcGxpZXJzKTtcbiAgICAgIGlmICh0YXJnZXRCbG9jayAvIHdpbmRvdy50aW1lUGVyaW9kc1tpXS5taWxsaXNlY29uZHMgPj0gMSkge1xuICAgICAgICBjb25zb2xlLmxvZyh3aW5kb3cudGltZVBlcmlvZHNbaV0uZGVzY3JpcHRpb24pO1xuICAgICAgICBpZiAoTWF0aC5mbG9vcigoYWN0aXZlV2luZG93KSAvIHdpbmRvdy50aW1lUGVyaW9kc1tpXS5taWxsaXNlY29uZHMpIDwgMSkge1xuICAgICAgICAgIHdpbmRvdy50aW1lUGVyaW9kc1tpXS5hcHBsaWNhYmxlTXVsdGlwbGllcnMgPSB3aW5kb3cudGltZVBlcmlvZHNbaV0ubXVsdGlwbGllcnNbMF07XG4gICAgICAgICAgdGhpcy5zdGFuZGFyZFBlcmlvZHMucHVzaCh7ICdtdWx0aXBsaWVycyc6IFt3aW5kb3cudGltZVBlcmlvZHNbaV0ubXVsdGlwbGllcnNbMF1dLFxuICAgICAgICAgICAgJ21pbGxpc2Vjb25kcyc6IHdpbmRvdy50aW1lUGVyaW9kc1tpXS5taWxsaXNlY29uZHMsXG4gICAgICAgICAgICAnYWJicmV2aWF0aW9uJzogd2luZG93LnRpbWVQZXJpb2RzW2ldLmFiYnJldmlhdGlvbixcbiAgICAgICAgICAgICdkZXNjcmlwdGlvbic6IHdpbmRvdy50aW1lUGVyaW9kc1tpXS5kZXNjcmlwdGlvbn0pO1xuICAgICAgICAgIC8vIGNvdW50ZXIrKztcbiAgICAgICAgICBjb25zb2xlLmxvZyh3aW5kb3cudGltZVBlcmlvZHNbaV0ubXVsdGlwbGllcnNbMF0gKyB3aW5kb3cudGltZVBlcmlvZHNbaV0uYWJicmV2aWF0aW9uKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBmb3IgKGogPSAwOyBqIDwgd2luZG93LnRpbWVQZXJpb2RzW2ldLm11bHRpcGxpZXJzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICBpZiAoYWN0aXZlV2luZG93IC8gNSA8IHdpbmRvdy50aW1lUGVyaW9kc1tpXS5tdWx0aXBsaWVyc1tqXSAqIHdpbmRvdy50aW1lUGVyaW9kc1tpXS5taWxsaXNlY29uZHMpIHtcbiAgICAgICAgICAgICAgaWYgKHdpbmRvdy50aW1lUGVyaW9kc1tpXS5hcHBsaWNhYmxlTXVsdGlwbGllcnMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHdpbmRvdy50aW1lUGVyaW9kc1tpXS5hcHBsaWNhYmxlTXVsdGlwbGllcnMgPSBbXTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAodGhpcy5zdGFuZGFyZFBlcmlvZHNbdGhpcy5zdGFuZGFyZFBlcmlvZHMubGVuZ3RoIC0gMV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc3RhbmRhcmRQZXJpb2RzLnB1c2goeyAnbXVsdGlwbGllcnMnOiBbXSxcbiAgICAgICAgICAgICAgICAgICdtaWxsaXNlY29uZHMnOiB3aW5kb3cudGltZVBlcmlvZHNbaV0ubWlsbGlzZWNvbmRzLFxuICAgICAgICAgICAgICAgICAgJ2FiYnJldmlhdGlvbic6IHdpbmRvdy50aW1lUGVyaW9kc1tpXS5hYmJyZXZpYXRpb24sXG4gICAgICAgICAgICAgICAgICAnZGVzY3JpcHRpb24nOiB3aW5kb3cudGltZVBlcmlvZHNbaV0uZGVzY3JpcHRpb259KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB0aGlzLnN0YW5kYXJkUGVyaW9kc1t0aGlzLnN0YW5kYXJkUGVyaW9kcy5sZW5ndGggLSAxXVxuICAgICAgICAgICAgICAgIC5tdWx0aXBsaWVycy5wdXNoKHdpbmRvdy50aW1lUGVyaW9kc1tpXS5tdWx0aXBsaWVyc1tqXSk7XG4gICAgICAgICAgICAgIC8vIHRoaXMuc3RhbmRhcmRQZXJpb2RzW3RoaXMuc3RhbmRhcmRQZXJpb2RzLmxlbmd0aCAtIDFdXG4gICAgICAgICAgICAgIC8vICAgLmFiYnJldmlhdGlvbiA9IHdpbmRvdy50aW1lUGVyaW9kc1tpXS5hYmJyZXZpYXRpb247XG4gICAgICAgICAgICAgIC8vIHRoaXMuc3RhbmRhcmRQZXJpb2RzW3RoaXMuc3RhbmRhcmRQZXJpb2RzLmxlbmd0aCAtIDFdXG4gICAgICAgICAgICAgIC8vICAgLm1pbGxpc2Vjb25kcyA9IHdpbmRvdy50aW1lUGVyaW9kc1tpXS5taWxsaXNlY29uZHM7XG4gICAgICAgICAgICAgIC8vIHdpbmRvdy50aW1lUGVyaW9kc1tpXS5hcHBsaWNhYmxlTXVsdGlwbGllcnMucHVzaCh3aW5kb3cudGltZVBlcmlvZHNbaV0ubXVsdGlwbGllcnNbal0pO1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyh3aW5kb3cudGltZVBlcmlvZHNbaV0ubXVsdGlwbGllcnNbal0gKyB3aW5kb3cudGltZVBlcmlvZHNbaV0uYWJicmV2aWF0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYXBwbGljYWJsZVN0YW5kYXJkVW5pdFBlcmlvZC5wdXNoKHdpbmRvdy50aW1lUGVyaW9kc1tpXSk7XG4gICAgICAgIGNvbnNvbGUubG9nKCc9PT09PT09PT09PT09PT09Jyk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBhcHBsaWNhYmxlU3RhbmRhcmRVbml0UGVyaW9kO1xuICB9XG5cbiAgY2FsY3VsYXRlQXBwbGljYWJsZVN0YW5kYXJkUGVyaW9kcyAoKSB7XG4gICAgdmFyIGFwcGxpY2FibGVTdGFuZGFyZFVuaXRQZXJpb2QgPSB0aGlzLmNhbGN1bGF0ZUFwcGxpY2FibGVTdGFuZGFyZFBlcmlvZHMoKTtcbiAgICByZXR1cm4gYXBwbGljYWJsZVN0YW5kYXJkVW5pdFBlcmlvZDtcbiAgfVxuXG4gIHNldEFjdGl2ZVBlcmlvZCAoc3RhcnQsIGVuZCkge1xuICAgIGNvbnNvbGUubG9nKHN0YXJ0LCBlbmQpO1xuICAgIHRoaXMuc3RhcnRBY3RpdmVXaW5kb3cgPSBzdGFydDtcbiAgICB0aGlzLmVuZEFjdGl2ZVdpbmRvdyA9IGVuZDtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3RhcnRBY3RpdmVSYW5nZScpLmlubmVySFRNTCA9IHRoaXMuc3RhcnRBY3RpdmVXaW5kb3c7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VuZEFjdGl2ZVJhbmdlJykuaW5uZXJIVE1MID0gdGhpcy5lbmRBY3RpdmVXaW5kb3c7XG4gICAgdGhpcy5jYWxjdWxhdGVBcHBsaWNhYmxlVW5pdFBlcmlvZHMoKTtcbiAgfVxuXG4gIHNldEFjdGl2ZVBlcmlvZFN0YXJ0IChzdGFydCkge1xuICAgIHRoaXMuc3RhcnRBY3RpdmVXaW5kb3cgPSB0aGlzLmVuZEFjdGl2ZVdpbmRvdyAtIHN0YXJ0O1xuICAgIHRoaXMuY2FsY3VsYXRlQXBwbGljYWJsZVVuaXRQZXJpb2RzKCk7XG4gIH1cblxuICBzZXRBY3RpdmVQZXJpb2RFbmQgKGVuZCkge1xuICAgIHRoaXMuZW5kQWN0aXZlV2luZG93ID0gdGhpcy5zdGFydEFjdGl2ZVdpbmRvdyArIGVuZDtcbiAgICB0aGlzLmNhbGN1bGF0ZUFwcGxpY2FibGVVbml0UGVyaW9kcygpO1xuICB9XG5cbiAgZHJhd0J1dHRvbnMgKCkge1xuICAgIHZhciBjYWxjdWxhdGVkQnV0dG9ucyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYWxjdWxhdGVkJyk7XG4gICAgdmFyIGJ0bjtcbiAgICB2YXIgaSA9IDA7XG4gICAgdmFyIGogPSAwO1xuICAgIHZhciBtdWx0aXBsaWVyVmFsdWUgPSAwO1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBjYWxjdWxhdGVkQnV0dG9ucy5pbm5lckhUTUwgPSAnJztcbiAgICBjb25zb2xlLmNsZWFyKCk7XG4gICAgZm9yIChpID0gdGhpcy5zdGFuZGFyZFBlcmlvZHMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgIGZvciAoaiA9IHRoaXMuc3RhbmRhcmRQZXJpb2RzW2ldLm11bHRpcGxpZXJzLmxlbmd0aCAtIDE7IGogPj0gMDsgai0tKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKHRoaXMuc3RhbmRhcmRQZXJpb2RzW2ldLm11bHRpcGxpZXJzW2pdICsgdGhpcy5zdGFuZGFyZFBlcmlvZHNbaV0uYWJicmV2aWF0aW9uKTtcbiAgICAgICAgYnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnQlVUVE9OJyk7XG4gICAgICAgIGJ0bi5pZCA9IHRoaXMuc3RhbmRhcmRQZXJpb2RzW2ldLm11bHRpcGxpZXJzW2pdICsgdGhpcy5zdGFuZGFyZFBlcmlvZHNbaV0uYWJicmV2aWF0aW9uO1xuICAgICAgICBidG4uaW5uZXJIVE1MID0gdGhpcy5zdGFuZGFyZFBlcmlvZHNbaV0ubXVsdGlwbGllcnNbal0gKyB0aGlzLnN0YW5kYXJkUGVyaW9kc1tpXS5hYmJyZXZpYXRpb247XG4gICAgICAgIG11bHRpcGxpZXJWYWx1ZSA9IHNlbGYuc3RhbmRhcmRQZXJpb2RzW2ldLm11bHRpcGxpZXJzW2pdICogdGhpcy5zdGFuZGFyZFBlcmlvZHNbaV0ubWlsbGlzZWNvbmRzO1xuICAgICAgICBidG4ubXVsdGlwbGllclZhbHVlID0gbXVsdGlwbGllclZhbHVlO1xuICAgICAgICBjb25zb2xlLmxvZyhtdWx0aXBsaWVyVmFsdWUpO1xuICAgICAgICBidG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhldmVudC5zcmNFbGVtZW50Lm11bHRpcGxpZXJWYWx1ZSk7XG4gICAgICAgICAgc2VsZi5zZXRBY3RpdmVQZXJpb2Qoc2VsZi5lbmRBY3RpdmVXaW5kb3cgLSBldmVudC5zcmNFbGVtZW50Lm11bHRpcGxpZXJWYWx1ZSwgc2VsZi5lbmRBY3RpdmVXaW5kb3cpO1xuICAgICAgICAgIHNlbGYuZHJhd0J1dHRvbnMoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNhbGN1bGF0ZWRCdXR0b25zLmFwcGVuZENoaWxkKGJ0bik7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuc3RhbmRhcmRQZXJpb2RzID0gW107XG4gIH1cblxuICBzZXRDaGFydFJhbmdlT2JCdXR0b25DbGljayAoKSB7fVxuXG4gIGNvbmZpZ3VyZSAoY29uZmlnKSB7XG4gICAgdGhpcy5jb25maWcgPSBjb25maWc7XG4gIH1cblxuICBpbml0IChyZXF1aXJlKSB7XG4gICAgcmVxdWlyZSgnWC1BeGlzJywgJ1ktQXhpcycsICdncmFwaGljcycsICdjaGFydCcsICdleHRlbnNpb25EYXRhJywgJ2RhdGVGb3JtYXR0ZXInLFxuICAgICAgZnVuY3Rpb24gKHgsIHksIGdyYXBoaWNzLCBjaGFydCwgZXh0RGF0YSwgZGF0ZUZvcm1hdHRlcikge1xuXG4gICAgICB9KTtcbiAgfVxuXG4gIHBsYWNlSW5DYW52YXMgKCkge31cblxuICBkcmF3ICgpIHtcbiAgICAvLyBkcmF3aW5nIG9mIHRoZSBzdGFuZGFyZCB0aW1lIHBlcmlvZHMgaGFwcGVucyBoZXJlXG4gIH1cblxuICBkaXNwb3NlICgpIHt9XG59XG5cbmlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgbW9kdWxlLmV4cG9ydHMgIT09ICd1bmRlZmluZWQnKSB7XG4gIG1vZHVsZS5leHBvcnRzID0gU3RhbmRhcmRQZXJpb2RTZWxlY3Rvcjtcbn0gZWxzZSB7XG4gIHdpbmRvdy5TdGFuZGFyZFBlcmlvZCA9IFN0YW5kYXJkUGVyaW9kU2VsZWN0b3I7XG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9zdGFuZGFyZC1wZXJpb2Qtc2VsZWN0b3IuanNcbi8vIG1vZHVsZSBpZCA9IDJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl19