<!DOCTYPE html>
<html lang='en'>
<head>
  <meta charset='UTF-8'>
  <meta name='viewport' content='width=device-width, initial-scale=1.0'>
  <meta http-equiv='X-UA-Compatible' content='ie=edge'>
  <title>FCTS Standard Period Selector Extension</title>
</head>
<body>
	
  <!-- <script src='bower_components/fusioncharts/fusioncharts.js' charset='utf-8'></script> -->
  <script src='node_modules/fusioncharts/fusioncharts.js' charset='utf-8'></script>
  <!-- <script src='bower_components/fusioncharts/fusioncharts.timeseries.js' charset='utf-8'></script> -->
  <script src='node_modules/fusioncharts/fusioncharts.timeseries.js' charset='utf-8'></script>
  <!-- <script src='bower_components/fusioncharts/toolboxext.js' charset='utf-8'></script> -->
  <script src='dist/standard-period-selector.js' charset='utf-8'></script>
  <script src='http://192.168.0.207/date-range-chooser-ext/dist/date-range-chooser.min.js' charset='utf-8'></script>
  <script src='../xt-edge/develop/vendors/extensions/data-aggregator/dist/data-aggregator.js' ></script>
  <div id='chart-container'></div>
  <script type='text/javascript'>
    var tsChart;
        function getRandomDates (len) {
        var day = 10, months = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct', 'Nov','Dec'],
               year = 2015,month = 0,arr = [];

           for (i = 0; i < len; i++) {
               if (month === 11 && day === 31) {
                   year++;
                   month = 0;
               }
               if (day > 30 || (month === 1 && day === 28)) {
                   day = 1;
                   month++;
               }
               if (month > 11) {
                   month = 0;
               }



               dateStr = day + '-' + months[month] + '-' + year;
               arr.push(dateStr);
               day++;
           }
           return arr;
       }

       function getRandomSeries (len) {
           var arr = [];

           for (i = 0; i < len; i++) {
               arr.push(Math.floor(Math.random() * 10));
           }
           return arr;
       }

       function getRandomCandleSeries (len) {
           var arr = [],
               open,
               high,
               low,
               close;

           for (i = 0; i < len; i++) {
               open = Math.floor(Math.random() * 10);
               close = Math.floor(Math.random() * 10);
               high = Math.floor(Math.random() * 10);
               low = Math.floor(Math.random() * 10);

               arr.push([open, high, low, close]);
           }

           return arr;
       }
       var data1;
        FusionCharts.ready(function () {
            tsChart = new FusionCharts({
                type: 'timeseries',
                plottype: 'line',
                renderAt: 'chart-container',
                width: '900',
                height: '500',
                dataFormat: 'json',
                dataSource: {
                    chart: {
                        axes: [
                            {
                                x: { },
                                y: { }
                            }
                        ],
                        datasets: [{
                            category: {
                                dateformat: "%e-%b-%Y",
                                data: getRandomDates(1138)
                            },
                            dataset: [
                                {
                                    uid: 'ds-1',
                                    series: [
                                        {
                                            plot: {
                                                type: "line"
                                            },
                                            name: "Series 1",
                                            data: getRandomSeries(1138)
                                        },
                                        {
                                            plot: {
                                                type: "line"
                                            },
                                            name: "Series 2",
                                            data: getRandomSeries(1138)
                                        },
                                        {
                                            plot: {
                                                type: "line",
                                                style: {
                                                  stroke: '#ff0000',
                                                  'stroke-width': 2
                                                }
                                            },
                                            name: "Series 1",
                                            data: getRandomSeries(1138)
                                        }

                                    ]
                                }
                            ]
                        }],
                        canvas: [{
                            axes: function (store) {
                                return store.getAxesByIndex(0);
                            },
                            dataset: function (store) {
                                return store.getDatasetsByIndex(0);
                            }
                        }],
                        caption:[{
                          title: {
                            text: 'Basic Elements'
                          },
                          subtitle: {
                            text: 'Sub-caption'
                          }
                        }]

                    },
                    extensions: {
                      'standard-period-selector': {
                        'disabled': false,
                        'default-select': '1M',
                        'all-button': true,
                        'contextual-button': true,
                        'calculated-button': true,
                        'posWrtCanvas': 'top',
                        'anchor-align': 'right',
                        'layout': 'inline',
                        'alignment': 'left',
                        'orientation': 'horizontal',
                        'customMultipliers': {
                          'millisecond': [1, 500],
                          'second': [1, 5, 15, 30],
                          'minute': [1, 5, 15, 30],
                          'hour': [1, 3, 6, 12],
                          'day': [1, 7, 15],
                          'month': [1, 3, 6],
                          'year': [1, 3, 5]
                        },
                        'style': {
                          'label-config': {
                            // --config--
                            text: {
                              style: {
                                'font-family': '"Lucida Grande", sans-serif',
                                'font-size': '13',
                                'fill': '#4b4b4b'
                              }
                            },
                            container: {
                              height: 22
                            }
                          },
                          'all-config': {
                            // --config--
                            fill: '#ffffff',
                            labelFill: '#4b4b4b',
                            symbolStrokeWidth: '2',
                            stroke: '#ced5d4',
                            strokeWidth: '1',
                            hoverFill: '#f7f7f7',
                            height: 22,
                            radius: 1,
                            margin: {
                              right: 5
                            },
                            btnTextStyle: {
                              'fontFamily': '"Lucida Grande", sans-serif',
                              'fontSize': '13',
                              'fill': '#4b4b4b',
                              'line-height': '1',
                              'letter-spacing': '-0.04em'
                            },
                            shadow: {
                              'fill': '#000',
                              'opacity': '0.35'
                            }
                          },
                          'calculated-config': {
                            // --config--
                            fill: '#ffffff',
                            labelFill: '#4b4b4b',
                            symbolStrokeWidth: '2',
                            stroke: '#ced5d4',
                            strokeWidth: '1',
                            hoverFill: '#f7f7f7',
                            height: 22,
                            radius: 1,
                            margin: {
                              right: 0
                            },
                            btnTextStyle: {
                              'fontFamily': '"Lucida Grande", sans-serif',
                              'fontSize': '13',
                              'fill': '#4b4b4b',
                              'line-height': '1',
                              'letter-spacing': '-0.04em'
                            },
                            shadow: {
                              'fill': '#000',
                              'opacity': '0.35'
                            }
                          },
                          'contextual-config-first': {
                            fill: '#ffffff',
                            labelFill: '#4b4b4b',
                            symbolStrokeWidth: '2',
                            stroke: '#ced5d4',
                            strokeWidth: '1',
                            height: 22,
                            hoverFill: '#f7f7f7',
                            radius: 1,
                            margin: {
                              right: 0,
                              left: 5
                            },
                            btnTextStyle: {
                              'fontFamily': '"Lucida Grande", sans-serif',
                              'fontSize': '13',
                              'fill': '#696969',
                              'line-height': '1',
                              'letter-spacing': '-0.04em'
                            },
                            shadow: {
                              'fill': '#000',
                              'opacity': '0.35'
                            }
                          },
                          'contextual-config': {
                            fill: '#ffffff',
                            labelFill: '#4b4b4b',
                            symbolStrokeWidth: '2',
                            stroke: '#ced5d4',
                            strokeWidth: '1',
                            height: 22,
                            hoverFill: '#f7f7f7',
                            radius: 1,
                            margin: {
                              right: 0,
                              left: 0
                            },
                            btnTextStyle: {
                              'fontFamily': '"Lucida Grande", sans-serif',
                              'fontSize': '13',
                              'fill': '#4b4b4b',
                              'line-height': '1',
                              'letter-spacing': '-0.04em'
                            },
                            shadow: {
                              'fill': '#000',
                              'opacity': '0.35'
                            }
                          }
                        }
                      }
                    }
                }

            })
            .render();

        console.log(data1);
        });
  </script>
</body>
</html>
